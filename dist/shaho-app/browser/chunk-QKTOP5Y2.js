import{d as M}from"./chunk-L5SFN5DF.js";import{Ab as a,Cb as r,Cc as w,Fc as l,Jc as c,Lb as C,Mb as S,Nb as A,Pa as i,Ta as h,Za as x,_ as v,a as m,bb as f,d as y,gc as F,hc as _,ib as E,ic as b,kc as B,lb as n,mb as t,sb as D,tc as O,xc as T,zb as g}from"./chunk-V2H4RGWA.js";function $(o,u){if(o&1&&(n(0,"div")(1,"div"),a(2),C(3,"date"),t(),n(4,"div"),a(5),t(),n(6,"div"),a(7),t()()),o&2){let e=D().$implicit;i(2),r("\u6539\u5B9A\u6708: ",e.standard.lastRevisionMonth?S(3,3,e.standard.lastRevisionMonth,"yyyy-MM"):"---",""),i(3),r("\u6539\u5B9A\u7A2E\u5225: ",e.standard.revisionType||"---",""),i(2),r("\u30E1\u30E2: ",e.standard.memo||"","")}}function z(o,u){o&1&&(n(0,"div",6),a(1,"\u5BFE\u5FDC\u3059\u308B\u6A19\u6E96\u5831\u916C\u60C5\u5831\u304C\u3042\u308A\u307E\u305B\u3093"),t())}function q(o,u){if(o&1&&(n(0,"div",4)(1,"div"),a(2),t(),n(3,"div"),a(4),t(),n(5,"div"),a(6),t(),n(7,"div"),a(8),t(),n(9,"div"),a(10),t(),n(11,"div"),a(12),t(),n(13,"div"),a(14),t(),n(15,"div"),a(16),t(),n(17,"div"),a(18),t(),n(19,"div"),a(20),t(),n(21,"div"),a(22),t(),n(23,"div"),a(24),t(),f(25,$,8,6,"div",5)(26,z,2,0,"ng-template",null,0,A),t()),o&2){let e=u.$implicit,s=g(27);i(2),r("\u5065\u5EB7\u4FDD\u967A\u5168\u984D: ",e.insurance.healthInsuranceTotal||"---",""),i(2),r("\u5065\u5EB7\u4FDD\u967A\u4F1A\u793E: ",e.insurance.healthInsuranceCompany||"---",""),i(2),r("\u5065\u5EB7\u4FDD\u967A\u5F93\u696D\u54E1: ",e.insurance.healthInsuranceEmployee||"---",""),i(2),r("\u4ECB\u8B77\u4FDD\u967A\u5168\u984D: ",e.insurance.careInsuranceTotal||"---",""),i(2),r("\u4ECB\u8B77\u4FDD\u967A\u4F1A\u793E: ",e.insurance.careInsuranceCompany||"---",""),i(2),r("\u4ECB\u8B77\u4FDD\u967A\u5F93\u696D\u54E1: ",e.insurance.careInsuranceEmployee||"---",""),i(2),r("\u539A\u751F\u5E74\u91D1\u5168\u984D: ",e.insurance.pensionInsuranceTotal||"---",""),i(2),r("\u539A\u751F\u5E74\u91D1\u4F1A\u793E: ",e.insurance.pensionInsuranceCompany||"---",""),i(2),r("\u539A\u751F\u5E74\u91D1\u5F93\u696D\u54E1: ",e.insurance.pensionInsuranceEmployee||"---",""),i(2),r("\u5408\u8A08: ",e.insurance.total||"---",""),i(2),r("\u5408\u8A08\u4F1A\u793E: ",e.insurance.totalCompany||"---",""),i(2),r("\u5408\u8A08\u5F93\u696D\u54E1: ",e.insurance.totalEmployee||"---",""),i(),E("ngIf",e.standard)("ngIfElse",s)}}var P=class o{constructor(u){this.route=u;this.employeeId=this.route.snapshot.paramMap.get("id")}employeeId=null;currentUser=null;employee=null;insurances=[];standards=[];insuranceStandardPairs=[];auth=v(O);firestore=v(w);ngOnInit(){return y(this,null,function*(){if(T(this.auth,s=>y(this,null,function*(){this.currentUser=s})),!this.employeeId)return;let u=l(this.firestore,"companies"),e=yield c(u);for(let s of e.docs){let H=l(this.firestore,"companies",s.id,"employees"),I=(yield c(H)).docs.find(p=>p.id===this.employeeId);if(I){this.employee=I.data(),this.employee.companyId=s.id;let p=l(this.firestore,"companies",s.id,"employees",this.employeeId,"insurances"),R=yield c(p);this.insurances=R.docs.map(d=>m({id:d.id},d.data()));let N=l(this.firestore,"companies",s.id,"employees",this.employeeId,"standards"),U=yield c(N);this.standards=U.docs.map(d=>m({id:d.id},d.data())),this.insuranceStandardPairs=this.insurances.map(d=>{let j=this.standards.find(k=>k.id===d.standardId)||null;return{insurance:d,standard:j}});break}}})}static \u0275fac=function(e){return new(e||o)(h(M))};static \u0275cmp=x({type:o,selectors:[["app-insurance-history"]],decls:5,vars:1,consts:[["noStandard",""],[1,"history-header"],[1,"history-header-title"],["class","pair-block","style","border:1px solid #aaa; margin-bottom: 24px; padding: 12px;",4,"ngFor","ngForOf"],[1,"pair-block",2,"border","1px solid #aaa","margin-bottom","24px","padding","12px"],[4,"ngIf","ngIfElse"],[2,"color","#d32f2f"]],template:function(e,s){e&1&&(n(0,"div",1)(1,"span",2),a(2,"\u793E\u4F1A\u4FDD\u967A\u6599\u5C65\u6B74"),t()(),n(3,"div"),f(4,q,28,14,"div",3),t()),e&2&&(i(4),E("ngForOf",s.insuranceStandardPairs))},dependencies:[B,F,_,b],styles:[".history-header[_ngcontent-%COMP%]{width:100%;padding-top:3.5rem;margin-bottom:1.2rem;display:flex;align-items:flex-end;justify-content:flex-start}.history-header-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1976d2;letter-spacing:.04em;margin-left:.2em}"]})};export{P as InsuranceHistoryComponent};
