var uS=Object.defineProperty,lS=Object.defineProperties;var dS=Object.getOwnPropertyDescriptors;var N_=Object.getOwnPropertySymbols,hS=Object.getPrototypeOf,fS=Object.prototype.hasOwnProperty,pS=Object.prototype.propertyIsEnumerable,gS=Reflect.get;var R_=(t,e,n)=>e in t?uS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,me=(t,e)=>{for(var n in e||={})fS.call(e,n)&&R_(t,n,e[n]);if(N_)for(var n of N_(e))pS.call(e,n)&&R_(t,n,e[n]);return t},ve=(t,e)=>lS(t,dS(e));var Vn=(t,e,n)=>gS(hS(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(l){i(l)}},s=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((n=n.apply(t,e)).next())});function jd(t,e){return Object.is(t,e)}var xe=null,Ua=!1,Bd=1,vt=Symbol("SIGNAL");function te(t){let e=xe;return xe=t,e}function Ud(){return xe}var Ko={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Qo(t){if(Ua)throw new Error("");if(xe===null)return;xe.consumerOnSignalRead(t);let e=xe.nextProducerIndex++;if(za(xe),e<xe.producerNode.length&&xe.producerNode[e]!==t&&Wo(xe)){let n=xe.producerNode[e];qa(n,xe.producerIndexOfThis[e])}xe.producerNode[e]!==t&&(xe.producerNode[e]=t,xe.producerIndexOfThis[e]=Wo(xe)?P_(t,xe,e):0),xe.producerLastReadVersion[e]=t.version}function M_(){Bd++}function $d(t){if(!(Wo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Bd)){if(!t.producerMustRecompute(t)&&!Gd(t)){Ld(t);return}t.producerRecomputeValue(t),Ld(t)}}function Hd(t){if(t.liveConsumerNode===void 0)return;let e=Ua;Ua=!0;try{for(let n of t.liveConsumerNode)n.dirty||mS(n)}finally{Ua=e}}function qd(){return xe?.consumerAllowSignalWrites!==!1}function mS(t){t.dirty=!0,Hd(t),t.consumerMarkedDirty?.(t)}function Ld(t){t.dirty=!1,t.lastCleanEpoch=Bd}function Ha(t){return t&&(t.nextProducerIndex=0),te(t)}function zd(t,e){if(te(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Wo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)qa(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Gd(t){za(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||($d(n),r!==n.version))return!0}return!1}function Wd(t){if(za(t),Wo(t))for(let e=0;e<t.producerNode.length;e++)qa(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function P_(t,e,n){if(x_(t),t.liveConsumerNode.length===0&&k_(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=P_(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function qa(t,e){if(x_(t),t.liveConsumerNode.length===1&&k_(t))for(let r=0;r<t.producerNode.length;r++)qa(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];za(i),i.producerIndexOfThis[r]=e}}function Wo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function za(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function x_(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function k_(t){return t.producerNode!==void 0}function Kd(t,e){let n=Object.create(yS);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if($d(n),Qo(n),n.value===$a)throw n.error;return n.value};return r[vt]=n,r}var Fd=Symbol("UNSET"),Vd=Symbol("COMPUTING"),$a=Symbol("ERRORED"),yS=ve(me({},Ko),{value:Fd,dirty:!0,error:null,equal:jd,kind:"computed",producerMustRecompute(t){return t.value===Fd||t.value===Vd},producerRecomputeValue(t){if(t.value===Vd)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Vd;let n=Ha(t),r,i=!1;try{r=t.computation(),te(null),i=e!==Fd&&e!==$a&&r!==$a&&t.equal(e,r)}catch(o){r=$a,t.error=o}finally{zd(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function vS(){throw new Error}var O_=vS;function F_(t){O_(t)}function Qd(t){O_=t}var _S=null;function Yd(t,e){let n=Object.create(Ga);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(Qo(n),n.value);return r[vt]=n,r}function Yo(t,e){qd()||F_(t),t.equal(t.value,e)||(t.value=e,IS(t))}function Zd(t,e){qd()||F_(t),Yo(t,e(t.value))}var Ga=ve(me({},Ko),{equal:jd,value:void 0,kind:"signal"});function IS(t){t.version++,M_(),Hd(t),_S?.()}function Jd(t){let e=te(null);try{return t()}finally{te(e)}}var Xd;function Zo(){return Xd}function cn(t){let e=Xd;return Xd=t,e}var Wa=Symbol("NotFound");function z(t){return typeof t=="function"}function di(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ka=di(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function dr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(z(r))try{r()}catch(o){e=o instanceof Ka?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{V_(o)}catch(s){e=e??[],s instanceof Ka?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ka(e)}}add(e){var n;if(e&&e!==this)if(this.closed)V_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&dr(n,e)}remove(e){let{_finalizers:n}=this;n&&dr(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var eh=Ae.EMPTY;function Qa(t){return t instanceof Ae||t&&"closed"in t&&z(t.remove)&&z(t.add)&&z(t.unsubscribe)}function V_(t){z(t)?t():t.unsubscribe()}var bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var hi={setTimeout(t,e,...n){let{delegate:r}=hi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=hi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ya(t){hi.setTimeout(()=>{let{onUnhandledError:e}=bt;if(e)e(t);else throw t})}function Jo(){}var L_=th("C",void 0,void 0);function j_(t){return th("E",void 0,t)}function B_(t){return th("N",t,void 0)}function th(t,e,n){return{kind:t,value:e,error:n}}var hr=null;function fi(t){if(bt.useDeprecatedSynchronousErrorHandling){let e=!hr;if(e&&(hr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=hr;if(hr=null,n)throw r}}else t()}function U_(t){bt.useDeprecatedSynchronousErrorHandling&&hr&&(hr.errorThrown=!0,hr.error=t)}var fr=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qa(e)&&e.add(this)):this.destination=CS}static create(e,n,r){return new un(e,n,r)}next(e){this.isStopped?rh(B_(e),this):this._next(e)}error(e){this.isStopped?rh(j_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?rh(L_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},TS=Function.prototype.bind;function nh(t,e){return TS.call(t,e)}var ih=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Za(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Za(r)}else Za(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Za(n)}}},un=class extends fr{constructor(e,n,r){super();let i;if(z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&bt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&nh(e.next,o),error:e.error&&nh(e.error,o),complete:e.complete&&nh(e.complete,o)}):i=e}this.destination=new ih(i)}};function Za(t){bt.useDeprecatedSynchronousErrorHandling?U_(t):Ya(t)}function bS(t){throw t}function rh(t,e){let{onStoppedNotification:n}=bt;n&&hi.setTimeout(()=>n(t,e))}var CS={closed:!0,next:Jo,error:bS,complete:Jo};var pi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(t){return t}function AS(...t){return oh(t)}function oh(t){return t.length===0?dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=NS(n)?n:new un(n,r,i);return fi(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=$_(r),new r((i,o)=>{let s=new un({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[pi](){return this}pipe(...n){return oh(n)(this)}toPromise(n){return n=$_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function $_(t){var e;return(e=t??bt.Promise)!==null&&e!==void 0?e:Promise}function SS(t){return t&&z(t.next)&&z(t.error)&&z(t.complete)}function NS(t){return t&&t instanceof fr||SS(t)&&Qa(t)}function sh(t){return z(t?.lift)}function Y(t){return e=>{if(sh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Z(t,e,n,r,i){return new ah(t,e,n,r,i)}var ah=class extends fr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ch(){return Y((t,e)=>{let n=null;t._refCount++;let r=Z(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var uh=class extends ne{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,sh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(Z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return ch()(this)}};var H_=di(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=(()=>{class t extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ja(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new H_}next(n){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?eh:(this.currentObservers=null,o.push(n),new Ae(()=>{this.currentObservers=null,dr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ne;return n.source=this,n}}return t.create=(e,n)=>new Ja(e,n),t})(),Ja=class extends ht{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:eh}};var Xo=class extends ht{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var lh={now(){return(lh.delegate||Date).now()},delegate:void 0};var Xa=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var es={setInterval(t,e,...n){let{delegate:r}=es;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=es;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var gi=class extends Xa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return es.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&es.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,dr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var mi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};mi.now=lh.now;var yi=class extends mi{constructor(e,n=mi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ts=new yi(gi);var ec=class extends gi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var tc=class extends yi{};var dh=new tc(ec);var ns=new ne(t=>t.complete());function q_(t){return t&&z(t.schedule)}function z_(t){return t[t.length-1]}function nc(t){return z(z_(t))?t.pop():void 0}function Ln(t){return q_(z_(t))?t.pop():void 0}function hh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function W_(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function G_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pr(t){return this instanceof pr?(this.v=t,this):new pr(t)}function K_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(C){return Promise.resolve(C).then(m,p)}}function c(m,C){r[m]&&(i[m]=function(N){return new Promise(function(M,k){o.push([m,N,M,k])>1||u(m,N)})},C&&(i[m]=C(i[m])))}function u(m,C){try{l(r[m](C))}catch(N){y(o[0][3],N)}}function l(m){m.value instanceof pr?Promise.resolve(m.value.v).then(h,p):y(o[0][2],m)}function h(m){u("next",m)}function p(m){u("throw",m)}function y(m,C){m(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Q_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof G_=="function"?G_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var rc=t=>t&&typeof t.length=="number"&&typeof t!="function";function ic(t){return z(t?.then)}function oc(t){return z(t[pi])}function sc(t){return Symbol.asyncIterator&&z(t?.[Symbol.asyncIterator])}function ac(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function RS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var cc=RS();function uc(t){return z(t?.[cc])}function lc(t){return K_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield pr(n.read());if(i)return yield pr(void 0);yield yield pr(r)}}finally{n.releaseLock()}})}function dc(t){return z(t?.getReader)}function Ie(t){if(t instanceof ne)return t;if(t!=null){if(oc(t))return MS(t);if(rc(t))return PS(t);if(ic(t))return xS(t);if(sc(t))return Y_(t);if(uc(t))return kS(t);if(dc(t))return OS(t)}throw ac(t)}function MS(t){return new ne(e=>{let n=t[pi]();if(z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function PS(t){return new ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function xS(t){return new ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ya)})}function kS(t){return new ne(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Y_(t){return new ne(e=>{FS(t,e).catch(n=>e.error(n))})}function OS(t){return Y_(lc(t))}function FS(t,e){var n,r,i,o;return W_(this,void 0,void 0,function*(){try{for(n=Q_(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function nt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function jn(t,e=0){return Y((n,r)=>{n.subscribe(Z(r,i=>nt(r,t,()=>r.next(i),e),()=>nt(r,t,()=>r.complete(),e),i=>nt(r,t,()=>r.error(i),e)))})}function Bn(t,e=0){return Y((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Z_(t,e){return Ie(t).pipe(Bn(e),jn(e))}function J_(t,e){return Ie(t).pipe(Bn(e),jn(e))}function X_(t,e){return new ne(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function eI(t,e){return new ne(n=>{let r;return nt(n,e,()=>{r=t[cc](),nt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>z(r?.return)&&r.return()})}function hc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ne(n=>{nt(n,e,()=>{let r=t[Symbol.asyncIterator]();nt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function tI(t,e){return hc(lc(t),e)}function nI(t,e){if(t!=null){if(oc(t))return Z_(t,e);if(rc(t))return X_(t,e);if(ic(t))return J_(t,e);if(sc(t))return hc(t,e);if(uc(t))return eI(t,e);if(dc(t))return tI(t,e)}throw ac(t)}function Vt(t,e){return e?nI(t,e):Ie(t)}function VS(...t){let e=Ln(t);return Vt(t,e)}function LS(t,e){let n=z(t)?t:()=>t,r=i=>i.error(n());return new ne(e?i=>e.schedule(r,0,i):r)}function jS(t){return!!t&&(t instanceof ne||z(t.lift)&&z(t.subscribe))}var gr=di(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ln(t,e){return Y((n,r)=>{let i=0;n.subscribe(Z(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:BS}=Array;function US(t,e){return BS(e)?t(...e):t(e)}function fc(t){return ln(e=>US(t,e))}var{isArray:$S}=Array,{getPrototypeOf:HS,prototype:qS,keys:zS}=Object;function pc(t){if(t.length===1){let e=t[0];if($S(e))return{args:e,keys:null};if(GS(e)){let n=zS(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function GS(t){return t&&typeof t=="object"&&HS(t)===qS}function gc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function WS(...t){let e=Ln(t),n=nc(t),{args:r,keys:i}=pc(t);if(r.length===0)return Vt([],e);let o=new ne(KS(r,e,i?s=>gc(i,s):dt));return n?o.pipe(fc(n)):o}function KS(t,e,n=dt){return r=>{rI(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)rI(e,()=>{let l=Vt(t[u],e),h=!1;l.subscribe(Z(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function rI(t,e,n){t?nt(n,t,e):e()}function iI(t,e,n,r,i,o,s,c){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},m=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let M=!1;Ie(n(N,h++)).subscribe(Z(e,k=>{i?.(k),o?m(k):e.next(k)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let k=u.shift();s?nt(e,s,()=>C(k)):C(k)}y()}catch(k){e.error(k)}}))};return t.subscribe(Z(e,m,()=>{p=!0,y()})),()=>{c?.()}}function mr(t,e,n=1/0){return z(e)?mr((r,i)=>ln((o,s)=>e(r,o,i,s))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),Y((r,i)=>iI(r,i,t,n)))}function fh(t=1/0){return mr(dt,t)}function oI(){return fh(1)}function mc(...t){return oI()(Vt(t,Ln(t)))}function QS(t){return new ne(e=>{Ie(t()).subscribe(e)})}function ph(...t){let e=nc(t),{args:n,keys:r}=pc(t),i=new ne(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ie(n[h]).subscribe(Z(o,y=>{p||(p=!0,l--),c[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?gc(r,c):c),o.complete())}))}});return e?i.pipe(fc(e)):i}function yr(t,e){return Y((n,r)=>{let i=0;n.subscribe(Z(r,o=>t.call(e,o,i++)&&r.next(o)))})}function sI(t){return Y((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Z(n,void 0,void 0,s=>{o=Ie(t(s,sI(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function aI(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(Z(s,h=>{let p=l++;u=c?t(u,h,p):(c=!0,h),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function YS(t,e){return z(e)?mr(t,e,1):mr(t,1)}function ZS(t,e=ts){return Y((n,r)=>{let i=null,o=null,s=null,c=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}c()}n.subscribe(Z(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{c(),r.complete()},void 0,()=>{o=i=null}))})}function rs(t){return Y((e,n)=>{let r=!1;e.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function gh(t){return t<=0?()=>ns:Y((e,n)=>{let r=0;e.subscribe(Z(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function yc(t=JS){return Y((e,n)=>{let r=!1;e.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function JS(){return new gr}function XS(t){return Y((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function eN(t,e){let n=arguments.length>=2;return r=>r.pipe(t?yr((i,o)=>t(i,o,r)):dt,gh(1),n?rs(e):yc(()=>new gr))}function mh(t){return t<=0?()=>ns:Y((e,n)=>{let r=[];e.subscribe(Z(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function tN(t,e){let n=arguments.length>=2;return r=>r.pipe(t?yr((i,o)=>t(i,o,r)):dt,mh(1),n?rs(e):yc(()=>new gr))}function nN(t,e){return Y(aI(t,e,arguments.length>=2,!0))}function rN(t={}){let{connector:e=()=>new ht,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,c,u,l=0,h=!1,p=!1,y=()=>{c?.unsubscribe(),c=void 0},m=()=>{y(),s=u=void 0,h=p=!1},C=()=>{let N=s;m(),N?.unsubscribe()};return Y((N,M)=>{l++,!p&&!h&&y();let k=u=u??e();M.add(()=>{l--,l===0&&!p&&!h&&(c=yh(C,i))}),k.subscribe(M),!s&&l>0&&(s=new un({next:V=>k.next(V),error:V=>{p=!0,y(),c=yh(m,n,V),k.error(V)},complete:()=>{h=!0,y(),c=yh(m,r),k.complete()}}),Ie(N).subscribe(s))})(o)}}function yh(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new un({next:()=>{r.unsubscribe(),t()}});return Ie(e(...n)).subscribe(r)}function iN(t){return yr((e,n)=>t<=n)}function oN(...t){let e=Ln(t);return Y((n,r)=>{(e?mc(t,n,e):mc(t,n)).subscribe(r)})}function sN(t,e){return Y((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(Z(r,u=>{i?.unsubscribe();let l=0,h=o++;Ie(t(u,h)).subscribe(i=Z(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function aN(t){return Y((e,n)=>{Ie(t).subscribe(Z(n,()=>n.complete(),Jo)),!n.closed&&e.subscribe(n)})}function cN(t,e,n){let r=z(t)||e||n?{next:t,error:e,complete:n}:t;return r?Y((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(Z(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dt}var ZI="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",G=class extends Error{code;constructor(e,n){super(JI(e,n)),this.code=e}};function uN(t){return`NG0${Math.abs(t)}`}function JI(t,e){return`${uN(t)}${e?": "+e:""}`}var XI=Symbol("InputSignalNode#UNSET"),lN=ve(me({},Ga),{transformFn:void 0,applyValueToInputSignal(t,e){Yo(t,e)}});function eE(t,e){let n=Object.create(lN);n.value=t,n.transformFn=e?.transform;function r(){if(Qo(n),n.value===XI){let i=null;throw new G(-950,i)}return n.value}return r[vt]=n,r}function gs(t){return{toString:t}.toString()}var vc="__parameters__";function dN(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function tE(t,e,n){return gs(()=>{let r=dN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,h){let p=u.hasOwnProperty(vc)?u[vc]:Object.defineProperty(u,vc,{value:[]})[vc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Un=globalThis;function ge(t){for(let e in t)if(t[e]===ge)return e;throw Error("Could not find renamed property on target object.")}function hN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ot(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(ot).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ph(t,e){return t?e?`${t} ${e}`:t:e||""}var fN=ge({__forward_ref__:ge});function Ht(t){return t.__forward_ref__=Ht,t.toString=function(){return ot(this())},t}function Je(t){return nE(t)?t():t}function nE(t){return typeof t=="function"&&t.hasOwnProperty(fN)&&t.__forward_ref__===Ht}function le(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ms(t){return{providers:t.providers||[],imports:t.imports||[]}}function tu(t){return cI(t,rE)||cI(t,iE)}function z6(t){return tu(t)!==null}function cI(t,e){return t.hasOwnProperty(e)?t[e]:null}function pN(t){let e=t&&(t[rE]||t[iE]);return e||null}function uI(t){return t&&(t.hasOwnProperty(lI)||t.hasOwnProperty(gN))?t[lI]:null}var rE=ge({\u0275prov:ge}),lI=ge({\u0275inj:ge}),iE=ge({ngInjectableDef:ge}),gN=ge({ngInjectorDef:ge}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=le({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function oE(t){return t&&!!t.\u0275providers}var mN=ge({\u0275cmp:ge}),yN=ge({\u0275dir:ge}),vN=ge({\u0275pipe:ge}),_N=ge({\u0275mod:ge}),Sc=ge({\u0275fac:ge}),as=ge({__NG_ELEMENT_ID__:ge}),dI=ge({__NG_ENV_ID__:ge});function nu(t){return typeof t=="string"?t:t==null?"":String(t)}function IN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():nu(t)}function sE(t,e){throw new G(-200,t)}function xf(t,e){throw new G(-201,!1)}var J=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(J||{}),xh;function aE(){return xh}function rt(t){let e=xh;return xh=t,e}function cE(t,e,n){let r=tu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&J.Optional)return null;if(e!==void 0)return e;xf(t,"Injector")}var EN={},_r=EN,kh="__NG_DI_FLAG__",Nc=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?Wa:_r,r)}},Rc="ngTempTokenPath",wN="ngTokenPath",DN=/\n/gm,TN="\u0275",hI="__source";function bN(t,e=J.Default){if(Zo()===void 0)throw new G(-203,!1);if(Zo()===null)return cE(t,void 0,e);{let n=Zo(),r;return n instanceof Nc?r=n.injector:r=n,r.get(t,e&J.Optional?null:void 0,e)}}function Ue(t,e=J.Default){return(aE()||bN)(Je(t),e)}function L(t,e=J.Default){return Ue(t,ru(e))}function ru(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Oh(t){let e=[];for(let n=0;n<t.length;n++){let r=Je(t[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,o=J.Default;for(let s=0;s<r.length;s++){let c=r[s],u=CN(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(Ue(i,o))}else e.push(Ue(r))}return e}function uE(t,e){return t[kh]=e,t.prototype[kh]=e,t}function CN(t){return t[kh]}function AN(t,e,n,r){let i=t[Rc];throw e[hI]&&i.unshift(e[hI]),t.message=SN(`
`+t.message,i,n,r),t[wN]=i,t[Rc]=null,t}function SN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==TN?t.slice(2):t;let i=ot(e);if(Array.isArray(e))i=e.map(ot).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):ot(c)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(DN,`
  `)}`}var pt=uE(tE("Optional"),8);var NN=uE(tE("SkipSelf"),4);function Er(t,e){let n=t.hasOwnProperty(Sc);return n?t[Sc]:null}function kf(t,e){t.forEach(n=>Array.isArray(n)?kf(n,e):e(n))}function lE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Mc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function RN(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function MN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Of(t,e,n){let r=ys(t,e);return r>=0?t[r|1]=n:(r=~r,MN(t,r,e,n)),r}function vh(t,e){let n=ys(t,e);if(n>=0)return t[n|1]}function ys(t,e){return PN(t,e,1)}function PN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var wr={},it=[],Pc=new H(""),dE=new H("",-1),hE=new H(""),xc=class{get(e,n=_r){if(n===_r){let r=new Error(`NullInjectorError: No provider for ${ot(e)}!`);throw r.name="NullInjectorError",r}return n}};function fE(t,e){let n=t[_N]||null;if(!n&&e===!0)throw new Error(`Type ${ot(t)} does not have '\u0275mod' property.`);return n}function Dr(t){return t[mN]||null}function xN(t){return t[yN]||null}function kN(t){return t[vN]||null}function qn(t){return{\u0275providers:t}}function ON(...t){return{\u0275providers:pE(!0,t),\u0275fromNgModule:!0}}function pE(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return kf(e,s=>{let c=s;Fh(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&gE(i,o),n}function gE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ff(i,o=>{e(o,r)})}}function Fh(t,e,n,r){if(t=Je(t),!t)return!1;let i=null,o=uI(t),s=!o&&Dr(t);if(!o&&!s){let u=t.ngModule;if(o=uI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Fh(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{kf(o.imports,h=>{Fh(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&gE(l,e)}if(!c){let l=Er(i)||(()=>new i);e({provide:i,useFactory:l,deps:it},i),e({provide:hE,useValue:i,multi:!0},i),e({provide:Pc,useValue:()=>Ue(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;Ff(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Ff(t,e){for(let n of t)oE(n)&&(n=n.\u0275providers),Array.isArray(n)?Ff(n,e):e(n)}var FN=ge({provide:String,useValue:ge});function mE(t){return t!==null&&typeof t=="object"&&FN in t}function VN(t){return!!(t&&t.useExisting)}function LN(t){return!!(t&&t.useFactory)}function Ti(t){return typeof t=="function"}function jN(t){return!!t.useClass}var yE=new H(""),Dc={},fI={},_h;function Vf(){return _h===void 0&&(_h=new xc),_h}var jt=class{},cs=class extends jt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Lh(e,s=>this.processProvider(s)),this.records.set(dE,vi(void 0,this)),i.has("environment")&&this.records.set(jt,vi(void 0,this));let o=this.records.get(yE);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(hE,it,J.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?Wa:_r,r)}destroy(){os(this),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return os(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){os(this);let n=cn(this),r=rt(void 0),i;try{return e()}finally{cn(n),rt(r)}}get(e,n=_r,r=J.Default){if(os(this),e.hasOwnProperty(dI))return e[dI](this);r=ru(r);let i,o=cn(this),s=rt(void 0);try{if(!(r&J.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=qN(e)&&tu(e);l&&this.injectableDefInScope(l)?u=vi(Vh(e),Dc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let c=r&J.Self?Vf():this.parent;return n=r&J.Optional&&n===_r?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Rc]=c[Rc]||[]).unshift(ot(e)),o)throw c;return AN(c,e,"R3InjectorError",this.source)}else throw c}finally{rt(s),cn(o)}}resolveInjectorInitializers(){let e=te(null),n=cn(this),r=rt(void 0),i;try{let o=this.get(Pc,it,J.Self);for(let s of o)s()}finally{cn(n),rt(r),te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ot(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Je(e);let n=Ti(e)?e:Je(e&&e.provide),r=UN(e);if(!Ti(e)&&e.multi===!0){let i=this.records.get(n);i||(i=vi(void 0,Dc,!0),i.factory=()=>Oh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=te(null);try{return n.value===fI?sE(ot(e)):n.value===Dc&&(n.value=fI,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&HN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Je(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Vh(t){let e=tu(t),n=e!==null?e.factory:Er(t);if(n!==null)return n;if(t instanceof H)throw new G(204,!1);if(t instanceof Function)return BN(t);throw new G(204,!1)}function BN(t){if(t.length>0)throw new G(204,!1);let n=pN(t);return n!==null?()=>n.factory(t):()=>new t}function UN(t){if(mE(t))return vi(void 0,t.useValue);{let e=vE(t);return vi(e,Dc)}}function vE(t,e,n){let r;if(Ti(t)){let i=Je(t);return Er(i)||Vh(i)}else if(mE(t))r=()=>Je(t.useValue);else if(LN(t))r=()=>t.useFactory(...Oh(t.deps||[]));else if(VN(t))r=(i,o)=>Ue(Je(t.useExisting),o!==void 0&&o&J.Optional?J.Optional:void 0);else{let i=Je(t&&(t.useClass||t.provide));if($N(t))r=()=>new i(...Oh(t.deps));else return Er(i)||Vh(i)}return r}function os(t){if(t.destroyed)throw new G(205,!1)}function vi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function $N(t){return!!t.deps}function HN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function qN(t){return typeof t=="function"||typeof t=="object"&&t instanceof H}function Lh(t,e){for(let n of t)Array.isArray(n)?Lh(n,e):n&&oE(n)?Lh(n.\u0275providers,e):e(n)}function Pi(t,e){let n;t instanceof cs?(os(t),n=t):n=new Nc(t);let r,i=cn(n),o=rt(void 0);try{return e()}finally{cn(i),rt(o)}}function _E(){return aE()!==void 0||Zo()!=null}function Lf(t){if(!_E())throw new G(-203,!1)}function zN(t){return typeof t=="function"}var pn=0,oe=1,W=2,Xe=3,St=4,ct=5,us=6,kc=7,st=8,Tr=9,dn=10,we=11,ls=12,pI=13,xi=14,Et=15,bi=16,_i=17,Ci=18,iu=19,IE=20,$n=21,Ih=22,Oc=23,_t=24,wi=25,at=26,EE=1;var br=7,Fc=8,Vc=9,It=10;function Hn(t){return Array.isArray(t)&&typeof t[EE]=="object"}function gn(t){return Array.isArray(t)&&t[EE]===!0}function jf(t){return(t.flags&4)!==0}function ki(t){return t.componentOffset>-1}function ou(t){return(t.flags&1)===1}function Bt(t){return!!t.template}function Lc(t){return(t[W]&512)!==0}function Oi(t){return(t[W]&256)===256}var jh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function wE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var su=(()=>{let t=()=>DE;return t.ngInherit=!0,t})();function DE(t){return t.type.prototype.ngOnChanges&&(t.setInput=WN),GN}function GN(){let t=bE(this),e=t?.current;if(e){let n=t.previous;if(n===wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function WN(t,e,n,r,i){let o=this.declaredInputs[r],s=bE(t)||KN(t,{previous:wr,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new jh(l&&l.currentValue,n,u===wr),wE(t,e,i,n)}var TE="__ngSimpleChanges__";function bE(t){return t[TE]||null}function KN(t,e){return t[TE]=e}var gI=null;var fe=function(t,e=null,n){gI?.(t,e,n)},QN="svg",YN="math";function Ut(t){for(;Array.isArray(t);)t=t[pn];return t}function CE(t,e){return Ut(e[t])}function qt(t,e){return Ut(e[t.index])}function AE(t,e){return t.data[e]}function ZN(t,e){return t[e]}function $t(t,e){let n=e[t];return Hn(n)?n:n[pn]}function Bf(t){return(t[W]&128)===128}function JN(t){return gn(t[Xe])}function Ai(t,e){return e==null?null:t[e]}function SE(t){t[_i]=0}function NE(t){t[W]&1024||(t[W]|=1024,Bf(t)&&vs(t))}function XN(t,e){for(;t>0;)e=e[xi],t--;return e}function au(t){return!!(t[W]&9216||t[_t]?.dirty)}function Bh(t){t[dn].changeDetectionScheduler?.notify(8),t[W]&64&&(t[W]|=1024),au(t)&&vs(t)}function vs(t){t[dn].changeDetectionScheduler?.notify(0);let e=Cr(t);for(;e!==null&&!(e[W]&8192||(e[W]|=8192,!Bf(e)));)e=Cr(e)}function RE(t,e){if(Oi(t))throw new G(911,!1);t[$n]===null&&(t[$n]=[]),t[$n].push(e)}function eR(t,e){if(t[$n]===null)return;let n=t[$n].indexOf(e);n!==-1&&t[$n].splice(n,1)}function Cr(t){let e=t[Xe];return gn(e)?e[Xe]:e}function ME(t){return t[kc]??=[]}function PE(t){return t.cleanup??=[]}var X={lFrame:BE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Uh=!1;function tR(){return X.lFrame.elementDepthCount}function nR(){X.lFrame.elementDepthCount++}function rR(){X.lFrame.elementDepthCount--}function Uf(){return X.bindingsEnabled}function xE(){return X.skipHydrationRootTNode!==null}function iR(t){return X.skipHydrationRootTNode===t}function oR(){X.skipHydrationRootTNode=null}function se(){return X.lFrame.lView}function ke(){return X.lFrame.tView}function G6(t){return X.lFrame.contextLView=t,t[st]}function W6(t){return X.lFrame.contextLView=null,t}function et(){let t=kE();for(;t!==null&&t.type===64;)t=t.parent;return t}function kE(){return X.lFrame.currentTNode}function sR(){let t=X.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function xr(t,e){let n=X.lFrame;n.currentTNode=t,n.isParent=e}function $f(){return X.lFrame.isParent}function Hf(){X.lFrame.isParent=!1}function OE(){return Uh}function mI(t){let e=Uh;return Uh=t,e}function qf(){let t=X.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function aR(t){return X.lFrame.bindingIndex=t}function cu(){return X.lFrame.bindingIndex++}function FE(t){let e=X.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function cR(){return X.lFrame.inI18n}function uR(t,e){let n=X.lFrame;n.bindingIndex=n.bindingRootIndex=t,$h(e)}function lR(){return X.lFrame.currentDirectiveIndex}function $h(t){X.lFrame.currentDirectiveIndex=t}function dR(t){let e=X.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function VE(t){X.lFrame.currentQueryIndex=t}function hR(t){let e=t[oe];return e.type===2?e.declTNode:e.type===1?t[ct]:null}function LE(t,e,n){if(n&J.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&J.Host);)if(i=hR(o),i===null||(o=o[xi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=X.lFrame=jE();return r.currentTNode=e,r.lView=t,!0}function zf(t){let e=jE(),n=t[oe];X.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function jE(){let t=X.lFrame,e=t===null?null:t.child;return e===null?BE(t):e}function BE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function UE(){let t=X.lFrame;return X.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var $E=UE;function Gf(){let t=UE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fR(t){return(X.lFrame.contextLView=XN(t,X.lFrame.contextLView))[st]}function kr(){return X.lFrame.selectedIndex}function Ar(t){X.lFrame.selectedIndex=t}function uu(){let t=X.lFrame;return AE(t.tView,t.selectedIndex)}function pR(){return X.lFrame.currentNamespace}var HE=!0;function lu(){return HE}function du(t){HE=t}function gR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=DE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Wf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Tc(t,e,n){qE(t,e,3,n)}function bc(t,e,n,r){(t[W]&3)===n&&qE(t,e,n,r)}function Eh(t,e){let n=t[W];(n&3)===e&&(n&=16383,n+=1,t[W]=n)}function qE(t,e,n,r){let i=r!==void 0?t[_i]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[_i]+=65536),(c<o||o==-1)&&(mR(t,n,e,u),t[_i]=(t[_i]&4294901760)+u+2),u++}function yI(t,e){fe(4,t,e);let n=te(null);try{e.call(t)}finally{te(n),fe(5,t,e)}}function mR(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[W]>>14<t[_i]>>16&&(t[W]&3)===e&&(t[W]+=16384,yI(c,o)):yI(c,o)}var Di=-1,Sr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function yR(t){return(t.flags&8)!==0}function vR(t){return(t.flags&16)!==0}function _R(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];IR(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function zE(t){return t===3||t===4||t===6}function IR(t){return t.charCodeAt(0)===64}function Si(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?vI(t,n,i,null,e[++r]):vI(t,n,i,null,null))}}return t}function vI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function GE(t){return t!==Di}function jc(t){return t&32767}function ER(t){return t>>16}function Bc(t,e){let n=ER(t),r=e;for(;n>0;)r=r[xi],n--;return r}var Hh=!0;function Uc(t){let e=Hh;return Hh=t,e}var wR=256,WE=wR-1,KE=5,DR=0,Lt={};function TR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(as)&&(r=n[as]),r==null&&(r=n[as]=DR++);let i=r&WE,o=1<<i;e.data[t+(i>>KE)]|=o}function $c(t,e){let n=QE(t,e);if(n!==-1)return n;let r=e[oe];r.firstCreatePass&&(t.injectorIndex=e.length,wh(r.data,t),wh(e,null),wh(r.blueprint,null));let i=Kf(t,e),o=t.injectorIndex;if(GE(i)){let s=jc(i),c=Bc(i,e),u=c[oe].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function wh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function QE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Kf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=ew(i),r===null)return Di;if(n++,i=i[xi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Di}function qh(t,e,n){TR(t,e,n)}function bR(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(zE(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function YE(t,e,n){if(n&J.Optional||t!==void 0)return t;xf(e,"NodeInjector")}function ZE(t,e,n,r){if(n&J.Optional&&r===void 0&&(r=null),(n&(J.Self|J.Host))===0){let i=t[Tr],o=rt(void 0);try{return i?i.get(e,r,n&J.Optional):cE(e,r,n&J.Optional)}finally{rt(o)}}return YE(r,e,n)}function JE(t,e,n,r=J.Default,i){if(t!==null){if(e[W]&2048&&!(r&J.Self)){let s=RR(t,e,n,r,Lt);if(s!==Lt)return s}let o=XE(t,e,n,r,Lt);if(o!==Lt)return o}return ZE(e,n,r,i)}function XE(t,e,n,r,i){let o=SR(n);if(typeof o=="function"){if(!LE(e,t,r))return r&J.Host?YE(i,n,r):ZE(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&J.Optional))xf(n);else return s}finally{$E()}}else if(typeof o=="number"){let s=null,c=QE(t,e),u=Di,l=r&J.Host?e[Et][ct]:null;for((c===-1||r&J.SkipSelf)&&(u=c===-1?Kf(t,e):e[c+8],u===Di||!II(r,!1)?c=-1:(s=e[oe],c=jc(u),e=Bc(u,e)));c!==-1;){let h=e[oe];if(_I(o,c,h.data)){let p=CR(c,e,n,s,r,l);if(p!==Lt)return p}u=e[c+8],u!==Di&&II(r,e[oe].data[c+8]===l)&&_I(o,c,e)?(s=h,c=jc(u),e=Bc(u,e)):c=-1}}return i}function CR(t,e,n,r,i,o){let s=e[oe],c=s.data[t+8],u=r==null?ki(c)&&Hh:r!=s&&(c.type&3)!==0,l=i&J.Host&&o===c,h=AR(c,s,n,u,l);return h!==null?Hc(e,s,h,c,i):Lt}function AR(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?c:c+h,y=i?c+h:l;for(let m=p;m<y;m++){let C=s[m];if(m<u&&n===C||m>=u&&C.type===n)return m}if(i){let m=s[u];if(m&&Bt(m)&&m.type===n)return u}return null}function Hc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Sr){let c=o;c.resolving&&sE(IN(s[n]));let u=Uc(c.canSeeViewProviders);c.resolving=!0;let l,h=c.injectImpl?rt(c.injectImpl):null,p=LE(t,r,J.Default);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&gR(n,s[n],e)}finally{h!==null&&rt(h),Uc(u),c.resolving=!1,$E()}}return o}function SR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(as)?t[as]:void 0;return typeof e=="number"?e>=0?e&WE:NR:e}function _I(t,e,n){let r=1<<t;return!!(n[e+(t>>KE)]&r)}function II(t,e){return!(t&J.Self)&&!(t&J.Host&&e)}var Ir=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return JE(this._tNode,this._lView,e,ru(r),n)}};function NR(){return new Ir(et(),se())}function Fi(t){return gs(()=>{let e=t.prototype.constructor,n=e[Sc]||zh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Sc]||zh(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function zh(t){return nE(t)?()=>{let e=zh(Je(t));return e&&e()}:Er(t)}function RR(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[W]&2048&&!Lc(s);){let c=XE(o,s,n,r|J.Self,Lt);if(c!==Lt)return c;let u=o.parent;if(!u){let l=s[IE];if(l){let h=l.get(n,Lt,r);if(h!==Lt)return h}u=ew(s),s=s[xi]}o=u}return i}function ew(t){let e=t[oe],n=e.type;return n===2?e.declTNode:n===1?t[ct]:null}function tw(t){return bR(et(),t)}function EI(t,e=null,n=null,r){let i=nw(t,e,n,r);return i.resolveInjectorInitializers(),i}function nw(t,e=null,n=null,r,i=new Set){let o=[n||it,ON(t)];return r=r||(typeof t=="object"?void 0:ot(t)),new cs(o,e||Vf(),r||null,i)}var We=class t{static THROW_IF_NOT_FOUND=_r;static NULL=new xc;static create(e,n){if(Array.isArray(e))return EI({name:""},n,e,"");{let r=e.name??"";return EI({name:r},e.parent,e.providers,r)}}static \u0275prov=le({token:t,providedIn:"any",factory:()=>Ue(dE)});static __NG_ELEMENT_ID__=-1};var wI=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>tw(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},MR=new H("");MR.__NG_ELEMENT_ID__=t=>{let e=et();if(e===null)throw new G(204,!1);if(e.type&2)return e.value;if(t&J.Optional)return null;throw new G(204,!1)};var rw=!1,hu=(()=>{class t{static __NG_ELEMENT_ID__=PR;static __NG_ENV_ID__=n=>n}return t})(),Gh=class extends hu{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return Oi(n)?(e(),()=>{}):(RE(n,e),()=>eR(n,e))}};function PR(){return new Gh(se())}var Nr=class{},Qf=new H("",{providedIn:"root",factory:()=>!1});var iw=new H(""),ow=new H(""),_s=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Xo(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),fu=(()=>{class t{internalPendingTasks=L(_s);scheduler=L(Nr);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){return _(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),Wh=class extends ht{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,_E()&&(this.destroyRef=L(hu,{optional:!0})??void 0,this.pendingTasks=L(_s,{optional:!0})??void 0)}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ae&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ft=Wh;function qc(...t){}function sw(t){let e,n;function r(){t=qc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function DI(t){return queueMicrotask(()=>t()),()=>{t=qc}}var Yf="isAngularZone",zc=Yf+"_ID",xR=0,Ee=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ft(!1);onMicrotaskEmpty=new ft(!1);onStable=new ft(!1);onError=new ft(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=rw}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,FR(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Yf)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,kR,qc,qc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},kR={};function Zf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function OR(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){sw(()=>{t.callbackScheduled=!1,Kh(t),t.isCheckStableRunning=!0,Zf(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Kh(t)}function FR(t){let e=()=>{OR(t)},n=xR++;t._inner=t._inner.fork({name:"angular",properties:{[Yf]:!0,[zc]:n,[zc+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(VR(u))return r.invokeTask(o,s,c,u);try{return TI(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),bI(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return TI(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!LR(u)&&e(),bI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Kh(t),Zf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Kh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function TI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function bI(t){t._nesting--,Zf(t)}var Qh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ft;onMicrotaskEmpty=new ft;onStable=new ft;onError=new ft;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function VR(t){return aw(t,"__ignore_ng_zone__")}function LR(t){return aw(t,"__scheduler_tick__")}function aw(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Rr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},jR=new H("",{providedIn:"root",factory:()=>{let t=L(Ee),e=L(Rr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function CI(t,e){return eE(t,e)}function BR(t){return eE(XI,t)}var K6=(CI.required=BR,CI);function UR(){return pu(et(),se())}function pu(t,e){return new mn(qt(t,e))}var mn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=UR}return t})();function $R(t){return typeof t=="function"&&t[vt]!==void 0}function Vi(t,e){let n=Yd(t,e?.equal),r=n[vt];return n.set=i=>Yo(r,i),n.update=i=>Zd(r,i),n.asReadonly=HR.bind(n),n}function HR(){let t=this[vt];if(t.readonlyFn===void 0){let e=()=>this();e[vt]=t,t.readonlyFn=e}return t.readonlyFn}function cw(t){return $R(t)&&typeof t.set=="function"}function uw(t){return(t.flags&128)===128}var lw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(lw||{}),dw=new Map,qR=0;function zR(){return qR++}function GR(t){dw.set(t[iu],t)}function Yh(t){dw.delete(t[iu])}var AI="__ngContext__";function Li(t,e){Hn(e)?(t[AI]=e[iu],GR(e)):t[AI]=e}function hw(t){return pw(t[ls])}function fw(t){return pw(t[St])}function pw(t){for(;t!==null&&!gn(t);)t=t[St];return t}var Zh;function Q6(t){Zh=t}function WR(){if(Zh!==void 0)return Zh;if(typeof document<"u")return document;throw new G(210,!1)}var KR=new H("",{providedIn:"root",factory:()=>QR}),QR="ng",YR=new H(""),Jf=new H("",{providedIn:"platform",factory:()=>"unknown"});var Y6=new H("",{providedIn:"root",factory:()=>WR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ZR="h",JR="b";var gw=!1,XR=new H("",{providedIn:"root",factory:()=>gw});var Xf=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Xf||{}),gu=new H(""),SI=new Set;function mu(t){SI.has(t)||(SI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var mw=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=eM}return t})();function eM(){return new mw(se(),et())}var Ii=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ii||{}),yw=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),tM=[Ii.EarlyRead,Ii.Write,Ii.MixedReadWrite,Ii.Read],nM=(()=>{class t{ngZone=L(Ee);scheduler=L(Nr);errorHandler=L(Rr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){L(gu,{optional:!0})}execute(){let n=this.sequences.size>0;n&&fe(16),this.executing=!0;for(let r of tM)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&fe(17)}register(n){let{view:r}=n;r!==void 0?((r[wi]??=[]).push(n),vs(r),r[W]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Xf.AFTER_NEXT_RENDER,n):n()}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),Jh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[wi];e&&(this.view[wi]=e.filter(n=>n!==this))}};function rM(t,e){!e?.injector&&Lf(rM);let n=e?.injector??L(We);return mu("NgAfterNextRender"),oM(t,n,e,!0)}function iM(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function oM(t,e,n,r){let i=e.get(yw);i.impl??=e.get(nM);let o=e.get(gu,null,{optional:!0}),s=n?.phase??Ii.MixedReadWrite,c=n?.manualCleanup!==!0?e.get(hu):null,u=e.get(mw,null,{optional:!0}),l=new Jh(i.impl,iM(t,s),u?.view,r,c,o?.snapshot(null));return i.impl.register(l),l}var sM=()=>null;function vw(t,e,n=!1){return sM(t,e,n)}function _w(t,e){let n=t.contentQueries;if(n!==null){let r=te(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];VE(o),c.contentQueries(2,e[s],s)}}}finally{te(r)}}}function Xh(t,e,n){VE(0);let r=te(null);try{e(t,n)}finally{te(r)}}function ep(t,e,n){if(jf(e)){let r=te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{te(r)}}}var ds=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ds||{}),_c;function aM(){if(_c===void 0&&(_c=null,Un.trustedTypes))try{_c=Un.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return _c}function yu(t){return aM()?.createHTML(t)||t}var Ic;function cM(){if(Ic===void 0&&(Ic=null,Un.trustedTypes))try{Ic=Un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ic}function NI(t){return cM()?.createScriptURL(t)||t}var hn=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ZI})`}},ef=class extends hn{getTypeName(){return"HTML"}},tf=class extends hn{getTypeName(){return"Style"}},nf=class extends hn{getTypeName(){return"Script"}},rf=class extends hn{getTypeName(){return"URL"}},of=class extends hn{getTypeName(){return"ResourceURL"}};function Is(t){return t instanceof hn?t.changingThisBreaksApplicationSecurity:t}function Iw(t,e){let n=uM(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ZI})`)}return n===e}function uM(t){return t instanceof hn&&t.getTypeName()||null}function Z6(t){return new ef(t)}function J6(t){return new tf(t)}function X6(t){return new nf(t)}function ez(t){return new rf(t)}function tz(t){return new of(t)}function lM(t){let e=new af(t);return dM()?new sf(e):e}var sf=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(yu(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},af=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=yu(e),n}};function dM(){try{return!!new window.DOMParser().parseFromString(yu(""),"text/html")}catch{return!1}}var hM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ew(t){return t=String(t),t.match(hM)?t:"unsafe:"+t}function yn(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Es(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var ww=yn("area,br,col,hr,img,wbr"),Dw=yn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Tw=yn("rp,rt"),fM=Es(Tw,Dw),pM=Es(Dw,yn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gM=Es(Tw,yn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),RI=Es(ww,pM,gM,fM),bw=yn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mM=yn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yM=yn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),vM=Es(bw,mM,yM),_M=yn("script,style,template"),cf=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=wM(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=EM(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=MI(e).toLowerCase();if(!RI.hasOwnProperty(n))return this.sanitizedSomething=!0,!_M.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,c=s.toLowerCase();if(!vM.hasOwnProperty(c)){this.sanitizedSomething=!0;continue}let u=o.value;bw[c]&&(u=Ew(u)),this.buf.push(" ",s,'="',PI(u),'"')}return this.buf.push(">"),!0}endElement(e){let n=MI(e).toLowerCase();RI.hasOwnProperty(n)&&!ww.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(PI(e))}};function IM(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function EM(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw Cw(e);return e}function wM(t){let e=t.firstChild;if(e&&IM(t,e))throw Cw(e);return e}function MI(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function Cw(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var DM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,TM=/([^\#-~ |!])/g;function PI(t){return t.replace(/&/g,"&amp;").replace(DM,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(TM,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ec;function nz(t,e){let n=null;try{Ec=Ec||lM(t);let r=e?String(e):"";n=Ec.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Ec.getInertBodyElement(r)}while(r!==o);let c=new cf().sanitizeChildren(xI(n)||n);return yu(c)}finally{if(n){let r=xI(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function xI(t){return"content"in t&&bM(t)?t.content:null}function bM(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var tp=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(tp||{});function CM(t){let e=Aw();return e?e.sanitize(tp.URL,t)||"":Iw(t,"URL")?Is(t):Ew(nu(t))}function AM(t){let e=Aw();if(e)return NI(e.sanitize(tp.RESOURCE_URL,t)||"");if(Iw(t,"ResourceURL"))return NI(Is(t));throw new G(904,!1)}function SM(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?AM:CM}function rz(t,e,n){return SM(e,n)(t)}function Aw(){let t=se();return t&&t[dn].sanitizer}var NM=/^>|^->|<!--|-->|--!>|<!-$/g,RM=/(<|>)/g,MM="\u200B$1\u200B";function PM(t){return t.replace(NM,e=>e.replace(RM,MM))}function Sw(t){return t instanceof Function?t():t}function xM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var Nw="ng-template";function kM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&xM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(np(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function np(t){return t.type===4&&t.value!==Nw}function OM(t,e,n){let r=t.type===4&&!n?Nw:t.value;return e===r}function FM(t,e,n){let r=4,i=t.attrs,o=i!==null?jM(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Ct(r)&&!Ct(u))return!1;if(s&&Ct(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!OM(t,u,n)||u===""&&e.length===1){if(Ct(r))return!1;s=!0}}else if(r&8){if(i===null||!kM(t,i,u,n)){if(Ct(r))return!1;s=!0}}else{let l=e[++c],h=VM(u,i,np(t),n);if(h===-1){if(Ct(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Ct(r))return!1;s=!0}}}}return Ct(r)||s}function Ct(t){return(t&1)===0}function VM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return BM(e,t)}function Rw(t,e,n=!1){for(let r=0;r<e.length;r++)if(FM(t,e[r],n))return!0;return!1}function LM(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function jM(t){for(let e=0;e<t.length;e++){let n=t[e];if(zE(n))return e}return t.length}function BM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function UM(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function kI(t,e){return t?":not("+e.trim()+")":e}function $M(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ct(s)&&(e+=kI(o,i),i=""),r=s,o=o||!Ct(r);n++}return i!==""&&(e+=kI(o,i)),e}function HM(t){return t.map($M).join(",")}function qM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Ct(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Nt={};function zM(t,e){return t.createText(e)}function GM(t,e,n){t.setValue(e,n)}function WM(t,e){return t.createComment(PM(e))}function Mw(t,e,n){return t.createElement(e,n)}function Gc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Pw(t,e,n){t.appendChild(e,n)}function OI(t,e,n,r,i){r!==null?Gc(t,e,n,r,i):Pw(t,e,n)}function KM(t,e,n){t.removeChild(null,e,n)}function QM(t,e,n){t.setAttribute(e,"style",n)}function YM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function xw(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&_R(t,e,r),i!==null&&YM(t,e,i),o!==null&&QM(t,e,o)}function rp(t,e,n,r,i,o,s,c,u,l,h){let p=at+r,y=p+i,m=ZM(p,y),C=typeof l=="function"?l():l;return m[oe]={type:t,blueprint:m,template:n,queries:null,viewQuery:c,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function ZM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Nt);return n}function JM(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=rp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ip(t,e,n,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[pn]=i,p[W]=r|4|128|8|64|1024,(l!==null||t&&t[W]&2048)&&(p[W]|=2048),SE(p),p[Xe]=p[xi]=t,p[st]=n,p[dn]=s||t&&t[dn],p[we]=c||t&&t[we],p[Tr]=u||t&&t[Tr]||null,p[ct]=o,p[iu]=zR(),p[us]=h,p[IE]=l,p[Et]=e.type==2?t[Et]:p,p}function XM(t,e,n){let r=qt(e,t),i=JM(n),o=t[dn].rendererFactory,s=op(t,ip(t,i,null,kw(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function kw(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Ow(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function op(t,e){return t[ls]?t[pI][St]=e:t[ls]=e,t[pI]=e,e}function iz(t=1){Fw(ke(),se(),kr()+t,!1)}function Fw(t,e,n,r){if(!r)if((e[W]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Tc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&bc(e,o,0,n)}Ar(n)}var vu=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(vu||{});function uf(t,e,n,r){let i=te(null);try{let[o,s,c]=t.inputs[n],u=null;(s&vu.SignalBased)!==0&&(u=e[o][vt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):wE(e,u,o,r)}finally{te(i)}}function Vw(t,e,n,r,i){let o=kr(),s=r&2;try{Ar(-1),s&&e.length>at&&Fw(t,e,at,!1),fe(s?2:0,i),n(r,i)}finally{Ar(o),fe(s?3:1,i)}}function _u(t,e,n){oP(t,e,n),(n.flags&64)===64&&sP(t,e,n)}function sp(t,e,n=qt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function eP(t,e,n,r){let o=r.get(XR,gw)||n===ds.ShadowDom,s=t.selectRootElement(e,o);return tP(s),s}function tP(t){nP(t)}var nP=()=>null;function rP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function ap(t,e,n,r,i,o,s,c){if(!c&&up(e,t,n,r,i)){ki(e)&&iP(n,e.index);return}if(e.type&3){let u=qt(e,n);r=rP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function iP(t,e){let n=$t(e,t);n[W]&16||(n[W]|=64)}function oP(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ki(n)&&XM(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||$c(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=Hc(e,t,s,n);if(Li(u,e),o!==null&&lP(e,s-r,u,c,n,o),Bt(c)){let l=$t(n.index,e);l[st]=Hc(e,t,s,n)}}}function sP(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=lR();try{Ar(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];$h(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&aP(u,l)}}finally{Ar(-1),$h(s)}}function aP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function cp(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Rw(e,o.selectors,!1)&&(r??=[],Bt(o)?r.unshift(o):r.push(o))}return r}function cP(t,e,n,r,i,o){let s=qt(t,e);uP(e[we],s,o,t.value,n,r,i)}function uP(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let c=s==null?nu(o):s(o,r||"",i);t.setAttribute(e,i,c,n)}}function lP(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];uf(r,n,u,l)}}function dP(t,e){let n=t[Tr],r=n?n.get(Rr,null):null;r&&r.handleError(e)}function up(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];uf(p,n[l],h,i),c=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];uf(h,l,r,i),c=!0}return c}function hP(t,e){let n=$t(e,t),r=n[oe];fP(r,n);let i=n[pn];i!==null&&n[us]===null&&(n[us]=vw(i,n[Tr])),fe(18),lp(r,n,n[st]),fe(19,n[st])}function fP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function lp(t,e,n){zf(e);try{let r=t.viewQuery;r!==null&&Xh(1,r,n);let i=t.template;i!==null&&Vw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ci]?.finishViewCreation(t),t.staticContentQueries&&_w(t,e),t.staticViewQueries&&Xh(2,t.viewQuery,n);let o=t.components;o!==null&&pP(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[W]&=-5,Gf()}}function pP(t,e){for(let n=0;n<e.length;n++)hP(t,e[n])}function Lw(t,e,n,r){let i=te(null);try{let o=e.tView,c=t[W]&4096?4096:16,u=ip(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[bi]=l;let h=t[Ci];return h!==null&&(u[Ci]=h.createEmbeddedView(o)),lp(o,u,n),u}finally{te(i)}}function lf(t,e){return!e||e.firstChild===null||uw(t)}var gP;function dp(t,e){return gP(t,e)}var Wc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Wc||{});function hp(t){return(t.flags&32)===32}function Ei(t,e,n,r,i){if(r!=null){let o,s=!1;gn(r)?o=r:Hn(r)&&(s=!0,r=r[pn]);let c=Ut(r);t===0&&n!==null?i==null?Pw(e,n,c):Gc(e,n,c,i||null,!0):t===1&&n!==null?Gc(e,n,c,i||null,!0):t===2?KM(e,c,s):t===3&&e.destroyNode(c),o!=null&&bP(e,t,o,n,i)}}function mP(t,e){jw(t,e),e[pn]=null,e[ct]=null}function yP(t,e,n,r,i,o){r[pn]=i,r[ct]=e,Eu(t,r,n,1,i,o)}function jw(t,e){e[dn].changeDetectionScheduler?.notify(9),Eu(t,e,e[we],2,null,null)}function vP(t){let e=t[ls];if(!e)return Dh(t[oe],t);for(;e;){let n=null;if(Hn(e))n=e[ls];else{let r=e[It];r&&(n=r)}if(!n){for(;e&&!e[St]&&e!==t;)Hn(e)&&Dh(e[oe],e),e=e[Xe];e===null&&(e=t),Hn(e)&&Dh(e[oe],e),n=e&&e[St]}e=n}}function fp(t,e){let n=t[Vc],r=n.indexOf(e);n.splice(r,1)}function Bw(t,e){if(Oi(e))return;let n=e[we];n.destroyNode&&Eu(t,e,n,3,null,null),vP(e)}function Dh(t,e){if(Oi(e))return;let n=te(null);try{e[W]&=-129,e[W]|=256,e[_t]&&Wd(e[_t]),IP(t,e),_P(t,e),e[oe].type===1&&e[we].destroy();let r=e[bi];if(r!==null&&gn(e[Xe])){r!==e[Xe]&&fp(r,e);let i=e[Ci];i!==null&&i.detachView(t)}Yh(e)}finally{te(n)}}function _P(t,e){let n=t.cleanup,r=e[kc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[kc]=null);let i=e[$n];if(i!==null){e[$n]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Oc];if(o!==null){e[Oc]=null;for(let s of o)s.destroy()}}function IP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Sr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];fe(4,c,u);try{u.call(c)}finally{fe(5,c,u)}}else{fe(4,i,o);try{o.call(i)}finally{fe(5,i,o)}}}}}function Uw(t,e,n){return EP(t,e.parent,n)}function EP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[pn];if(ki(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===ds.None||i===ds.Emulated)return null}return qt(r,n)}function $w(t,e,n){return DP(t,e,n)}function wP(t,e,n){return t.type&40?qt(t,n):null}var DP=wP,FI;function Iu(t,e,n,r){let i=Uw(t,r,e),o=e[we],s=r.parent||e[ct],c=$w(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)OI(o,i,n[u],c,!1);else OI(o,i,n,c,!1);FI!==void 0&&FI(o,r,e,n,i)}function ss(t,e){if(e!==null){let n=e.type;if(n&3)return qt(e,t);if(n&4)return df(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ss(t,r);{let i=t[e.index];return gn(i)?df(-1,i):Ut(i)}}else{if(n&128)return ss(t,e.next);if(n&32)return dp(e,t)()||Ut(t[e.index]);{let r=Hw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Cr(t[Et]);return ss(i,r)}else return ss(t,e.next)}}}return null}function Hw(t,e){if(e!==null){let r=t[Et][ct],i=e.projection;return r.projection[i]}return null}function df(t,e){let n=It+t+1;if(n<e.length){let r=e[n],i=r[oe].firstChild;if(i!==null)return ss(r,i)}return e[br]}function pp(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&Li(Ut(c),r),n.flags|=2),!hp(n))if(u&8)pp(t,e,n.child,r,i,o,!1),Ei(e,t,i,c,o);else if(u&32){let l=dp(n,r),h;for(;h=l();)Ei(e,t,i,h,o);Ei(e,t,i,c,o)}else u&16?qw(t,e,r,n,i,o):Ei(e,t,i,c,o);n=s?n.projectionNext:n.next}}function Eu(t,e,n,r,i,o){pp(n,r,t.firstChild,e,i,o,!1)}function TP(t,e,n){let r=e[we],i=Uw(t,n,e),o=n.parent||e[ct],s=$w(o,n,e);qw(r,0,e,n,i,s)}function qw(t,e,n,r,i,o){let s=n[Et],u=s[ct].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ei(e,t,i,h,o)}else{let l=u,h=s[Xe];uw(r)&&(l.flags|=128),pp(t,e,l,h,i,o,!0)}}function bP(t,e,n,r,i){let o=n[br],s=Ut(n);o!==s&&Ei(e,t,r,o,i);for(let c=It;c<n.length;c++){let u=n[c];Eu(u[oe],u,t,e,r,o)}}function CP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Wc.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Wc.Important),t.setStyle(n,r,i,o))}}function Kc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Ut(o)),gn(o)&&AP(o,r);let s=n.type;if(s&8)Kc(t,e,n.child,r);else if(s&32){let c=dp(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=Hw(e,n);if(Array.isArray(c))r.push(...c);else{let u=Cr(e[Et]);Kc(u[oe],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function AP(t,e){for(let n=It;n<t.length;n++){let r=t[n],i=r[oe].firstChild;i!==null&&Kc(r[oe],r,i,e)}t[br]!==t[pn]&&e.push(t[br])}function zw(t){if(t[wi]!==null){for(let e of t[wi])e.impl.addSequence(e);t[wi].length=0}}var Gw=[];function SP(t){return t[_t]??NP(t)}function NP(t){let e=Gw.pop()??Object.create(MP);return e.lView=t,e}function RP(t){t.lView[_t]!==t&&(t.lView=null,Gw.push(t))}var MP=ve(me({},Ko),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{vs(t.lView)},consumerOnSignalRead(){this.lView[_t]=this}});function PP(t){let e=t[_t]??Object.create(xP);return e.lView=t,e}var xP=ve(me({},Ko),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Cr(t.lView);for(;e&&!Ww(e[oe]);)e=Cr(e);e&&NE(e)},consumerOnSignalRead(){this.lView[_t]=this}});function Ww(t){return t.type!==2}function Kw(t){if(t[Oc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Oc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[W]&8192)}}var kP=100;function Qw(t,e=!0,n=0){let i=t[dn].rendererFactory,o=!1;o||i.begin?.();try{OP(t,n)}catch(s){throw e&&dP(t,s),s}finally{o||i.end?.()}}function OP(t,e){let n=OE();try{mI(!0),hf(t,e);let r=0;for(;au(t);){if(r===kP)throw new G(103,!1);r++,hf(t,1)}}finally{mI(n)}}function FP(t,e,n,r){if(Oi(e))return;let i=e[W],o=!1,s=!1;zf(e);let c=!0,u=null,l=null;o||(Ww(t)?(l=SP(e),u=Ha(l)):Ud()===null?(c=!1,l=PP(e),u=Ha(l)):e[_t]&&(Wd(e[_t]),e[_t]=null));try{SE(e),aR(t.bindingStartIndex),n!==null&&Vw(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let m=t.preOrderCheckHooks;m!==null&&Tc(e,m,null)}else{let m=t.preOrderHooks;m!==null&&bc(e,m,0,null),Eh(e,0)}if(s||VP(e),Kw(e),Yw(e,0),t.contentQueries!==null&&_w(t,e),!o)if(h){let m=t.contentCheckHooks;m!==null&&Tc(e,m)}else{let m=t.contentHooks;m!==null&&bc(e,m,1),Eh(e,1)}jP(t,e);let p=t.components;p!==null&&Jw(e,p,0);let y=t.viewQuery;if(y!==null&&Xh(2,y,r),!o)if(h){let m=t.viewCheckHooks;m!==null&&Tc(e,m)}else{let m=t.viewHooks;m!==null&&bc(e,m,2),Eh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ih]){for(let m of e[Ih])m();e[Ih]=null}o||(zw(e),e[W]&=-73)}catch(h){throw o||vs(e),h}finally{l!==null&&(zd(l,u),c&&RP(l)),Gf()}}function Yw(t,e){for(let n=hw(t);n!==null;n=fw(n))for(let r=It;r<n.length;r++){let i=n[r];Zw(i,e)}}function VP(t){for(let e=hw(t);e!==null;e=fw(e)){if(!(e[W]&2))continue;let n=e[Vc];for(let r=0;r<n.length;r++){let i=n[r];NE(i)}}}function LP(t,e,n){fe(18);let r=$t(e,t);Zw(r,n),fe(19,r[st])}function Zw(t,e){Bf(t)&&hf(t,e)}function hf(t,e){let r=t[oe],i=t[W],o=t[_t],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Gd(o)),s||=!1,o&&(o.dirty=!1),t[W]&=-9217,s)FP(r,t,r.template,t[st]);else if(i&8192){Kw(t),Yw(t,1);let c=r.components;c!==null&&Jw(t,c,1),zw(t)}}function Jw(t,e,n){for(let r=0;r<e.length;r++)LP(t,e[r],n)}function jP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ar(~i);else{let o=i,s=n[++r],c=n[++r];uR(s,o);let u=e[o];fe(24,u),c(2,u),fe(25,u)}}}finally{Ar(-1)}}function gp(t,e){let n=OE()?64:1088;for(t[dn].changeDetectionScheduler?.notify(e);t;){t[W]|=n;let r=Cr(t);if(Lc(t)&&!r)return t;t=r}return null}function Xw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function eD(t,e,n,r=!0){let i=e[oe];if(BP(i,e,t,n),r){let s=df(n,t),c=e[we],u=c.parentNode(t[br]);u!==null&&yP(i,t[ct],c,e,u,s)}let o=e[us];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ff(t,e){if(t.length<=It)return;let n=It+e,r=t[n];if(r){let i=r[bi];i!==null&&i!==t&&fp(i,r),e>0&&(t[n-1][St]=r[St]);let o=Mc(t,It+e);mP(r[oe],r);let s=o[Ci];s!==null&&s.detachView(o[oe]),r[Xe]=null,r[St]=null,r[W]&=-129}return r}function BP(t,e,n,r){let i=It+r,o=n.length;r>0&&(n[i-1][St]=e),r<o-It?(e[St]=n[i],lE(n,It+r,e)):(n.push(e),e[St]=null),e[Xe]=n;let s=e[bi];s!==null&&n!==s&&tD(s,e);let c=e[Ci];c!==null&&c.insertView(t),Bh(e),e[W]|=128}function tD(t,e){let n=t[Vc],r=e[Xe];if(Hn(r))t[W]|=2;else{let i=r[Xe][Et];e[Et]!==i&&(t[W]|=2)}n===null?t[Vc]=[e]:n.push(e)}var hs=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[oe];return Kc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[st]}set context(e){this._lView[st]=e}get destroyed(){return Oi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(gn(e)){let n=e[Fc],r=n?n.indexOf(this):-1;r>-1&&(ff(e,r),Mc(n,r))}this._attachedToViewContainer=!1}Bw(this._lView[oe],this._lView)}onDestroy(e){RE(this._lView,e)}markForCheck(){gp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[W]&=-129}reattach(){Bh(this._lView),this._lView[W]|=128}detectChanges(){this._lView[W]|=1024,Qw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Lc(this._lView),n=this._lView[bi];n!==null&&!e&&fp(n,this._lView),jw(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let n=Lc(this._lView),r=this._lView[bi];r!==null&&!n&&tD(r,this._lView),Bh(this._lView)}};var wu=(()=>{class t{static __NG_ELEMENT_ID__=HP}return t})(),UP=wu,$P=class extends UP{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Lw(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new hs(i)}};function HP(){return qP(et(),se())}function qP(t,e){return t.type&4?new $P(e,t,pu(t,e)):null}function ws(t,e,n,r,i){let o=t.data[e];if(o===null)o=zP(t,e,n,r,i),cR()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=sR();o.injectorIndex=s===null?-1:s.injectorIndex}return xr(o,!0),o}function zP(t,e,n,r,i){let o=kE(),s=$f(),c=s?o:o&&o.parent,u=t.data[e]=WP(t,c,n,e,r,i);return GP(t,u,o,s),u}function GP(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function WP(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return xE()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var az=new RegExp(`^(\\d+)*(${JR}|${ZR})*(.*)`);var KP=()=>null;function pf(t,e){return KP(t,e)}var QP=class{},nD=class{},gf=class{resolveComponentFactory(e){throw Error(`No component factory found for ${ot(e)}.`)}},Du=class{static NULL=new gf},Qc=class{},zn=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>YP()}return t})();function YP(){let t=se(),e=et(),n=$t(e.index,t);return(Hn(n)?n:t)[we]}var ZP=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>null})}return t})();var Th={},mf=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ru(r);let i=this.injector.get(e,Th,r);return i!==Th||n===Th?i:this.parentInjector.get(e,n,r)}};function yf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Ph(i,c);else if(o==2){let u=c,l=e[++s];r=Ph(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function re(t,e=J.Default){let n=se();if(n===null)return Ue(t,e);let r=et();return JE(r,n,Je(t),e)}function dz(){let t="invalid";throw new Error(t)}function mp(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c,u=null,l=null,h=XP(s);h===null?c=s:[c,u,l]=h,nx(t,e,n,c,o,u,l)}o!==null&&r!==null&&JP(n,r,o)}function JP(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new G(-301,!1);r.push(e[i],o)}}function XP(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let c=t[s];if(s===0&&Bt(c)&&(e=c),c.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,ex(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function ex(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function tx(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function nx(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let y=0;y<c;y++){let m=r[y];!u&&Bt(m)&&(u=!0,tx(t,n,y)),qh($c(n,e),t,m.type)}cx(n,t.data.length,c);for(let y=0;y<c;y++){let m=r[y];m.providersResolver&&m.providersResolver(m)}let l=!1,h=!1,p=Ow(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let y=0;y<c;y++){let m=r[y];if(n.mergedAttrs=Si(n.mergedAttrs,m.hostAttrs),ix(t,n,e,p,m),ax(p,m,i),s!==null&&s.has(m)){let[N,M]=s.get(m);n.directiveToIndex.set(m.type,[p,N+n.directiveStart,M+n.directiveStart])}else(o===null||!o.has(m))&&n.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let C=m.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}rx(t,n,o)}function rx(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))VI(0,e,i,r),VI(1,e,i,r),jI(e,r,!1);else{let o=n.get(i);LI(0,e,o,r),LI(1,e,o,r),jI(e,r,!0)}}}function VI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),rD(e,o)}}function LI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),rD(e,s)}}function rD(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function jI(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||np(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function ix(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Er(i.type,!0)),s=new Sr(o,Bt(i),re);t.blueprint[r]=s,n[r]=s,ox(t,e,r,Ow(t,n,i.hostVars,Nt),i)}function ox(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;sx(s)!=c&&s.push(c),s.push(n,r,o)}}function sx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function ax(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Bt(e)&&(n[""]=t)}}function cx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function iD(t,e,n,r,i,o,s,c){let u=e.consts,l=Ai(u,s),h=ws(e,t,2,r,l);return o&&mp(e,n,h,Ai(u,c),i),h.mergedAttrs=Si(h.mergedAttrs,h.attrs),h.attrs!==null&&yf(h,h.attrs,!1),h.mergedAttrs!==null&&yf(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function oD(t,e){Wf(t,e),jf(e)&&t.queries.elementEnd(e)}var Yc=class extends Du{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Dr(e);return new Ni(n,this.ngModule)}};function ux(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&vu.SignalBased)!==0};return i&&(o.transform=i),o})}function lx(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function dx(t,e,n){let r=e instanceof jt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new mf(n,r):n}function hx(t){let e=t.get(Qc,null);if(e===null)throw new G(407,!1);let n=t.get(ZP,null),r=t.get(Nr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function fx(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return Mw(e,n,n==="svg"?QN:n==="math"?YN:null)}var Ni=class extends nD{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=ux(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=lx(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=HM(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){fe(22);let o=te(null);try{let s=this.componentDef,c=r?["ng-version","19.2.11"]:qM(this.componentDef.selectors[0]),u=rp(0,null,null,1,0,null,null,null,null,[c],null),l=dx(s,i||this.ngModule,e),h=hx(l),p=h.rendererFactory.createRenderer(null,s),y=r?eP(p,r,s.encapsulation,l):fx(s,p),m=ip(null,u,null,512|kw(s),null,null,h,p,l,null,vw(y,l,!0));m[at]=y,zf(m);let C=null;try{let N=iD(at,u,m,"#host",()=>[this.componentDef],!0,0);y&&(xw(p,y,N),Li(y,m)),_u(u,m,N),ep(u,N,m),oD(u,N),n!==void 0&&px(N,this.ngContentSelectors,n),C=$t(N.index,m),m[st]=C[st],lp(u,m,null)}catch(N){throw C!==null&&Yh(C),Yh(m),N}finally{fe(23),Gf()}return new vf(this.componentType,m)}finally{te(o)}}},vf=class extends QP{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=AE(n[oe],at),this.location=pu(this._tNode,n),this.instance=$t(this._tNode.index,n)[st],this.hostView=this.changeDetectorRef=new hs(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=up(r,i[oe],i,e,n);this.previousInputValues.set(e,n);let s=$t(r.index,i);gp(s,1)}get injector(){return new Ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function px(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Tu=(()=>{class t{static __NG_ELEMENT_ID__=gx}return t})();function gx(){let t=et();return yx(t,se())}var mx=Tu,sD=class extends mx{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return pu(this._hostTNode,this._hostLView)}get injector(){return new Ir(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kf(this._hostTNode,this._hostLView);if(GE(e)){let n=Bc(e,this._hostLView),r=jc(e),i=n[oe].data[r+8];return new Ir(i,n)}else return new Ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=BI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-It}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=pf(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,lf(this._hostTNode,s)),c}createComponent(e,n,r,i,o){let s=e&&!zN(e),c;if(s)c=n;else{let C=n||{};c=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}let u=s?e:new Ni(Dr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(s?l:this.parentInjector).get(jt,null);N&&(o=N)}let h=Dr(u.componentType??{}),p=pf(this._lContainer,h?.id??null),y=p?.firstChild??null,m=u.create(l,i,y,o);return this.insertImpl(m.hostView,c,lf(this._hostTNode,p)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(JN(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Xe],l=new sD(u,u[ct],u[Xe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return eD(s,i,o,r),e.attachToViewContainerRef(),lE(bh(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=BI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ff(this._lContainer,n);r&&(Mc(bh(this._lContainer),n),Bw(r[oe],r))}detach(e){let n=this._adjustIndex(e,-1),r=ff(this._lContainer,n);return r&&Mc(bh(this._lContainer),n)!=null?new hs(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function BI(t){return t[Fc]}function bh(t){return t[Fc]||(t[Fc]=[])}function yx(t,e){let n,r=e[t.index];return gn(r)?n=r:(n=Xw(r,e,null,t),e[t.index]=n,op(e,n)),_x(n,e,t,r),new sD(n,t,e)}function vx(t,e){let n=t[we],r=n.createComment(""),i=qt(e,t),o=n.parentNode(i);return Gc(n,o,r,n.nextSibling(i),!1),r}var _x=wx,Ix=()=>!1;function Ex(t,e,n){return Ix(t,e,n)}function wx(t,e,n,r){if(t[br])return;let i;n.type&8?i=Ut(r):i=vx(e,n),t[br]=i}var Ri=class{},Dx=class{};var _f=class extends Ri{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Yc(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=fE(e);this._bootstrapComponents=Sw(o.bootstrap),this._r3Injector=nw(e,n,[{provide:Ri,useValue:this},{provide:Du,useValue:this.componentFactoryResolver},...r],ot(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},If=class extends Dx{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new _f(this.moduleType,e,[])}};var Zc=class extends Ri{injector;componentFactoryResolver=new Yc(this);instance=null;constructor(e){super();let n=new cs([...e.providers,{provide:Ri,useValue:this},{provide:Du,useValue:this.componentFactoryResolver}],e.parent||Vf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Tx(t,e,n=null){return new Zc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var bx=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=pE(!1,n.type),i=r.length>0?Tx([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=le({token:t,providedIn:"environment",factory:()=>new t(Ue(jt))})}return t})();function gz(t){return gs(()=>{let e=cD(t),n=ve(me({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===lw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(bx).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ds.Emulated,styles:t.styles||it,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&mu("NgStandalone"),uD(n);let r=t.dependencies;return n.directiveDefs=UI(r,!1),n.pipeDefs=UI(r,!0),n.id=Rx(n),n})}function Cx(t){return Dr(t)||xN(t)}function Ax(t){return t!==null}function Ds(t){return gs(()=>({type:t.type,bootstrap:t.bootstrap||it,declarations:t.declarations||it,imports:t.imports||it,exports:t.exports||it,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Sx(t,e){if(t==null)return wr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=vu.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function Nx(t){if(t==null)return wr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Se(t){return gs(()=>{let e=cD(t);return uD(e),e})}function aD(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function cD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||wr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||it,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Sx(t.inputs,e),outputs:Nx(t.outputs),debugInfo:null}}function uD(t){t.features?.forEach(e=>e(t))}function UI(t,e){if(!t)return null;let n=e?kN:Cx;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Ax)}function Rx(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Mx(t){return Object.getPrototypeOf(t.prototype).constructor}function wt(t){let e=Mx(t.type),n=!0,r=[t];for(;e;){let i;if(Bt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Ch(t.inputs),s.declaredInputs=Ch(t.declaredInputs),s.outputs=Ch(t.outputs);let c=i.hostBindings;c&&Fx(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&kx(t,u),l&&Ox(t,l),Px(t,i),hN(t.outputs,i.outputs),Bt(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===wt&&(n=!1)}}e=Object.getPrototypeOf(e)}xx(r)}function Px(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function xx(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Si(i.hostAttrs,n=Si(n,i.hostAttrs))}}function Ch(t){return t===wr?{}:t===it?[]:t}function kx(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Ox(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function Fx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function lD(t){return Lx(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Vx(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Lx(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function yp(t,e,n){return t[e]=n}function jx(t,e){return t[e]}function fn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Bx(t,e,n,r){let i=fn(t,e,n);return fn(t,e+1,r)||i}function Ux(t,e,n,r,i,o,s,c,u){let l=e.consts,h=ws(e,t,4,s||null,c||null);Uf()&&mp(e,n,h,Ai(l,u),cp),h.mergedAttrs=Si(h.mergedAttrs,h.attrs),Wf(e,h);let p=h.tView=rp(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function dD(t,e,n,r,i,o,s,c,u,l){let h=n+at,p=e.firstCreatePass?Ux(h,e,t,r,i,o,s,c,u):e.data[h];xr(p,!1);let y=Hx(e,t,p,n);lu()&&Iu(e,t,y,p),Li(y,t);let m=Xw(y,t,y,p);return t[h]=m,op(t,m),Ex(m,p,t),ou(p)&&_u(e,t,p),u!=null&&sp(t,p,l),p}function $x(t,e,n,r,i,o,s,c){let u=se(),l=ke(),h=Ai(l.consts,o);return dD(u,l,t,e,n,r,i,h,s,c),$x}var Hx=qx;function qx(t,e,n,r){return du(!0),e[we].createComment("")}var mz=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var zx=new H("");var Gx=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>new Ef})}return t})(),Ef=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function Ts(t){return!!t&&typeof t.then=="function"}function hD(t){return!!t&&typeof t.subscribe=="function"}var fD=new H("");function yz(t){return qn([{provide:fD,multi:!0,useValue:t}])}var pD=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=L(fD,{optional:!0})??[];injector=L(We);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Pi(this.injector,i);if(Ts(o))n.push(o);else if(hD(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Wx=new H("");function Kx(){Qd(()=>{throw new G(600,!1)})}function Qx(t){return t.isBoundToModule}var Yx=10;var fs=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(jR);afterRenderManager=L(yw);zonelessEnabled=L(Qf);rootEffectScheduler=L(Gx);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ht;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=L(_s).hasPendingTasks.pipe(ln(n=>!n));constructor(){L(gu,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=L(jt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=We.NULL){fe(10);let o=n instanceof nD;if(!this._injector.get(pD).done){let m="";throw new G(405,m)}let c;o?c=n:c=this._injector.get(Du).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=Qx(c)?void 0:this._injector.get(Ri),l=r||c.selector,h=c.create(i,[],l,u),p=h.location.nativeElement,y=h.injector.get(zx,null);return y?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Cc(this.components,h),y?.unregisterApplication(p)}),this._loadComponent(h),fe(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){fe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Xf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new G(101,!1);let n=te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,te(n),this.afterTick.next(),fe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Qc,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Yx;)fe(14),this.synchronizeOnce(),fe(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Zx(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>au(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Cc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Wx,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Cc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new G(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Zx(t,e,n,r){if(!n&&!au(t))return;Qw(t,e,n&&!r?0:1)}function vp(t,e,n,r){let i=se(),o=cu();if(fn(i,o,e)){let s=ke(),c=uu();cP(c,i,t,e,n,r)}return vp}function gD(t,e,n,r){return fn(t,cu(),n)?e+nu(n)+r:Nt}function wc(t,e){return t<<17|e<<2}function Mr(t){return t>>17&32767}function Jx(t){return(t&2)==2}function Xx(t,e){return t&131071|e<<17}function wf(t){return t|2}function Mi(t){return(t&131068)>>2}function Ah(t,e){return t&-131069|e<<2}function ek(t){return(t&1)===1}function Df(t){return t|1}function tk(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Mr(s),u=Mi(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ys(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let y=Mr(t[c+1]);t[r+1]=wc(y,c),y!==0&&(t[y+1]=Ah(t[y+1],r)),t[c+1]=Xx(t[c+1],r)}else t[r+1]=wc(c,0),c!==0&&(t[c+1]=Ah(t[c+1],r)),c=r;else t[r+1]=wc(u,0),c===0?c=r:t[u+1]=Ah(t[u+1],r),u=r;l&&(t[r+1]=wf(t[r+1])),$I(t,h,r,!0),$I(t,h,r,!1),nk(e,h,t,r,o),s=wc(c,u),o?e.classBindings=s:e.styleBindings=s}function nk(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ys(o,e)>=0&&(n[r+1]=Df(n[r+1]))}function $I(t,e,n,r){let i=t[n+1],o=e===null,s=r?Mr(i):Mi(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];rk(u,e)&&(c=!0,t[s+1]=r?Df(l):wf(l)),s=r?Mr(l):Mi(l)}c&&(t[n+1]=r?wf(i):Df(i))}function rk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ys(t,e)>=0:!1}var At={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ik(t){return t.substring(At.key,At.keyEnd)}function ok(t){return sk(t),mD(t,yD(t,0,At.textEnd))}function mD(t,e){let n=At.textEnd;return n===e?-1:(e=At.keyEnd=ak(t,At.key=e,n),yD(t,e,n))}function sk(t){At.key=0,At.keyEnd=0,At.value=0,At.valueEnd=0,At.textEnd=t.length}function yD(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ak(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function ck(t,e,n){let r=se(),i=cu();if(fn(r,i,e)){let o=ke(),s=uu();ap(o,s,r,t,e,r[we],n,!1)}return ck}function Tf(t,e,n,r,i){up(e,t,n,i?"class":"style",r)}function bu(t,e){return lk(t,e,null,!0),bu}function vz(t){dk(yk,uk,t,!0)}function uk(t,e){for(let n=ok(e);n>=0;n=mD(e,n))Of(t,ik(e),!0)}function lk(t,e,n,r){let i=se(),o=ke(),s=FE(2);if(o.firstUpdatePass&&_D(o,t,s,r),e!==Nt&&fn(i,s,e)){let c=o.data[kr()];ID(o,c,i,i[we],t,i[s+1]=_k(e,n),r,s)}}function dk(t,e,n,r){let i=ke(),o=FE(2);i.firstUpdatePass&&_D(i,null,o,r);let s=se();if(n!==Nt&&fn(s,o,n)){let c=i.data[kr()];if(ED(c,r)&&!vD(i,o)){let u=r?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=Ph(u,n||"")),Tf(i,c,s,n,r)}else vk(i,c,s,s[we],s[o+1],s[o+1]=mk(t,e,n),r,o)}}function vD(t,e){return e>=t.expandoStartIndex}function _D(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[kr()],s=vD(t,n);ED(o,r)&&e===null&&!s&&(e=!1),e=hk(i,o,e,r),tk(i,o,e,n,s,r)}}function hk(t,e,n,r){let i=dR(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Sh(null,t,e,n,r),n=ps(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Sh(i,t,e,n,r),o===null){let u=fk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Sh(null,t,e,u[1],r),u=ps(u,e.attrs,r),pk(t,e,r,u))}else o=gk(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function fk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Mi(r)!==0)return t[Mr(r)]}function pk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Mr(i)]=r}function gk(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ps(r,s,n)}return ps(r,e.attrs,n)}function Sh(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=ps(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function ps(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Of(t,s,n?!0:e[++o]))}return t===void 0?null:t}function mk(t,e,n){if(n==null||n==="")return it;let r=[],i=Is(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function yk(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Of(t,r,n)}function vk(t,e,n,r,i,o,s,c){i===Nt&&(i=it);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let y=u<i.length?i[u+1]:void 0,m=l<o.length?o[l+1]:void 0,C=null,N;h===p?(u+=2,l+=2,y!==m&&(C=p,N=m)):p===null||h!==null&&h<p?(u+=2,C=h):(l+=2,C=p,N=m),C!==null&&ID(t,e,n,r,C,N,s,c),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function ID(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=ek(l)?HI(u,e,n,i,Mi(l),s):void 0;if(!Jc(h)){Jc(o)||Jx(l)&&(o=HI(u,null,n,i,c,s));let p=CE(kr(),n);CP(r,s,p,i,o)}}function HI(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=n[i+1];y===Nt&&(y=p?it:void 0);let m=p?vh(y,r):h===r?y:void 0;if(l&&!Jc(m)&&(m=vh(u,r)),Jc(m)&&(c=m,s))return c;let C=t[i+1];i=s?Mr(C):Mi(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=vh(u,r))}return c}function Jc(t){return t!==void 0}function _k(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ot(Is(t)))),t}function ED(t,e){return(t.flags&(e?8:16))!==0}function wD(t,e,n,r){let i=se(),o=ke(),s=at+t,c=i[we],u=o.firstCreatePass?iD(s,o,i,e,cp,Uf(),n,r):o.data[s],l=Ek(o,i,u,c,e,t);i[s]=l;let h=ou(u);return xr(u,!0),xw(c,l,u),!hp(u)&&lu()&&Iu(o,i,l,u),(tR()===0||h)&&Li(l,i),nR(),h&&(_u(o,i,u),ep(o,u,i)),r!==null&&sp(i,u),wD}function DD(){let t=et();$f()?Hf():(t=t.parent,xr(t,!1));let e=t;iR(e)&&oR(),rR();let n=ke();return n.firstCreatePass&&oD(n,e),e.classesWithoutHost!=null&&yR(e)&&Tf(n,e,se(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&vR(e)&&Tf(n,e,se(),e.stylesWithoutHost,!1),DD}function Ik(t,e,n,r){return wD(t,e,n,r),DD(),Ik}var Ek=(t,e,n,r,i,o)=>(du(!0),Mw(r,i,pR()));function wk(t,e,n,r,i){let o=e.consts,s=Ai(o,r),c=ws(e,t,8,"ng-container",s);s!==null&&yf(c,s,!0);let u=Ai(o,i);return Uf()&&mp(e,n,c,u,cp),c.mergedAttrs=Si(c.mergedAttrs,c.attrs),e.queries!==null&&e.queries.elementStart(e,c),c}function Dk(t,e,n){let r=se(),i=ke(),o=t+at,s=i.firstCreatePass?wk(o,i,r,e,n):i.data[o];xr(s,!0);let c=bk(i,r,s,t);return r[o]=c,lu()&&Iu(i,r,c,s),Li(c,r),ou(s)&&(_u(i,r,s),ep(i,s,r)),n!=null&&sp(r,s),Dk}function Tk(){let t=et(),e=ke();return $f()?Hf():(t=t.parent,xr(t,!1)),e.firstCreatePass&&(Wf(e,t),jf(t)&&e.queries.elementEnd(t)),Tk}var bk=(t,e,n,r)=>(du(!0),WM(e[we],""));function _z(){return se()}var vr=void 0;function Ck(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var Ak=["en",[["a","p"],["AM","PM"],vr],[["AM","PM"],vr,vr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vr,"{1} 'at' {0}",vr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Ck],Nh={};function _p(t){let e=Sk(t),n=qI(e);if(n)return n;let r=e.split("-")[0];if(n=qI(r),n)return n;if(r==="en")return Ak;throw new G(701,!1)}function qI(t){return t in Nh||(Nh[t]=Un.ng&&Un.ng.common&&Un.ng.common.locales&&Un.ng.common.locales[t]),Nh[t]}var ji=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ji||{});function Sk(t){return t.toLowerCase().replace(/_/g,"-")}var Xc="en-US";var Nk=Xc;function Rk(t){typeof t=="string"&&(Nk=t.toLowerCase().replace(/_/g,"-"))}function zI(t,e,n){return function r(i){if(i===Function)return n;let o=ki(t)?$t(t.index,e):e;gp(o,5);let s=e[st],c=GI(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=GI(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function GI(t,e,n,r){let i=te(null);try{return fe(6,e,n),n(r)!==!1}catch(o){return Mk(t,o),!1}finally{fe(7,e,n),te(i)}}function Mk(t,e){let n=t[Tr],r=n?n.get(Rr,null):null;r&&r.handleError(e)}function WI(t,e,n,r,i,o){let s=e[n],c=e[oe],l=c.data[n].outputs[r],h=s[l],p=c.firstCreatePass?PE(c):null,y=ME(e),m=h.subscribe(o),C=y.length;y.push(o,m),p&&p.push(i,t.index,C,-(C+1))}var Pk=new Map;function Or(t,e,n,r){let i=se(),o=ke(),s=et();return TD(o,i,i[we],s,t,e,r),Or}function xk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[kc],u=i[o+2];return c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function TD(t,e,n,r,i,o,s){let c=ou(r),l=t.firstCreatePass?PE(t):null,h=ME(e),p=!0;if(r.type&3||s){let y=qt(r,e),m=s?s(y):y,C=h.length,N=s?k=>s(Ut(k[r.index])):r.index,M=null;if(!s&&c&&(M=xk(t,e,i,r.index)),M!==null){let k=M.__ngLastListenerFn__||M;k.__ngNextListenerFn__=o,M.__ngLastListenerFn__=o,p=!1}else{o=zI(r,e,o);let k=e[Tr].get(KR);Pk.get(k)?.(m,i,o);let $=n.listen(m,i,o);h.push(o,$),l&&l.push(i,N,C,C+1)}}else o=zI(r,e,o);if(p){let y=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let C=0;C<m.length;C+=2){let N=m[C],M=m[C+1];WI(r,e,N,M,i,o)}if(y&&y.length)for(let C of y)WI(r,e,C,i,i,o)}}function Iz(t=1){return fR(t)}function kk(t,e){let n=null,r=LM(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?Rw(t,o,!0):UM(r,o))return i}return n}function Ez(t){let e=se()[Et][ct];if(!e.projection){let n=t?t.length:1,r=e.projection=RN(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?kk(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function wz(t,e=0,n,r,i,o){let s=se(),c=ke(),u=r?t+1:null;u!==null&&dD(s,c,u,r,i,o,null,n);let l=ws(c,at+t,16,null,n||null);l.projection===null&&(l.projection=e),Hf();let p=!s[us]||xE();s[Et][ct].projection[l.projection]===null&&u!==null?Ok(s,c,u):p&&!hp(l)&&TP(c,s,l)}function Ok(t,e,n){let r=at+n,i=e.data[r],o=t[r],s=pf(o,i.tView.ssrId),c=Lw(t,i,void 0,{dehydratedView:s});eD(o,c,0,lf(i,s))}function Fk(t,e,n,r,i){let o=se(),s=gD(o,e,n,r);if(s!==Nt){let c=ke(),u=uu();ap(c,u,o,t,s,o[we],i,!1)}return Fk}function Vk(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Dz(t,e=""){let n=se(),r=ke(),i=t+at,o=r.firstCreatePass?ws(r,i,1,e,null):r.data[i],s=Lk(r,n,o,e,t);n[i]=s,lu()&&Iu(r,n,s,o),xr(o,!1)}var Lk=(t,e,n,r,i)=>(du(!0),zM(e[we],r));function jk(t){return bD("",t,""),jk}function bD(t,e,n){let r=se(),i=gD(r,t,e,n);return i!==Nt&&Bk(r,kr(),i),bD}function Bk(t,e,n){let r=CE(e,t);GM(t[we],r,n)}function Uk(t,e,n){cw(e)&&(e=e());let r=se(),i=cu();if(fn(r,i,e)){let o=ke(),s=uu();ap(o,s,r,t,e,r[we],n,!1)}return Uk}function Tz(t,e){let n=cw(t);return n&&t.set(e),n}function $k(t,e){let n=se(),r=ke(),i=et();return TD(r,n,n[we],i,t,e),$k}function Hk(t,e,n){let r=ke();if(r.firstCreatePass){let i=Bt(t);bf(n,r.data,r.blueprint,i,!0),bf(e,r.data,r.blueprint,i,!1)}}function bf(t,e,n,r,i){if(t=Je(t),Array.isArray(t))for(let o=0;o<t.length;o++)bf(t[o],e,n,r,i);else{let o=ke(),s=se(),c=et(),u=Ti(t)?t:Je(t.provide),l=vE(t),h=c.providerIndexes&1048575,p=c.directiveStart,y=c.providerIndexes>>20;if(Ti(t)||!t.multi){let m=new Sr(l,i,re),C=Mh(u,e,i?h:h+y,p);C===-1?(qh($c(c,s),o,u),Rh(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(m),s.push(m)):(n[C]=m,s[C]=m)}else{let m=Mh(u,e,h+y,p),C=Mh(u,e,h,h+y),N=m>=0&&n[m],M=C>=0&&n[C];if(i&&!M||!i&&!N){qh($c(c,s),o,u);let k=Gk(i?zk:qk,n.length,i,r,l);!i&&M&&(n[C].providerFactory=k),Rh(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=CD(n[i?C:m],l,!i&&r);Rh(o,t,m>-1?m:C,k)}!i&&r&&M&&n[C].componentProviders++}}}function Rh(t,e,n,r){let i=Ti(e),o=jN(e);if(i||o){let u=(o?Je(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function CD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Mh(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function qk(t,e,n,r,i){return Cf(this.multi,[])}function zk(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=Hc(r,r[oe],this.providerFactory.index,i);s=u.slice(0,c),Cf(o,s);for(let l=c;l<u.length;l++)s.push(u[l])}else s=[],Cf(o,s);return s}function Cf(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Gk(t,e,n,r,i){let o=new Sr(t,n,re);return o.multi=[],o.index=e,o.componentProviders=0,CD(o,i,r&&!n),o}function Gn(t,e=[]){return n=>{n.providersResolver=(r,i)=>Hk(r,i?i(t):t,e)}}function bz(t,e,n){let r=qf()+t,i=se();return i[r]===Nt?yp(i,r,n?e.call(n):e()):jx(i,r)}function Cz(t,e,n,r){return Wk(se(),qf(),t,e,n,r)}function AD(t,e){let n=t[e];return n===Nt?void 0:n}function Wk(t,e,n,r,i,o){let s=e+n;return fn(t,s,i)?yp(t,s+1,o?r.call(o,i):r(i)):AD(t,s+1)}function Kk(t,e,n,r,i,o,s){let c=e+n;return Bx(t,c,i,o)?yp(t,c+2,s?r.call(s,i,o):r(i,o)):AD(t,c+2)}function Az(t,e){let n=ke(),r,i=t+at;n.firstCreatePass?(r=Qk(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Er(r.type,!0)),s,c=rt(re);try{let u=Uc(!1),l=o();return Uc(u),Vk(n,se(),i,l),l}finally{rt(c)}}function Qk(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Sz(t,e,n,r){let i=t+at,o=se(),s=ZN(o,i);return Yk(o,i)?Kk(o,qf(),e,s.transform,n,r,s):s.transform(n,r)}function Yk(t,e){return t[oe].data[e].pure}var Pr=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},SD=new Pr("19.2.11"),Af=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Nz=(()=>{class t{compileModuleSync(n){return new If(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=fE(n),o=Sw(i.declarations).reduce((s,c)=>{let u=Dr(c);return u&&s.push(new Ni(u)),s},[]);return new Af(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Zk=(()=>{class t{zone=L(Ee);changeDetectionScheduler=L(Nr);applicationRef=L(fs);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Jk=new H("",{factory:()=>!1});function ND({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Ee(ve(me({},RD()),{scheduleInRootZone:n})),[{provide:Ee,useFactory:t},{provide:Pc,multi:!0,useFactory:()=>{let r=L(Zk,{optional:!0});return()=>r.initialize()}},{provide:Pc,multi:!0,useFactory:()=>{let r=L(Xk);return()=>{r.initialize()}}},e===!0?{provide:iw,useValue:!0}:[],{provide:ow,useValue:n??rw}]}function Rz(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=ND({ngZoneFactory:()=>{let i=RD(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&mu("NgZone_CoalesceEvent"),new Ee(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return qn([{provide:Jk,useValue:!0},{provide:Qf,useValue:!1},r])}function RD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Xk=(()=>{class t{subscription=new Ae;initialized=!1;zone=L(Ee);pendingTasks=L(_s);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var e1=(()=>{class t{appRef=L(fs);taskService=L(_s);ngZone=L(Ee);zonelessEnabled=L(Qf);tracing=L(gu,{optional:!0});disableScheduling=L(iw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ae;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(ow,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Qh||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?DI:sw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,DI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function t1(){return typeof $localize<"u"&&$localize.locale||Xc}var Cu=new H("",{providedIn:"root",factory:()=>L(Cu,J.Optional|J.SkipSelf)||t1()});var Sf=new H(""),n1=new H("");function is(t){return!t.moduleRef}function r1(t){let e=is(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ee);return n.run(()=>{is(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Rr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),is(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Sf);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Sf);s.add(o),t.moduleRef.onDestroy(()=>{Cc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return o1(r,n,()=>{let o=e.get(pD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Cu,Xc);if(Rk(s||Xc),!e.get(n1,!0))return is(t)?e.get(fs):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(is(t)){let u=e.get(fs);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return i1(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function i1(t,e){let n=t.injector.get(fs);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new G(-403,!1);e.push(t)}function o1(t,e,n){try{let r=n();return Ts(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ac=null;function s1(t=[],e){return We.create({name:e,providers:[{provide:yE,useValue:"platform"},{provide:Sf,useValue:new Set([()=>Ac=null])},...t]})}function a1(t=[]){if(Ac)return Ac;let e=s1(t);return Ac=e,Kx(),c1(e),e}function c1(t){let e=t.get(YR,null);Pi(t,()=>{e?.forEach(n=>n())})}function Ip(){return!1}var Au=(()=>{class t{static __NG_ELEMENT_ID__=u1}return t})();function u1(t){return l1(et(),se(),(t&16)===16)}function l1(t,e,n){if(ki(t)&&!n){let r=$t(t.index,e);return new hs(r,r)}else if(t.type&175){let r=e[Et];return new hs(r,e)}return null}var Nf=class{constructor(){}supports(e){return lD(e)}create(e){return new Rf(e)}},d1=(t,e)=>e,Rf=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||d1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<KI(r,i,o)?n:r,c=KI(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=c-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let m=y<o.length?o[y]:o[y]=0,C=m+y;h<=C&&C<l&&(o[y]=m+1)}let p=s.previousIndex;o[p]=h-l}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!lD(e))throw new G(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,c),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,c)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,Vx(e,c=>{s=this._trackByFn(i,c),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,c,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,s,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Mf(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new eu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new eu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Mf=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Pf=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},eu=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Pf,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function KI(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function QI(){return new Ep([new Nf])}var Ep=(()=>{class t{factories;static \u0275prov=le({token:t,providedIn:"root",factory:QI});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||QI()),deps:[[t,new NN,new pt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new G(901,!1)}}return t})();function Mz(t){fe(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=a1(r),o=[ND({}),{provide:Nr,useExisting:e1},...n||[]],s=new Zc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return r1({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{fe(9)}}function Su(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function zt(t){return Jd(t)}function Bi(t,e){return Kd(t,e?.equal)}var YI=class{[vt];constructor(e){this[vt]=e}destroy(){this[vt].destroy()}};function Pz(t){let e=Dr(t);if(!e)return null;let n=new Ni(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var bs=new H("");var xD=null;function Fr(){return xD}function h1(t){xD??=t}var wp=class{},Cs=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:()=>L(kD),providedIn:"platform"})}return t})(),f1=new H(""),kD=(()=>{class t extends Cs{_location;_history;_doc=L(bs);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fr().getBaseHref(this._doc)}onPopState(n){let r=Fr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Fr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Ru(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function MD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Rt(t){return t&&t[0]!=="?"?`?${t}`:t}var Ui=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:()=>L(OD),providedIn:"root"})}return t})(),Mu=new H(""),OD=(()=>{class t extends Ui{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(bs).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Ru(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Rt(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Rt(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Rt(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Ue(Cs),Ue(Mu,8))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),FD=(()=>{class t{_subject=new ht;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=m1(MD(PD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Rt(r))}normalize(n){return t.stripTrailingSlash(g1(this._basePath,PD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Rt(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Rt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Rt;static joinWithSlash=Ru;static stripTrailingSlash=MD;static \u0275fac=function(r){return new(r||t)(Ue(Ui))};static \u0275prov=le({token:t,factory:()=>p1(),providedIn:"root"})}return t})();function p1(){return new FD(Ue(Ui))}function g1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function PD(t){return t.replace(/\/index.html$/,"")}function m1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var y1=(()=>{class t extends Ui{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Ru(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Rt(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Rt(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Ue(Cs),Ue(Mu,8))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})();var Cp=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Cp||{});var Gt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function $i(t,e){let n=_p(t),r=n[ji.NumberSymbols][e];if(typeof r>"u"){if(e===Gt.CurrencyDecimal)return n[ji.NumberSymbols][Gt.Decimal];if(e===Gt.CurrencyGroup)return n[ji.NumberSymbols][Gt.Group]}return r}function UD(t,e){return _p(t)[ji.NumberFormats][e]}var v1=/^(\d+)?\.((\d+)(-(\d+))?)?$/,VD=22,Pu=".",As="0",_1=";",I1=",",Dp="#";function E1(t,e,n,r,i,o,s=!1){let c="",u=!1;if(!isFinite(t))c=$i(n,Gt.Infinity);else{let l=T1(t);s&&(l=D1(l));let h=e.minInt,p=e.minFrac,y=e.maxFrac;if(o){let V=o.match(v1);if(V===null)throw new Error(`${o} is not a valid digit info`);let $=V[1],ue=V[3],Fe=V[5];$!=null&&(h=Tp($)),ue!=null&&(p=Tp(ue)),Fe!=null?y=Tp(Fe):ue!=null&&p>y&&(y=p)}b1(l,p,y);let m=l.digits,C=l.integerLen,N=l.exponent,M=[];for(u=m.every(V=>!V);C<h;C++)m.unshift(0);for(;C<0;C++)m.unshift(0);C>0?M=m.splice(C,m.length):(M=m,m=[0]);let k=[];for(m.length>=e.lgSize&&k.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)k.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&k.unshift(m.join("")),c=k.join($i(n,r)),M.length&&(c+=$i(n,i)+M.join("")),N&&(c+=$i(n,Gt.Exponential)+"+"+N)}return t<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function $D(t,e,n){let r=UD(e,Cp.Decimal),i=w1(r,$i(e,Gt.MinusSign));return E1(t,i,e,Gt.Group,Gt.Decimal,n)}function w1(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(_1),i=r[0],o=r[1],s=i.indexOf(Pu)!==-1?i.split(Pu):[i.substring(0,i.lastIndexOf(As)+1),i.substring(i.lastIndexOf(As)+1)],c=s[0],u=s[1]||"";n.posPre=c.substring(0,c.indexOf(Dp));for(let h=0;h<u.length;h++){let p=u.charAt(h);p===As?n.minFrac=n.maxFrac=h+1:p===Dp?n.maxFrac=h+1:n.posSuf+=p}let l=c.split(I1);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let h=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(Dp);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function D1(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function T1(t){let e=Math.abs(t)+"",n=0,r,i,o,s,c;for((i=e.indexOf(Pu))>-1&&(e=e.replace(Pu,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===As;o++);if(o===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===As;)c--;for(i-=o,r=[],s=0;o<=c;o++,s++)r[s]=Number(e.charAt(o))}return i>VD&&(r=r.splice(0,VD-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function b1(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,c=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(c>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,h=r.reduceRight(function(p,y,m,C){return y=y+p,C[m]=y<10?y:y-10,u&&(C[m]===0&&m>=l?C.pop():u=!1),y>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function Tp(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var bp=/\s+/,LD=[],C1=(()=>{class t{_ngEl;_renderer;initialClasses=LD;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(bp):LD}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(bp):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(bp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(re(mn),re(zn))};static \u0275dir=Se({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var xu=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},HD=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new xu(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),jD(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);jD(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(re(Tu),re(wu),re(Ep))};static \u0275dir=Se({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function jD(t,e){t.context.$implicit=e.item}var A1=(()=>{class t{_viewContainer;_context=new ku;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){BD(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){BD(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(re(Tu),re(wu))};static \u0275dir=Se({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),ku=class{$implicit=null;ngIf=null};function BD(t,e){if(t&&!t.createEmbeddedView)throw new G(2020,!1)}function S1(t,e){return new G(2100,!1)}var N1=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!R1(n))return null;i||=this._locale;try{let o=M1(n);return $D(o,i,r)}catch(o){throw S1(t,o.message)}}static \u0275fac=function(r){return new(r||t)(re(Cu,16))};static \u0275pipe=aD({name:"number",type:t,pure:!0})}return t})();function R1(t){return!(t==null||t===""||t!==t)}function M1(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var P1=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ds({type:t});static \u0275inj=ms({})}return t})();function x1(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var qD="browser",zD="server";function k1(t){return t===qD}function O1(t){return t===zD}var Ap=class{};var vG=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>new Sp(L(bs),window)})}return t})(),Sp=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=F1(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function F1(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var tT=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(re(zn),re(mn))};static \u0275dir=Se({type:t})}return t})(),$u=(()=>{class t extends tT{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Fi(t)))(i||t)}})();static \u0275dir=Se({type:t,features:[wt]})}return t})(),ks=new H("");var V1={provide:ks,useExisting:Ht(()=>nT),multi:!0};function L1(){let t=Fr()?Fr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var j1=new H(""),nT=(()=>{class t extends tT{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!L1())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(re(zn),re(mn),re(j1,8))};static \u0275dir=Se({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Or("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Gn([V1]),wt]})}return t})();function B1(t){return t==null||U1(t)===0}function U1(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Pp=new H(""),rT=new H("");function $1(t){return B1(t.value)?{required:!0}:null}function GD(t){return null}function iT(t){return t!=null}function oT(t){return Ts(t)?Vt(t):t}function sT(t){let e={};return t.forEach(n=>{e=n!=null?me(me({},e),n):e}),Object.keys(e).length===0?null:e}function aT(t,e){return e.map(n=>n(t))}function H1(t){return!t.validate}function cT(t){return t.map(e=>H1(e)?e:n=>e.validate(n))}function q1(t){if(!t)return null;let e=t.filter(iT);return e.length==0?null:function(n){return sT(aT(n,e))}}function xp(t){return t!=null?q1(cT(t)):null}function z1(t){if(!t)return null;let e=t.filter(iT);return e.length==0?null:function(n){let r=aT(n,e).map(oT);return ph(r).pipe(ln(sT))}}function kp(t){return t!=null?z1(cT(t)):null}function WD(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function G1(t){return t._rawValidators}function W1(t){return t._rawAsyncValidators}function Np(t){return t?Array.isArray(t)?t:[t]:[]}function Fu(t,e){return Array.isArray(t)?t.includes(e):t===e}function KD(t,e){let n=Np(e);return Np(t).forEach(i=>{Fu(n,i)||n.push(i)}),n}function QD(t,e){return Np(e).filter(n=>!Fu(t,n))}var Vu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=kp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},zi=class extends Vu{name;get formDirective(){return null}get path(){return null}},xs=class extends Vu{_parent=null;name=null;valueAccessor=null},Lu=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},K1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},jG=ve(me({},K1),{"[class.ng-submitted]":"isSubmitted"}),BG=(()=>{class t extends Lu{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(re(xs,2))};static \u0275dir=Se({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&bu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[wt]})}return t})(),UG=(()=>{class t extends Lu{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(re(zi,10))};static \u0275dir=Se({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&bu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[wt]})}return t})();var Ss="VALID",Ou="INVALID",Hi="PENDING",Ns="DISABLED",Wn=class{},ju=class extends Wn{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Ms=class extends Wn{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Ps=class extends Wn{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},qi=class extends Wn{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Rp=class extends Wn{source;constructor(e){super(),this.source=e}},Mp=class extends Wn{source;constructor(e){super(),this.source=e}};function uT(t){return(Hu(t)?t.validators:t)||null}function Q1(t){return Array.isArray(t)?xp(t):t||null}function lT(t,e){return(Hu(e)?e.asyncValidators:t)||null}function Y1(t){return Array.isArray(t)?kp(t):t||null}function Hu(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Z1(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[n])throw new G(1001,"")}function J1(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new G(1002,"")})}var Bu=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return zt(this.statusReactive)}set status(e){zt(()=>this.statusReactive.set(e))}_status=Bi(()=>this.statusReactive());statusReactive=Vi(void 0);get valid(){return this.status===Ss}get invalid(){return this.status===Ou}get pending(){return this.status==Hi}get disabled(){return this.status===Ns}get enabled(){return this.status!==Ns}errors;get pristine(){return zt(this.pristineReactive)}set pristine(e){zt(()=>this.pristineReactive.set(e))}_pristine=Bi(()=>this.pristineReactive());pristineReactive=Vi(!0);get dirty(){return!this.pristine}get touched(){return zt(this.touchedReactive)}set touched(e){zt(()=>this.touchedReactive.set(e))}_touched=Bi(()=>this.touchedReactive());touchedReactive=Vi(!1);get untouched(){return!this.touched}_events=new ht;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(KD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(KD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(QD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(QD(e,this._rawAsyncValidators))}hasValidator(e){return Fu(this._rawValidators,e)}hasAsyncValidator(e){return Fu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ve(me({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ps(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ps(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ve(me({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ms(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ms(!0,r))}markAsPending(e={}){this.status=Hi;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qi(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ve(me({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ns,this.errors=null,this._forEachChild(i=>{i.disable(ve(me({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ju(this.value,r)),this._events.next(new qi(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ve(me({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ss,this._forEachChild(r=>{r.enable(ve(me({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ve(me({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ss||this.status===Hi)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ju(this.value,n)),this._events.next(new qi(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ve(me({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ns:Ss}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Hi,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=oT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new qi(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ft,this.statusChanges=new ft}_calculateStatus(){return this._allControlsDisabled()?Ns:this.errors?Ou:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hi)?Hi:this._anyControlsHaveStatus(Ou)?Ou:Ss}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Ms(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ps(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Hu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Q1(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Y1(this._rawAsyncValidators)}},Uu=class extends Bu{constructor(e,n,r){super(uT(n),lT(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){J1(this,!0,e),Object.keys(e).forEach(r=>{Z1(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Op=new H("",{providedIn:"root",factory:()=>Fp}),Fp="always";function X1(t,e){return[...e.path,t]}function dT(t,e,n=Fp){hT(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),tO(t,e),rO(t,e),nO(t,e),eO(t,e)}function YD(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function eO(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function hT(t,e){let n=G1(t);e.validator!==null?t.setValidators(WD(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=W1(t);e.asyncValidator!==null?t.setAsyncValidators(WD(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();YD(e._rawValidators,i),YD(e._rawAsyncValidators,i)}function tO(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&fT(t,e)})}function nO(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&fT(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function fT(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function rO(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function iO(t,e){t==null,hT(t,e)}function oO(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function sO(t){return Object.getPrototypeOf(t.constructor)===$u}function aO(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function cO(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===nT?n=o:sO(o)?r=o:i=o}),i||r||n||null}var uO={provide:zi,useExisting:Ht(()=>lO)},Rs=Promise.resolve(),lO=(()=>{class t extends zi{callSetDisabledState;get submitted(){return zt(this.submittedReactive)}_submitted=Bi(()=>this.submittedReactive());submittedReactive=Vi(!1);_directives=new Set;form;ngSubmit=new ft;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Uu({},xp(n),kp(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Rs.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),dT(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Rs.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Rs.then(()=>{let r=this._findContainer(n.path),i=new Uu({});iO(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Rs.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Rs.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),aO(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Rp(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new Mp(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(re(Pp,10),re(rT,10),re(Op,8))};static \u0275dir=Se({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Or("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Gn([uO]),wt]})}return t})();function ZD(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function JD(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var dO=class extends Bu{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(uT(n),lT(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(JD(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){JD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var hO={provide:xs,useExisting:Ht(()=>fO)},XD=Promise.resolve(),fO=(()=>{class t extends xs{_changeDetectorRef;callSetDisabledState;control=new dO;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ft;constructor(n,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=cO(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),oO(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){dT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){XD.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Su(r);XD.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?X1(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(re(zi,9),re(Pp,10),re(rT,10),re(ks,10),re(Au,8),re(Op,8))};static \u0275dir=Se({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Gn([hO]),wt,su]})}return t})();var HG=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Se({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),pO={provide:ks,useExisting:Ht(()=>gO),multi:!0},gO=(()=>{class t extends $u{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Fi(t)))(i||t)}})();static \u0275dir=Se({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Or("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Gn([pO]),wt]})}return t})();var mO={provide:ks,useExisting:Ht(()=>gT),multi:!0};function pT(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function yO(t){return t.split(":")[0]}var gT=(()=>{class t extends $u{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r=this._getOptionId(n),i=pT(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=yO(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Fi(t)))(i||t)}})();static \u0275dir=Se({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Or("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Gn([mO]),wt]})}return t})(),qG=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(pT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(re(mn),re(zn),re(gT,9))};static \u0275dir=Se({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),vO={provide:ks,useExisting:Ht(()=>mT),multi:!0};function eT(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function _O(t){return t.split(":")[0]}var mT=(()=>{class t extends $u{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let u=s[c],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let c=0;c<s.length;c++){let u=s[c];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=_O(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Fi(t)))(i||t)}})();static \u0275dir=Se({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Or("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Gn([vO]),wt]})}return t})(),zG=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(eT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(eT(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(re(mn),re(zn),re(mT,9))};static \u0275dir=Se({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var IO=(()=>{class t{_validator=GD;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):GD,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Se({type:t,features:[su]})}return t})();var EO={provide:Pp,useExisting:Ht(()=>wO),multi:!0};var wO=(()=>{class t extends IO{required;inputName="required";normalizeInput=Su;createValidator=n=>$1;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Fi(t)))(i||t)}})();static \u0275dir=Se({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&vp("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Gn([EO]),wt]})}return t})();var DO=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ds({type:t});static \u0275inj=ms({})}return t})();var GG=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Op,useValue:n.callSetDisabledState??Fp}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ds({type:t});static \u0275inj=ms({imports:[DO]})}return t})();var yT=()=>{};var IT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},TO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},qu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,y=(c&15)<<2|l>>6,m=l&63;u||(m=64,s||(y=64)),r.push(n[h],n[p],n[y],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Lp;let y=o<<2|c>>4;if(r.push(y),l!==64){let m=c<<4&240|l>>2;if(r.push(m),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Lp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},bO=function(t){let e=IT(t);return qu.encodeByteArray(e,!0)},Fs=function(t){return bO(t).replace(/\./g,"")},zu=function(t){try{return qu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Bp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var CO=()=>Bp().__FIREBASE_DEFAULTS__,AO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&zu(t[1]);return e&&JSON.parse(e)},Gu=()=>{try{return yT()||CO()||AO()||SO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Up=t=>{var e,n;return(n=(e=Gu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ET=t=>{let e=Up(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$p=()=>{var t;return(t=Gu())===null||t===void 0?void 0:t.config},Hp=t=>{var e;return(e=Gu())===null||e===void 0?void 0:e[`_${t}`]};var Vr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Lr(t){return t.endsWith(".cloudworkstations.dev")}function Wu(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function wT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fs(JSON.stringify(n)),Fs(JSON.stringify(s)),""].join(".")}var Os={};function NO(){let t={prod:[],emulator:[]};for(let e of Object.keys(Os))Os[e]?t.emulator.push(e):t.prod.push(e);return t}function RO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var vT=!1;function Gi(t,e){if(typeof window>"u"||typeof document>"u"||!Lr(window.location.host)||Os[t]===e||Os[t]||vT)return;Os[t]=e;function n(y){return`__firebase__banner__${y}`}let r="__firebase__banner",o=NO().prod.length>0;function s(){let y=document.getElementById(r);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,m){y.setAttribute("width","24"),y.setAttribute("id",m),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function l(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{vT=!0,s()},y}function h(y,m){y.setAttribute("id",m),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=RO(r),m=n("text"),C=document.getElementById(m)||document.createElement("span"),N=n("learnmore"),M=document.getElementById(N)||document.createElement("a"),k=n("preprendIcon"),V=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let $=y.element;c($),h(M,N);let ue=l();u(V,k),$.append(V,C,M,ue),document.body.appendChild($)}o?(C.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function MO(){var t;let e=(t=Gu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AT(){let t=Ve();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ST(){return!MO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vs(){try{return typeof indexedDB=="object"}catch{return!1}}function NT(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var PO="FirebaseError",gt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}},Mt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?xO(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new gt(i,c,r)}};function xO(t,e){return t.replace(kO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var kO=/\{\$([^}]+)}/g;function RT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wt(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(_T(o)&&_T(s)){if(!Wt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function _T(t){return t!==null&&typeof t=="object"}function Ls(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wi(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ki(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MT(t,e){let n=new jp(t,e);return n.subscribe.bind(n)}var jp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Vp),i.error===void 0&&(i.error=Vp),i.complete===void 0&&(i.complete=Vp);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function OO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vp(){}var ZG=4*60*60*1e3;function Oe(t){return t&&t._delegate?t._delegate:t}var tt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var jr="[DEFAULT]";var qp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Vr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VO(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FO(t){return t===jr?void 0:t}function VO(t){return t.instantiationMode==="EAGER"}var Ku=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new qp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var LO=[],ee=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ee||{}),jO={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},BO=ee.INFO,UO={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},$O=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=UO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Kt=class{constructor(e){this.name=e,this._logLevel=BO,this._logHandler=$O,this._userLogHandler=null,LO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}};var HO=(t,e)=>e.some(n=>t instanceof n),PT,xT;function qO(){return PT||(PT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zO(){return xT||(xT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var kT=new WeakMap,Gp=new WeakMap,OT=new WeakMap,zp=new WeakMap,Kp=new WeakMap;function GO(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Qt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&kT.set(n,t)}).catch(()=>{}),Kp.set(e,t),e}function WO(t){if(Gp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Gp.set(t,e)}var Wp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FT(t){Wp=t(Wp)}function KO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Qu(this),e,...n);return OT.set(r,e.sort?e.sort():[e]),Qt(r)}:zO().includes(t)?function(...e){return t.apply(Qu(this),e),Qt(kT.get(this))}:function(...e){return Qt(t.apply(Qu(this),e))}}function QO(t){return typeof t=="function"?KO(t):(t instanceof IDBTransaction&&WO(t),HO(t,qO())?new Proxy(t,Wp):t)}function Qt(t){if(t instanceof IDBRequest)return GO(t);if(zp.has(t))return zp.get(t);let e=QO(t);return e!==t&&(zp.set(t,e),Kp.set(e,t)),e}var Qu=t=>Kp.get(t);function LT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=Qt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Qt(s.result),u.oldVersion,u.newVersion,Qt(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var YO=["get","getKey","getAll","getAllKeys","count"],ZO=["put","add","delete","clear"],Qp=new Map;function VT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=ZO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YO.includes(n)))return;let o=function(s,...c){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Qp.set(e,o),o}FT(t=>ve(me({},t),{get:(e,n,r)=>VT(e,n)||t.get(e,n,r),has:(e,n)=>!!VT(e,n)||t.has(e,n)}));var Zp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JO(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function JO(t){let e=t.getComponent();return e?.type==="VERSION"}var Jp="@firebase/app",jT="0.12.3";var vn=new Kt("@firebase/app"),XO="@firebase/app-compat",eF="@firebase/analytics-compat",tF="@firebase/analytics",nF="@firebase/app-check-compat",rF="@firebase/app-check",iF="@firebase/auth",oF="@firebase/auth-compat",sF="@firebase/database",aF="@firebase/data-connect",cF="@firebase/database-compat",uF="@firebase/functions",lF="@firebase/functions-compat",dF="@firebase/installations",hF="@firebase/installations-compat",fF="@firebase/messaging",pF="@firebase/messaging-compat",gF="@firebase/performance",mF="@firebase/performance-compat",yF="@firebase/remote-config",vF="@firebase/remote-config-compat",_F="@firebase/storage",IF="@firebase/storage-compat",EF="@firebase/firestore",wF="@firebase/vertexai",DF="@firebase/firestore-compat",TF="firebase",bF="11.7.3";var Xp="[DEFAULT]",CF={[Jp]:"fire-core",[XO]:"fire-core-compat",[tF]:"fire-analytics",[eF]:"fire-analytics-compat",[rF]:"fire-app-check",[nF]:"fire-app-check-compat",[iF]:"fire-auth",[oF]:"fire-auth-compat",[sF]:"fire-rtdb",[aF]:"fire-data-connect",[cF]:"fire-rtdb-compat",[uF]:"fire-fn",[lF]:"fire-fn-compat",[dF]:"fire-iid",[hF]:"fire-iid-compat",[fF]:"fire-fcm",[pF]:"fire-fcm-compat",[gF]:"fire-perf",[mF]:"fire-perf-compat",[yF]:"fire-rc",[vF]:"fire-rc-compat",[_F]:"fire-gcs",[IF]:"fire-gcs-compat",[EF]:"fire-fst",[DF]:"fire-fst-compat",[wF]:"fire-vertex","fire-js":"fire-js",[TF]:"fire-js-all"};var js=new Map,AF=new Map,eg=new Map;function BT(t,e){try{t.container.addComponent(e)}catch(n){vn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pt(t){let e=t.name;if(eg.has(e))return vn.debug(`There were multiple attempts to register component ${e}.`),!1;eg.set(e,t);for(let n of js.values())BT(n,t);for(let n of AF.values())BT(n,t);return!0}function Qi(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ut(t){return t==null?!1:t.settings!==void 0}var SF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kn=new Mt("app","Firebase",SF);var tg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}};var Qn=bF;function ig(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Xp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Kn.create("bad-app-name",{appName:String(i)});if(n||(n=$p()),!n)throw Kn.create("no-options");let o=js.get(i);if(o){if(Wt(n,o.options)&&Wt(r,o.config))return o;throw Kn.create("duplicate-app",{appName:i})}let s=new Ku(i);for(let u of eg.values())s.addComponent(u);let c=new tg(n,r,s);return js.set(i,c),c}function Br(t=Xp){let e=js.get(t);if(!e&&t===Xp&&$p())return ig();if(!e)throw Kn.create("no-app",{appName:t});return e}function Yu(){return Array.from(js.values())}function be(t,e,n){var r;let i=(r=CF[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vn.warn(c.join(" "));return}Pt(new tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var NF="firebase-heartbeat-database",RF=1,Bs="firebase-heartbeat-store",Yp=null;function qT(){return Yp||(Yp=LT(NF,RF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bs)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kn.create("idb-open",{originalErrorMessage:t.message})})),Yp}function MF(t){return _(this,null,function*(){try{let n=(yield qT()).transaction(Bs),r=yield n.objectStore(Bs).get(zT(t));return yield n.done,r}catch(e){if(e instanceof gt)vn.warn(e.message);else{let n=Kn.create("idb-get",{originalErrorMessage:e?.message});vn.warn(n.message)}}})}function UT(t,e){return _(this,null,function*(){try{let r=(yield qT()).transaction(Bs,"readwrite");yield r.objectStore(Bs).put(e,zT(t)),yield r.done}catch(n){if(n instanceof gt)vn.warn(n.message);else{let r=Kn.create("idb-set",{originalErrorMessage:n?.message});vn.warn(r.message)}}})}function zT(t){return`${t.name}!${t.options.appId}`}var PF=1024,xF=30,ng=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new rg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$T();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>xF){let s=OF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=$T(),{heartbeatsToSend:r,unsentEntries:i}=kF(this._heartbeatsCache.heartbeats),o=Fs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return vn.warn(n),""}})}};function $T(){return new Date().toISOString().substring(0,10)}function kF(t,e=PF){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),HT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),HT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var rg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Vs()?NT().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield MF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return UT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return UT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function HT(t){return Fs(JSON.stringify({version:2,heartbeats:t})).length}function OF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function FF(t){Pt(new tt("platform-logger",e=>new Zp(e),"PRIVATE")),Pt(new tt("heartbeat",e=>new ng(e),"PRIVATE")),be(Jp,jT,t),be(Jp,jT,"esm2017"),be("fire-js","")}FF("");var VF="firebase",LF="11.7.3";be(VF,LF,"app");function og(t){t===void 0&&(Lf(og),t=L(We));let e=t.get(fu);return n=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var Yn=new Pr("ANGULARFIRE2_VERSION");function Us(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Zi=(t,e)=>{let n=e?[e]:Yu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Yi=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(Yi||{}),GT=Ip()&&typeof Zone<"u"?Yi.WARN:Yi.SILENT;var Zu=class{zone;delegate;constructor(e,n=dh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Zn=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=L(Ee);this.outsideAngular=n.runOutsideAngular(()=>new Zu(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Zu(typeof Zone>"u"?void 0:Zone.current,ts))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),WT=!1;function jF(t,e){!WT&&(GT>Yi.SILENT||Ip())&&(WT=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),GT>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function BF(t){let e=L(Ee,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Ur(t){let e=L(Ee,{optional:!0});return e?e.run(()=>t()):t()}var UF=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Pi(n,()=>Ur(()=>t.apply(void 0,r)))),Ne=(t,e,n)=>(n||=e?Yi.WARN:Yi.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=L(Zn),s=L(fu),c=L(jt)}catch{return jF(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Ur(()=>s.add())),i[l]=UF(i[l],r,c));let u=BF(()=>t.apply(this,i));return e?u instanceof ne?u.pipe(Bn(o.outsideAngular),jn(o.insideAngular),og(c)):u instanceof Promise?Ur(()=>new Promise((l,h)=>{s.run(()=>u).then(p=>Pi(c,()=>Ur(()=>l(p))),p=>Pi(c,()=>Ur(()=>h(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Ur(()=>u):u instanceof ne?u.pipe(Bn(o.outsideAngular),jn(o.insideAngular)):Ur(()=>u)});var _n=class{constructor(e){return e}},$r=class{constructor(){return Yu()}};function $F(t){return t&&t.length===1?t[0]:new _n(Br())}var sg=new H("angularfire2._apps"),HF={provide:_n,useFactory:$F,deps:[[new pt,sg]]},qF={provide:$r,deps:[[new pt,sg]]};function zF(t){return(e,n)=>{let r=n.get(Jf);be("angularfire",Yn.full,"core"),be("angularfire",Yn.full,"app"),be("angular",SD.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new _n(i)}}function Q8(t,...e){return qn([HF,qF,{provide:sg,useFactory:zF(t),multi:!0,deps:[Ee,We,Zn,...e]}])}var Y8=Ne(ig,!0);var GF=new Map,WF={activated:!1,tokenObservers:[]},KF={initialized:!1,enabled:!1};function xt(t){return GF.get(t)||Object.assign({},WF)}function ZT(){return KF}var QF="https://content-firebaseappcheck.googleapis.com/v1";var YF="exchangeDebugToken",KT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},o5=24*60*60*1e3;var ug=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Vr,this.pending.promise.catch(n=>{}),yield ZF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Vr,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function ZF(t){return new Promise(e=>{setTimeout(e,t)})}var JF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Jn=new Mt("appCheck","AppCheck",JF);function JT(t){if(!xt(t).activated)throw Jn.create("use-before-activation",{appName:t.name})}function XT(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(m){throw Jn.create("fetch-network-error",{originalErrorMessage:m?.message})}if(u.status!==200)throw Jn.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(m){throw Jn.create("fetch-parse-error",{originalErrorMessage:m?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Jn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,y=Date.now();return{token:l.token,expireTimeMillis:y+p,issuedAtTimeMillis:y}})}function eb(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${QF}/projects/${n}/apps/${r}:${YF}?key=${i}`,body:{debug_token:e}}}var XF="firebase-app-check-database",eV=1,lg="firebase-app-check-store";var Ju=null;function tV(){return Ju||(Ju=new Promise((t,e)=>{try{let n=indexedDB.open(XF,eV);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Jn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(lg,{keyPath:"compositeKey"})}}}catch(n){e(Jn.create("storage-open",{originalErrorMessage:n?.message}))}}),Ju)}function nV(t,e){return rV(iV(t),e)}function rV(t,e){return _(this,null,function*(){let r=(yield tV()).transaction(lg,"readwrite"),o=r.objectStore(lg).put({compositeKey:t,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(Jn.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function iV(t){return`${t.options.appId}-${t.name}`}var $s=new Kt("@firebase/app-check");function ag(t,e){return Vs()?nV(t,e).catch(n=>{$s.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function tb(){return ZT().enabled}function nb(){return _(this,null,function*(){let t=ZT();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var oV={error:"UNKNOWN_ERROR"};function sV(t){return qu.encodeString(JSON.stringify(t),!1)}function dg(t,e=!1,n=!1){return _(this,null,function*(){let r=t.app;JT(r);let i=xt(r),o=i.token,s;if(o&&!Hs(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Hs(l)?o=l:yield ag(r,void 0))}if(!e&&o&&Hs(o))return{token:o.token};let c=!1;if(tb())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=XT(eb(r,yield nb()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield ag(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?$s.warn(l.message):n&&$s.error(l),cg(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield xt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?$s.warn(l.message):n&&$s.error(l),s=l}let u;return o?s?Hs(o)?u={token:o.token,internalError:s}:u=cg(s):(u={token:o.token},i.token=o,yield ag(r,o)):u=cg(s),c&&lV(r,u),u})}function aV(t){return _(this,null,function*(){let e=t.app;JT(e);let{provider:n}=xt(e);if(tb()){let r=yield nb(),{token:i}=yield XT(eb(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function cV(t,e,n,r){let{app:i}=t,o=xt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Hs(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),QT(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>QT(t))}function rb(t,e){let n=xt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function QT(t){let{app:e}=t,n=xt(e),r=n.tokenRefresher;r||(r=uV(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function uV(t){let{app:e}=t;return new ug(()=>_(null,null,function*(){let n=xt(e),r;if(n.token?r=yield dg(t,!0):r=yield dg(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=xt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},KT.RETRIAL_MIN_WAIT,KT.RETRIAL_MAX_WAIT)}function lV(t,e){let n=xt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Hs(t){return t.expireTimeMillis-Date.now()>0}function cg(t){return{token:sV(oV),error:t}}var hg=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=xt(this.app);for(let n of e)rb(this.app,n.next);return Promise.resolve()}};function dV(t,e){return new hg(t,e)}function hV(t){return{getToken:e=>dg(t,e),getLimitedUseToken:()=>aV(t),addTokenListener:e=>cV(t,"INTERNAL",e),removeTokenListener:e=>rb(t.app,e)}}var fV="@firebase/app-check",pV="0.9.3";var gV="app-check",YT="app-check-internal";function mV(){Pt(new tt(gV,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return dV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(YT).initialize()})),Pt(new tt(YT,t=>{let e=t.getProvider("app-check").getImmediate();return hV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),be(fV,pV)}mV();var yV="app-check";var Ji=class{constructor(){return Zi(yV)}};var vV=["localhost","0.0.0.0","127.0.0.1"],v5=typeof window<"u"&&vV.includes(window.location.hostname);function _b(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ib=_b,Eb=new Mt("auth","Firebase",_b());var il=new Kt("@firebase/auth");function _V(t,...e){il.logLevel<=ee.WARN&&il.warn(`Auth (${Qn}): ${t}`,...e)}function el(t,...e){il.logLevel<=ee.ERROR&&il.error(`Auth (${Qn}): ${t}`,...e)}function Zt(t,...e){throw Vg(t,...e)}function Hr(t,...e){return Vg(t,...e)}function wb(t,e,n){let r=Object.assign(Object.assign({},Ib()),{[e]:n});return new Mt("auth","Firebase",r).create(e,{appName:t.name})}function wn(t){return wb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Eb.create(t,...e)}function U(t,e,...n){if(!t)throw Vg(e,...n)}function In(t){let e="INTERNAL ASSERTION FAILED: "+t;throw el(e),new Error(e)}function tr(t,e){t||In(e)}function mg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IV(){return ib()==="http:"||ib()==="https:"}function ib(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function EV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IV()||bT()||"connection"in navigator)?navigator.onLine:!0}function wV(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var qr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,tr(n>e,"Short delay should be less than long delay!"),this.isMobile=DT()||CT()}get(){return EV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Lg(t,e){tr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var ol=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;In("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;In("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;In("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var DV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var TV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bV=new qr(3e4,6e4);function nr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Dn(o,s,c,u){return _(this,arguments,function*(t,e,n,r,i={}){return Db(t,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Ls(Object.assign({key:t.config.apiKey},h)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let m=Object.assign({method:e,headers:y},l);return TT()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(m.credentials="include"),ol.fetch()(yield Tb(t,t.config.apiHost,n,p),m)}))})}function Db(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},DV),e);try{let i=new yg(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Xu(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xu(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Xu(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Xu(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw wb(t,h,l);Zt(t,h)}}catch(i){if(i instanceof gt)throw i;Zt(t,"network-request-failed",{message:String(i)})}})}function Zs(o,s,c,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Dn(t,e,n,r,i);return"mfaPendingCredential"in l&&Zt(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function Tb(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Lg(t.config,i):`${t.config.apiScheme}://${i}`;return TV.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function CV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var yg=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hr(this.auth,"network-request-failed")),bV.get())})}};function Xu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Hr(t,e,r);return i.customData._tokenResponse=n,i}function ob(t){return t!==void 0&&t.enterprise!==void 0}var vg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function AV(t,e){return _(this,null,function*(){return Dn(t,"GET","/v2/recaptchaConfig",nr(t,e))})}function SV(t,e){return _(this,null,function*(){return Dn(t,"POST","/v1/accounts:delete",e)})}function sl(t,e){return _(this,null,function*(){return Dn(t,"POST","/v1/accounts:lookup",e)})}function zs(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function jg(t,e=!1){return _(this,null,function*(){let n=Oe(t),r=yield n.getIdToken(e),i=Bg(r);U(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:zs(fg(i.auth_time)),issuedAtTime:zs(fg(i.iat)),expirationTime:zs(fg(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function fg(t){return Number(t)*1e3}function Bg(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return el("JWT malformed, contained fewer than 3 sections"),null;try{let i=zu(n);return i?JSON.parse(i):(el("Failed to decode base64 JWT payload"),null)}catch(i){return el("Caught error parsing JWT payload as JSON",i?.toString()),null}}function sb(t){let e=Bg(t);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Xi(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof gt&&NV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function NV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var _g=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ws=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zs(this.lastLoginAt),this.creationTime=zs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function al(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Xi(t,sl(n,{idToken:r}));U(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?bb(o.providerUserInfo):[],c=RV(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ws(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Ug(t){return _(this,null,function*(){let e=Oe(t);yield al(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function RV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bb(t){return t.map(e=>{var{providerId:n}=e,r=hh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function MV(t,e){return _(this,null,function*(){let n=yield Db(t,{},()=>_(null,null,function*(){let r=Ls({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield Tb(t,i,"/v1/token",`key=${o}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ol.fetch()(s,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function PV(t,e){return _(this,null,function*(){return Dn(t,"POST","/v2/accounts:revokeToken",nr(t,e))})}var Gs=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){U(e.length!==0,"internal-error");let n=sb(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield MV(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(U(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(U(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(U(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return In("not implemented")}};function Xn(t,e){U(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var er=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=hh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _g(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ws(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Xi(this,this.stsTokenManager.getToken(this.auth,e));return U(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return jg(this,e)}reload(){return Ug(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield al(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(ut(this.auth.app))return Promise.reject(wn(this.auth));let e=yield this.getIdToken();return yield Xi(this,SV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,V=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:$,emailVerified:ue,isAnonymous:Fe,providerData:he,stsTokenManager:D}=n;U($&&D,e,"internal-error");let v=Gs.fromJSON(this.name,D);U(typeof $=="string",e,"internal-error"),Xn(p,e.name),Xn(y,e.name),U(typeof ue=="boolean",e,"internal-error"),U(typeof Fe=="boolean",e,"internal-error"),Xn(m,e.name),Xn(C,e.name),Xn(N,e.name),Xn(M,e.name),Xn(k,e.name),Xn(V,e.name);let E=new t({uid:$,auth:e,email:y,emailVerified:ue,displayName:p,isAnonymous:Fe,photoURL:C,phoneNumber:m,tenantId:N,stsTokenManager:v,createdAt:k,lastLoginAt:V});return he&&Array.isArray(he)&&(E.providerData=he.map(w=>Object.assign({},w))),M&&(E._redirectEventId=M),E}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new Gs;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield al(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];U(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?bb(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Gs;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ws(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var ab=new Map;function En(t){tr(t instanceof Function,"Expected a class definition");let e=ab.get(t);return e?(tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ab.set(t,e),e)}var xV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ig=xV;function tl(t,e,n){return`firebase:${t}:${e}:${n}`}var cl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=tl(this.userKey,i.apiKey,o),this.fullPersistenceKey=tl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield sl(this.auth,{idToken:e}).catch(()=>{});return n?er._fromGetAccountInfoResponse(this.auth,n,e):null}return er._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(En(Ig),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||En(Ig),s=tl(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let y=yield sl(e,{idToken:h}).catch(()=>{});if(!y)break;p=yield er._fromGetAccountInfoResponse(e,y,h)}else p=er._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function cb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mb(e))return"Blackberry";if(Pb(e))return"Webos";if(Ab(e))return"Safari";if((e.includes("chrome/")||Sb(e))&&!e.includes("edge/"))return"Chrome";if(Rb(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Cb(t=Ve()){return/firefox\//i.test(t)}function Ab(t=Ve()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sb(t=Ve()){return/crios\//i.test(t)}function Nb(t=Ve()){return/iemobile/i.test(t)}function Rb(t=Ve()){return/android/i.test(t)}function Mb(t=Ve()){return/blackberry/i.test(t)}function Pb(t=Ve()){return/webos/i.test(t)}function $g(t=Ve()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kV(t=Ve()){var e;return $g(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OV(){return AT()&&document.documentMode===10}function xb(t=Ve()){return $g(t)||Rb(t)||Pb(t)||Mb(t)||/windows phone/i.test(t)||Nb(t)}function kb(t,e=[]){let n;switch(t){case"Browser":n=cb(Ve());break;case"Worker":n=`${cb(Ve())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qn}/${r}`}var Eg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function FV(n){return _(this,arguments,function*(t,e={}){return Dn(t,"GET","/v2/passwordPolicy",nr(t,e))})}var VV=6,wg=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:VV,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Dg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ul(this),this.idTokenSubscription=new ul(this),this.beforeStateQueue=new Eg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=En(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield cl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield sl(this,{idToken:e}),r=yield er._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(ut(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield al(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=wV()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(ut(this.app))return Promise.reject(wn(this));let n=e?Oe(e):null;return n&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return ut(this.app)?Promise.reject(wn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ut(this.app)?Promise.reject(wn(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(En(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield FV(this),n=new wg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield PV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&En(e)||this._popupRedirectResolver;U(n,this,"argument-error"),this.redirectPersistenceManager=yield cl.create(this,[En(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&_V(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Gr(t){return Oe(t)}var ul=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=MT(n=>this.observer=n)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ml={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LV(t){ml=t}function Ob(t){return ml.loadJS(t)}function jV(){return ml.recaptchaEnterpriseScript}function BV(){return ml.gapiScript}function Fb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Tg=class{constructor(){this.enterprise=new bg}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},bg=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var UV="recaptcha-enterprise",Vb="NO_RECAPTCHA",Cg=class{constructor(e){this.type=UV,this.auth=Gr(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,c)=>_(null,null,function*(){AV(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new vg(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{c(u)})}))})}function i(o,s,c){let u=window.grecaptcha;ob(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(Vb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tg().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(c=>{if(!n&&ob(window.grecaptcha))i(c,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=jV();u.length!==0&&(u+=c),Ob(u).then(()=>{i(c,o,s)}).catch(l=>{s(l)})}}).catch(c=>{s(c)})})})}};function qs(t,e,n,r=!1,i=!1){return _(this,null,function*(){let o=new Cg(t),s;if(i)s=Vb;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let u=c.phoneEnrollmentInfo.phoneNumber,l=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:s}):Object.assign(c,{captchaResponse:s}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function Ag(t,e,n,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let c=yield qs(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(c=>_(null,null,function*(){if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield qs(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let c=yield qs(t,e,n);return r(t,c).catch(u=>_(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield qs(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let c=yield qs(t,e,n,!1,!0);return r(t,c)}else return Promise.reject(i+" provider is not supported.")})}function Hg(t,e){let n=Qi(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Wt(o,e??{}))return i;Zt(i,"already-initialized")}return n.initialize({options:e})}function $V(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(En);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function qg(t,e,n){let r=Gr(t);U(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=Lb(e),{host:s,port:c}=HV(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){U(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),U(Wt(l,r.config.emulator)&&Wt(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Lr(s)?(Gi("Auth",!0),Wu(`${o}//${s}${u}`)):i||qV()}function Lb(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HV(t){let e=Lb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:ub(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:ub(s)}}}function ub(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function qV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ks=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return In("not implemented")}_getIdTokenResponse(e){return In("not implemented")}_linkToIdToken(e,n){return In("not implemented")}_getReauthenticationResolver(e){return In("not implemented")}};function zV(t,e){return _(this,null,function*(){return Dn(t,"POST","/v1/accounts:signUp",e)})}function GV(t,e){return _(this,null,function*(){return Zs(t,"POST","/v1/accounts:signInWithPassword",nr(t,e))})}function WV(t,e){return _(this,null,function*(){return Zs(t,"POST","/v1/accounts:signInWithEmailLink",nr(t,e))})}function KV(t,e){return _(this,null,function*(){return Zs(t,"POST","/v1/accounts:signInWithEmailLink",nr(t,e))})}var Qs=class t extends Ks{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ag(e,n,"signInWithPassword",GV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return WV(e,{email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ag(e,r,"signUpPassword",zV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return KV(e,{idToken:n,email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function pg(t,e){return _(this,null,function*(){return Zs(t,"POST","/v1/accounts:signInWithIdp",nr(t,e))})}function QV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YV(t){let e=Wi(Ki(t)).link,n=e?Wi(Ki(e)).deep_link_id:null,r=Wi(Ki(t)).deep_link_id;return(r?Wi(Ki(r)).link:null)||r||n||e||t}var ll=class t{constructor(e){var n,r,i,o,s,c;let u=Wi(Ki(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=QV((i=u.mode)!==null&&i!==void 0?i:null);U(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let n=YV(e);try{return new t(n)}catch{return null}}};var jb=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Qs._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=ll.parseLink(r);return U(i,"argument-error"),Qs._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),dl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Sg=class extends dl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function ZV(t,e){return _(this,null,function*(){return Zs(t,"POST","/v1/accounts:signUp",nr(t,e))})}var eo=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield er._fromIdTokenResponse(e,r,i),s=lb(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=lb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function lb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Ng=class t extends gt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function Bb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ng._fromErrorAndOperation(t,o,e,r):o})}function JV(t,e,n=!1){return _(this,null,function*(){let r=yield Xi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return eo._forOperation(t,"link",r)})}function XV(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(ut(r.app))return Promise.reject(wn(r));let i="reauthenticate";try{let o=yield Xi(t,Bb(r,i,e,t),n);U(o.idToken,r,"internal-error");let s=Bg(o.idToken);U(s,r,"internal-error");let{sub:c}=s;return U(t.uid===c,r,"user-mismatch"),eo._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Zt(r,"user-mismatch"),o}})}function Ub(t,e,n=!1){return _(this,null,function*(){if(ut(t.app))return Promise.reject(wn(t));let r="signIn",i=yield Bb(t,r,e),o=yield eo._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function zg(t,e){return _(this,null,function*(){return Ub(Gr(t),e)})}function $b(t){return _(this,null,function*(){let e=Gr(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Gg(t,e,n){return _(this,null,function*(){if(ut(t.app))return Promise.reject(wn(t));let r=Gr(t),s=yield Ag(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZV,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&$b(t),u}),c=yield eo._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(c.user),c})}function Wg(t,e,n){return ut(t.app)?Promise.reject(wn(t)):zg(Oe(t),jb.credential(e,n)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&$b(t),r}))}function eL(t,e){return _(this,null,function*(){return Dn(t,"POST","/v1/accounts:update",e)})}function Kg(r,i){return _(this,arguments,function*(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;let o=Oe(t),c={idToken:yield o.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=yield Xi(o,eL(o.auth,c));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function Qg(t,e,n,r){return Oe(t).onIdTokenChanged(e,n,r)}function Yg(t,e,n){return Oe(t).beforeAuthStateChanged(e,n)}function Zg(t,e,n,r){return Oe(t).onAuthStateChanged(e,n,r)}function Jg(t){return Oe(t).signOut()}var hl="__sak";var fl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hl,"1"),this.storage.removeItem(hl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var tL=1e3,nL=10,rL=(()=>{class t extends fl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xb(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);OV()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,nL):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},tL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Vn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Vn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Vn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Hb=rL;var iL=(()=>{class t extends fl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Xg=iL;function oL(t){return Promise.all(t.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var sL=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield oL(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function qb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Rg=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=qb("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Yt(){return window}function aL(t){Yt().location.href=t}function zb(){return typeof Yt().WorkerGlobalScope<"u"&&typeof Yt().importScripts=="function"}function cL(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function uL(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lL(){return zb()?self:null}var Gb="firebaseLocalStorageDb",dL=1,pl="firebaseLocalStorage",Wb="fbase_key",zr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function yl(t,e){return t.transaction([pl],e?"readwrite":"readonly").objectStore(pl)}function hL(){let t=indexedDB.deleteDatabase(Gb);return new zr(t).toPromise()}function Mg(){let t=indexedDB.open(Gb,dL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(pl,{keyPath:Wb})}catch(i){n(i)}}),t.addEventListener("success",()=>_(null,null,function*(){let r=t.result;r.objectStoreNames.contains(pl)?e(r):(r.close(),yield hL(),e(yield Mg()))}))})}function db(t,e,n){return _(this,null,function*(){let r=yl(t,!0).put({[Wb]:e,value:n});return new zr(r).toPromise()})}function fL(t,e){return _(this,null,function*(){let n=yl(t,!1).get(e),r=yield new zr(n).toPromise();return r===void 0?null:r.value})}function hb(t,e){let n=yl(t,!0).delete(e);return new zr(n).toPromise()}var pL=800,gL=3,mL=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Mg(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>gL)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return zb()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=sL._getInstance(lL()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield cL(),!this.activeServiceWorker)return;this.sender=new Rg(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||uL()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Mg();return yield db(n,hl,"1"),yield hb(n,hl),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>db(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>fL(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>hb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=yl(o,!1).getAll();return new zr(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),pL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Kb=mL;var C5=Fb("rcb"),A5=new qr(3e4,6e4);function yL(t,e){return e?En(e):(U(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ys=class extends Ks{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pg(e,this._buildIdpRequest())}_linkToIdToken(e,n){return pg(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return pg(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function vL(t){return Ub(t.auth,new Ys(t),t.bypassAuthState)}function _L(t){let{auth:e,user:n}=t;return U(n,e,"internal-error"),XV(n,new Ys(t),t.bypassAuthState)}function IL(t){return _(this,null,function*(){let{auth:e,user:n}=t;return U(n,e,"internal-error"),JV(n,new Ys(t),t.bypassAuthState)})}var Pg=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vL;case"linkViaPopup":case"linkViaRedirect":return IL;case"reauthViaPopup":case"reauthViaRedirect":return _L;default:Zt(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var S5=new qr(2e3,1e4);var EL="pendingRedirect",nl=new Map,xg=class t extends Pg{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=nl.get(this.auth._key());if(!e){try{let r=(yield wL(this.resolver,this.auth))?yield Vn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nl.set(this.auth._key(),e)}return this.bypassAuthState||nl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Vn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Vn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function wL(t,e){return _(this,null,function*(){let n=bL(e),r=TL(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function DL(t,e){nl.set(t._key(),e)}function TL(t){return En(t._redirectPersistence)}function bL(t){return tl(EL,t.config.apiKey,t.name)}function CL(t,e,n=!1){return _(this,null,function*(){if(ut(t.app))return Promise.reject(wn(t));let r=Gr(t),i=yL(r,e),s=yield new xg(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var AL=10*60*1e3,kg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Qb(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Hr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AL&&this.cachedEventUids.clear(),this.cachedEventUids.has(fb(e))}saveEventToCache(e){this.cachedEventUids.add(fb(e)),this.lastProcessedEventTime=Date.now()}};function fb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Qb({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function SL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qb(t);default:return!1}}function NL(n){return _(this,arguments,function*(t,e={}){return Dn(t,"GET","/v1/projects",e)})}var RL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ML=/^https?/;function PL(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield NL(t);for(let n of e)try{if(xL(n))return}catch{}Zt(t,"unauthorized-domain")})}function xL(t){let e=mg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!ML.test(n))return!1;if(RL.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var kL=new qr(3e4,6e4);function pb(){let t=Yt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OL(t){return new Promise((e,n)=>{var r,i,o;function s(){pb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pb(),n(Hr(t,"network-request-failed"))},timeout:kL.get()})}if(!((i=(r=Yt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Yt().gapi)===null||o===void 0)&&o.load)s();else{let c=Fb("iframefcb");return Yt()[c]=()=>{gapi.load?s():n(Hr(t,"network-request-failed"))},Ob(`${BV()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw rl=null,e})}var rl=null;function FL(t){return rl=rl||OL(t),rl}var VL=new qr(5e3,15e3),LL="__/auth/iframe",jL="emulator/auth/iframe",BL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $L(t){let e=t.config;U(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Lg(e,jL):`https://${t.config.authDomain}/${LL}`,r={apiKey:e.apiKey,appName:t.name,v:Qn},i=UL.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ls(r).slice(1)}`}function HL(t){return _(this,null,function*(){let e=yield FL(t),n=Yt().gapi;return U(n,t,"internal-error"),e.open({where:document.body,url:$L(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BL,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Hr(t,"network-request-failed"),c=Yt().setTimeout(()=>{o(s)},VL.get());function u(){Yt().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var qL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zL=500,GL=600,WL="_blank",KL="http://localhost",gl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function QL(t,e,n,r=zL,i=GL){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},qL),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ve().toLowerCase();n&&(c=Sb(l)?WL:n),Cb(l)&&(e=e||KL,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[m,C])=>`${y}${m}=${C},`,"");if(kV(l)&&c!=="_self")return YL(e||"",c),new gl(null);let p=window.open(e||"",c,h);U(p,t,"popup-blocked");try{p.focus()}catch{}return new gl(p)}function YL(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ZL="__/auth/handler",JL="emulator/auth/handler",XL=encodeURIComponent("fac");function gb(t,e,n,r,i,o){return _(this,null,function*(){U(t.config.authDomain,t,"auth-domain-config-required"),U(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qn,eventId:i};if(e instanceof dl){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",RT(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Sg){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield t._getAppCheckToken(),l=u?`#${XL}=${encodeURIComponent(u)}`:"";return`${e2(t)}?${Ls(c).slice(1)}${l}`})}function e2({config:t}){return t.emulator?Lg(t,JL):`https://${t.authDomain}/${ZL}`}var gg="webStorageSupport",Og=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xg,this._completeRedirectFn=CL,this._overrideRedirectResult=DL}_openPopup(e,n,r,i){return _(this,null,function*(){var o;tr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield gb(e,n,r,mg(),i);return QL(e,s,qb())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield gb(e,n,r,mg(),i);return aL(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(tr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield HL(e),r=new kg(e);return n.register("authEvent",i=>(U(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gg,{type:gg},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[gg];s!==void 0&&n(!!s),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xb()||Ab()||$g()}},Yb=Og;var mb="@firebase/auth",yb="1.10.4";var Fg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function t2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n2(t){Pt(new tt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;U(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kb(t)},l=new Dg(r,i,o,u);return $V(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pt(new tt("auth-internal",e=>{let n=Gr(e.getProvider("auth").getImmediate());return(r=>new Fg(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),be(mb,yb,t2(t)),be(mb,yb,"esm2017")}var r2=5*60,i2=Hp("authIdTokenMaxAge")||r2,vb=null,o2=t=>e=>_(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>i2)return;let i=n?.token;vb!==i&&(vb=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function em(t=Br()){let e=Qi(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Hg(t,{popupRedirectResolver:Yb,persistence:[Kb,Hb,Xg]}),r=Hp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=o2(o.toString());Yg(n,s,()=>s(n.currentUser)),Qg(n,c=>s(c))}}let i=Up("auth");return i?qg(n,`http://${i}`):Gi("Auth",!1),n}function s2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}LV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Hr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",s2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n2("Browser");var Zb="auth",Js=class{constructor(e){return e}},Xs=class{constructor(){return Zi(Zb)}};var tm=new H("angularfire2.auth-instances");function W2(t,e){let n=Us(Zb,t,e);return n&&new Js(n)}function K2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Js(r)}}var Q2={provide:Xs,deps:[[new pt,tm]]},Y2={provide:Js,useFactory:W2,deps:[[new pt,tm],_n]};function pW(t,...e){return be("angularfire",Yn.full,"auth"),qn([Y2,Q2,{provide:tm,useFactory:K2(t),multi:!0,deps:[Ee,We,Zn,$r,[new pt,Ji],...e]}])}var gW=Ne(Gg,!0,2);var mW=Ne(em,!0);var yW=Ne(Zg,!0);var vW=Ne(Wg,!0,2);var _W=Ne(Jg,!0,2);var IW=Ne(Kg,!0,2);var Jb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xb={};var Tn,nm;(function(){var t;function e(D,v){function E(){}E.prototype=v.prototype,D.D=v.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(w,T,A){for(var I=Array(arguments.length-2),on=2;on<arguments.length;on++)I[on-2]=arguments[on];return v.prototype[T].apply(w,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,E){E||(E=0);var w=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)w[T]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(T=0;16>T;++T)w[T]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=D.g[0],E=D.g[1],T=D.g[2];var A=D.g[3],I=v+(A^E&(T^A))+w[0]+3614090360&4294967295;v=E+(I<<7&4294967295|I>>>25),I=A+(T^v&(E^T))+w[1]+3905402710&4294967295,A=v+(I<<12&4294967295|I>>>20),I=T+(E^A&(v^E))+w[2]+606105819&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(v^T&(A^v))+w[3]+3250441966&4294967295,E=T+(I<<22&4294967295|I>>>10),I=v+(A^E&(T^A))+w[4]+4118548399&4294967295,v=E+(I<<7&4294967295|I>>>25),I=A+(T^v&(E^T))+w[5]+1200080426&4294967295,A=v+(I<<12&4294967295|I>>>20),I=T+(E^A&(v^E))+w[6]+2821735955&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(v^T&(A^v))+w[7]+4249261313&4294967295,E=T+(I<<22&4294967295|I>>>10),I=v+(A^E&(T^A))+w[8]+1770035416&4294967295,v=E+(I<<7&4294967295|I>>>25),I=A+(T^v&(E^T))+w[9]+2336552879&4294967295,A=v+(I<<12&4294967295|I>>>20),I=T+(E^A&(v^E))+w[10]+4294925233&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(v^T&(A^v))+w[11]+2304563134&4294967295,E=T+(I<<22&4294967295|I>>>10),I=v+(A^E&(T^A))+w[12]+1804603682&4294967295,v=E+(I<<7&4294967295|I>>>25),I=A+(T^v&(E^T))+w[13]+4254626195&4294967295,A=v+(I<<12&4294967295|I>>>20),I=T+(E^A&(v^E))+w[14]+2792965006&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(v^T&(A^v))+w[15]+1236535329&4294967295,E=T+(I<<22&4294967295|I>>>10),I=v+(T^A&(E^T))+w[1]+4129170786&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(v^E))+w[6]+3225465664&4294967295,A=v+(I<<9&4294967295|I>>>23),I=T+(v^E&(A^v))+w[11]+643717713&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(T^A))+w[0]+3921069994&4294967295,E=T+(I<<20&4294967295|I>>>12),I=v+(T^A&(E^T))+w[5]+3593408605&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(v^E))+w[10]+38016083&4294967295,A=v+(I<<9&4294967295|I>>>23),I=T+(v^E&(A^v))+w[15]+3634488961&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(T^A))+w[4]+3889429448&4294967295,E=T+(I<<20&4294967295|I>>>12),I=v+(T^A&(E^T))+w[9]+568446438&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(v^E))+w[14]+3275163606&4294967295,A=v+(I<<9&4294967295|I>>>23),I=T+(v^E&(A^v))+w[3]+4107603335&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(T^A))+w[8]+1163531501&4294967295,E=T+(I<<20&4294967295|I>>>12),I=v+(T^A&(E^T))+w[13]+2850285829&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(v^E))+w[2]+4243563512&4294967295,A=v+(I<<9&4294967295|I>>>23),I=T+(v^E&(A^v))+w[7]+1735328473&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(T^A))+w[12]+2368359562&4294967295,E=T+(I<<20&4294967295|I>>>12),I=v+(E^T^A)+w[5]+4294588738&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^T)+w[8]+2272392833&4294967295,A=v+(I<<11&4294967295|I>>>21),I=T+(A^v^E)+w[11]+1839030562&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^v)+w[14]+4259657740&4294967295,E=T+(I<<23&4294967295|I>>>9),I=v+(E^T^A)+w[1]+2763975236&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^T)+w[4]+1272893353&4294967295,A=v+(I<<11&4294967295|I>>>21),I=T+(A^v^E)+w[7]+4139469664&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^v)+w[10]+3200236656&4294967295,E=T+(I<<23&4294967295|I>>>9),I=v+(E^T^A)+w[13]+681279174&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^T)+w[0]+3936430074&4294967295,A=v+(I<<11&4294967295|I>>>21),I=T+(A^v^E)+w[3]+3572445317&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^v)+w[6]+76029189&4294967295,E=T+(I<<23&4294967295|I>>>9),I=v+(E^T^A)+w[9]+3654602809&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^T)+w[12]+3873151461&4294967295,A=v+(I<<11&4294967295|I>>>21),I=T+(A^v^E)+w[15]+530742520&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^v)+w[2]+3299628645&4294967295,E=T+(I<<23&4294967295|I>>>9),I=v+(T^(E|~A))+w[0]+4096336452&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~T))+w[7]+1126891415&4294967295,A=v+(I<<10&4294967295|I>>>22),I=T+(v^(A|~E))+w[14]+2878612391&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~v))+w[5]+4237533241&4294967295,E=T+(I<<21&4294967295|I>>>11),I=v+(T^(E|~A))+w[12]+1700485571&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~T))+w[3]+2399980690&4294967295,A=v+(I<<10&4294967295|I>>>22),I=T+(v^(A|~E))+w[10]+4293915773&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~v))+w[1]+2240044497&4294967295,E=T+(I<<21&4294967295|I>>>11),I=v+(T^(E|~A))+w[8]+1873313359&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~T))+w[15]+4264355552&4294967295,A=v+(I<<10&4294967295|I>>>22),I=T+(v^(A|~E))+w[6]+2734768916&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~v))+w[13]+1309151649&4294967295,E=T+(I<<21&4294967295|I>>>11),I=v+(T^(E|~A))+w[4]+4149444226&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~T))+w[11]+3174756917&4294967295,A=v+(I<<10&4294967295|I>>>22),I=T+(v^(A|~E))+w[2]+718787259&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~v))+w[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+A&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var E=v-this.blockSize,w=this.B,T=this.h,A=0;A<v;){if(T==0)for(;A<=E;)i(this,D,A),A+=this.blockSize;if(typeof D=="string"){for(;A<v;)if(w[T++]=D.charCodeAt(A++),T==this.blockSize){i(this,w),T=0;break}}else for(;A<v;)if(w[T++]=D[A++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var E=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=E&255,E/=256;for(this.u(D),D=Array(16),v=E=0;4>v;++v)for(var w=0;32>w;w+=8)D[E++]=this.g[v]>>>w&255;return D};function o(D,v){var E=c;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=v(D)}function s(D,v){this.h=v;for(var E=[],w=!0,T=D.length-1;0<=T;T--){var A=D[T]|0;w&&A==v||(E[T]=A,w=!1)}this.g=E}var c={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return M(l(-D));for(var v=[],E=1,w=0;D>=E;w++)v[w]=D/E|0,E*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return M(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),w=p,T=0;T<D.length;T+=8){var A=Math.min(8,D.length-T),I=parseInt(D.substring(T,T+A),v);8>A?(A=l(Math.pow(v,A)),w=w.j(A).add(l(I))):(w=w.j(E),w=w.add(l(I)))}return w}var p=u(0),y=u(1),m=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-M(this).m();for(var D=0,v=1,E=0;E<this.g.length;E++){var w=this.i(E);D+=(0<=w?w:4294967296+w)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(N(this))return"-"+M(this).toString(D);for(var v=l(Math.pow(D,6)),E=this,w="";;){var T=ue(E,v).g;E=k(E,T.j(v));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=T,C(E))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=k(this,D),N(D)?-1:C(D)?0:1};function M(D){for(var v=D.g.length,E=[],w=0;w<v;w++)E[w]=~D.g[w];return new s(E,~D.h).add(y)}t.abs=function(){return N(this)?M(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0,T=0;T<=v;T++){var A=w+(this.i(T)&65535)+(D.i(T)&65535),I=(A>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);w=I>>>16,A&=65535,I&=65535,E[T]=I<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(D,v){return D.add(M(v))}t.j=function(D){if(C(this)||C(D))return p;if(N(this))return N(D)?M(this).j(M(D)):M(M(this).j(D));if(N(D))return M(this.j(M(D)));if(0>this.l(m)&&0>D.l(m))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,E=[],w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<D.g.length;T++){var A=this.i(w)>>>16,I=this.i(w)&65535,on=D.i(T)>>>16,So=D.i(T)&65535;E[2*w+2*T]+=I*So,V(E,2*w+2*T),E[2*w+2*T+1]+=A*So,V(E,2*w+2*T+1),E[2*w+2*T+1]+=I*on,V(E,2*w+2*T+1),E[2*w+2*T+2]+=A*on,V(E,2*w+2*T+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function V(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function $(D,v){this.g=D,this.h=v}function ue(D,v){if(C(v))throw Error("division by zero");if(C(D))return new $(p,p);if(N(D))return v=ue(M(D),v),new $(M(v.g),M(v.h));if(N(v))return v=ue(D,M(v)),new $(M(v.g),v.h);if(30<D.g.length){if(N(D)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=y,w=v;0>=w.l(D);)E=Fe(E),w=Fe(w);var T=he(E,1),A=he(w,1);for(w=he(w,2),E=he(E,2);!C(w);){var I=A.add(w);0>=I.l(D)&&(T=T.add(E),A=I),w=he(w,1),E=he(E,1)}return v=k(D,T.j(v)),new $(T,v)}for(T=p;0<=D.l(v);){for(E=Math.max(1,Math.floor(D.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=l(E),I=A.j(v);N(I)||0<I.l(D);)E-=w,A=l(E),I=A.j(v);C(A)&&(A=y),T=T.add(A),D=k(D,I)}return new $(T,D)}t.A=function(D){return ue(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)&D.i(w);return new s(E,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)|D.i(w);return new s(E,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)^D.i(w);return new s(E,this.h^D.h)};function Fe(D){for(var v=D.g.length+1,E=[],w=0;w<v;w++)E[w]=D.i(w)<<1|D.i(w-1)>>>31;return new s(E,D.h)}function he(D,v){var E=v>>5;v%=32;for(var w=D.g.length-E,T=[],A=0;A<w;A++)T[A]=0<v?D.i(A+E)>>>v|D.i(A+E+1)<<32-v:D.i(A+E);return new s(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nm=Xb.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Tn=Xb.Integer=s}).apply(typeof Jb<"u"?Jb:typeof self<"u"?self:typeof window<"u"?window:{});var vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bn={};var rm,Z2,to,im,ea,_l,om,sm,am;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof vl=="object"&&vl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var b=a[g];if(!(b in f))break e;f=f[b]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var f=0,g=!1,b={next:function(){if(!g&&f<a.length){var S=f++;return{value:d(S,a[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,f){return f})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),a.apply(d,b)}}return function(){return a.apply(d,arguments)}}function y(a,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function m(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function C(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,b,S){for(var x=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)x[pe-2]=arguments[pe];return d.prototype[b].apply(g,x)}}function N(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function M(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=a.length||0,S=g.length||0;a.length=b+S;for(let x=0;x<S;x++)a[b+x]=g[x]}else a.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(a){return/^[\s\xa0]*$/.test(a)}function $(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ue(a){return ue[" "](a),a}ue[" "]=function(){};var Fe=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function he(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function D(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function v(a){let d={};for(let f in a)d[f]=a[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)a[f]=g[f];for(let S=0;S<E.length;S++)f=E[S],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function T(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function A(a){c.setTimeout(()=>{throw a},0)}function I(){var a=dd;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class on{constructor(){this.h=this.g=null}add(d,f){let g=So.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var So=new k(()=>new NA,a=>a.reset());class NA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let No,Ro=!1,dd=new on,Sv=()=>{let a=c.Promise.resolve(void 0);No=()=>{a.then(RA)}};var RA=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){A(f)}var d=So;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Ro=!1};function xn(){this.s=this.s,this.C=this.C}xn.prototype.s=!1,xn.prototype.ma=function(){this.s||(this.s=!0,this.N())},xn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var MA=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function Mo(a,d){if(He.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Fe){e:{try{ue(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:PA[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Mo.aa.h.call(this)}}C(Mo,He);var PA={2:"touch",3:"pen",4:"mouse"};Mo.prototype.h=function(){Mo.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Po="closure_listenable_"+(1e6*Math.random()|0),xA=0;function kA(a,d,f,g,b){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++xA,this.da=this.fa=!1}function Ta(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ba(a){this.src=a,this.g={},this.h=0}ba.prototype.add=function(a,d,f,g,b){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var x=fd(a,d,g,b);return-1<x?(d=a[x],f||(d.fa=!1)):(d=new kA(d,this.src,S,!!g,b),d.fa=f,a.push(d)),d};function hd(a,d){var f=d.type;if(f in a.g){var g=a.g[f],b=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=b)&&Array.prototype.splice.call(g,b,1),S&&(Ta(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function fd(a,d,f,g){for(var b=0;b<a.length;++b){var S=a[b];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return b}return-1}var pd="closure_lm_"+(1e6*Math.random()|0),gd={};function Nv(a,d,f,g,b){if(g&&g.once)return Mv(a,d,f,g,b);if(Array.isArray(d)){for(var S=0;S<d.length;S++)Nv(a,d[S],f,g,b);return null}return f=_d(f),a&&a[Po]?a.K(d,f,l(g)?!!g.capture:!!g,b):Rv(a,d,f,!1,g,b)}function Rv(a,d,f,g,b,S){if(!d)throw Error("Invalid event type");var x=l(b)?!!b.capture:!!b,pe=yd(a);if(pe||(a[pd]=pe=new ba(a)),f=pe.add(d,f,g,x,S),f.proxy)return f;if(g=OA(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)MA||(b=x),b===void 0&&(b=!1),a.addEventListener(d.toString(),g,b);else if(a.attachEvent)a.attachEvent(xv(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function OA(){function a(f){return d.call(a.src,a.listener,f)}let d=FA;return a}function Mv(a,d,f,g,b){if(Array.isArray(d)){for(var S=0;S<d.length;S++)Mv(a,d[S],f,g,b);return null}return f=_d(f),a&&a[Po]?a.L(d,f,l(g)?!!g.capture:!!g,b):Rv(a,d,f,!0,g,b)}function Pv(a,d,f,g,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)Pv(a,d[S],f,g,b);else g=l(g)?!!g.capture:!!g,f=_d(f),a&&a[Po]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],f=fd(S,f,g,b),-1<f&&(Ta(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=yd(a))&&(d=a.g[d.toString()],a=-1,d&&(a=fd(d,f,g,b)),(f=-1<a?d[a]:null)&&md(f))}function md(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Po])hd(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(xv(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=yd(d))?(hd(f,a),f.h==0&&(f.src=null,d[pd]=null)):Ta(a)}}}function xv(a){return a in gd?gd[a]:gd[a]="on"+a}function FA(a,d){if(a.da)a=!0;else{d=new Mo(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&md(a),a=f.call(g,d)}return a}function yd(a){return a=a[pd],a instanceof ba?a:null}var vd="__closure_events_fn_"+(1e9*Math.random()>>>0);function _d(a){return typeof a=="function"?a:(a[vd]||(a[vd]=function(d){return a.handleEvent(d)}),a[vd])}function qe(){xn.call(this),this.i=new ba(this),this.M=this,this.F=null}C(qe,xn),qe.prototype[Po]=!0,qe.prototype.removeEventListener=function(a,d,f,g){Pv(this,a,d,f,g)};function Ye(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new He(d,a);else if(d instanceof He)d.target=d.target||a;else{var b=d;d=new He(g,a),w(d,b)}if(b=!0,f)for(var S=f.length-1;0<=S;S--){var x=d.g=f[S];b=Ca(x,g,!0,d)&&b}if(x=d.g=a,b=Ca(x,g,!0,d)&&b,b=Ca(x,g,!1,d)&&b,f)for(S=0;S<f.length;S++)x=d.g=f[S],b=Ca(x,g,!1,d)&&b}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)Ta(f[g]);delete a.g[d],a.h--}}this.F=null},qe.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},qe.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Ca(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,S=0;S<d.length;++S){var x=d[S];if(x&&!x.da&&x.capture==f){var pe=x.listener,Be=x.ha||x.src;x.fa&&hd(a.i,x),b=pe.call(Be,g)!==!1&&b}}return b&&!g.defaultPrevented}function kv(a,d,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function Ov(a){a.g=kv(()=>{a.g=null,a.i&&(a.i=!1,Ov(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class VA extends xn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ov(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xo(a){xn.call(this),this.h=a,this.g={}}C(xo,xn);var Fv=[];function Vv(a){he(a.g,function(d,f){this.g.hasOwnProperty(f)&&md(d)},a),a.g={}}xo.prototype.N=function(){xo.aa.N.call(this),Vv(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Id=c.JSON.stringify,LA=c.JSON.parse,jA=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Ed(){}Ed.prototype.h=null;function Lv(a){return a.h||(a.h=a.i())}function jv(){}var ko={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wd(){He.call(this,"d")}C(wd,He);function Dd(){He.call(this,"c")}C(Dd,He);var ar={},Bv=null;function Aa(){return Bv=Bv||new qe}ar.La="serverreachability";function Uv(a){He.call(this,ar.La,a)}C(Uv,He);function Oo(a){let d=Aa();Ye(d,new Uv(d))}ar.STAT_EVENT="statevent";function $v(a,d){He.call(this,ar.STAT_EVENT,a),this.stat=d}C($v,He);function Ze(a){let d=Aa();Ye(d,new $v(d,a))}ar.Ma="timingevent";function Hv(a,d){He.call(this,ar.Ma,a),this.size=d}C(Hv,He);function Fo(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Vo(){this.g=!0}Vo.prototype.xa=function(){this.g=!1};function BA(a,d,f,g,b,S){a.info(function(){if(a.g)if(S)for(var x="",pe=S.split("&"),Be=0;Be<pe.length;Be++){var ce=pe[Be].split("=");if(1<ce.length){var ze=ce[0];ce=ce[1];var Ge=ze.split("_");x=2<=Ge.length&&Ge[1]=="type"?x+(ze+"="+ce+"&"):x+(ze+"=redacted&")}}else x=null;else x=S;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+x})}function UA(a,d,f,g,b,S,x){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+S+" "+x})}function ai(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+HA(a,f)+(g?" "+g:"")})}function $A(a,d){a.info(function(){return"TIMEOUT: "+d})}Vo.prototype.info=function(){};function HA(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var x=1;x<b.length;x++)b[x]=""}}}}return Id(f)}catch{return d}}var Sa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Td;function Na(){}C(Na,Ed),Na.prototype.g=function(){return new XMLHttpRequest},Na.prototype.i=function(){return{}},Td=new Na;function kn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zv}function zv(){this.i=null,this.g="",this.h=!1}var Gv={},bd={};function Cd(a,d,f){a.L=1,a.v=xa(sn(d)),a.m=f,a.P=!0,Wv(a,null)}function Wv(a,d){a.F=Date.now(),Ra(a),a.A=sn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),a_(f.i,"t",g),a.C=0,f=a.j.J,a.h=new zv,a.g=b_(a.j,f?d:null,!a.m),0<a.O&&(a.M=new VA(y(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(Fv[0]=b.toString()),b=Fv);for(var S=0;S<b.length;S++){var x=Nv(f,b[S],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Oo(),BA(a.i,a.u,a.A,a.l,a.R,a.m)}kn.prototype.ca=function(a){a=a.target;let d=this.M;d&&an(a)==3?d.j():this.Y(a)},kn.prototype.Y=function(a){try{if(a==this.g)e:{let Ge=an(this.g);var d=this.g.Ba();let li=this.g.Z();if(!(3>Ge)&&(Ge!=3||this.g&&(this.h.h||this.g.oa()||p_(this.g)))){this.J||Ge!=4||d==7||(d==8||0>=li?Oo(3):Oo(2)),Ad(this);var f=this.g.Z();this.X=f;t:if(Kv(this)){var g=p_(this.g);a="";var b=g.length,S=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cr(this),Lo(this);var x="";break t}this.h.i=new c.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(S&&d==b-1)});g.length=0,this.h.g+=a,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,UA(this.i,this.u,this.A,this.l,this.R,Ge,f),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,Be=this.g;if((pe=Be.g?Be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(pe)){var ce=pe;break t}}ce=null}if(f=ce)ai(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sd(this,f);else{this.o=!1,this.s=3,Ze(12),cr(this),Lo(this);break e}}if(this.P){f=!0;let Tt;for(;!this.J&&this.C<x.length;)if(Tt=qA(this,x),Tt==bd){Ge==4&&(this.s=4,Ze(14),f=!1),ai(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Gv){this.s=4,Ze(15),ai(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else ai(this.i,this.l,Tt,null),Sd(this,Tt);if(Kv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||x.length!=0||this.h.h||(this.s=1,Ze(16),f=!1),this.o=this.o&&f,!f)ai(this.i,this.l,x,"[Invalid Chunked Response]"),cr(this),Lo(this);else if(0<x.length&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.ba&&!ze.M&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),kd(ze),ze.M=!0,Ze(11))}}else ai(this.i,this.l,x,null),Sd(this,x);Ge==4&&cr(this),this.o&&!this.J&&(Ge==4?E_(this.j,this):(this.o=!1,Ra(this)))}else aS(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),cr(this),Lo(this)}}}catch{}finally{}};function Kv(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function qA(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?bd:(f=Number(d.substring(f,g)),isNaN(f)?Gv:(g+=1,g+f>d.length?bd:(d=d.slice(g,g+f),a.C=g+f,d)))}kn.prototype.cancel=function(){this.J=!0,cr(this)};function Ra(a){a.S=Date.now()+a.I,Qv(a,a.I)}function Qv(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Fo(y(a.ba,a),d)}function Ad(a){a.B&&(c.clearTimeout(a.B),a.B=null)}kn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?($A(this.i,this.A),this.L!=2&&(Oo(),Ze(17)),cr(this),this.s=2,Lo(this)):Qv(this,this.S-a)};function Lo(a){a.j.G==0||a.J||E_(a.j,a)}function cr(a){Ad(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Vv(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Sd(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Nd(f.h,a))){if(!a.K&&Nd(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)La(f),Fa(f);else break e;xd(f),Ze(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Fo(y(f.Za,f),6e3));if(1>=Jv(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else lr(f,11)}else if((a.K||f.g==a)&&La(f),!V(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let ce=b[d];if(f.T=ce[0],ce=ce[1],f.G==2)if(ce[0]=="c"){f.K=ce[1],f.ia=ce[2];let ze=ce[3];ze!=null&&(f.la=ze,f.j.info("VER="+f.la));let Ge=ce[4];Ge!=null&&(f.Aa=Ge,f.j.info("SVER="+f.Aa));let li=ce[5];li!=null&&typeof li=="number"&&0<li&&(g=1.5*li,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Tt=a.g;if(Tt){let Ba=Tt.g?Tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ba){var S=g.h;S.g||Ba.indexOf("spdy")==-1&&Ba.indexOf("quic")==-1&&Ba.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Rd(S,S.h),S.h=null))}if(g.D){let Od=Tt.g?Tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Od&&(g.ya=Od,ye(g.I,g.D,Od))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var x=a;if(g.qa=T_(g,g.J?g.ia:null,g.W),x.K){Xv(g.h,x);var pe=x,Be=g.L;Be&&(pe.I=Be),pe.B&&(Ad(pe),Ra(pe)),g.g=x}else __(g);0<f.i.length&&Va(f)}else ce[0]!="stop"&&ce[0]!="close"||lr(f,7);else f.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?lr(f,7):Pd(f):ce[0]!="noop"&&f.l&&f.l.ta(ce),f.v=0)}}Oo(4)}catch{}}var zA=class{constructor(a,d){this.g=a,this.map=d}};function Yv(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zv(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Jv(a){return a.h?1:a.g?a.g.size:0}function Nd(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Rd(a,d){a.g?a.g.add(d):a.h=d}function Xv(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Yv.prototype.cancel=function(){if(this.i=e_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function e_(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function GA(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function WA(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function t_(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=WA(a),g=GA(a),b=g.length,S=0;S<b;S++)d.call(void 0,g[S],f&&f[S],a)}var n_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KA(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),b=null;if(0<=g){var S=a[f].substring(0,g);b=a[f].substring(g+1)}else S=a[f];d(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ur(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ur){this.h=a.h,Ma(this,a.j),this.o=a.o,this.g=a.g,Pa(this,a.s),this.l=a.l;var d=a.i,f=new Uo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),r_(this,f),this.m=a.m}else a&&(d=String(a).match(n_))?(this.h=!1,Ma(this,d[1]||"",!0),this.o=jo(d[2]||""),this.g=jo(d[3]||"",!0),Pa(this,d[4]),this.l=jo(d[5]||"",!0),r_(this,d[6]||"",!0),this.m=jo(d[7]||"")):(this.h=!1,this.i=new Uo(null,this.h))}ur.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Bo(d,i_,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Bo(d,i_,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Bo(f,f.charAt(0)=="/"?ZA:YA,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Bo(f,XA)),a.join("")};function sn(a){return new ur(a)}function Ma(a,d,f){a.j=f?jo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Pa(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function r_(a,d,f){d instanceof Uo?(a.i=d,eS(a.i,a.h)):(f||(d=Bo(d,JA)),a.i=new Uo(d,a.h))}function ye(a,d,f){a.i.set(d,f)}function xa(a){return ye(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function jo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Bo(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,QA),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function QA(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var i_=/[#\/\?@]/g,YA=/[#\?:]/g,ZA=/[#\?]/g,JA=/[#\?@]/g,XA=/#/g;function Uo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function On(a){a.g||(a.g=new Map,a.h=0,a.i&&KA(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Uo.prototype,t.add=function(a,d){On(this),this.i=null,a=ci(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function o_(a,d){On(a),d=ci(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function s_(a,d){return On(a),d=ci(a,d),a.g.has(d)}t.forEach=function(a,d){On(this),this.g.forEach(function(f,g){f.forEach(function(b){a.call(d,b,g,this)},this)},this)},t.na=function(){On(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=a[g];for(let S=0;S<b.length;S++)f.push(d[g])}return f},t.V=function(a){On(this);let d=[];if(typeof a=="string")s_(this,a)&&(d=d.concat(this.g.get(ci(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return On(this),this.i=null,a=ci(this,a),s_(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function a_(a,d,f){o_(a,d),0<f.length&&(a.i=null,a.g.set(ci(a,d),N(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var b=S;x[g]!==""&&(b+="="+encodeURIComponent(String(x[g]))),a.push(b)}}return this.i=a.join("&")};function ci(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function eS(a,d){d&&!a.j&&(On(a),a.i=null,a.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(o_(this,g),a_(this,b,f))},a)),a.j=d}function tS(a,d){let f=new Vo;if(c.Image){let g=new Image;g.onload=m(Fn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=m(Fn,f,"TestLoadImage: error",!1,d,g),g.onabort=m(Fn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=m(Fn,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function nS(a,d){let f=new Vo,g=new AbortController,b=setTimeout(()=>{g.abort(),Fn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(b),S.ok?Fn(f,"TestPingServer: ok",!0,d):Fn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Fn(f,"TestPingServer: error",!1,d)})}function Fn(a,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function rS(){this.g=new jA}function iS(a,d,f){let g=f||"";try{t_(a,function(b,S){let x=b;l(b)&&(x=Id(b)),d.push(g+S+"="+encodeURIComponent(x))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function $o(a){this.l=a.Ub||null,this.j=a.eb||!1}C($o,Ed),$o.prototype.g=function(){return new ka(this.l,this.j)},$o.prototype.i=function(a){return function(){return a}}({});function ka(a,d){qe.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ka,qe),t=ka.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,qo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ho(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,qo(this)),this.g&&(this.readyState=3,qo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;c_(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function c_(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ho(this):qo(this),this.readyState==3&&c_(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ho(this))},t.Qa=function(a){this.g&&(this.response=a,Ho(this))},t.ga=function(){this.g&&Ho(this)};function Ho(a){a.readyState=4,a.l=null,a.j=null,a.v=null,qo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function qo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function u_(a){let d="";return he(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Md(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=u_(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):ye(a,d,f))}function Te(a){qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Te,qe);var oS=/^https?$/i,sS=["POST","PUT"];t=Te.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Td.g(),this.v=this.o?Lv(this.o):Lv(Td),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){l_(this,S);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(sS,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,x]of f)this.g.setRequestHeader(S,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{f_(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){l_(this,S)}};function l_(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,d_(a),Oa(a)}function d_(a){a.A||(a.A=!0,Ye(a,"complete"),Ye(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ye(this,"complete"),Ye(this,"abort"),Oa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),Te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?h_(this):this.bb())},t.bb=function(){h_(this)};function h_(a){if(a.h&&typeof s<"u"&&(!a.v[1]||an(a)!=4||a.Z()!=2)){if(a.u&&an(a)==4)kv(a.Ea,0,a);else if(Ye(a,"readystatechange"),an(a)==4){a.h=!1;try{let x=a.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=x===0){var b=String(a.D).match(n_)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),g=!oS.test(b?b.toLowerCase():"")}f=g}if(f)Ye(a,"complete"),Ye(a,"success");else{a.m=6;try{var S=2<an(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",d_(a)}}finally{Oa(a)}}}}function Oa(a,d){if(a.g){f_(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Ye(a,"ready");try{f.onreadystatechange=g}catch{}}}function f_(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function an(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),LA(d)}};function p_(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function aS(a){let d={};a=(a.g&&2<=an(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(V(a[g]))continue;var f=T(a[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[b]||[];d[b]=S,S.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function g_(a){this.Aa=0,this.i=[],this.j=new Vo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zo("baseRetryDelayMs",5e3,a),this.cb=zo("retryDelaySeedMs",1e4,a),this.Wa=zo("forwardChannelMaxRetries",2,a),this.wa=zo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Yv(a&&a.concurrentRequestLimit),this.Da=new rS,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=g_.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){Ze(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=T_(this,null,this.W),Va(this)};function Pd(a){if(m_(a),a.G==3){var d=a.U++,f=sn(a.I);if(ye(f,"SID",a.K),ye(f,"RID",d),ye(f,"TYPE","terminate"),Go(a,f),d=new kn(a,a.j,d),d.L=2,d.v=xa(sn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=b_(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ra(d)}D_(a)}function Fa(a){a.g&&(kd(a),a.g.cancel(),a.g=null)}function m_(a){Fa(a),a.u&&(c.clearTimeout(a.u),a.u=null),La(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Va(a){if(!Zv(a.h)&&!a.s){a.s=!0;var d=a.Ga;No||Sv(),Ro||(No(),Ro=!0),dd.add(d,a),a.B=0}}function cS(a,d){return Jv(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Fo(y(a.Ga,a,d),w_(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new kn(this,this.j,a),S=this.o;if(this.S&&(S?(S=v(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=v_(this,b,d),f=sn(this.I),ye(f,"RID",a),ye(f,"CVER",22),this.D&&ye(f,"X-HTTP-Session-Id",this.D),Go(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(u_(S)))+"&"+d:this.m&&Md(f,this.m,S)),Rd(this.h,b),this.Ua&&ye(f,"TYPE","init"),this.P?(ye(f,"$req",d),ye(f,"SID","null"),b.T=!0,Cd(b,f,null)):Cd(b,f,d),this.G=2}}else this.G==3&&(a?y_(this,a):this.i.length==0||Zv(this.h)||y_(this))};function y_(a,d){var f;d?f=d.l:f=a.U++;let g=sn(a.I);ye(g,"SID",a.K),ye(g,"RID",f),ye(g,"AID",a.T),Go(a,g),a.m&&a.o&&Md(g,a.m,a.o),f=new kn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=v_(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Rd(a.h,f),Cd(f,g,d)}function Go(a,d){a.H&&he(a.H,function(f,g){ye(d,g,f)}),a.l&&t_({},function(f,g){ye(d,g,f)})}function v_(a,d,f){f=Math.min(a.i.length,f);var g=a.l?y(a.l.Na,a.l,a):null;e:{var b=a.i;let S=-1;for(;;){let x=["count="+f];S==-1?0<f?(S=b[0].g,x.push("ofs="+S)):S=0:x.push("ofs="+S);let pe=!0;for(let Be=0;Be<f;Be++){let ce=b[Be].g,ze=b[Be].map;if(ce-=S,0>ce)S=Math.max(0,b[Be].g-100),pe=!1;else try{iS(ze,x,"req"+ce+"_")}catch{g&&g(ze)}}if(pe){g=x.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function __(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;No||Sv(),Ro||(No(),Ro=!0),dd.add(d,a),a.v=0}}function xd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Fo(y(a.Fa,a),w_(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,I_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Fo(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),Fa(this),I_(this))};function kd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function I_(a){a.g=new kn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=sn(a.qa);ye(d,"RID","rpc"),ye(d,"SID",a.K),ye(d,"AID",a.T),ye(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&ye(d,"TO",a.ja),ye(d,"TYPE","xmlhttp"),Go(a,d),a.m&&a.o&&Md(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=xa(sn(d)),f.m=null,f.P=!0,Wv(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Fa(this),xd(this),Ze(19))};function La(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function E_(a,d){var f=null;if(a.g==d){La(a),kd(a),a.g=null;var g=2}else if(Nd(a.h,d))f=d.D,Xv(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=a.B;g=Aa(),Ye(g,new Hv(g,f)),Va(a)}else __(a);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&cS(a,d)||g==2&&xd(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),b){case 1:lr(a,5);break;case 4:lr(a,10);break;case 3:lr(a,6);break;default:lr(a,2)}}}function w_(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function lr(a,d){if(a.j.info("Error code "+d),d==2){var f=y(a.fb,a),g=a.Xa;let b=!g;g=new ur(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ma(g,"https"),xa(g),b?tS(g.toString(),f):nS(g.toString(),f)}else Ze(2);a.G=0,a.l&&a.l.sa(d),D_(a),m_(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function D_(a){if(a.G=0,a.ka=[],a.l){let d=e_(a.h);(d.length!=0||a.i.length!=0)&&(M(a.ka,d),M(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function T_(a,d,f){var g=f instanceof ur?sn(f):new ur(f);if(g.g!="")d&&(g.g=d+"."+g.g),Pa(g,g.s);else{var b=c.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var S=new ur(null);g&&Ma(S,g),d&&(S.g=d),b&&Pa(S,b),f&&(S.l=f),g=S}return f=a.D,d=a.ya,f&&d&&ye(g,f,d),ye(g,"VER",a.la),Go(a,g),g}function b_(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Te(new $o({eb:f})):new Te(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function C_(){}t=C_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ja(){}ja.prototype.g=function(a,d){return new lt(a,d)};function lt(a,d){qe.call(this),this.g=new g_(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!V(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ui(this)}C(lt,qe),lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lt.prototype.close=function(){Pd(this.g)},lt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Id(a),a=f);d.i.push(new zA(d.Ya++,a)),d.G==3&&Va(d)},lt.prototype.N=function(){this.g.l=null,delete this.j,Pd(this.g),delete this.g,lt.aa.N.call(this)};function A_(a){wd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(A_,wd);function S_(){Dd.call(this),this.status=1}C(S_,Dd);function ui(a){this.g=a}C(ui,C_),ui.prototype.ua=function(){Ye(this.g,"a")},ui.prototype.ta=function(a){Ye(this.g,new A_(a))},ui.prototype.sa=function(a){Ye(this.g,new S_)},ui.prototype.ra=function(){Ye(this.g,"b")},ja.prototype.createWebChannel=ja.prototype.g,lt.prototype.send=lt.prototype.o,lt.prototype.open=lt.prototype.m,lt.prototype.close=lt.prototype.close,am=bn.createWebChannelTransport=function(){return new ja},sm=bn.getStatEventTarget=function(){return Aa()},om=bn.Event=ar,_l=bn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sa.NO_ERROR=0,Sa.TIMEOUT=8,Sa.HTTP_ERROR=6,ea=bn.ErrorCode=Sa,qv.COMPLETE="complete",im=bn.EventType=qv,jv.EventType=ko,ko.OPEN="a",ko.CLOSE="b",ko.ERROR="c",ko.MESSAGE="d",qe.prototype.listen=qe.prototype.K,to=bn.WebChannel=jv,Z2=bn.FetchXmlHttpFactory=$o,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,rm=bn.XhrIo=Te}).apply(typeof vl<"u"?vl:typeof self<"u"?self:typeof window<"u"?window:{});var eC="@firebase/firestore",tC="4.7.14";var Le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");var To="11.7.3";var Qr=new Kt("@firebase/firestore");function no(){return Qr.logLevel}function O(t,...e){if(Qr.logLevel<=ee.DEBUG){let n=e.map(tv);Qr.debug(`Firestore (${To}): ${t}`,...n)}}function An(t,...e){if(Qr.logLevel<=ee.ERROR){let n=e.map(tv);Qr.error(`Firestore (${To}): ${t}`,...n)}}function lo(t,...e){if(Qr.logLevel<=ee.WARN){let n=e.map(tv);Qr.warn(`Firestore (${To}): ${t}`,...n)}}function tv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function B(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,GC(t,r,n)}function GC(t,e,n){let r=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw An(r),new Error(r)}function de(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||GC(e,i,r)}function q(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Cl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},hm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Le.UNAUTHENTICATED))}shutdown(){}},fm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},pm=class{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new Cl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new Le(e)}},gm=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},mm=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new gm(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Al=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ym=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Al(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Al(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function J2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function WC(){return new TextEncoder}var Sl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=J2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function Q(t,e){return t<e?-1:t>e?1:0}function vm(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Q(r,i);{let o=WC(),s=X2(o.encode(nC(t,n)),o.encode(nC(e,n)));return s!==0?s:Q(r,i)}}n+=r>65535?2:1}return Q(t.length,e.length)}function nC(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function X2(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Q(t[n],e[n]);return Q(t.length,e.length)}function ho(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var rC=-62135596800,iC=1e6,$e=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*iC);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rC)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iC}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-rC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var K=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new $e(0,0))}static max(){return new t(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var oC="__name__",Nl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&B(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Q(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):vm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tn.fromString(e.substring(4,e.length-2))}},De=class t extends Nl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},ej=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mt=class t extends Nl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return ej.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oC}static keyField(){return new t([oC])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new F(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new F(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var j=class t{constructor(e){this.path=e}static fromPath(e){return new t(De.fromString(e))}static fromName(e){return new t(De.fromString(e).popFirst(5))}static empty(){return new t(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new De(e.slice()))}};var sa=-1,_m=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};_m.UNKNOWN_ID=-1;function tj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new Yr(i,j.empty(),e)}function nj(t){return new Yr(t.readTime,t.key,sa)}var Yr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(K.min(),j.empty(),sa)}static max(){return new t(K.max(),j.empty(),sa)}};function rj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:Q(t.largestBatchId,e.largestBatchId))}var ij="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Im=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function bo(t){return _(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==ij)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function oj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Co(t){return t.name==="IndexedDbTransactionError"}var nv=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ce&&this.ce(n),n}}t.le=-1;return t})(),rv=-1;function rd(t){return t==null}function aa(t){return t===0&&1/t==-1/0}function sj(t){return typeof t=="number"&&Number.isInteger(t)&&!aa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var KC="";function aj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sC(e)),e=cj(t.get(n),e);return sC(e)}function cj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case KC:n+="";break;default:n+=o}}return n}function sC(t){return t+KC+""}var uj="remoteDocuments",QC="owner";var YC="mutationQueues";var ZC="mutations";var JC="documentMutations",lj="remoteDocumentsV14";var XC="remoteDocumentGlobal";var e0="targets";var t0="targetDocuments";var n0="targetGlobal",r0="collectionParents";var i0="clientMetadata";var o0="bundles";var s0="namedQueries";var dj="indexConfiguration";var hj="indexState";var fj="indexEntries";var a0="documentOverlays";var pj="globals";var gj=[YC,ZC,JC,uj,e0,QC,n0,t0,i0,XC,r0,o0,s0],kW=[...gj,a0],mj=[YC,ZC,JC,lj,e0,QC,n0,t0,i0,XC,r0,o0,s0,a0],yj=mj,vj=[...yj,dj,hj,fj];var OW=[...vj,pj];function aC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function c0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ce=class t{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new so(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new so(this.root,e,this.comparator,!1)}getReverseIterator(){return new so(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new so(this.root,e,this.comparator,!0)}},so=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},en=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var je=class t{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rl(this.data.getIterator())}getIteratorFrom(e){return new Rl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Rl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Jt=class t{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new t([])}unionWith(e){let n=new je(mt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Ml=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Qe=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ml("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var _j=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sn(t){if(de(!!t,39018),typeof t=="string"){let e=0,n=_j.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_e(t.seconds),nanos:_e(t.nanos)}}function _e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nn(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}var u0="server_timestamp",l0="__type__",d0="__previous_value__",h0="__local_write_time__";function iv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[l0])===null||n===void 0?void 0:n.stringValue)===u0}function id(t){let e=t.mapValue.fields[d0];return iv(e)?id(e):e}function ca(t){let e=Sn(t.mapValue.fields[h0].timestampValue);return new $e(e.seconds,e.nanos)}var Em=class{constructor(e,n,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Pl="(default)",xl=class t{constructor(e,n){this.projectId=e,this.database=n||Pl}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Pl}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ov="__type__",f0="__max__",Il={mapValue:{fields:{__type__:{stringValue:f0}}}},sv="__vector__",fo="value";function ir(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?iv(t)?4:g0(t)?9007199254740991:p0(t)?10:11:B(28295,{value:t})}function rn(t,e){if(t===e)return!0;let n=ir(t);if(n!==ir(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ca(t).isEqual(ca(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Sn(i.timestampValue),c=Sn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Nn(i.bytesValue).isEqual(Nn(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return _e(i.geoPointValue.latitude)===_e(o.geoPointValue.latitude)&&_e(i.geoPointValue.longitude)===_e(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return _e(i.integerValue)===_e(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=_e(i.doubleValue),c=_e(o.doubleValue);return s===c?aa(s)===aa(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return ho(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(aC(s)!==aC(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!rn(s[u],c[u])))return!1;return!0}(t,e);default:return B(52216,{left:t})}}function ua(t,e){return(t.values||[]).find(n=>rn(n,e))!==void 0}function po(t,e){if(t===e)return 0;let n=ir(t),r=ir(e);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(t.booleanValue,e.booleanValue);case 2:return function(o,s){let c=_e(o.integerValue||o.doubleValue),u=_e(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return cC(t.timestampValue,e.timestampValue);case 4:return cC(ca(t),ca(e));case 5:return vm(t.stringValue,e.stringValue);case 6:return function(o,s){let c=Nn(o),u=Nn(s);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=Q(c[l],u[l]);if(h!==0)return h}return Q(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let c=Q(_e(o.latitude),_e(s.latitude));return c!==0?c:Q(_e(o.longitude),_e(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return uC(t.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,l,h;let p=o.fields||{},y=s.fields||{},m=(c=p[fo])===null||c===void 0?void 0:c.arrayValue,C=(u=y[fo])===null||u===void 0?void 0:u.arrayValue,N=Q(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:uC(m,C)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Il.mapValue&&s===Il.mapValue)return 0;if(o===Il.mapValue)return 1;if(s===Il.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=vm(u[p],h[p]);if(y!==0)return y;let m=po(c[u[p]],l[h[p]]);if(m!==0)return m}return Q(u.length,h.length)}(t.mapValue,e.mapValue);default:throw B(23264,{Pe:n})}}function cC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Q(t,e);let n=Sn(t),r=Sn(e),i=Q(n.seconds,r.seconds);return i!==0?i:Q(n.nanos,r.nanos)}function uC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=po(n[i],r[i]);if(o)return o}return Q(n.length,r.length)}function go(t){return wm(t)}function wm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Sn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Nn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return j.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=wm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${wm(n.fields[s])}`;return i+"}"}(t.mapValue):B(61005,{value:t})}function Dl(t){switch(ir(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=id(t);return e?16+Dl(e):16;case 5:return 2*t.stringValue.length;case 6:return Nn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Dl(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return oi(r.fields,(o,s)=>{i+=o.length+Dl(s)}),i}(t.mapValue);default:throw B(13486,{value:t})}}function lC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dm(t){return!!t&&"integerValue"in t}function av(t){return!!t&&"arrayValue"in t}function dC(t){return!!t&&"nullValue"in t}function hC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tl(t){return!!t&&"mapValue"in t}function p0(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ov])===null||n===void 0?void 0:n.stringValue)===sv}function na(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return oi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=na(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=na(t.arrayValue.values[n]);return e}return Object.assign({},t)}function g0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===f0}var VW={mapValue:{fields:{[ov]:{stringValue:sv},[fo]:{arrayValue:{}}}}};var kt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=na(n)}setAll(e){let n=mt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=na(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Tl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Tl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){oi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(na(this.value))}};function m0(t){let e=[];return oi(t.fields,(n,r)=>{let i=new mt([n]);if(Tl(r)){let o=m0(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}var Ot=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,K.min(),K.min(),K.min(),kt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,K.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,K.min(),K.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,K.min(),K.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mo=class{constructor(e,n){this.position=e,this.inclusive=n}};function fC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=j.comparator(j.fromName(s.referenceValue),n.key):r=po(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function pC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rn(t.position[n],e.position[n]))return!1;return!0}var yo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Ij(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var kl=class{},Pe=class t extends kl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bm(e,n,r):n==="array-contains"?new Sm(e,r):n==="in"?new Nm(e,r):n==="not-in"?new Rm(e,r):n==="array-contains-any"?new Mm(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Cm(e,r):new Am(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(po(n,this.value)):n!==null&&ir(this.value)===ir(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ft=class t extends kl{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new t(e,n)}matches(e){return y0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function y0(t){return t.op==="and"}function v0(t){return Ej(t)&&y0(t)}function Ej(t){for(let e of t.filters)if(e instanceof Ft)return!1;return!0}function Tm(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+go(t.value);if(v0(t))return t.filters.map(e=>Tm(e)).join(",");{let e=t.filters.map(n=>Tm(n)).join(",");return`${t.op}(${e})`}}function _0(t,e){return t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&rn(r.value,i.value)}(t,e):t instanceof Ft?function(r,i){return i instanceof Ft&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&_0(s,i.filters[c]),!0):!1}(t,e):void B(19439)}function I0(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`}(t):t instanceof Ft?function(n){return n.op.toString()+" {"+n.getFilters().map(I0).join(" ,")+"}"}(t):"Filter"}var bm=class extends Pe{constructor(e,n,r){super(e,n,r),this.key=j.fromName(r.referenceValue)}matches(e){let n=j.comparator(e.key,this.key);return this.matchesComparison(n)}},Cm=class extends Pe{constructor(e,n){super(e,"in",n),this.keys=E0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Am=class extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=E0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function E0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>j.fromName(r.referenceValue))}var Sm=class extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return av(n)&&ua(n.arrayValue,this.value)}},Nm=class extends Pe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ua(this.value.arrayValue,n)}},Rm=class extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ua(this.value.arrayValue,n)}},Mm=class extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!av(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ua(this.value.arrayValue,r))}};var Pm=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Ie=null}};function gC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Pm(t,e,n,r,i,o,s)}function cv(t){let e=q(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Tm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>go(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>go(r)).join(",")),e.Ie=n}return e.Ie}function uv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ij(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pC(t.startAt,e.startAt)&&pC(t.endAt,e.endAt)}function xm(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Zr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function wj(t,e,n,r,i,o,s,c){return new Zr(t,e,n,r,i,o,s,c)}function w0(t){return new Zr(t)}function mC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function D0(t){return t.collectionGroup!==null}function ra(t){let e=q(t);if(e.Ee===null){e.Ee=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new je(mt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new yo(o,r))}),n.has(mt.keyField().canonicalString())||e.Ee.push(new yo(mt.keyField(),r))}return e.Ee}function tn(t){let e=q(t);return e.de||(e.de=Dj(e,ra(t))),e.de}function Dj(t,e){if(t.limitType==="F")return gC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new yo(i.field,o)});let n=t.endAt?new mo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mo(t.startAt.position,t.startAt.inclusive):null;return gC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function km(t,e){let n=t.filters.concat([e]);return new Zr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Om(t,e,n){return new Zr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function od(t,e){return uv(tn(t),tn(e))&&t.limitType===e.limitType}function T0(t){return`${cv(tn(t))}|lt:${t.limitType}`}function ro(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>I0(i)).join(", ")}]`),rd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>go(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>go(i)).join(",")),`Target(${r})`}(tn(t))}; limitType=${t.limitType})`}function sd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):j.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of ra(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let l=fC(s,c,u);return s.inclusive?l<=0:l<0}(r.startAt,ra(r),i)||r.endAt&&!function(s,c,u){let l=fC(s,c,u);return s.inclusive?l>=0:l>0}(r.endAt,ra(r),i))}(t,e)}function Tj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function b0(t){return(e,n)=>{let r=!1;for(let i of ra(t)){let o=bj(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function bj(t,e,n){let r=t.field.isKeyField()?j.comparator(e.key,n.key):function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?po(u,l):B(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B(19790,{direction:t.dir})}}var Rn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){oi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return c0(this.inner)}size(){return this.innerSize}};var Cj=new Ce(j.comparator);function Mn(){return Cj}var C0=new Ce(j.comparator);function ta(...t){let e=C0;for(let n of t)e=e.insert(n.key,n);return e}function A0(t){let e=C0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wr(){return ia()}function S0(){return ia()}function ia(){return new Rn(t=>t.toString(),(t,e)=>t.isEqual(e))}var Aj=new Ce(j.comparator),Sj=new je(j.comparator);function ie(...t){let e=Sj;for(let n of t)e=e.add(n);return e}var Nj=new je(Q);function Rj(){return Nj}function lv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aa(e)?"-0":e}}function N0(t){return{integerValue:""+t}}function Mj(t,e){return sj(e)?N0(e):lv(t,e)}var vo=class{constructor(){this._=void 0}};function Pj(t,e,n){return t instanceof Jr?function(i,o){let s={fields:{[l0]:{stringValue:u0},[h0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&iv(o)&&(o=id(o)),o&&(s.fields[d0]=o),{mapValue:s}}(n,e):t instanceof Xr?M0(t,e):t instanceof ei?P0(t,e):function(i,o){let s=R0(i,o),c=yC(s)+yC(i.Re);return Dm(s)&&Dm(i.Re)?N0(c):lv(i.serializer,c)}(t,e)}function xj(t,e,n){return t instanceof Xr?M0(t,e):t instanceof ei?P0(t,e):n}function R0(t,e){return t instanceof _o?function(r){return Dm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Jr=class extends vo{},Xr=class extends vo{constructor(e){super(),this.elements=e}};function M0(t,e){let n=x0(e);for(let r of t.elements)n.some(i=>rn(i,r))||n.push(r);return{arrayValue:{values:n}}}var ei=class extends vo{constructor(e){super(),this.elements=e}};function P0(t,e){let n=x0(e);for(let r of t.elements)n=n.filter(i=>!rn(i,r));return{arrayValue:{values:n}}}var _o=class extends vo{constructor(e,n){super(),this.serializer=e,this.Re=n}};function yC(t){return _e(t.integerValue||t.doubleValue)}function x0(t){return av(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Fm=class{constructor(e,n){this.field=e,this.transform=n}};function kj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Xr&&i instanceof Xr||r instanceof ei&&i instanceof ei?ho(r.elements,i.elements,rn):r instanceof _o&&i instanceof _o?rn(r.Re,i.Re):r instanceof Jr&&i instanceof Jr}(t.transform,e.transform)}var Vm=class{constructor(e,n){this.version=e,this.transformResults=n}},Cn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Io=class{};function k0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new la(t.key,Cn.none()):new ti(t.key,t.data,Cn.none());{let n=t.data,r=kt.empty(),i=new je(mt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Pn(t.key,r,new Jt(i.toArray()),Cn.none())}}function Oj(t,e,n){t instanceof ti?function(i,o,s){let c=i.value.clone(),u=_C(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Pn?function(i,o,s){if(!bl(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=_C(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(O0(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function oa(t,e,n,r){return t instanceof ti?function(o,s,c,u){if(!bl(o.precondition,s))return c;let l=o.value.clone(),h=IC(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pn?function(o,s,c,u){if(!bl(o.precondition,s))return c;let l=IC(o.fieldTransforms,u,s),h=s.data;return h.setAll(O0(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,c){return bl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(t,e,n)}function Fj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=R0(r.transform,i||null);o!=null&&(n===null&&(n=kt.empty()),n.set(r.field,o))}return n||null}function vC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ho(r,i,(o,s)=>kj(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ti=class extends Io{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Pn=class extends Io{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function O0(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function _C(t,e,n){let r=new Map;de(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,xj(s,c,n[i]))}return r}function IC(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,Pj(o,s,e))}return r}var la=class extends Io{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Lm=class extends Io{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var jm=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Oj(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=oa(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=oa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=S0();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=k0(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(n,r)=>vC(n,r))&&ho(this.baseMutations,e.baseMutations,(n,r)=>vC(n,r))}},Bm=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return Aj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Um=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $m=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Re,ae;function Vj(t){switch(t){case R.OK:return B(64938);case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return B(15467,{code:t})}}function F0(t){if(t===void 0)return An("GRPC error has no .code"),R.UNKNOWN;switch(t){case Re.OK:return R.OK;case Re.CANCELLED:return R.CANCELLED;case Re.UNKNOWN:return R.UNKNOWN;case Re.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Re.INTERNAL:return R.INTERNAL;case Re.UNAVAILABLE:return R.UNAVAILABLE;case Re.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Re.NOT_FOUND:return R.NOT_FOUND;case Re.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Re.ABORTED:return R.ABORTED;case Re.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Re.DATA_LOSS:return R.DATA_LOSS;default:return B(39323,{code:t})}}(ae=Re||(Re={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";var EC=null;var Lj=new Tn([4294967295,4294967295],0);function wC(t){let e=WC().encode(t),n=new nm;return n.update(e),new Uint8Array(n.digest())}function DC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Tn([n,r],0),new Tn([i,o],0)]}var Hm=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kr(`Invalid padding: ${n}`);if(r<0)throw new Kr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kr(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Tn.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(Tn.fromNumber(r)));return i.compare(Lj)===1&&(i=new Tn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let n=wC(e),[r,i]=DC(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.pe===0)return;let n=wC(e),[r,i]=DC(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Kr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ol=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,da.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(K.min(),i,new Ce(Q),Mn(),ie())}},da=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ie(),ie(),ie())}};var co=class{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}},Fl=class{constructor(e,n){this.targetId=e,this.Ce=n}},Vl=class{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ll=class{constructor(){this.Fe=0,this.Me=TC(),this.xe=Qe.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ie(),n=ie(),r=ie();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B(38017,{changeType:o})}}),new da(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=TC()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,de(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},qm=class{constructor(e){this.ze=e,this.je=new Map,this.He=Mn(),this.Je=El(),this.Ye=El(),this.Ze=new Ce(Q)}Xe(e){for(let n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(let n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{let r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:B(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){let n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){let o=i.target;if(xm(o))if(r===0){let s=new j(o.path);this.tt(n,s,Ot.newNoDocument(s,K.min()))}else de(r===1,20013,{expectedCount:r});else{let s=this.ut(n);if(s!==r){let c=this.ct(e),u=c?this.lt(c,e,s):1;if(u!==0){this.st(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}EC?.ht(function(h,p,y,m,C){var N,M,k,V,$,ue;let Fe={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},he=p.unchangedNames;return he&&(Fe.bloomFilter={applied:C===0,hashCount:(N=he?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(V=(k=(M=he?.bits)===null||M===void 0?void 0:M.bitmap)===null||k===void 0?void 0:k.length)!==null&&V!==void 0?V:0,padding:(ue=($=he?.bits)===null||$===void 0?void 0:$.padding)!==null&&ue!==void 0?ue:0,mightContain:D=>{var v;return(v=m?.mightContain(D))!==null&&v!==void 0&&v}}),Fe}(s,e.Ce,this.ze.Pt(),c,u))}}}}ct(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=Nn(r).toUint8Array()}catch(u){if(u instanceof Ml)return lo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Hm(s,i,o)}catch(u){return lo(u instanceof Kr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){let r=this.ze.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.ze.Pt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),i++)}),i}It(e){let n=new Map;this.je.forEach((o,s)=>{let c=this._t(s);if(c){if(o.current&&xm(c.target)){let u=new j(c.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,Ot.newNoDocument(u,e))}o.Le&&(n.set(s,o.qe()),o.Qe())}});let r=ie();this.Ye.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Ol(e,n,this.Ze,this.He,r);return this.He=Mn(),this.Je=El(),this.Ye=El(),this.Ze=new Ce(Q),i}et(e,n){if(!this.it(e))return;let r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){let n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Ll,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new je(Q),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new je(Q),this.Je=this.Je.insert(e,n)),n}it(e){let n=this._t(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}_t(e){let n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ll),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}};function El(){return new Ce(j.comparator)}function TC(){return new Ce(j.comparator)}var jj={asc:"ASCENDING",desc:"DESCENDING"},Bj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uj={and:"AND",or:"OR"},zm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Gm(t,e){return t.useProto3Json||rd(e)?e:{value:e}}function jl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $j(t,e){return jl(t,e.toTimestamp())}function nn(t){return de(!!t,49232),K.fromTimestamp(function(n){let r=Sn(n);return new $e(r.seconds,r.nanos)}(t))}function dv(t,e){return Wm(t,e).canonicalString()}function Wm(t,e){let n=function(i){return new De(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function L0(t){let e=De.fromString(t);return de(H0(e),10190,{key:e.toString()}),e}function Km(t,e){return dv(t.databaseId,e.path)}function cm(t,e){let n=L0(e);if(n.get(1)!==t.databaseId.projectId)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(B0(n))}function j0(t,e){return dv(t.databaseId,e)}function Hj(t){let e=L0(t);return e.length===4?De.emptyPath():B0(e)}function Qm(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function B0(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bC(t,e,n){return{name:Km(t,e),fields:n.value.mapValue.fields}}function qj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(de(h===void 0||typeof h=="string",58123),Qe.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Qe.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(l){let h=l.code===void 0?R.UNKNOWN:F0(l.code);return new F(h,l.message||"")}(s);n=new Vl(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=cm(t,r.document.name),o=nn(r.document.updateTime),s=r.document.createTime?nn(r.document.createTime):K.min(),c=new kt({mapValue:{fields:r.document.fields}}),u=Ot.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new co(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=cm(t,r.document),o=r.readTime?nn(r.readTime):K.min(),s=Ot.newNoDocument(i,o),c=r.removedTargetIds||[];n=new co([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=cm(t,r.document),o=r.removedTargetIds||[];n=new co([],o,i,null)}else{if(!("filter"in e))return B(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new $m(i,o),c=r.targetId;n=new Fl(c,s)}}return n}function zj(t,e){let n;if(e instanceof ti)n={update:bC(t,e.key,e.value)};else if(e instanceof la)n={delete:Km(t,e.key)};else if(e instanceof Pn)n={update:bC(t,e.key,e.data),updateMask:eB(e.fieldMask)};else{if(!(e instanceof Lm))return B(16599,{ft:e.type});n={verify:Km(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof Jr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Xr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ei)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof _o)return{fieldPath:s.field.canonicalString(),increment:c.Re};throw B(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:$j(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B(27497)}(t,e.precondition)),n}function Gj(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?nn(i.updateTime):nn(o);return s.isEqual(K.min())&&(s=nn(o)),new Vm(s,i.transformResults||[])}(n,e))):[]}function Wj(t,e){return{documents:[j0(t,e.path)]}}function Kj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=j0(t,i);let o=function(l){if(l.length!==0)return $0(Ft.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:io(y.field),direction:Zj(y.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Gm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:n,parent:i}}function Qj(t){let e=Hj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){de(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let y=U0(p);return y instanceof Ft&&v0(y)?y.getFilters():[y]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(y=>function(C){return new yo(oo(C.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(p){let y;return y=typeof p=="object"?p.value:p,rd(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,m=p.values||[];return new mo(m,y)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let y=!p.before,m=p.values||[];return new mo(m,y)}(n.endAt)),wj(e,i,s,o,c,"F",u,l)}function Yj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function U0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=oo(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=oo(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=oo(n.unaryFilter.field);return Pe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=oo(n.unaryFilter.field);return Pe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return B(61313);default:return B(60726)}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(oo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return B(58110);default:return B(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ft.create(n.compositeFilter.filters.map(r=>U0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B(1026)}}(n.compositeFilter.op))}(t):B(30097,{filter:t})}function Zj(t){return jj[t]}function Jj(t){return Bj[t]}function Xj(t){return Uj[t]}function io(t){return{fieldPath:t.canonicalString()}}function oo(t){return mt.fromServerFormat(t.fieldPath)}function $0(t){return t instanceof Pe?function(n){if(n.op==="=="){if(hC(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NAN"}};if(dC(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hC(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NAN"}};if(dC(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(n.field),op:Jj(n.op),value:n.value}}}(t):t instanceof Ft?function(n){let r=n.getFilters().map(i=>$0(i));return r.length===1?r[0]:{compositeFilter:{op:Xj(n.op),filters:r}}}(t):B(54877,{filter:t})}function eB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function H0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ha=class t{constructor(e,n,r,i,o=K.min(),s=K.min(),c=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ym=class{constructor(e){this.wt=e}};function tB(t){let e=Qj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Om(e,e.limit,"L"):e}var Bl=class{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(_e(e.integerValue));else if("doubleValue"in e){let r=_e(e.doubleValue);isNaN(r)?this.Mt(n,13):(this.Mt(n,15),aa(r)?n.xt(0):n.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(n,20),typeof r=="string"&&(r=Sn(r)),n.Ot(`${r.seconds||""}`),n.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(Nn(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(n,45),n.xt(r.latitude||0),n.xt(r.longitude||0)}else"mapValue"in e?g0(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):p0(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):B(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){let r=e.fields||{};this.Mt(n,55);for(let i of Object.keys(r))this.Nt(i,n),this.Ct(r[i],n)}qt(e,n){var r,i;let o=e.fields||{};this.Mt(n,53);let s=fo,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(n,15),n.xt(_e(c)),this.Nt(s,n),this.Ct(o[s],n)}$t(e,n){let r=e.values||[];this.Mt(n,50);for(let i of r)this.Ct(i,n)}kt(e,n){this.Mt(n,37),j.fromName(e).path.forEach(r=>{this.Mt(n,60),this.Kt(r,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}};Bl.Wt=new Bl;var Zm=class{constructor(){this.yn=new Jm}addToCollectionParentIndex(e,n){return this.yn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Yr.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Jm=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new je(De.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(De.comparator)).toArray()}};var LW=new Uint8Array(0);var CC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q0=41943040,Dt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Dt.DEFAULT_COLLECTION_PERCENTILE=10,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dt.DEFAULT=new Dt(q0,Dt.DEFAULT_COLLECTION_PERCENTILE,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dt.DISABLED=new Dt(-1,0,0);var fa=class t{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new t(0)}static ir(){return new t(-1)}};var AC="LruGarbageCollector",nB=1048576;function SC([t,e],[n,r]){let i=Q(t,n);return i===0?Q(e,r):i}var Xm=class{constructor(e){this.cr=e,this.buffer=new je(SC),this.lr=0}hr(){return++this.lr}Pr(e){let n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();SC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},ey=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){O(AC,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Tr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Co(n)?O(AC,"Ignoring IndexedDB error during garbage collection: ",n):yield bo(n)}yield this.Ir(3e5)}))}},ty=class{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(nv.le);let r=new Xm(n);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(CC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CC):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),no()<=ee.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function rB(t,e){return new ty(t,e)}var ny=class{constructor(){this.changes=new Rn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ry=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var iy=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&oa(r.mutation,i,Jt.empty(),$e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){let i=Wr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ta();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=Mn(),s=ia(),c=function(){return ia()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Pn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),oa(h.mutation,l,h.mutation.getFieldMask(),$e.now())):s.set(l.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return c.set(l,new ry(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=ia(),i=new Ce((s,c)=>s-c),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Jt.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||ie()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=S0();h.forEach(y=>{if(!o.has(y)){let m=k0(n.get(y),r.get(y));m!==null&&p.set(y,m),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):D0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Wr()),c=sa,u=o;return s.next(l=>P.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ie())).next(h=>({batchId:c,changes:A0(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(r=>{let i=ta();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ta();return this.indexManager.getCollectionParents(e,o).next(c=>P.forEach(c,u=>{let l=function(p,y){return new Zr(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Ot.newInvalidDocument(h)))});let c=ta();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&oa(h.mutation,l,Jt.empty(),$e.now()),sd(n,l)&&(c=c.insert(u,l))}),c})}};var oy=class{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return P.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:nn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(i){return{name:i.name,query:tB(i.bundledQuery),readTime:nn(i.readTime)}}(n)),P.resolve()}};var sy=class{constructor(){this.overlays=new Ce(j.comparator),this.Or=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Wr();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Or.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Wr(),o=n.length+1,s=new j(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ce((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Wr(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=Wr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return P.resolve(c)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Um(n,r));let o=this.Or.get(n);o===void 0&&(o=ie(),this.Or.set(n,o)),this.Or.set(n,o.add(r.key))}};var ay=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var pa=class{constructor(){this.Nr=new je(Me.Br),this.Lr=new je(Me.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){let r=new Me(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new Me(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){let n=new j(new De([])),r=new Me(n,e),i=new Me(n,e+1),o=[];return this.Lr.forEachInRange([r,i],s=>{this.Qr(s),o.push(s.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){let n=new j(new De([])),r=new Me(n,e),i=new Me(n,e+1),o=ie();return this.Lr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Me(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Me=class{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return j.comparator(e.key,n.key)||Q(e.Gr,n.Gr)}static kr(e,n){return Q(e.Gr,n.Gr)||j.comparator(e.key,n.key)}};var cy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new je(Me.Br)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new jm(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.zr=this.zr.add(new Me(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Hr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?rv:this.Jn-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Me(n,0),i=new Me(n,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([r,i],s=>{let c=this.jr(s.Gr);o.push(c)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(Q);return n.forEach(i=>{let o=new Me(i,0),s=new Me(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,s],c=>{r=r.add(c.Gr)})}),P.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;j.isDocumentKey(o)||(o=o.child(""));let s=new Me(new j(o),0),c=new je(Q);return this.zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Gr)),!0)},s),P.resolve(this.Jr(c))}Jr(e){let n=[];return e.forEach(r=>{let i=this.jr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return P.forEach(n.mutations,i=>{let o=new Me(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){let r=new Me(n,0),i=this.zr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){let n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var uy=class{constructor(e){this.Zr=e,this.docs=function(){return new Ce(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let r=Mn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ot.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Mn(),s=n.path,c=new j(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||rj(nj(h),r)<=0||(i.has(h.key)||sd(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){B(9500)}Xr(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ly(this)}getSize(e){return P.resolve(this.size)}},ly=class extends ny{constructor(e){super(),this.vr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}};var dy=class{constructor(e){this.persistence=e,this.ei=new Rn(n=>cv(n),uv),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.ti=0,this.ni=new pa,this.targetCount=0,this.ri=fa.rr()}forEachTarget(e,n){return this.ei.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),P.resolve()}ar(e){this.ei.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ri=new fa(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.ar(n),P.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ei.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ei.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ei.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.ni.Wr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.ni.containsKey(n))}};var Ul=class{constructor(e,n){this.ii={},this.overlays={},this.si=new nv(0),this.oi=!1,this.oi=!0,this._i=new ay,this.referenceDelegate=e(this),this.ai=new dy(this),this.indexManager=new Zm,this.remoteDocumentCache=function(i){return new uy(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new Ym(n),this.ci=new oy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new cy(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new hy(this.si.next());return this.referenceDelegate.li(),r(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,n){return P.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}},hy=class extends Im{constructor(e){super(),this.currentSequenceNumber=e}},fy=class t{constructor(e){this.persistence=e,this.Ti=new pa,this.Ii=null}static Ei(e){return new t(e)}get di(){if(this.Ii)return this.Ii;throw B(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.di,r=>{let i=j.fromPath(r);return this.Ai(e,i).next(o=>{o||n.removeEntry(i,K.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return P.or([()=>P.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}},$l=class t{constructor(e,n){this.persistence=e,this.Ri=new Rn(r=>aj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=rB(this,n)}static Ei(e,n){return new t(e,n)}li(){}hi(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){let n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return P.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,s=>this.gr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,K.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),P.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dl(e.data.value)),n}gr(e,n,r){return P.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.Ri.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var py=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=i}static Ps(e,n){let r=ie(),i=ie();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var gy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var my=class{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return ST()?8:oj(Ve())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Rs(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Vs(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new gy;return this.fs(e,n,s).next(c=>{if(o.result=c,this.Is)return this.gs(e,n,s,c.size)})}).next(()=>o.result)}gs(e,n,r,i){return r.documentReadCount<this.Es?(no()<=ee.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",ro(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),P.resolve()):(no()<=ee.DEBUG&&O("QueryEngine","Query:",ro(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(no()<=ee.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",ro(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(n))):P.resolve())}Rs(e,n){if(mC(n))return P.resolve(null);let r=tn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Om(n,null,"F"),r=tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.As.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ps(n,c);return this.ys(n,l,s,u.readTime)?this.Rs(e,Om(n,null,"F")):this.ws(e,l,n,u)}))})))}Vs(e,n,r,i){return mC(n)||i.isEqual(K.min())?P.resolve(null):this.As.getDocuments(e,r).next(o=>{let s=this.ps(n,o);return this.ys(n,s,r,i)?P.resolve(null):(no()<=ee.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ro(n)),this.ws(e,s,n,tj(i,sa)).next(c=>c))})}ps(e,n){let r=new je(b0(e));return n.forEach((i,o)=>{sd(e,o)&&(r=r.add(o))}),r}ys(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,n,r){return no()<=ee.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",ro(n)),this.As.getDocumentsMatchingQuery(e,n,Yr.min(),r)}ws(e,n,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var hv="LocalStore",iB=3e8,yy=class{constructor(e,n,r,i){this.persistence=e,this.bs=n,this.serializer=i,this.Ss=new Ce(Q),this.Ds=new Rn(o=>cv(o),uv),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iy(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}};function oB(t,e,n,r){return new yy(t,e,n,r)}function z0(t,e){return _(this,null,function*(){let n=q(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ms:l,removedBatchIds:s,addedBatchIds:c}))})})})}function sB(t,e){let n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Cs.newChangeBuffer({trackRemovals:!0});return function(c,u,l,h){let p=l.batch,y=p.keys(),m=P.resolve();return y.forEach(C=>{m=m.next(()=>h.getEntry(u,C)).next(N=>{let M=l.docVersions.get(C);de(M!==null,48541),N.version.compareTo(M)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),m.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ie();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function G0(t){let e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function aB(t,e){let n=q(t),r=e.snapshotVersion,i=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Cs.newChangeBuffer({trackRemovals:!0});i=n.Ss;let c=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;c.push(n.ai.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.ai.addMatchingKeys(o,h.addedDocuments,p)));let m=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(Qe.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(N,M,k){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=iB?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(y,m,h)&&c.push(n.ai.updateTargetData(o,m))});let u=Mn(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(cB(o,s,e.documentUpdates).next(h=>{u=h.xs,l=h.Os})),!r.isEqual(K.min())){let h=n.ai.getLastRemoteSnapshotVersion(o).next(p=>n.ai.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return P.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ss=i,o))}function cB(t,e,n){let r=ie(),i=ie();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Mn();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(K.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):O(hv,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{xs:s,Os:i}})}function uB(t,e){let n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=rv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lB(t,e){let n=q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.ai.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.ai.allocateTargetId(r).next(s=>(i=new ha(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}function vy(t,e,n){return _(this,null,function*(){let r=q(t),i=r.Ss.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Co(s))throw s;O(hv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)})}function NC(t,e,n){let r=q(t),i=K.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=q(u),y=p.Ds.get(h);return y!==void 0?P.resolve(p.Ss.get(y)):p.ai.getTargetData(l,h)}(r,s,tn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.bs.getDocumentsMatchingQuery(s,e,n?i:K.min(),n?o:ie())).next(c=>(dB(r,Tj(e),c),{documents:c,Ns:o})))}function dB(t,e,n){let r=t.vs.get(e)||K.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.vs.set(e,r)}var Hl=class{constructor(){this.activeTargetIds=Rj()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var _y=class{constructor(){this.So=new Hl,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Hl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Iy=class{vo(e){}shutdown(){}};var RC="ConnectivityMonitor",ql=class{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){O(RC,"Network connectivity changed: AVAILABLE");for(let e of this.Oo)e(0)}xo(){O(RC,"Network connectivity changed: UNAVAILABLE");for(let e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wl=null;function Ey(){return wl===null?wl=function(){return 268435456+Math.round(2147483648*Math.random())}():wl++,"0x"+wl.toString(16)}var um="RestConnection",hB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},wy=class{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Pl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,n,r,i,o){let s=Ey(),c=this.$o(e,n.toUriEncodedString());O(um,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(u,i,o);let{host:l}=new URL(c),h=Lr(l);return this.Ko(e,c,u,r,h).then(p=>(O(um,`Received RPC '${e}' ${s}: `,p),p),p=>{throw lo(um,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Wo(e,n,r,i,o,s){return this.Qo(e,n,r,i,o)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+To}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}$o(e,n){let r=hB[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}};var Dy=class{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}};var Ke="WebChannelConnection",Ty=class extends wy{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,i,o){let s=Ey();return new Promise((c,u)=>{let l=new rm;l.setWithCredentials(!0),l.listenOnce(im.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ea.NO_ERROR:let p=l.getResponseJson();O(Ke,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case ea.TIMEOUT:O(Ke,`RPC '${e}' ${s} timed out`),u(new F(R.DEADLINE_EXCEEDED,"Request time out"));break;case ea.HTTP_ERROR:let y=l.getStatus();if(O(Ke,`RPC '${e}' ${s} failed with status:`,y,"response text:",l.getResponseText()),y>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let C=m?.error;if(C&&C.status&&C.message){let N=function(k){let V=k.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(V)>=0?V:R.UNKNOWN}(C.status);u(new F(N,C.message))}else u(new F(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(R.UNAVAILABLE,"Connection failed."));break;default:B(9055,{s_:e,streamId:s,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{O(Ke,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);O(Ke,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}a_(e,n,r){let i=Ey(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=am(),c=sm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(Ke,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),y=!1,m=!1,C=new Dy({Go:M=>{m?O(Ke,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(O(Ke,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),O(Ke,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},zo:()=>p.close()}),N=(M,k,V)=>{M.listen(k,$=>{try{V($)}catch(ue){setTimeout(()=>{throw ue},0)}})};return N(p,to.EventType.OPEN,()=>{m||(O(Ke,`RPC '${e}' stream ${i} transport opened.`),C.t_())}),N(p,to.EventType.CLOSE,()=>{m||(m=!0,O(Ke,`RPC '${e}' stream ${i} transport closed`),C.r_())}),N(p,to.EventType.ERROR,M=>{m||(m=!0,lo(Ke,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),C.r_(new F(R.UNAVAILABLE,"The operation could not be completed")))}),N(p,to.EventType.MESSAGE,M=>{var k;if(!m){let V=M.data[0];de(!!V,16349);let $=V,ue=$?.error||((k=$[0])===null||k===void 0?void 0:k.error);if(ue){O(Ke,`RPC '${e}' stream ${i} received error:`,ue);let Fe=ue.status,he=function(E){let w=Re[E];if(w!==void 0)return F0(w)}(Fe),D=ue.message;he===void 0&&(he=R.INTERNAL,D="Unknown error status: "+Fe+" with message "+ue.message),m=!0,C.r_(new F(he,D)),p.close()}else O(Ke,`RPC '${e}' stream ${i} received:`,V),C.i_(V)}}),N(c,om.STAT_EVENT,M=>{M.stat===_l.PROXY?O(Ke,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===_l.NOPROXY&&O(Ke,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.n_()},0),C}};function lm(){return typeof document<"u"?document:null}function ad(t){return new zm(t,!0)}var zl=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();let n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}};var MC="PersistentStream",Gl=class{constructor(e,n,r,i,o,s,c,u){this.bi=e,this.R_=r,this.V_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new zl(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}stop(){return _(this,null,function*(){this.w_()&&(yield this.close(0))})}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){return _(this,null,function*(){if(this.b_())return this.close(0)})}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,n){return _(this,null,function*(){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Zo(n)})}O_(){}auth(){this.state=1;let e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===n&&this.B_(r,i)},r=>{e(()=>{let i=new F(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,n){let r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(()=>_(this,null,function*(){this.state=0,this.start()}))}L_(e){return O(MC,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(O(MC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},by=class extends Gl{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();let n=qj(this.serializer,e),r=function(o){if(!("targetChange"in o))return K.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?K.min():s.readTime?nn(s.readTime):K.min()}(e);return this.listener.Q_(n,r)}U_(e){let n={};n.database=Qm(this.serializer),n.addTarget=function(o,s){let c,u=s.target;if(c=xm(u)?{documents:Wj(o,u)}:{query:Kj(o,u).gt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=V0(o,s.resumeToken);let l=Gm(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(K.min())>0){c.readTime=jl(o,s.snapshotVersion.toTimestamp());let l=Gm(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=Yj(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){let n={};n.database=Qm(this.serializer),n.removeTarget=e,this.F_(n)}},Cy=class extends Gl{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();let n=Gj(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.j_(r,n)}H_(){let e={};e.database=Qm(this.serializer),this.F_(e)}G_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>zj(this.serializer,r))};this.F_(n)}};var Ay=class{},Sy=class extends Ay{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Qo(e,Wm(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(R.UNKNOWN,o.toString())})}Wo(e,n,r,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Wo(e,Wm(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(R.UNKNOWN,s.toString())})}terminate(){this.J_=!0,this.connection.terminate()}},Ny=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(An(n),this.ea=!1):O("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}};var ni="RemoteStore",Ry=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){si(this)&&(O(ni,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=q(u);l.aa.add(4),yield Ea(l),l.la.set("Unknown"),l.aa.delete(4),yield cd(l)})}(this))}))}),this.la=new Ny(r,i)}};function cd(t){return _(this,null,function*(){if(si(t))for(let e of t.ua)yield e(!0)})}function Ea(t){return _(this,null,function*(){for(let e of t.ua)yield e(!1)})}function W0(t,e){let n=q(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),mv(n)?gv(n):Ao(n).b_()&&pv(n,e))}function fv(t,e){let n=q(t),r=Ao(n);n._a.delete(e),r.b_()&&K0(n,e),n._a.size===0&&(r.b_()?r.v_():si(n)&&n.la.set("Unknown"))}function pv(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(t).U_(e)}function K0(t,e){t.ha.Ke(e),Ao(t).K_(e)}function gv(t){t.ha=new qm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ao(t).start(),t.la.ta()}function mv(t){return si(t)&&!Ao(t).w_()&&t._a.size>0}function si(t){return q(t).aa.size===0}function Q0(t){t.ha=void 0}function fB(t){return _(this,null,function*(){t.la.set("Online")})}function pB(t){return _(this,null,function*(){t._a.forEach((e,n)=>{pv(t,e)})})}function gB(t,e){return _(this,null,function*(){Q0(t),mv(t)?(t.la.ia(e),gv(t)):t.la.set("Unknown")})}function mB(t,e,n){return _(this,null,function*(){if(t.la.set("Online"),e instanceof Vl&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i._a.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i._a.delete(c),i.ha.removeTarget(c))})}(t,e)}catch(r){O(ni,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wl(t,r)}else if(e instanceof co?t.ha.Xe(e):e instanceof Fl?t.ha.ot(e):t.ha.nt(e),!n.isEqual(K.min()))try{let r=yield G0(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let c=o.ha.It(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o._a.get(l);h&&o._a.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o._a.get(u);if(!h)return;o._a.set(u,h.withResumeToken(Qe.EMPTY_BYTE_STRING,h.snapshotVersion)),K0(o,u);let p=new ha(h.target,u,l,h.sequenceNumber);pv(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){O(ni,"Failed to raise snapshot:",r),yield Wl(t,r)}})}function Wl(t,e,n){return _(this,null,function*(){if(!Co(e))throw e;t.aa.add(1),yield Ea(t),t.la.set("Offline"),n||(n=()=>G0(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){O(ni,"Retrying IndexedDB access"),yield n(),t.aa.delete(1),yield cd(t)}))})}function Y0(t,e){return e().catch(n=>Wl(t,n,e))}function ud(t){return _(this,null,function*(){let e=q(t),n=or(e),r=e.oa.length>0?e.oa[e.oa.length-1].batchId:rv;for(;yB(e);)try{let i=yield uB(e.localStore,r);if(i===null){e.oa.length===0&&n.v_();break}r=i.batchId,vB(e,i)}catch(i){yield Wl(e,i)}Z0(e)&&J0(e)})}function yB(t){return si(t)&&t.oa.length<10}function vB(t,e){t.oa.push(e);let n=or(t);n.b_()&&n.W_&&n.G_(e.mutations)}function Z0(t){return si(t)&&!or(t).w_()&&t.oa.length>0}function J0(t){or(t).start()}function _B(t){return _(this,null,function*(){or(t).H_()})}function IB(t){return _(this,null,function*(){let e=or(t);for(let n of t.oa)e.G_(n.mutations)})}function EB(t,e,n){return _(this,null,function*(){let r=t.oa.shift(),i=Bm.from(r,e,n);yield Y0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ud(t)})}function wB(t,e){return _(this,null,function*(){e&&or(t).W_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return Vj(s)&&s!==R.ABORTED}(i.code)){let o=r.oa.shift();or(r).D_(),yield Y0(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ud(r)}})}(t,e)),Z0(t)&&J0(t)})}function PC(t,e){return _(this,null,function*(){let n=q(t);n.asyncQueue.verifyOperationInProgress(),O(ni,"RemoteStore received new credentials");let r=si(n);n.aa.add(3),yield Ea(n),r&&n.la.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),yield cd(n)})}function DB(t,e){return _(this,null,function*(){let n=q(t);e?(n.aa.delete(2),yield cd(n)):e||(n.aa.add(2),yield Ea(n),n.la.set("Unknown"))})}function Ao(t){return t.Pa||(t.Pa=function(n,r,i){let o=q(n);return o.Y_(),new by(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{jo:fB.bind(null,t),Jo:pB.bind(null,t),Zo:gB.bind(null,t),Q_:mB.bind(null,t)}),t.ua.push(e=>_(null,null,function*(){e?(t.Pa.D_(),mv(t)?gv(t):t.la.set("Unknown")):(yield t.Pa.stop(),Q0(t))}))),t.Pa}function or(t){return t.Ta||(t.Ta=function(n,r,i){let o=q(n);return o.Y_(),new Cy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:_B.bind(null,t),Zo:wB.bind(null,t),z_:IB.bind(null,t),j_:EB.bind(null,t)}),t.ua.push(e=>_(null,null,function*(){e?(t.Ta.D_(),yield ud(t)):(yield t.Ta.stop(),t.oa.length>0&&(O(ni,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))}))),t.Ta}var My=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function yv(t,e){if(An("AsyncQueue",`${e}: ${t}`),Co(t))return new F(R.UNAVAILABLE,`${e}: ${t}`);throw t}var Kl=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=ta(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ql=class{constructor(){this.Ia=new Ce(j.comparator)}track(e){let n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):B(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){let e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}},Eo=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Kl.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Py=class{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}},xy=class{constructor(){this.queries=xC(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){let i=q(n),o=i.queries;i.queries=xC(),o.forEach((s,c)=>{for(let u of c.Ra)u.onError(r)})})(this,new F(R.ABORTED,"Firestore shutting down"))}};function xC(){return new Rn(t=>T0(t),od)}function TB(t,e){return _(this,null,function*(){let n=q(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Va()&&e.ma()&&(r=2):(o=new Py,r=e.ma()?0:1);try{switch(r){case 0:o.Aa=yield n.onListen(i,!0);break;case 1:o.Aa=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let c=yv(s,`Initialization of query '${ro(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.Ra.push(e),e.ga(n.onlineState),o.Aa&&e.pa(o.Aa)&&vv(n)})}function bB(t,e){return _(this,null,function*(){let n=q(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Ra.indexOf(e);s>=0&&(o.Ra.splice(s,1),o.Ra.length===0?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function CB(t,e){let n=q(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.Ra)c.pa(i)&&(r=!0);s.Aa=i}}r&&vv(n)}function AB(t,e,n){let r=q(t),i=r.queries.get(e);if(i)for(let o of i.Ra)o.onError(n);r.queries.delete(e)}function vv(t){t.fa.forEach(e=>{e.next()})}var ky,kC;(kC=ky||(ky={})).ya="default",kC.Cache="cache";var Oy=class{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;let r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;let n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==ky.Cache}};var Yl=class{constructor(e){this.key=e}},Zl=class{constructor(e){this.key=e}},Fy=class{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=ie(),this.mutatedKeys=ie(),this.Ua=b0(e),this.Ka=new Kl(this.Ua)}get Wa(){return this.qa}Ga(e,n){let r=n?n.za:new Ql,i=n?n.Ka:this.Ka,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),m=sd(this.query,p)?p:null,C=!!y&&this.mutatedKeys.has(y.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),M=!1;y&&m?y.data.isEqual(m.data)?C!==N&&(r.track({type:3,doc:m}),M=!0):this.ja(y,m)||(r.track({type:2,doc:m}),M=!0,(u&&this.Ua(m,u)>0||l&&this.Ua(m,l)<0)&&(c=!0)):!y&&m?(r.track({type:0,doc:m}),M=!0):y&&!m&&(r.track({type:1,doc:y}),M=!0,(u||l)&&(c=!0)),M&&(m?(s=s.add(m),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ka:s,za:r,ys:c,mutatedKeys:o}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;let s=e.za.da();s.sort((h,p)=>function(m,C){let N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{Vt:M})}};return N(m)-N(C)}(h.type,p.type)||this.Ua(h.doc,p.doc)),this.Ha(r),i=i!=null&&i;let c=n&&!i?this.Ja():[],u=this.$a.size===0&&this.current&&!i?1:0,l=u!==this.Qa;return this.Qa=u,s.length!==0||l?{snapshot:new Eo(this.query,e.Ka,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:c}:{Ya:c}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Ql,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];let e=this.$a;this.$a=ie(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});let n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new Zl(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new Yl(r))}),n}Xa(e){this.qa=e.Ns,this.$a=ie();let n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return Eo.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}},_v="SyncEngine",Vy=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Ly=class{constructor(e){this.key=e,this.tu=!1}},jy=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new Rn(c=>T0(c),od),this.iu=new Map,this.su=new Set,this.ou=new Ce(j.comparator),this._u=new Map,this.au=new pa,this.uu={},this.cu=new Map,this.lu=fa.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}};function SB(t,e,n=!0){return _(this,null,function*(){let r=iA(t),i,o=r.ru.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=yield X0(r,e,n,!0),i})}function NB(t,e){return _(this,null,function*(){let n=iA(t);yield X0(n,e,!0,!1)})}function X0(t,e,n,r){return _(this,null,function*(){let i=yield lB(t.localStore,tn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=yield RB(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&W0(t.remoteStore,i),c})}function RB(t,e,n,r,i){return _(this,null,function*(){t.Pu=(p,y,m)=>function(N,M,k,V){return _(this,null,function*(){let $=M.view.Ga(k);$.ys&&($=yield NC(N.localStore,M.query,!1).then(({documents:D})=>M.view.Ga(D,$)));let ue=V&&V.targetChanges.get(M.targetId),Fe=V&&V.targetMismatches.get(M.targetId)!=null,he=M.view.applyChanges($,N.isPrimaryClient,ue,Fe);return FC(N,M.targetId,he.Ya),he.snapshot})}(t,p,y,m);let o=yield NC(t.localStore,e,!0),s=new Fy(e,o.Ns),c=s.Ga(o.documents),u=da.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);FC(t,n,l.Ya);let h=new Vy(e,n,s);return t.ru.set(e,h),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),l.snapshot})}function MB(t,e,n){return _(this,null,function*(){let r=q(t),i=r.ru.get(e),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter(s=>!od(s,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield vy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fv(r.remoteStore,i.targetId),By(r,i.targetId)}).catch(bo))):(By(r,i.targetId),yield vy(r.localStore,i.targetId,!0))})}function PB(t,e){return _(this,null,function*(){let n=q(t),r=n.ru.get(e),i=n.iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fv(n.remoteStore,r.targetId))})}function xB(t,e,n){return _(this,null,function*(){let r=BB(t);try{let i=yield function(s,c){let u=q(s),l=$e.now(),h=c.reduce((m,C)=>m.add(C.key),ie()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let C=Mn(),N=ie();return u.Cs.getEntries(m,h).next(M=>{C=M,C.forEach((k,V)=>{V.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,C)).next(M=>{p=M;let k=[];for(let V of c){let $=Fj(V,p.get(V.key).overlayedDocument);$!=null&&k.push(new Pn(V.key,$,m0($.value.mapValue),Cn.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,k,c)}).next(M=>{y=M;let k=M.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(m,M.batchId,k)})}).then(()=>({batchId:y.batchId,changes:A0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let l=s.uu[s.currentUser.toKey()];l||(l=new Ce(Q)),l=l.insert(c,u),s.uu[s.currentUser.toKey()]=l}(r,i.batchId,n),yield wa(r,i.changes),yield ud(r.remoteStore)}catch(i){let o=yv(i,"Failed to persist write");n.reject(o)}})}function eA(t,e){return _(this,null,function*(){let n=q(t);try{let r=yield aB(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n._u.get(o);s&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.tu=!0:i.modifiedDocuments.size>0?de(s.tu,14607):i.removedDocuments.size>0&&(de(s.tu,42227),s.tu=!1))}),yield wa(n,r,e)}catch(r){yield bo(r)}})}function OC(t,e,n){let r=q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ru.forEach((o,s)=>{let c=s.view.ga(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=q(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.Ra)y.ga(c)&&(l=!0)}),l&&vv(u)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kB(t,e,n){return _(this,null,function*(){let r=q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r._u.get(e),o=i&&i.key;if(o){let s=new Ce(j.comparator);s=s.insert(o,Ot.newNoDocument(o,K.min()));let c=ie().add(o),u=new Ol(K.min(),new Map,new Ce(Q),s,c);yield eA(r,u),r.ou=r.ou.remove(o),r._u.delete(e),Iv(r)}else yield vy(r.localStore,e,!1).then(()=>By(r,e,n)).catch(bo)})}function OB(t,e){return _(this,null,function*(){let n=q(t),r=e.batch.batchId;try{let i=yield sB(n.localStore,e);nA(n,r,null),tA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield wa(n,i)}catch(i){yield bo(i)}})}function FB(t,e,n){return _(this,null,function*(){let r=q(t);try{let i=yield function(s,c){let u=q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(de(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);nA(r,e,n),tA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield wa(r,i)}catch(i){yield bo(i)}})}function tA(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function nA(t,e,n){let r=q(t),i=r.uu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function By(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||rA(t,r)})}function rA(t,e){t.su.delete(e.path.canonicalString());let n=t.ou.get(e);n!==null&&(fv(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),Iv(t))}function FC(t,e,n){for(let r of n)r instanceof Yl?(t.au.addReference(r.key,e),VB(t,r)):r instanceof Zl?(O(_v,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||rA(t,r.key)):B(19791,{Iu:r})}function VB(t,e){let n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(O(_v,"New document in limbo: "+n),t.su.add(r),Iv(t))}function Iv(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){let e=t.su.values().next().value;t.su.delete(e);let n=new j(De.fromString(e)),r=t.lu.next();t._u.set(r,new Ly(n)),t.ou=t.ou.insert(n,r),W0(t.remoteStore,new ha(tn(w0(n.path)),r,"TargetPurposeLimboResolution",nv.le))}}function wa(t,e,n){return _(this,null,function*(){let r=q(t),i=[],o=[],s=[];r.ru.isEmpty()||(r.ru.forEach((c,u)=>{s.push(r.Pu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=py.Ps(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.nu.Q_(i),yield function(u,l){return _(this,null,function*(){let h=q(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,y=>P.forEach(y.ls,m=>h.persistence.referenceDelegate.addReference(p,y.targetId,m)).next(()=>P.forEach(y.hs,m=>h.persistence.referenceDelegate.removeReference(p,y.targetId,m)))))}catch(p){if(!Co(p))throw p;O(hv,"Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let m=h.Ss.get(y),C=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(C);h.Ss=h.Ss.insert(y,N)}}})}(r.localStore,o))})}function LB(t,e){return _(this,null,function*(){let n=q(t);if(!n.currentUser.isEqual(e)){O(_v,"User change. New user:",e.toKey());let r=yield z0(n.localStore,e);n.currentUser=e,function(o,s){o.cu.forEach(c=>{c.forEach(u=>{u.reject(new F(R.CANCELLED,s))})}),o.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wa(n,r.Ms)}})}function jB(t,e){let n=q(t),r=n._u.get(e);if(r&&r.tu)return ie().add(r.key);{let i=ie(),o=n.iu.get(e);if(!o)return i;for(let s of o){let c=n.ru.get(s);i=i.unionWith(c.view.Wa)}return i}}function iA(t){let e=q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kB.bind(null,e),e.nu.Q_=CB.bind(null,e.eventManager),e.nu.Tu=AB.bind(null,e.eventManager),e}function BB(t){let e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FB.bind(null,e),e}var oA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=ad(n.databaseInfo.databaseId),this.sharedClientState=this.Au(n),this.persistence=this.Ru(n),yield this.persistence.start(),this.localStore=this.Vu(n),this.gcScheduler=this.mu(n,this.localStore),this.indexBackfillerScheduler=this.fu(n,this.localStore)})}mu(n,r){return null}fu(n,r){return null}Vu(n){return oB(this.persistence,new my,n.initialUser,this.serializer)}Ru(n){return new Ul(fy.Ei,this.serializer)}Au(n){return new _y}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),Uy=class extends oA{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){de(this.persistence.referenceDelegate instanceof $l,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ey(r,e.asyncQueue,n)}Ru(e){let n=this.cacheSizeBytes!==void 0?Dt.withCacheSize(this.cacheSizeBytes):Dt.DEFAULT;return new Ul(r=>$l.Ei(r,n),this.serializer)}};var UB=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>OC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=LB.bind(null,this.syncEngine),yield DB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new xy}()}createDatastore(n){let r=ad(n.databaseInfo.databaseId),i=function(s){return new Ty(s)}(n.databaseInfo);return function(s,c,u,l){return new Sy(s,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,c,u){return new Ry(i,o,s,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>OC(this.syncEngine,r,0),function(){return ql.C()?new ql:new Iy}())}createSyncEngine(n,r){return function(o,s,c,u,l,h,p){let y=new jy(o,s,c,u,l,h);return p&&(y.hu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(o){return _(this,null,function*(){let s=q(o);O(ni,"RemoteStore shutting down."),s.aa.add(5),yield Ea(s),s.ca.shutdown(),s.la.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var $y=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var sr="FirestoreClient",Hy=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Le.UNAUTHENTICATED,this.clientId=Sl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){O(sr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O(sr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=yv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function dm(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O(sr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield z0(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function VC(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield $B(t);O(sr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>PC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>PC(e.remoteStore,i)),t._onlineComponents=e})}function $B(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O(sr,"Using user provided OfflineComponentProvider");try{yield dm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),yield dm(t,new oA)}}else O(sr,"Using default OfflineComponentProvider"),yield dm(t,new Uy(void 0));return t._offlineComponents})}function sA(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O(sr,"Using user provided OnlineComponentProvider"),yield VC(t,t._uninitializedComponentsProvider._online)):(O(sr,"Using default OnlineComponentProvider"),yield VC(t,new UB))),t._onlineComponents})}function HB(t){return sA(t).then(e=>e.syncEngine)}function qB(t){return _(this,null,function*(){let e=yield sA(t),n=e.eventManager;return n.onListen=SB.bind(null,e.syncEngine),n.onUnlisten=MB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PB.bind(null,e.syncEngine),n})}function zB(t,e,n={}){let r=new Xt;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,c,u,l){let h=new $y({next:y=>{h.yu(),s.enqueueAndForget(()=>bB(o,p)),y.fromCache&&u.source==="server"?l.reject(new F(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Oy(c,h,{includeMetadataChanges:!0,Fa:!0});return TB(o,p)}(yield qB(t),t.asyncQueue,e,n,r)})),r.promise}function aA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var LC=new Map;function cA(t,e,n){if(!n)throw new F(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GB(t,e,n,r){if(e===!0&&r===!0)throw new F(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jC(t){if(!j.isDocumentKey(t))throw new F(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function BC(t){if(j.isDocumentKey(t))throw new F(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ld(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B(12329,{type:typeof t})}function ri(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ld(t);throw new F(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var uA="firestore.googleapis.com",UC=!0,Jl=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uA,this.ssl=UC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:UC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nB)throw new F(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},wo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hm;switch(r.type){case"firstParty":return new mm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Gi("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=LC.get(n);r&&(O("ComponentProvider","Removing Datastore"),LC.delete(n),r.terminate())}(this),Promise.resolve()}};function lA(t,e,n,r={}){var i;t=ri(t,wo);let o=Lr(e),s=t._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s.host!==uA&&s.host!==u&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Wt(l,c)&&(t._setSettings(l),o&&(Wu(`https://${u}`),Gi("Firestore",!0)),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Le.MOCK_USER;else{h=wT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new F(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Le(y)}t._authCredentials=new fm(new Cl(h,p))}}var Do=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},yt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},rr=class t extends Do{constructor(e,n,r){super(e,n,w0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new j(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function dA(t,e,...n){if(t=Oe(t),cA("collection","path",e),t instanceof wo){let r=De.fromString(e,...n);return BC(r),new rr(t,null,r)}{if(!(t instanceof yt||t instanceof rr))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(De.fromString(e,...n));return BC(r),new rr(t.firestore,null,r)}}function Ev(t,e,...n){if(t=Oe(t),arguments.length===1&&(e=Sl.newId()),cA("doc","path",e),t instanceof wo){let r=De.fromString(e,...n);return jC(r),new yt(t,null,new j(r))}{if(!(t instanceof yt||t instanceof rr))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(De.fromString(e,...n));return jC(r),new yt(t.firestore,t instanceof rr?t.converter:null,new j(r))}}var $C="AsyncQueue",Xl=class{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new zl(this,"async_queue_retry"),this.ju=()=>{let r=lm();r&&O($C,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;let n=lm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;let n=lm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});let n=new Xt;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){return _(this,null,function*(){if(this.Qu.length!==0){try{yield this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Co(e))throw e;O($C,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}})}Yu(e){let n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,An("INTERNAL UNHANDLED ERROR: ",HC(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);let i=My.createAndSchedule(this,e,n,r,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&B(47125,{ec:HC(this.Ku)})}verifyOperationInProgress(){}tc(){return _(this,null,function*(){let e;do e=this.Hu,yield e;while(e!==this.Hu)})}nc(e){for(let n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){let n=this.Uu.indexOf(e);this.Uu.splice(n,1)}};function HC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var ii=class extends wo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Xl,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Xl(e),this._firestoreClient=void 0,yield e}})}};function hA(t,e){let n=typeof t=="object"?t:Br(),r=typeof t=="string"?t:e||Pl,i=Qi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=ET("firestore");o&&lA(i,...o)}return i}function fA(t){if(t._terminated)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WB(t),t._firestoreClient}function WB(t){var e,n,r;let i=t._freezeSettings(),o=function(c,u,l,h){return new Em(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,aA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Hy(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(t._componentsProvider))}var ga=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Qe.fromBase64String(e))}catch(n){throw new F(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ma=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ya=class{constructor(e){this._methodName=e}};var va=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}};var _a=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var KB=/^__.*__$/,qy=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ti(e,this.data,n,this.fieldTransforms)}};function pA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{oc:t})}}var zy=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this._c(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return ed(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(pA(this.oc)&&KB.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}},Gy=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ad(e)}dc(e,n,r,i=!1){return new zy({oc:e,methodName:n,Ec:r,path:mt.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wv(t){let e=t._freezeSettings(),n=ad(t._databaseId);return new Gy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gA(t,e,n,r,i,o={}){let s=t.dc(o.merge||o.mergeFields?2:0,e,n,i);vA("Data must be an object, but it was:",s,r);let c=mA(r,s),u,l;if(o.merge)u=new Jt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=YB(e,p,n);if(!s.contains(y))throw new F(R.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);JB(h,y)||h.push(y)}u=new Jt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new qy(new kt(c),u,l)}var Wy=class t extends ya{_toFieldTransform(e){return new Fm(e.path,new Jr)}isEqual(e){return e instanceof t}};function QB(t,e,n,r=!1){return Dv(n,t.dc(r?4:3,e))}function Dv(t,e){if(yA(t=Oe(t)))return vA("Unsupported field value:",e,t),mA(t,e);if(t instanceof ya)return function(r,i){if(!pA(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=Dv(c,i.Pc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=$e.fromDate(r);return{timestampValue:jl(i.serializer,o)}}if(r instanceof $e){let o=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jl(i.serializer,o)}}if(r instanceof va)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ga)return{bytesValue:V0(i.serializer,r._byteString)};if(r instanceof yt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Tc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _a)return function(s,c){return{mapValue:{fields:{[ov]:{stringValue:sv},[fo]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Tc("VectorValues must only contain numeric values.");return lv(c.serializer,l)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${ld(r)}`)}(t,e)}function mA(t,e){let n={};return c0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oi(t,(r,i)=>{let o=Dv(i,e.uc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function yA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof va||t instanceof ga||t instanceof yt||t instanceof ya||t instanceof _a)}function vA(t,e,n){if(!yA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=ld(n);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function YB(t,e,n){if((e=Oe(e))instanceof ma)return e._internalPath;if(typeof e=="string")return _A(t,e);throw ed("Field path arguments must be of type string or ",t,!1,void 0,n)}var ZB=new RegExp("[~\\*/\\[\\]]");function _A(t,e,n){if(e.search(ZB)>=0)throw ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ma(...e.split("."))._internalPath}catch{throw ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ed(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(R.INVALID_ARGUMENT,c+t+u)}function JB(t,e){return t.some(n=>n.isEqual(e))}var td=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ky(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Tv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Ky=class extends td{data(){return super.data()}};function Tv(t,e){return typeof e=="string"?_A(t,e):e instanceof ma?e._internalPath:e._delegate._internalPath}function XB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ia=class{},Qy=class extends Ia{};function IA(t,e,...n){let r=[];e instanceof Ia&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof Yy).length,c=o.filter(u=>u instanceof nd).length;if(s>1||s>0&&c>0)throw new F(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var nd=class t extends Qy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return wA(e._query,n),new Do(e.firestore,e.converter,km(e._query,n))}_parse(e){let n=wv(e.firestore);return function(o,s,c,u,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){zC(p,h);let C=[];for(let N of p)C.push(qC(u,o,N));y={arrayValue:{values:C}}}else y=qC(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||zC(p,h),y=QB(c,s,p,h==="in"||h==="not-in");return Pe.create(l,h,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function EA(t,e,n){let r=e,i=Tv("where",t);return nd._create(i,r,n)}var Yy=class t extends Ia{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ft.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,c=o.getFlattenedFilters();for(let u of c)wA(s,u),s=km(s,u)}(e._query,n),new Do(e.firestore,e.converter,km(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function qC(t,e,n){if(typeof(n=Oe(n))=="string"){if(n==="")throw new F(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!D0(e)&&n.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(De.fromString(n));if(!j.isDocumentKey(r))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lC(t,new j(r))}if(n instanceof yt)return lC(t,n._key);throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ld(n)}.`)}function zC(t,e){if(!Array.isArray(t)||t.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wA(t,e){let n=function(i,o){for(let s of i)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Zy=class{convertValue(e,n="none"){switch(ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Nn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return oi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[fo].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>_e(s.doubleValue));return new _a(o)}convertGeoPoint(e){return new va(_e(e.latitude),_e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=id(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){let n=Sn(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=De.fromString(e);de(H0(r),9688,{name:e});let i=new xl(r.get(1),r.get(3)),o=new j(r.popFirst(5));return i.isEqual(n)||An(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function DA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ao=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Jy=class extends td{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new uo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Tv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},uo=class extends Jy{data(e={}){return super.data(e)}},Xy=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ao(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uo(this._firestore,this._userDataWriter,r.key,r,new ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new uo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ao(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new uo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ao(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:eU(c.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function eU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B(61501,{type:t})}}var ev=class extends Zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ga(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}};function TA(t){t=ri(t,Do);let e=ri(t.firestore,ii),n=fA(e),r=new ev(e);return XB(t._query),zB(n,t._query).then(i=>new Xy(e,r,t,i))}function bA(t,e,n){t=ri(t,yt);let r=ri(t.firestore,ii),i=DA(t.converter,e,n);return bv(r,[gA(wv(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Cn.none())])}function CA(t){return bv(ri(t.firestore,ii),[new la(t._key,Cn.none())])}function AA(t,e){let n=ri(t.firestore,ii),r=Ev(t),i=DA(t.converter,e);return bv(n,[gA(wv(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}function bv(t,e){return function(r,i){let o=new Xt;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return xB(yield HB(r),i,o)})),o.promise}(fA(t),e)}function jW(){return new Wy("serverTimestamp")}(function(e,n=!0){(function(i){To=i})(Qn),Pt(new tt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new ii(new pm(r.getProvider("auth-internal")),new ym(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xl(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),be(eC,tC,e),be(eC,tC,"esm2017")})();var Da=class{constructor(e){return e}},SA="firestore",Cv=class{constructor(){return Zi(SA)}};var Av=new H("angularfire2.firestore-instances");function tU(t,e){let n=Us(SA,t,e);return n&&new Da(n)}function nU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Da(r)}}var rU={provide:Cv,deps:[[new pt,Av]]},iU={provide:Da,useFactory:tU,deps:[[new pt,Av],_n]};function G7(t,...e){return be("angularfire",Yn.full,"fst"),qn([iU,rU,{provide:Av,useFactory:nU(t),multi:!0,deps:[Ee,We,Zn,$r,[new pt,Xs],[new pt,Ji],...e]}])}var W7=Ne(AA,!0,2);var K7=Ne(dA,!0,2);var Q7=Ne(CA,!0,2);var Y7=Ne(Ev,!0,2);var Z7=Ne(TA,!0);var J7=Ne(hA,!0);var X7=Ne(IA,!0,2);var eK=Ne(bA,!0,2);var tK=Ne(EA,!0,2);export{me as a,ve as b,_ as c,Ae as d,AS as e,ne as f,ch as g,uh as h,ht as i,Xo as j,ns as k,Vt as l,VS as m,LS as n,jS as o,gr as p,ln as q,WS as r,mr as s,fh as t,mc as u,QS as v,ph as w,yr as x,sI as y,YS as z,ZS as A,rs as B,gh as C,XS as D,eN as E,mh as F,tN as G,nN as H,rN as I,iN as J,oN as K,sN as L,aN as M,cN as N,G as O,le as P,ms as Q,z6 as R,H as S,J as T,Ue as U,L as V,qn as W,ON as X,yE as Y,jt as Z,Pi as _,su as $,G6 as aa,W6 as ba,Fi as ca,tw as da,We as ea,wI as fa,hu as ga,_s as ha,ft as ia,Ee as ja,Rr as ka,K6 as la,mn as ma,Q6 as na,KR as oa,YR as pa,Jf as qa,Y6 as ra,gu as sa,mu as ta,rM as ua,ds as va,Is as wa,Iw as xa,Z6 as ya,J6 as za,X6 as Aa,ez as Ba,tz as Ca,Ew as Da,nz as Ea,tp as Fa,rz as Ga,iz as Ha,Wc as Ia,Qc as Ja,zn as Ka,re as La,dz as Ma,Tu as Na,Dx as Oa,Tx as Pa,gz as Qa,Ds as Ra,Se as Sa,$x as Ta,mz as Ua,Ts as Va,yz as Wa,Wx as Xa,fs as Ya,vp as Za,ck as _a,bu as $a,vz as ab,wD as bb,DD as cb,Ik as db,Dk as eb,Tk as fb,_z as gb,Or as hb,Iz as ib,Ez as jb,wz as kb,Fk as lb,Dz as mb,jk as nb,bD as ob,Uk as pb,Tz as qb,$k as rb,bz as sb,Cz as tb,Az as ub,Sz as vb,Nz as wb,Rz as xb,Au as yb,Mz as zb,Su as Ab,Pz as Bb,bs as Cb,Fr as Db,h1 as Eb,wp as Fb,f1 as Gb,Ui as Hb,OD as Ib,FD as Jb,y1 as Kb,C1 as Lb,HD as Mb,A1 as Nb,N1 as Ob,P1 as Pb,x1 as Qb,qD as Rb,k1 as Sb,O1 as Tb,Ap as Ub,vG as Vb,Q8 as Wb,Y8 as Xb,Js as Yb,pW as Zb,gW as _b,mW as $b,yW as ac,vW as bc,_W as cc,IW as dc,nT as ec,BG as fc,UG as gc,lO as hc,fO as ic,HG as jc,gO as kc,gT as lc,qG as mc,zG as nc,wO as oc,GG as pc,jW as qc,Da as rc,G7 as sc,W7 as tc,K7 as uc,Q7 as vc,Y7 as wc,Z7 as xc,J7 as yc,X7 as zc,eK as Ac,tK as Bc};
