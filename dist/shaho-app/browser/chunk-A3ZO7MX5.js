import{d as T,f as k}from"./chunk-QYZA2DXR.js";import{Ac as N,Bc as w,Cb as u,Eb as s,Fb as F,Kd as L,Nb as a,Ob as r,Pa as n,Za as _,_ as g,a as v,bb as y,d as B,de as b,ib as C,ic as A,jc as S,kc as O,lc as M,mb as i,mc as P,nb as o,ub as x,ye as h}from"./chunk-7TGFAU7G.js";function G(p,t){if(p&1&&(i(0,"div"),u(1),a(2,"date"),a(3,"number"),o()),p&2){let e=t.$implicit,d=t.index,m=x(2).$implicit;n(),F(" \u652F\u7D66\u5E74\u6708\u65E5: ",r(2,2,e,"yyyy/MM/dd")," \u8CDE\u4E0E\u984D: ",r(3,5,m.bonusAmountList[d],"1.0-0"),"\u5186 ")}}function J(p,t){if(p&1&&(i(0,"div"),y(1,G,4,8,"div",6),o()),p&2){let e=x().$implicit;n(),C("ngForOf",e.bonusDateList)}}function K(p,t){if(p&1&&(i(0,"div",3)(1,"div",4)(2,"div"),u(3),a(4,"number"),o(),i(5,"div"),u(6),a(7,"number"),o(),i(8,"div"),u(9),a(10,"number"),o(),i(11,"div"),u(12),a(13,"number"),o(),i(14,"div"),u(15),a(16,"number"),o(),i(17,"div"),u(18),a(19,"number"),o(),i(20,"div"),u(21),a(22,"number"),o(),i(23,"div"),u(24),a(25,"number"),o(),i(26,"div"),u(27),a(28,"number"),o(),i(29,"div"),u(30),a(31,"number"),o(),i(32,"div"),u(33),a(34,"number"),o(),i(35,"div"),u(36),a(37,"number"),o()(),y(38,J,2,1,"div",5),i(39,"div"),u(40),a(41,"number"),o(),i(42,"div"),u(43),a(44,"number"),o(),i(45,"div"),u(46),a(47,"number"),o()()),p&2){let e=t.$implicit;n(3),s("\u5065\u5EB7\u4FDD\u967A\u5168\u984D: ",e.healthInsuranceTotal!=null?r(4,16,e.healthInsuranceTotal,"1.0-0"):" ","\u5186"),n(3),s("\u5065\u5EB7\u4FDD\u967A\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.healthInsuranceCompany!=null?r(7,19,e.healthInsuranceCompany,"1.0-0"):" ","\u5186"),n(3),s("\u5065\u5EB7\u4FDD\u967A\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.healthInsuranceEmployee!=null?r(10,22,e.healthInsuranceEmployee,"1.0-0"):" ","\u5186"),n(3),s("\u4ECB\u8B77\u4FDD\u967A\u5168\u984D: ",e.careInsuranceTotal!=null?r(13,25,e.careInsuranceTotal,"1.0-0"):" ","\u5186"),n(3),s("\u4ECB\u8B77\u4FDD\u967A\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.careInsuranceCompany!=null?r(16,28,e.careInsuranceCompany,"1.0-0"):" ","\u5186"),n(3),s("\u4ECB\u8B77\u4FDD\u967A\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.careInsuranceEmployee!=null?r(19,31,e.careInsuranceEmployee,"1.0-0"):" ","\u5186"),n(3),s("\u539A\u751F\u5E74\u91D1\u5168\u984D: ",e.nenkinTotal!=null?r(22,34,e.nenkinTotal,"1.0-0"):" ","\u5186"),n(3),s("\u539A\u751F\u5E74\u91D1\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.nenkinCompany!=null?r(25,37,e.nenkinCompany,"1.0-0"):" ","\u5186"),n(3),s("\u539A\u751F\u5E74\u91D1\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.nenkinEmployee!=null?r(28,40,e.nenkinEmployee,"1.0-0"):" ","\u5186"),n(3),s("\u5408\u8A08: ",e.totalInsurance!=null?r(31,43,e.totalInsurance,"1.0-0"):" ","\u5186"),n(3),s("\u5408\u8A08\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.totalInsuranceCompany!=null?r(34,46,e.totalInsuranceCompany,"1.0-0"):" ","\u5186"),n(3),s("\u5408\u8A08\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.totalInsuranceEmployee!=null?r(37,49,e.totalInsuranceEmployee,"1.0-0"):" ","\u5186"),n(2),C("ngIf",e.bonusDateList&&e.bonusAmountList),n(2),s("\u6708\u9593\u8CDE\u4E0E\u984D: ",r(41,52,e.monthTotal,"1.0-0"),"\u5186"),n(3),s("\u6708\u9593\u6A19\u6E96\u8CDE\u4E0E\u984D\uFF08\u5065\u5EB7\u4FDD\u967A\u30FB\u4ECB\u8B77\u4FDD\u967A\uFF09: ",r(44,55,e.kenpoStandardBonusAmountAdjusted,"1.0-0"),"\u5186"),n(3),s("\u6708\u9593\u6A19\u6E96\u8CDE\u4E0E\u984D\uFF08\u539A\u751F\u5E74\u91D1\uFF09: ",r(47,58,e.nenkinStandardBonusAmount,"1.0-0"),"\u5186")}}var H=class p{employeeId="";companyId="";bonuses=[];firestore=g(L);route=g(T);router=g(k);ngOnInit(){return B(this,null,function*(){let t=N();w(t,m=>{m||this.router.navigate(["/login"])}),this.employeeId=this.route.snapshot.paramMap.get("id")||"";let e=b(this.firestore,"companies"),d=yield h(e);for(let m of d.docs){let z=b(this.firestore,"companies",m.id,"employees"),$=yield h(z);for(let j of $.docs)if(j.id===this.employeeId){this.companyId=m.id;let R=b(this.firestore,"companies",this.companyId,"employees",this.employeeId,"bonus"),q=yield h(R),f=[];for(let c of q.docs){let l=c.id,E=b(this.firestore,"companies",this.companyId,"employees",this.employeeId,"bonus",l,"monthBonus"),I=yield h(E);f.push(...I.docs.map(D=>v({id:D.id,nendo:l},D.data())))}this.bonuses=f,this.bonuses.sort((c,l)=>{let E=c.bonusDateList&&c.bonusDateList[0]?new Date(c.bonusDateList[0]).getTime():0;return(l.bonusDateList&&l.bonusDateList[0]?new Date(l.bonusDateList[0]).getTime():0)-E});return}}})}get healthInsuranceTotalSum(){return this.bonuses.reduce((t,e)=>t+(Number(e.healthInsuranceTotal)||0),0)}get healthInsuranceCompanySum(){return this.bonuses.reduce((t,e)=>t+(Number(e.healthInsuranceCompany)||0),0)}get healthInsuranceEmployeeSum(){return this.bonuses.reduce((t,e)=>t+(Number(e.healthInsuranceEmployee)||0),0)}get careInsuranceTotalSum(){return this.bonuses.reduce((t,e)=>t+(Number(e.careInsuranceTotal)||0),0)}get careInsuranceCompanySum(){return this.bonuses.reduce((t,e)=>t+(Number(e.careInsuranceCompany)||0),0)}get careInsuranceEmployeeSum(){return this.bonuses.reduce((t,e)=>t+(Number(e.careInsuranceEmployee)||0),0)}get pensionInsuranceTotalSum(){return this.bonuses.reduce((t,e)=>t+(Number(e.pensionInsuranceTotal)||0),0)}get pensionInsuranceCompanySum(){return this.bonuses.reduce((t,e)=>t+(Number(e.pensionInsuranceCompany)||0),0)}get pensionInsuranceEmployeeSum(){return this.bonuses.reduce((t,e)=>t+(Number(e.pensionInsuranceEmployee)||0),0)}get totalSum(){return this.bonuses.reduce((t,e)=>t+(Number(e.total)||0),0)}get totalCompanySum(){return this.bonuses.reduce((t,e)=>t+(Number(e.totalCompany)||0),0)}get totalEmployeeSum(){return this.bonuses.reduce((t,e)=>t+(Number(e.totalEmployee)||0),0)}static \u0275fac=function(e){return new(e||p)};static \u0275cmp=_({type:p,selectors:[["app-bonus-history"]],decls:5,vars:1,consts:[[1,"history-header"],[1,"history-header-title"],["class","pair-block","style","border:1px solid #aaa; margin-bottom: 24px; padding: 12px;",4,"ngFor","ngForOf"],[1,"pair-block",2,"border","1px solid #aaa","margin-bottom","24px","padding","12px"],[1,"bonus-grid"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"span",1),u(2,"\u8CDE\u4E0E\u5C65\u6B74"),o()(),i(3,"div"),y(4,K,48,61,"div",2),o()),e&2&&(n(4),C("ngForOf",d.bonuses))},dependencies:[P,A,S,M,O],styles:[".history-header[_ngcontent-%COMP%]{width:100%;padding-top:3.5rem;margin-bottom:18px;display:flex;align-items:flex-end;justify-content:flex-start;text-align:left}.history-header-title[_ngcontent-%COMP%]{font-size:1.25em;font-weight:700;color:#333;letter-spacing:.04em;margin-left:.2em}.pair-block[_ngcontent-%COMP%]{border:1px solid #aaa;margin-bottom:24px;padding:16px 20px;border-radius:8px;background:#fafbfc;box-shadow:0 2px 8px #00000008;font-size:.92em}.bonus-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:8px 16px;margin-top:8px;margin-bottom:8px}.bonus-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:#fff;border-radius:4px;padding:6px 8px;border:1px solid #e0e0e0;font-size:.92em;min-width:0;word-break:break-all}.bonus-history-sum[_ngcontent-%COMP%]{margin-top:2.5em;margin-bottom:2em}.bonus-history-sum-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:.5em}.bonus-history-sum-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bonus-history-sum-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e0e0e0;padding:8px 10px;text-align:right;font-size:1em}.bonus-history-sum-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f0f4f8;color:#1976d2;font-weight:600;text-align:left}.bonus-history-sum-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%], .bonus-history-sum-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{font-weight:700;background:#e3f2fd}"]})};export{H as BonusHistoryComponent};
