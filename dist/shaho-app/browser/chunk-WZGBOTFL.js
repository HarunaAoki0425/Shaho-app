import{a as D}from"./chunk-FUHT4GF3.js";import{Cb as T,Dd as j,Kd as P,Za as M,_ as v,_d as S,d as E,de as I,le as N,mb as Y,nb as F}from"./chunk-7TGFAU7G.js";var B=class w{firestore=v(P);static judgeSocialInsuranceRequired({employee:e,office:n,company:a}){if(e?.employmentPeriodType==="\u6709\u671F"&&e?.employmentPeriodStart&&e?.employmentPeriodEnd&&e?.employmentPeriodRenewal==="\u66F4\u65B0\u306A\u3057"){let p=new Date(e.employmentPeriodStart);if((new Date(e.employmentPeriodEnd).getTime()-p.getTime())/(1e3*60*60*24)<=62)return console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: false (\u6709\u671F2\u304B\u6708\u4EE5\u5185\u30FB\u66F4\u65B0\u306A\u3057)"),!1}if(n?.applicableOffice===!1)return console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: false (\u4E8B\u696D\u6240\u304C\u975E\u9069\u7528)"),!1;let o=this.judgeHealthInsurance(e),t=this.judgeCareInsurance(e),s=this.judgePensionInsurance(e);if(!o&&!t&&!s)return console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: false (\u5168\u4FDD\u967A\u5224\u5B9A\u304Cfalse)"),!1;let r=new D(e?.workDays||0),c=new D(e?.workHours||0),l=new D(n?.monthlyDays||0),u=new D(n?.weeklyHours||0),i=l.times(.75),h=u.times(.75);if(l.gt(0)&&u.gt(0)&&r.gte(i)&&c.gte(h))return console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: true (4\u5206\u306E3\u6761\u4EF6)"),!0;let m=Number(n?.employeeCount||0),d=Number(e?.workHours||0),f=Number(e?.baseSalary||0),y=e?.isStudent==="\u5B66\u751F\u3067\u306F\u306A\u3044",g=!1;if(e?.employmentPeriodType==="\u7121\u671F")g=!0;else if(e?.employmentPeriodType==="\u6709\u671F"&&e?.employmentPeriodStart&&e?.employmentPeriodEnd){let p=new Date(e.employmentPeriodStart);g=(new Date(e.employmentPeriodEnd).getTime()-p.getTime())/(1e3*60*60*24)>=60}let b=m>=51&&d>=20&&f>=88e3&&y&&g;return console.log("[DEBUG] \u8FFD\u52A0\u6761\u4EF6:",{officeEmployeeCount:m,workHours:d,baseSalary:f,isNotStudent:y,periodOk:g,allExtra:b}),b?(console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: true (\u8FFD\u52A0\u6761\u4EF6)"),!0):(console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: false"),!1)}static judgeEligibility(e){return{health:!0,pension:!0,care:!0}}static judgeHealthInsurance(e){if(!e?.birthdate)return!1;let n=new Date,a=n.getFullYear(),o=n.getMonth()+1,t=new Date(e.birthdate);if(isNaN(t.getTime()))return!1;let s=new Date(t.getFullYear()+75,t.getMonth(),t.getDate()),r=s.getFullYear(),c=s.getMonth()+1;return a<r||a===r&&o<=c}static judgeCareInsurance(e){if(!e?.birthdate)return!1;let n=new Date,a=n.getFullYear(),o=n.getMonth()+1,t=new Date(e.birthdate);if(isNaN(t.getTime()))return!1;let s=new Date(t.getFullYear()+40,t.getMonth(),t.getDate()),r=new Date(s);r.setDate(r.getDate()-1);let c=r.getFullYear(),l=r.getMonth()+1,u=new Date(t.getFullYear()+65,t.getMonth(),t.getDate()),i=new Date(u);i.setDate(i.getDate()-1);let h=i.getFullYear(),m=i.getMonth()+1,d=h,f=m-1;f===0&&(f=12,d-=1);let y=a>c||a===c&&o>=l,g=a<d||a===d&&o<=f;return y&&g}static judgePensionInsurance(e){if(!e?.birthdate)return!1;let n=new Date,a=n.getFullYear(),o=n.getMonth()+1,t=new Date(e.birthdate);if(isNaN(t.getTime()))return!1;let s=new Date(t.getFullYear()+70,t.getMonth(),t.getDate()),r=new Date(s);r.setDate(r.getDate()-1);let c=r.getFullYear(),l=r.getMonth()+1,u=c,i=l-1;i===0&&(i=12,u-=1);let h=a<u||a===u&&o<=i;return e.seniorVoluntaryEnrollment==="\u3059\u308B"?!0:h}static judgeInternationalSocialInsurance(e){return!e.dispatchedAbroad||e.dispatchedAbroad==="\u8A72\u5F53\u3057\u306A\u3044"||e.socialSecurityAgreement==="\u8A72\u5F53\u3057\u306A\u3044"||e.socialSecurityAgreement==="\u8A72\u5F53\u3059\u308B"&&(e.dispatchedAbroad==="\u65E5\u672C\u304B\u3089\u5916\u56FD\u3078\u306E\u6D3E\u9063\u52B4\u50CD\u8005"&&e.temporaryDispatch==="\u8A72\u5F53\u3059\u308B"||e.dispatchedAbroad==="\u5916\u56FD\u304B\u3089\u65E5\u672C\u3078\u306E\u6D3E\u9063\u52B4\u50CD\u8005"&&e.temporaryDispatch==="\u8A72\u5F53\u3057\u306A\u3044")}onJudgeAndNavigate(e,n,a,o){return E(this,null,function*(){if(!w.judgeSocialInsuranceRequired({employee:e,office:n,company:a})){let s=N(this.firestore,`companies/${a.id}/employees/${e.id}`),r=I(s,"insurances");yield S(r,{createdAt:j(),standardId:o,isInsuranceTarget:!1})}})}static \u0275fac=function(n){return new(n||w)};static \u0275cmp=M({type:w,selectors:[["app-judge"]],decls:2,vars:0,template:function(n,a){n&1&&(Y(0,"p"),T(1,"judge works!"),F())},encapsulation:2})};export{B as a};
