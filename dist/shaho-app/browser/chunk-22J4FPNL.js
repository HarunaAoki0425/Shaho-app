var fk=Object.defineProperty,pk=Object.defineProperties;var gk=Object.getOwnPropertyDescriptors;var Hu=Object.getOwnPropertySymbols,mk=Object.getPrototypeOf,kT=Object.prototype.hasOwnProperty,OT=Object.prototype.propertyIsEnumerable,yk=Reflect.get;var xT=(n,e,t)=>e in n?fk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tt=(n,e)=>{for(var t in e||={})kT.call(e,t)&&xT(n,t,e[t]);if(Hu)for(var t of Hu(e))OT.call(e,t)&&xT(n,t,e[t]);return n},Dt=(n,e)=>pk(n,gk(e));var l3=(n,e)=>{var t={};for(var r in n)kT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Hu)for(var r of Hu(n))e.indexOf(r)<0&&OT.call(n,r)&&(t[r]=n[r]);return t};var gn=(n,e,t)=>yk(mk(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(l){i(l)}},s=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function Lp(n,e){return Object.is(n,e)}var Je=null,qu=!1,Vp=1,Gt=Symbol("SIGNAL");function le(n){let e=Je;return Je=n,e}function jp(){return Je}var Ca={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Sa(n){if(qu)throw new Error("");if(Je===null)return;Je.consumerOnSignalRead(n);let e=Je.nextProducerIndex++;if(Ku(Je),e<Je.producerNode.length&&Je.producerNode[e]!==n&&ba(Je)){let t=Je.producerNode[e];Gu(t,Je.producerIndexOfThis[e])}Je.producerNode[e]!==n&&(Je.producerNode[e]=n,Je.producerIndexOfThis[e]=ba(Je)?LT(n,Je,e):0),Je.producerLastReadVersion[e]=n.version}function FT(){Vp++}function Bp(n){if(!(ba(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Vp)){if(!n.producerMustRecompute(n)&&!qp(n)){Fp(n);return}n.producerRecomputeValue(n),Fp(n)}}function Up(n){if(n.liveConsumerNode===void 0)return;let e=qu;qu=!0;try{for(let t of n.liveConsumerNode)t.dirty||vk(t)}finally{qu=e}}function $p(){return Je?.consumerAllowSignalWrites!==!1}function vk(n){n.dirty=!0,Up(n),n.consumerMarkedDirty?.(n)}function Fp(n){n.dirty=!1,n.lastCleanEpoch=Vp}function Wu(n){return n&&(n.nextProducerIndex=0),le(n)}function Hp(n,e){if(le(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ba(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Gu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function qp(n){Ku(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Bp(t),r!==t.version))return!0}return!1}function zp(n){if(Ku(n),ba(n))for(let e=0;e<n.producerNode.length;e++)Gu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function LT(n,e,t){if(VT(n),n.liveConsumerNode.length===0&&jT(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=LT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Gu(n,e){if(VT(n),n.liveConsumerNode.length===1&&jT(n))for(let r=0;r<n.producerNode.length;r++)Gu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ku(i),i.producerIndexOfThis[r]=e}}function ba(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ku(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function VT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function jT(n){return n.producerNode!==void 0}function Wp(n,e){let t=Object.create(_k);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Bp(t),Sa(t),t.value===zu)throw t.error;return t.value};return r[Gt]=t,r}var kp=Symbol("UNSET"),Op=Symbol("COMPUTING"),zu=Symbol("ERRORED"),_k=Dt(Tt({},Ca),{value:kp,dirty:!0,error:null,equal:Lp,kind:"computed",producerMustRecompute(n){return n.value===kp||n.value===Op},producerRecomputeValue(n){if(n.value===Op)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Op;let t=Wu(n),r,i=!1;try{r=n.computation(),le(null),i=e!==kp&&e!==zu&&r!==zu&&n.equal(e,r)}catch(o){r=zu,n.error=o}finally{Hp(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Ik(){throw new Error}var BT=Ik;function UT(n){BT(n)}function Gp(n){BT=n}var Ek=null;function Kp(n,e){let t=Object.create(Qu);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Sa(t),t.value);return r[Gt]=t,r}function Aa(n,e){$p()||UT(n),n.equal(n.value,e)||(n.value=e,wk(n))}function Qp(n,e){$p()||UT(n),Aa(n,e(n.value))}var Qu=Dt(Tt({},Ca),{equal:Lp,value:void 0,kind:"signal"});function wk(n){n.version++,FT(),Up(n),Ek?.()}function Yp(n){let e=le(null);try{return n()}finally{le(e)}}var Zp;function Na(){return Zp}function Hn(n){let e=Zp;return Zp=n,e}var Yu=Symbol("NotFound");function X(n){return typeof n=="function"}function Ro(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Zu=Ro(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function vi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof Zu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{$T(o)}catch(s){e=e??[],s instanceof Zu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Zu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)$T(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&vi(t,e)}remove(e){let{_finalizers:t}=this;t&&vi(t,e),e instanceof n&&e._removeParent(this)}};qe.EMPTY=(()=>{let n=new qe;return n.closed=!0,n})();var Jp=qe.EMPTY;function Ju(n){return n instanceof qe||n&&"closed"in n&&X(n.remove)&&X(n.add)&&X(n.unsubscribe)}function $T(n){X(n)?n():n.unsubscribe()}var tn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Po={setTimeout(n,e,...t){let{delegate:r}=Po;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Po;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xu(n){Po.setTimeout(()=>{let{onUnhandledError:e}=tn;if(e)e(n);else throw n})}function _i(){}var HT=Xp("C",void 0,void 0);function qT(n){return Xp("E",void 0,n)}function zT(n){return Xp("N",n,void 0)}function Xp(n,e,t){return{kind:n,value:e,error:t}}var Ii=null;function Mo(n){if(tn.useDeprecatedSynchronousErrorHandling){let e=!Ii;if(e&&(Ii={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ii;if(Ii=null,t)throw r}}else n()}function WT(n){tn.useDeprecatedSynchronousErrorHandling&&Ii&&(Ii.errorThrown=!0,Ii.error=n)}var Ei=class extends qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ju(e)&&e.add(this)):this.destination=Ak}static create(e,t,r){return new qn(e,t,r)}next(e){this.isStopped?tg(zT(e),this):this._next(e)}error(e){this.isStopped?tg(qT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tg(HT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Ck=Function.prototype.bind;function eg(n,e){return Ck.call(n,e)}var ng=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){el(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){el(r)}else el(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){el(t)}}},qn=class extends Ei{constructor(e,t,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&tn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&eg(e.next,o),error:e.error&&eg(e.error,o),complete:e.complete&&eg(e.complete,o)}):i=e}this.destination=new ng(i)}};function el(n){tn.useDeprecatedSynchronousErrorHandling?WT(n):Xu(n)}function Sk(n){throw n}function tg(n,e){let{onStoppedNotification:t}=tn;t&&Po.setTimeout(()=>t(n,e))}var Ak={closed:!0,next:_i,error:Sk,complete:_i};var xo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function vt(n){return n}function tl(...n){return rg(n)}function rg(n){return n.length===0?vt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Rk(t)?t:new qn(t,r,i);return Mo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=GT(r),new r((i,o)=>{let s=new qn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[xo](){return this}pipe(...t){return rg(t)(this)}toPromise(t){return t=GT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function GT(n){var e;return(e=n??tn.Promise)!==null&&e!==void 0?e:Promise}function Nk(n){return n&&X(n.next)&&X(n.error)&&X(n.complete)}function Rk(n){return n&&n instanceof Ei||Nk(n)&&Ju(n)}function ig(n){return X(n?.lift)}function Y(n){return e=>{if(ig(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function G(n,e,t,r,i){return new og(n,e,t,r,i)}var og=class extends Ei{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function sg(){return Y((n,e)=>{let t=null;n._refCount++;let r=G(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ag=class extends ne{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ig(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qe;let t=this.getSubject();e.add(this.source.subscribe(G(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qe.EMPTY)}return e}refCount(){return sg()(this)}};var KT=Ro(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Kt=(()=>{class n extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new nl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new KT}next(t){Mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Jp:(this.currentObservers=null,o.push(t),new qe(()=>{this.currentObservers=null,vi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ne;return t.source=this,t}}return n.create=(e,t)=>new nl(e,t),n})(),nl=class extends Kt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Jp}};var Ra=class extends Kt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var cg={now(){return(cg.delegate||Date).now()},delegate:void 0};var rl=class extends qe{constructor(e,t){super()}schedule(e,t=0){return this}};var Pa={setInterval(n,e,...t){let{delegate:r}=Pa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Pa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ko=class extends rl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Pa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Pa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,vi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Oo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Oo.now=cg.now;var Fo=class extends Oo{constructor(e,t=Oo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var wr=new Fo(ko),ug=wr;var il=class extends ko{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ol=class extends Fo{};var lg=new ol(il);var wi=new ne(n=>n.complete());function sl(n){return n&&X(n.schedule)}function dg(n){return n[n.length-1]}function al(n){return X(dg(n))?n.pop():void 0}function mn(n){return sl(dg(n))?n.pop():void 0}function QT(n,e){return typeof dg(n)=="number"?n.pop():e}function hg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ZT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{l(r.next(d))}catch(f){s(f)}}function c(d){try{l(r.throw(d))}catch(f){s(f)}}function l(d){d.done?o(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function YT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ti(n){return this instanceof Ti?(this.v=n,this):new Ti(n)}function JT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(I){return Promise.resolve(I).then(m,f)}}function a(m,I){r[m]&&(i[m]=function(S){return new Promise(function(P,O){o.push([m,S,P,O])>1||c(m,S)})},I&&(i[m]=I(i[m])))}function c(m,I){try{l(r[m](I))}catch(S){g(o[0][3],S)}}function l(m){m.value instanceof Ti?Promise.resolve(m.value.v).then(d,f):g(o[0][2],m)}function d(m){c("next",m)}function f(m){c("throw",m)}function g(m,I){m(I),o.shift(),o.length&&c(o[0][0],o[0][1])}}function XT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof YT=="function"?YT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var cl=n=>n&&typeof n.length=="number"&&typeof n!="function";function ul(n){return X(n?.then)}function ll(n){return X(n[xo])}function dl(n){return Symbol.asyncIterator&&X(n?.[Symbol.asyncIterator])}function hl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Pk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fl=Pk();function pl(n){return X(n?.[fl])}function gl(n){return JT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ti(t.read());if(i)return yield Ti(void 0);yield yield Ti(r)}}finally{t.releaseLock()}})}function ml(n){return X(n?.getReader)}function ye(n){if(n instanceof ne)return n;if(n!=null){if(ll(n))return Mk(n);if(cl(n))return xk(n);if(ul(n))return kk(n);if(dl(n))return eD(n);if(pl(n))return Ok(n);if(ml(n))return Fk(n)}throw hl(n)}function Mk(n){return new ne(e=>{let t=n[xo]();if(X(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function xk(n){return new ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function kk(n){return new ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xu)})}function Ok(n){return new ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function eD(n){return new ne(e=>{Lk(n,e).catch(t=>e.error(t))})}function Fk(n){return eD(gl(n))}function Lk(n,e){var t,r,i,o;return ZT(this,void 0,void 0,function*(){try{for(t=XT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function bt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Tr(n,e=0){return Y((t,r)=>{t.subscribe(G(r,i=>bt(r,n,()=>r.next(i),e),()=>bt(r,n,()=>r.complete(),e),i=>bt(r,n,()=>r.error(i),e)))})}function Dr(n,e=0){return Y((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function tD(n,e){return ye(n).pipe(Dr(e),Tr(e))}function nD(n,e){return ye(n).pipe(Dr(e),Tr(e))}function rD(n,e){return new ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function iD(n,e){return new ne(t=>{let r;return bt(t,e,()=>{r=n[fl](),bt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function yl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ne(t=>{bt(t,e,()=>{let r=n[Symbol.asyncIterator]();bt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function oD(n,e){return yl(gl(n),e)}function sD(n,e){if(n!=null){if(ll(n))return tD(n,e);if(cl(n))return rD(n,e);if(ul(n))return nD(n,e);if(dl(n))return yl(n,e);if(pl(n))return iD(n,e);if(ml(n))return oD(n,e)}throw hl(n)}function Ct(n,e){return e?sD(n,e):ye(n)}function Vk(...n){let e=mn(n);return Ct(n,e)}function jk(n,e){let t=X(n)?n:()=>n,r=i=>i.error(t());return new ne(e?i=>e.schedule(r,0,i):r)}function Bk(n){return!!n&&(n instanceof ne||X(n.lift)&&X(n.subscribe))}var Di=Ro(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function aD(n){return n instanceof Date&&!isNaN(n)}function St(n,e){return Y((t,r)=>{let i=0;t.subscribe(G(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Uk}=Array;function $k(n,e){return Uk(e)?n(...e):n(e)}function vl(n){return St(e=>$k(n,e))}var{isArray:Hk}=Array,{getPrototypeOf:qk,prototype:zk,keys:Wk}=Object;function _l(n){if(n.length===1){let e=n[0];if(Hk(e))return{args:e,keys:null};if(Gk(e)){let t=Wk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Gk(n){return n&&typeof n=="object"&&qk(n)===zk}function Il(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Kk(...n){let e=mn(n),t=al(n),{args:r,keys:i}=_l(n);if(r.length===0)return Ct([],e);let o=new ne(Qk(r,e,i?s=>Il(i,s):vt));return t?o.pipe(vl(t)):o}function Qk(n,e,t=vt){return r=>{cD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)cD(e,()=>{let l=Ct(n[c],e),d=!1;l.subscribe(G(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function cD(n,e,t){n?bt(t,n,e):e()}function uD(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},m=S=>l<r?I(S):c.push(S),I=S=>{o&&e.next(S),l++;let P=!1;ye(t(S,d++)).subscribe(G(e,O=>{i?.(O),o?m(O):e.next(O)},()=>{P=!0},void 0,()=>{if(P)try{for(l--;c.length&&l<r;){let O=c.shift();s?bt(e,s,()=>I(O)):I(O)}g()}catch(O){e.error(O)}}))};return n.subscribe(G(e,m,()=>{f=!0,g()})),()=>{a?.()}}function bi(n,e,t=1/0){return X(e)?bi((r,i)=>St((o,s)=>e(r,o,i,s))(ye(n(r,i))),t):(typeof e=="number"&&(t=e),Y((r,i)=>uD(r,i,n,t)))}function Ma(n=1/0){return bi(vt,n)}function lD(){return Ma(1)}function El(...n){return lD()(Ct(n,mn(n)))}function Yk(n){return new ne(e=>{ye(n()).subscribe(e)})}function Zk(...n){let e=al(n),{args:t,keys:r}=_l(n),i=new ne(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let f=!1;ye(t[d]).subscribe(G(o,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?Il(r,a):a),o.complete())}))}});return e?i.pipe(vl(e)):i}function xa(n=0,e,t=ug){let r=-1;return e!=null&&(sl(e)?t=e:r=e),new ne(i=>{let o=aD(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Jk(...n){let e=mn(n),t=QT(n,1/0),r=n;return r.length?r.length===1?ye(r[0]):Ma(t)(Ct(r,e)):wi}function yn(n,e){return Y((t,r)=>{let i=0;t.subscribe(G(r,o=>n.call(e,o,i++)&&r.next(o)))})}function dD(n){return Y((e,t)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let l=i;i=null,t.next(l)}s&&t.complete()},c=()=>{o=null,s&&t.complete()};e.subscribe(G(t,l=>{r=!0,i=l,o||ye(n(l)).subscribe(o=G(t,a,c))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}function Xk(n,e=wr){return dD(()=>xa(n,e))}function hD(n){return Y((e,t)=>{let r=null,i=!1,o;r=e.subscribe(G(t,void 0,void 0,s=>{o=ye(n(s,hD(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function fD(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(G(s,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function fg(n,e){return X(e)?bi(n,e,1):bi(n,1)}function e1(n,e=wr){return Y((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+n,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}t.subscribe(G(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function ka(n){return Y((e,t)=>{let r=!1;e.subscribe(G(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pg(n){return n<=0?()=>wi:Y((e,t)=>{let r=0;e.subscribe(G(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function gg(n,e){return Y((t,r)=>{let i=new Set;t.subscribe(G(r,o=>{let s=n?n(o):o;i.has(s)||(i.add(s),r.next(o))})),e&&ye(e).subscribe(G(r,()=>i.clear(),_i))})}function mg(n,e=vt){return n=n??t1,Y((t,r)=>{let i,o=!0;t.subscribe(G(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function t1(n,e){return n===e}function wl(n=n1){return Y((e,t)=>{let r=!1;e.subscribe(G(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function n1(){return new Di}function r1(n){return Y((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function i1(n,e){let t=arguments.length>=2;return r=>r.pipe(n?yn((i,o)=>n(i,o,r)):vt,pg(1),t?ka(e):wl(()=>new Di))}function yg(n){return n<=0?()=>wi:Y((e,t)=>{let r=[];e.subscribe(G(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function o1(n,e){let t=arguments.length>=2;return r=>r.pipe(n?yn((i,o)=>n(i,o,r)):vt,yg(1),t?ka(e):wl(()=>new Di))}function vg(){return Y((n,e)=>{let t,r=!1;n.subscribe(G(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Tl(n,e){return Y(fD(n,e,arguments.length>=2,!0))}function s1(n={}){let{connector:e=()=>new Kt,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),s=c=void 0,d=f=!1},I=()=>{let S=s;m(),S?.unsubscribe()};return Y((S,P)=>{l++,!f&&!d&&g();let O=c=c??e();P.add(()=>{l--,l===0&&!f&&!d&&(a=_g(I,i))}),O.subscribe(P),!s&&l>0&&(s=new qn({next:j=>O.next(j),error:j=>{f=!0,g(),a=_g(m,t,j),O.error(j)},complete:()=>{d=!0,g(),a=_g(m,r),O.complete()}}),ye(S).subscribe(s))})(o)}}function _g(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new qn({next:()=>{r.unsubscribe(),n()}});return ye(e(...t)).subscribe(r)}function a1(n){return yn((e,t)=>n<=t)}function Ig(...n){let e=mn(n);return Y((t,r)=>{(e?El(n,t,e):El(n,t)).subscribe(r)})}function c1(n,e){return Y((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(G(r,c=>{i?.unsubscribe();let l=0,d=o++;ye(n(c,d)).subscribe(i=G(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function u1(n){return Y((e,t)=>{ye(n).subscribe(G(t,()=>t.complete(),_i)),!t.closed&&e.subscribe(t)})}function l1(n,e,t){let r=X(n)||e||t?{next:n,error:e,complete:t}:n;return r?Y((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(G(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):vt}var rb="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",oe=class extends Error{code;constructor(e,t){super(ib(e,t)),this.code=e}};function d1(n){return`NG0${Math.abs(n)}`}function ib(n,e){return`${d1(n)}${e?": "+e:""}`}var ob=Symbol("InputSignalNode#UNSET"),h1=Dt(Tt({},Qu),{transformFn:void 0,applyValueToInputSignal(n,e){Aa(n,e)}});function sb(n,e){let t=Object.create(h1);t.value=n,t.transformFn=e?.transform;function r(){if(Sa(t),t.value===ob){let i=null;throw new oe(-950,i)}return t.value}return r[Gt]=t,r}function Ga(n){return{toString:n}.toString()}var Dl="__parameters__";function f1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function ab(n,e,t){return Ga(()=>{let r=f1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let f=c.hasOwnProperty(Dl)?c[Dl]:Object.defineProperty(c,Dl,{value:[]})[Dl];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var br=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function p1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Rt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Rt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Og(n,e){return n?e?`${n} ${e}`:n:e||""}var g1=be({__forward_ref__:be});function cb(n){return n.__forward_ref__=cb,n.toString=function(){return Rt(this())},n}function _t(n){return ub(n)?n():n}function ub(n){return typeof n=="function"&&n.hasOwnProperty(g1)&&n.__forward_ref__===cb}function ve(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sd(n){return{providers:n.providers||[],imports:n.imports||[]}}function ad(n){return pD(n,lb)||pD(n,db)}function k7(n){return ad(n)!==null}function pD(n,e){return n.hasOwnProperty(e)?n[e]:null}function m1(n){let e=n&&(n[lb]||n[db]);return e||null}function gD(n){return n&&(n.hasOwnProperty(mD)||n.hasOwnProperty(y1))?n[mD]:null}var lb=be({\u0275prov:be}),mD=be({\u0275inj:be}),db=be({ngInjectableDef:be}),y1=be({ngInjectorDef:be}),ee=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ve({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hb(n){return n&&!!n.\u0275providers}var v1=be({\u0275cmp:be}),_1=be({\u0275dir:be}),I1=be({\u0275pipe:be}),E1=be({\u0275mod:be}),Ol=be({\u0275fac:be}),Va=be({__NG_ELEMENT_ID__:be}),yD=be({__NG_ENV_ID__:be});function zn(n){return typeof n=="string"?n:n==null?"":String(n)}function w1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():zn(n)}function fb(n,e){throw new oe(-200,n)}function $m(n,e){throw new oe(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),Fg;function pb(){return Fg}function At(n){let e=Fg;return Fg=n,e}function gb(n,e,t){let r=ad(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;$m(n,"Injector")}var T1={},Si=T1,Lg="__NG_DI_FLAG__",Fl=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Yu:Si,r)}},Ll="ngTempTokenPath",D1="ngTokenPath",b1=/\n/gm,C1="\u0275",vD="__source";function S1(n,e=ae.Default){if(Na()===void 0)throw new oe(-203,!1);if(Na()===null)return gb(n,void 0,e);{let t=Na(),r;return t instanceof Fl?r=t.injector:r=t,r.get(n,e&ae.Optional?null:void 0,e)}}function tt(n,e=ae.Default){return(pb()||S1)(_t(n),e)}function z(n,e=ae.Default){return tt(n,cd(e))}function cd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Vg(n){let e=[];for(let t=0;t<n.length;t++){let r=_t(n[t]);if(Array.isArray(r)){if(r.length===0)throw new oe(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],c=A1(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(tt(i,o))}else e.push(tt(r))}return e}function mb(n,e){return n[Lg]=e,n.prototype[Lg]=e,n}function A1(n){return n[Lg]}function N1(n,e,t,r){let i=n[Ll];throw e[vD]&&i.unshift(e[vD]),n.message=R1(`
`+n.message,i,t,r),n[D1]=i,n[Ll]=null,n}function R1(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==C1?n.slice(2):n;let i=Rt(e);if(Array.isArray(e))i=e.map(Rt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Rt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(b1,`
  `)}`}var Ut=mb(ab("Optional"),8);var P1=mb(ab("SkipSelf"),4);function Ni(n,e){let t=n.hasOwnProperty(Ol);return t?n[Ol]:null}function M1(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function x1(n){return n.flat(Number.POSITIVE_INFINITY)}function Hm(n,e){n.forEach(t=>Array.isArray(t)?Hm(t,e):e(t))}function yb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Vl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function k1(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function O1(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function qm(n,e,t){let r=Ka(n,e);return r>=0?n[r|1]=t:(r=~r,O1(n,r,e,t)),r}function Eg(n,e){let t=Ka(n,e);if(t>=0)return n[t|1]}function Ka(n,e){return F1(n,e,1)}function F1(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ri={},Nt=[],jl=new ee(""),vb=new ee("",-1),_b=new ee(""),Bl=class{get(e,t=Si){if(t===Si){let r=new Error(`NullInjectorError: No provider for ${Rt(e)}!`);throw r.name="NullInjectorError",r}return t}};function Ib(n,e){let t=n[E1]||null;if(!t&&e===!0)throw new Error(`Type ${Rt(n)} does not have '\u0275mod' property.`);return t}function Nr(n){return n[v1]||null}function L1(n){return n[_1]||null}function V1(n){return n[I1]||null}function Rr(n){return{\u0275providers:n}}function j1(...n){return{\u0275providers:Eb(!0,n),\u0275fromNgModule:!0}}function Eb(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Hm(e,s=>{let a=s;jg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&wb(i,o),t}function wb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];zm(i,o=>{e(o,r)})}}function jg(n,e,t,r){if(n=_t(n),!n)return!1;let i=null,o=gD(n),s=!o&&Nr(n);if(!o&&!s){let c=n.ngModule;if(o=gD(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)jg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Hm(o.imports,d=>{jg(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&wb(l,e)}if(!a){let l=Ni(i)||(()=>new i);e({provide:i,useFactory:l,deps:Nt},i),e({provide:_b,useValue:i,multi:!0},i),e({provide:jl,useValue:()=>tt(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;zm(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function zm(n,e){for(let t of n)hb(t)&&(t=t.\u0275providers),Array.isArray(t)?zm(t,e):e(t)}var B1=be({provide:String,useValue:be});function Tb(n){return n!==null&&typeof n=="object"&&B1 in n}function U1(n){return!!(n&&n.useExisting)}function $1(n){return!!(n&&n.useFactory)}function Ho(n){return typeof n=="function"}function H1(n){return!!n.useClass}var Db=new ee(""),Nl={},_D={},wg;function ud(){return wg===void 0&&(wg=new Bl),wg}var _n=class{},ja=class extends _n{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Ug(e,s=>this.processProvider(s)),this.records.set(vb,Lo(void 0,this)),i.has("environment")&&this.records.set(_n,Lo(void 0,this));let o=this.records.get(Db);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_b,Nt,ae.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Yu:Si,r)}destroy(){Fa(this),this._destroyed=!0;let e=le(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),le(e)}}onDestroy(e){return Fa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Fa(this);let t=Hn(this),r=At(void 0),i;try{return e()}finally{Hn(t),At(r)}}get(e,t=Si,r=ae.Default){if(Fa(this),e.hasOwnProperty(yD))return e[yD](this);r=cd(r);let i,o=Hn(this),s=At(void 0);try{if(!(r&ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=K1(e)&&ad(e);l&&this.injectableDefInScope(l)?c=Lo(Bg(e),Nl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&ae.Self?ud():this.parent;return t=r&ae.Optional&&t===Si?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Ll]=a[Ll]||[]).unshift(Rt(e)),o)throw a;return N1(a,e,"R3InjectorError",this.source)}else throw a}finally{At(s),Hn(o)}}resolveInjectorInitializers(){let e=le(null),t=Hn(this),r=At(void 0),i;try{let o=this.get(jl,Nt,ae.Self);for(let s of o)s()}finally{Hn(t),At(r),le(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Rt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=_t(e);let t=Ho(e)?e:_t(e&&e.provide),r=z1(e);if(!Ho(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Lo(void 0,Nl,!0),i.factory=()=>Vg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=le(null);try{return t.value===_D?fb(Rt(e)):t.value===Nl&&(t.value=_D,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&G1(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{le(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=_t(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Bg(n){let e=ad(n),t=e!==null?e.factory:Ni(n);if(t!==null)return t;if(n instanceof ee)throw new oe(204,!1);if(n instanceof Function)return q1(n);throw new oe(204,!1)}function q1(n){if(n.length>0)throw new oe(204,!1);let t=m1(n);return t!==null?()=>t.factory(n):()=>new n}function z1(n){if(Tb(n))return Lo(void 0,n.useValue);{let e=bb(n);return Lo(e,Nl)}}function bb(n,e,t){let r;if(Ho(n)){let i=_t(n);return Ni(i)||Bg(i)}else if(Tb(n))r=()=>_t(n.useValue);else if($1(n))r=()=>n.useFactory(...Vg(n.deps||[]));else if(U1(n))r=(i,o)=>tt(_t(n.useExisting),o!==void 0&&o&ae.Optional?ae.Optional:void 0);else{let i=_t(n&&(n.useClass||n.provide));if(W1(n))r=()=>new i(...Vg(n.deps));else return Ni(i)||Bg(i)}return r}function Fa(n){if(n.destroyed)throw new oe(205,!1)}function Lo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function W1(n){return!!n.deps}function G1(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function K1(n){return typeof n=="function"||typeof n=="object"&&n instanceof ee}function Ug(n,e){for(let t of n)Array.isArray(t)?Ug(t,e):t&&hb(t)?Ug(t.\u0275providers,e):e(t)}function Yo(n,e){let t;n instanceof ja?(Fa(n),t=n):t=new Fl(n);let r,i=Hn(t),o=At(void 0);try{return e()}finally{Hn(i),At(o)}}function Cb(){return pb()!==void 0||Na()!=null}function ld(n){if(!Cb())throw new oe(-203,!1)}function Q1(n){return typeof n=="function"}var Qn=0,se=1,J=2,at=3,on=4,Mt=5,Ba=6,Ul=7,Pt=8,Pi=9,Wn=10,Pe=11,Ua=12,ID=13,Zo=14,Yt=15,Mi=16,Vo=17,Gn=18,dd=19,Sb=20,Sr=21,Tg=22,$l=23,Qt=24,Uo=25,ct=26,Ab=1;var xi=7,Hl=8,qo=9,Bt=10;function Ar(n){return Array.isArray(n)&&typeof n[Ab]=="object"}function Yn(n){return Array.isArray(n)&&n[Ab]===!0}function Wm(n){return(n.flags&4)!==0}function Jo(n){return n.componentOffset>-1}function hd(n){return(n.flags&1)===1}function In(n){return!!n.template}function ql(n){return(n[J]&512)!==0}function Xo(n){return(n[J]&256)===256}var $g=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Nb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Y1=(()=>{let n=()=>Rb;return n.ngInherit=!0,n})();function Rb(n){return n.type.prototype.ngOnChanges&&(n.setInput=J1),Z1}function Z1(){let n=Mb(this),e=n?.current;if(e){let t=n.previous;if(t===Ri)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function J1(n,e,t,r,i){let o=this.declaredInputs[r],s=Mb(n)||X1(n,{previous:Ri,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new $g(l&&l.currentValue,t,c===Ri),Nb(n,e,i,t)}var Pb="__ngSimpleChanges__";function Mb(n){return n[Pb]||null}function X1(n,e){return n[Pb]=e}var ED=null;var Ee=function(n,e=null,t){ED?.(n,e,t)},eO="svg",tO="math";function En(n){for(;Array.isArray(n);)n=n[Qn];return n}function xb(n,e){return En(e[n])}function Dn(n,e){return En(e[n.index])}function kb(n,e){return n.data[e]}function Gm(n,e){return n[e]}function wn(n,e){let t=e[n];return Ar(t)?t:t[Qn]}function nO(n){return(n[J]&4)===4}function Km(n){return(n[J]&128)===128}function rO(n){return Yn(n[at])}function zo(n,e){return e==null?null:n[e]}function Ob(n){n[Vo]=0}function Fb(n){n[J]&1024||(n[J]|=1024,Km(n)&&Qa(n))}function iO(n,e){for(;n>0;)e=e[Zo],n--;return e}function fd(n){return!!(n[J]&9216||n[Qt]?.dirty)}function Hg(n){n[Wn].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),fd(n)&&Qa(n)}function Qa(n){n[Wn].changeDetectionScheduler?.notify(0);let e=ki(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Km(e)));)e=ki(e)}function Lb(n,e){if(Xo(n))throw new oe(911,!1);n[Sr]===null&&(n[Sr]=[]),n[Sr].push(e)}function oO(n,e){if(n[Sr]===null)return;let t=n[Sr].indexOf(e);t!==-1&&n[Sr].splice(t,1)}function ki(n){let e=n[at];return Yn(e)?e[at]:e}function Qm(n){return n[Ul]??=[]}function Ym(n){return n.cleanup??=[]}function sO(n,e,t,r){let i=Qm(e);i.push(t),n.firstCreatePass&&Ym(n).push(r,i.length-1)}var re={lFrame:zb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qg=!1;function aO(){return re.lFrame.elementDepthCount}function cO(){re.lFrame.elementDepthCount++}function uO(){re.lFrame.elementDepthCount--}function Zm(){return re.bindingsEnabled}function Vb(){return re.skipHydrationRootTNode!==null}function lO(n){return re.skipHydrationRootTNode===n}function dO(){re.skipHydrationRootTNode=null}function ie(){return re.lFrame.lView}function Le(){return re.lFrame.tView}function O7(n){return re.lFrame.contextLView=n,n[Pt]}function F7(n){return re.lFrame.contextLView=null,n}function It(){let n=jb();for(;n!==null&&n.type===64;)n=n.parent;return n}function jb(){return re.lFrame.currentTNode}function hO(){let n=re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function $i(n,e){let t=re.lFrame;t.currentTNode=n,t.isParent=e}function Jm(){return re.lFrame.isParent}function Xm(){re.lFrame.isParent=!1}function fO(){return re.lFrame.contextLView}function Bb(){return qg}function wD(n){let e=qg;return qg=n,e}function pd(){let n=re.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ub(){return re.lFrame.bindingIndex}function pO(n){return re.lFrame.bindingIndex=n}function gd(){return re.lFrame.bindingIndex++}function md(n){let e=re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function gO(){return re.lFrame.inI18n}function mO(n,e){let t=re.lFrame;t.bindingIndex=t.bindingRootIndex=n,zg(e)}function yO(){return re.lFrame.currentDirectiveIndex}function zg(n){re.lFrame.currentDirectiveIndex=n}function vO(n){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function $b(){return re.lFrame.currentQueryIndex}function ey(n){re.lFrame.currentQueryIndex=n}function _O(n){let e=n[se];return e.type===2?e.declTNode:e.type===1?n[Mt]:null}function Hb(n,e,t){if(t&ae.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=_O(o),i===null||(o=o[Zo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=re.lFrame=qb();return r.currentTNode=e,r.lView=n,!0}function ty(n){let e=qb(),t=n[se];re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function qb(){let n=re.lFrame,e=n===null?null:n.child;return e===null?zb(n):e}function zb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Wb(){let n=re.lFrame;return re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Gb=Wb;function ny(){let n=Wb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function IO(n){return(re.lFrame.contextLView=iO(n,re.lFrame.contextLView))[Pt]}function Zn(){return re.lFrame.selectedIndex}function Oi(n){re.lFrame.selectedIndex=n}function yd(){let n=re.lFrame;return kb(n.tView,n.selectedIndex)}function EO(){return re.lFrame.currentNamespace}var Kb=!0;function vd(){return Kb}function _d(n){Kb=n}function wO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Rb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ry(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Rl(n,e,t){Qb(n,e,3,t)}function Pl(n,e,t,r){(n[J]&3)===t&&Qb(n,e,t,r)}function Dg(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function Qb(n,e,t,r){let i=r!==void 0?n[Vo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Vo]+=65536),(a<o||o==-1)&&(TO(n,t,e,c),n[Vo]=(n[Vo]&4294901760)+c+2),c++}function TD(n,e){Ee(4,n,e);let t=le(null);try{e.call(n)}finally{le(t),Ee(5,n,e)}}function TO(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[J]>>14<n[Vo]>>16&&(n[J]&3)===e&&(n[J]+=16384,TD(a,o)):TD(a,o)}var $o=-1,Fi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function DO(n){return(n.flags&8)!==0}function bO(n){return(n.flags&16)!==0}function CO(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];SO(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Yb(n){return n===3||n===4||n===6}function SO(n){return n.charCodeAt(0)===64}function Wo(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?DD(n,t,i,null,e[++r]):DD(n,t,i,null,null))}}return n}function DD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Zb(n){return n!==$o}function zl(n){return n&32767}function AO(n){return n>>16}function Wl(n,e){let t=AO(n),r=e;for(;t>0;)r=r[Zo],t--;return r}var Wg=!0;function Gl(n){let e=Wg;return Wg=n,e}var NO=256,Jb=NO-1,Xb=5,RO=0,vn={};function PO(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Va)&&(r=t[Va]),r==null&&(r=t[Va]=RO++);let i=r&Jb,o=1<<i;e.data[n+(i>>Xb)]|=o}function Kl(n,e){let t=eC(n,e);if(t!==-1)return t;let r=e[se];r.firstCreatePass&&(n.injectorIndex=e.length,bg(r.data,n),bg(e,null),bg(r.blueprint,null));let i=iy(n,e),o=n.injectorIndex;if(Zb(i)){let s=zl(i),a=Wl(i,e),c=a[se].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function bg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function eC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function iy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=oC(i),r===null)return $o;if(t++,i=i[Zo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return $o}function Gg(n,e,t){PO(n,e,t)}function MO(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Yb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function tC(n,e,t){if(t&ae.Optional||n!==void 0)return n;$m(e,"NodeInjector")}function nC(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),(t&(ae.Self|ae.Host))===0){let i=n[Pi],o=At(void 0);try{return i?i.get(e,r,t&ae.Optional):gb(e,r,t&ae.Optional)}finally{At(o)}}return tC(r,e,t)}function rC(n,e,t,r=ae.Default,i){if(n!==null){if(e[J]&2048&&!(r&ae.Self)){let s=FO(n,e,t,r,vn);if(s!==vn)return s}let o=iC(n,e,t,r,vn);if(o!==vn)return o}return nC(e,t,r,i)}function iC(n,e,t,r,i){let o=kO(t);if(typeof o=="function"){if(!Hb(e,n,r))return r&ae.Host?tC(i,t,r):nC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))$m(t);else return s}finally{Gb()}}else if(typeof o=="number"){let s=null,a=eC(n,e),c=$o,l=r&ae.Host?e[Yt][Mt]:null;for((a===-1||r&ae.SkipSelf)&&(c=a===-1?iy(n,e):e[a+8],c===$o||!CD(r,!1)?a=-1:(s=e[se],a=zl(c),e=Wl(c,e)));a!==-1;){let d=e[se];if(bD(o,a,d.data)){let f=xO(a,e,t,s,r,l);if(f!==vn)return f}c=e[a+8],c!==$o&&CD(r,e[se].data[a+8]===l)&&bD(o,a,e)?(s=d,a=zl(c),e=Wl(c,e)):a=-1}}return i}function xO(n,e,t,r,i,o){let s=e[se],a=s.data[n+8],c=r==null?Jo(a)&&Wg:r!=s&&(a.type&3)!==0,l=i&ae.Host&&o===a,d=Ml(a,s,t,c,l);return d!==null?$a(e,s,d,a,i):vn}function Ml(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let m=f;m<g;m++){let I=s[m];if(m<c&&t===I||m>=c&&I.type===t)return m}if(i){let m=s[c];if(m&&In(m)&&m.type===t)return c}return null}function $a(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Fi){let a=o;a.resolving&&fb(w1(s[t]));let c=Gl(a.canSeeViewProviders);a.resolving=!0;let l,d=a.injectImpl?At(a.injectImpl):null,f=Hb(n,r,ae.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&wO(t,s[t],e)}finally{d!==null&&At(d),Gl(c),a.resolving=!1,Gb()}}return o}function kO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Va)?n[Va]:void 0;return typeof e=="number"?e>=0?e&Jb:OO:e}function bD(n,e,t){let r=1<<n;return!!(t[e+(n>>Xb)]&r)}function CD(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var Ai=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return rC(this._tNode,this._lView,e,cd(r),t)}};function OO(){return new Ai(It(),ie())}function L7(n){return Ga(()=>{let e=n.prototype.constructor,t=e[Ol]||Kg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ol]||Kg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Kg(n){return ub(n)?()=>{let e=Kg(_t(n));return e&&e()}:Ni(n)}function FO(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!ql(s);){let a=iC(o,s,t,r|ae.Self,vn);if(a!==vn)return a;let c=o.parent;if(!c){let l=s[Sb];if(l){let d=l.get(t,vn,r);if(d!==vn)return d}c=oC(s),s=s[Zo]}o=c}return i}function oC(n){let e=n[se],t=e.type;return t===2?e.declTNode:t===1?n[Mt]:null}function sC(n){return MO(It(),n)}function SD(n,e=null,t=null,r){let i=aC(n,e,t,r);return i.resolveInjectorInitializers(),i}function aC(n,e=null,t=null,r,i=new Set){let o=[t||Nt,j1(n)];return r=r||(typeof n=="object"?void 0:Rt(n)),new ja(o,e||ud(),r||null,i)}var ut=class n{static THROW_IF_NOT_FOUND=Si;static NULL=new Bl;static create(e,t){if(Array.isArray(e))return SD({name:""},t,e,"");{let r=e.name??"";return SD({name:r},e.parent,e.providers,r)}}static \u0275prov=ve({token:n,providedIn:"any",factory:()=>tt(vb)});static __NG_ELEMENT_ID__=-1};var AD=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>sC(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},LO=new ee("");LO.__NG_ELEMENT_ID__=n=>{let e=It();if(e===null)throw new oe(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new oe(204,!1)};var cC=!1,Id=(()=>{class n{static __NG_ELEMENT_ID__=VO;static __NG_ENV_ID__=t=>t}return n})(),Qg=class extends Id{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Xo(t)?(e(),()=>{}):(Lb(t,e),()=>oO(t,e))}};function VO(){return new Qg(ie())}var Li=class{},oy=new ee("",{providedIn:"root",factory:()=>!1});var uC=new ee(""),lC=new ee(""),Ya=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ra(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ed=(()=>{class n{internalPendingTasks=z(Ya);scheduler=z(Li);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return v(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),Yg=class extends Kt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Cb()&&(this.destroyRef=z(Id,{optional:!0})??void 0,this.pendingTasks=z(Ya,{optional:!0})??void 0)}emit(e){let t=le(null);try{super.next(e)}finally{le(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof qe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Cr=Yg;function Ql(...n){}function dC(n){let e,t;function r(){n=Ql;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ND(n){return queueMicrotask(()=>n()),()=>{n=Ql}}var sy="isAngularZone",Yl=sy+"_ID",jO=0,Re=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Cr(!1);onMicrotaskEmpty=new Cr(!1);onStable=new Cr(!1);onError=new Cr(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=cC}=e;if(typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,$O(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(sy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new oe(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,BO,Ql,Ql);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},BO={};function ay(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function UO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){dC(()=>{n.callbackScheduled=!1,Zg(n),n.isCheckStableRunning=!0,ay(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Zg(n)}function $O(n){let e=()=>{UO(n)},t=jO++;n._inner=n._inner.fork({name:"angular",properties:{[sy]:!0,[Yl]:t,[Yl+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(HO(c))return r.invokeTask(o,s,a,c);try{return RD(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),PD(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return RD(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!qO(c)&&e(),PD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Zg(n),ay(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Zg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function RD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function PD(n){n._nesting--,ay(n)}var Jg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Cr;onMicrotaskEmpty=new Cr;onStable=new Cr;onError=new Cr;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function HO(n){return hC(n,"__ignore_ng_zone__")}function qO(n){return hC(n,"__scheduler_tick__")}function hC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Vi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},zO=new ee("",{providedIn:"root",factory:()=>{let n=z(Re),e=z(Vi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function MD(n,e){return sb(n,e)}function WO(n){return sb(ob,n)}var V7=(MD.required=WO,MD);function GO(){return es(It(),ie())}function es(n,e){return new Hi(Dn(n,e))}var Hi=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=GO}return n})();function KO(n){return n instanceof Hi?n.nativeElement:n}function QO(n){return typeof n=="function"&&n[Gt]!==void 0}function YO(n,e){let t=Kp(n,e?.equal),r=t[Gt];return t.set=i=>Aa(r,i),t.update=i=>Qp(r,i),t.asReadonly=ZO.bind(t),t}function ZO(){let n=this[Gt];if(n.readonlyFn===void 0){let e=()=>this();e[Gt]=n,n.readonlyFn=e}return n.readonlyFn}function fC(n){return QO(n)&&typeof n.set=="function"}function JO(){return this._results[Symbol.iterator]()}var Xg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Kt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=x1(e);(this._changesDetected=!M1(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=JO};function pC(n){return(n.flags&128)===128}var gC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gC||{}),mC=new Map,XO=0;function eF(){return XO++}function tF(n){mC.set(n[dd],n)}function em(n){mC.delete(n[dd])}var xD="__ngContext__";function ts(n,e){Ar(e)?(n[xD]=e[dd],tF(e)):n[xD]=e}function yC(n){return _C(n[Ua])}function vC(n){return _C(n[on])}function _C(n){for(;n!==null&&!Yn(n);)n=n[on];return n}var tm;function j7(n){tm=n}function nF(){if(tm!==void 0)return tm;if(typeof document<"u")return document;throw new oe(210,!1)}var rF=new ee("",{providedIn:"root",factory:()=>iF}),iF="ng",oF=new ee(""),cy=new ee("",{providedIn:"platform",factory:()=>"unknown"});var B7=new ee(""),U7=new ee("",{providedIn:"root",factory:()=>nF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sF="h",aF="b";var IC=!1,cF=new ee("",{providedIn:"root",factory:()=>IC});var uy=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(uy||{}),wd=new ee(""),kD=new Set;function Za(n){kD.has(n)||(kD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var EC=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=uF}return n})();function uF(){return new EC(ie(),It())}var jo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(jo||{}),wC=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),lF=[jo.EarlyRead,jo.Write,jo.MixedReadWrite,jo.Read],dF=(()=>{class n{ngZone=z(Re);scheduler=z(Li);errorHandler=z(Vi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){z(wd,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ee(16),this.executing=!0;for(let r of lF)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ee(17)}register(t){let{view:r}=t;r!==void 0?((r[Uo]??=[]).push(t),Qa(r),r[J]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(uy.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),nm=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Uo];e&&(this.view[Uo]=e.filter(t=>t!==this))}};function hF(n,e){!e?.injector&&ld(hF);let t=e?.injector??z(ut);return Za("NgAfterRender"),TC(n,t,e,!1)}function fF(n,e){!e?.injector&&ld(fF);let t=e?.injector??z(ut);return Za("NgAfterNextRender"),TC(n,t,e,!0)}function pF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function TC(n,e,t,r){let i=e.get(wC);i.impl??=e.get(dF);let o=e.get(wd,null,{optional:!0}),s=t?.phase??jo.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Id):null,c=e.get(EC,null,{optional:!0}),l=new nm(i.impl,pF(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var gF=()=>null;function DC(n,e,t=!1){return gF(n,e,t)}function bC(n,e){let t=n.contentQueries;if(t!==null){let r=le(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ey(o),a.contentQueries(2,e[s],s)}}}finally{le(r)}}}function rm(n,e,t){ey(0);let r=le(null);try{e(n,t)}finally{le(r)}}function ly(n,e,t){if(Wm(e)){let r=le(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{le(r)}}}var Ha=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ha||{}),bl;function mF(){if(bl===void 0&&(bl=null,br.trustedTypes))try{bl=br.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return bl}function Td(n){return mF()?.createHTML(n)||n}var Cl;function yF(){if(Cl===void 0&&(Cl=null,br.trustedTypes))try{Cl=br.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Cl}function OD(n){return yF()?.createScriptURL(n)||n}var Kn=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rb})`}},im=class extends Kn{getTypeName(){return"HTML"}},om=class extends Kn{getTypeName(){return"Style"}},sm=class extends Kn{getTypeName(){return"Script"}},am=class extends Kn{getTypeName(){return"URL"}},cm=class extends Kn{getTypeName(){return"ResourceURL"}};function Ja(n){return n instanceof Kn?n.changingThisBreaksApplicationSecurity:n}function CC(n,e){let t=vF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${rb})`)}return t===e}function vF(n){return n instanceof Kn&&n.getTypeName()||null}function $7(n){return new im(n)}function H7(n){return new om(n)}function q7(n){return new sm(n)}function z7(n){return new am(n)}function W7(n){return new cm(n)}function _F(n){let e=new lm(n);return IF()?new um(e):e}var um=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Td(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},lm=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Td(e),t}};function IF(){try{return!!new window.DOMParser().parseFromString(Td(""),"text/html")}catch{return!1}}var EF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function SC(n){return n=String(n),n.match(EF)?n:"unsafe:"+n}function Jn(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Xa(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var AC=Jn("area,br,col,hr,img,wbr"),NC=Jn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),RC=Jn("rp,rt"),wF=Xa(RC,NC),TF=Xa(NC,Jn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),DF=Xa(RC,Jn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),FD=Xa(AC,TF,DF,wF),PC=Jn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bF=Jn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),CF=Jn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),SF=Xa(PC,bF,CF),AF=Jn("script,style,template"),dm=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=PF(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=RF(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=LD(e).toLowerCase();if(!FD.hasOwnProperty(t))return this.sanitizedSomething=!0,!AF.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!SF.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;PC[a]&&(c=SC(c)),this.buf.push(" ",s,'="',VD(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=LD(e).toLowerCase();FD.hasOwnProperty(t)&&!AC.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(VD(e))}};function NF(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function RF(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw MC(e);return e}function PF(n){let e=n.firstChild;if(e&&NF(n,e))throw MC(e);return e}function LD(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function MC(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var MF=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xF=/([^\#-~ |!])/g;function VD(n){return n.replace(/&/g,"&amp;").replace(MF,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(xF,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Sl;function G7(n,e){let t=null;try{Sl=Sl||_F(n);let r=e?String(e):"";t=Sl.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Sl.getInertBodyElement(r)}while(r!==o);let a=new dm().sanitizeChildren(jD(t)||t);return Td(a)}finally{if(t){let r=jD(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function jD(n){return"content"in n&&kF(n)?n.content:null}function kF(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var dy=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(dy||{});function OF(n){let e=xC();return e?e.sanitize(dy.URL,n)||"":CC(n,"URL")?Ja(n):SC(zn(n))}function FF(n){let e=xC();if(e)return OD(e.sanitize(dy.RESOURCE_URL,n)||"");if(CC(n,"ResourceURL"))return OD(Ja(n));throw new oe(904,!1)}function LF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?FF:OF}function K7(n,e,t){return LF(e,t)(n)}function xC(){let n=ie();return n&&n[Wn].sanitizer}var VF=/^>|^->|<!--|-->|--!>|<!-$/g,jF=/(<|>)/g,BF="\u200B$1\u200B";function UF(n){return n.replace(VF,e=>e.replace(jF,BF))}function kC(n){return n instanceof Function?n():n}function $F(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var OC="ng-template";function HF(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&$F(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(hy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function hy(n){return n.type===4&&n.value!==OC}function qF(n,e,t){let r=n.type===4&&!t?OC:n.value;return e===r}function zF(n,e,t){let r=4,i=n.attrs,o=i!==null?KF(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!nn(r)&&!nn(c))return!1;if(s&&nn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!qF(n,c,t)||c===""&&e.length===1){if(nn(r))return!1;s=!0}}else if(r&8){if(i===null||!HF(n,i,c,t)){if(nn(r))return!1;s=!0}}else{let l=e[++a],d=WF(c,i,hy(n),t);if(d===-1){if(nn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(nn(r))return!1;s=!0}}}}return nn(r)||s}function nn(n){return(n&1)===0}function WF(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return QF(e,n)}function FC(n,e,t=!1){for(let r=0;r<e.length;r++)if(zF(n,e[r],t))return!0;return!1}function GF(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function KF(n){for(let e=0;e<n.length;e++){let t=n[e];if(Yb(t))return e}return n.length}function QF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function YF(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function BD(n,e){return n?":not("+e.trim()+")":e}function ZF(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!nn(s)&&(e+=BD(o,i),i=""),r=s,o=o||!nn(r);t++}return i!==""&&(e+=BD(o,i)),e}function JF(n){return n.map(ZF).join(",")}function XF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!nn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Et={};function eL(n,e){return n.createText(e)}function tL(n,e,t){n.setValue(e,t)}function nL(n,e){return n.createComment(UF(e))}function LC(n,e,t){return n.createElement(e,t)}function Zl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function VC(n,e,t){n.appendChild(e,t)}function UD(n,e,t,r,i){r!==null?Zl(n,e,t,r,i):VC(n,e,t)}function rL(n,e,t){n.removeChild(null,e,t)}function iL(n,e,t){n.setAttribute(e,"style",t)}function oL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function jC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&CO(n,e,r),i!==null&&oL(n,e,i),o!==null&&iL(n,e,o)}function fy(n,e,t,r,i,o,s,a,c,l,d){let f=ct+r,g=f+i,m=sL(f,g),I=typeof l=="function"?l():l;return m[se]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function sL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Et);return t}function aL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=fy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function py(n,e,t,r,i,o,s,a,c,l,d){let f=e.blueprint.slice();return f[Qn]=i,f[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(f[J]|=2048),Ob(f),f[at]=f[Zo]=n,f[Pt]=t,f[Wn]=s||n&&n[Wn],f[Pe]=a||n&&n[Pe],f[Pi]=c||n&&n[Pi]||null,f[Mt]=o,f[dd]=eF(),f[Ba]=d,f[Sb]=l,f[Yt]=e.type==2?n[Yt]:f,f}function cL(n,e,t){let r=Dn(e,n),i=aL(t),o=n[Wn].rendererFactory,s=gy(n,py(n,i,null,BC(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function BC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function UC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function gy(n,e){return n[Ua]?n[ID][on]=e:n[Ua]=e,n[ID]=e,e}function Q7(n=1){$C(Le(),ie(),Zn()+n,!1)}function $C(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Rl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Pl(e,o,0,t)}Oi(t)}var Dd=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Dd||{});function hm(n,e,t,r){let i=le(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Dd.SignalBased)!==0&&(c=e[o][Gt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):Nb(e,c,o,r)}finally{le(i)}}function HC(n,e,t,r,i){let o=Zn(),s=r&2;try{Oi(-1),s&&e.length>ct&&$C(n,e,ct,!1),Ee(s?2:0,i),t(r,i)}finally{Oi(o),Ee(s?3:1,i)}}function bd(n,e,t){pL(n,e,t),(t.flags&64)===64&&gL(n,e,t)}function my(n,e,t=Dn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function uL(n,e,t,r){let o=r.get(cF,IC)||t===Ha.ShadowDom,s=n.selectRootElement(e,o);return lL(s),s}function lL(n){dL(n)}var dL=()=>null;function hL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function yy(n,e,t,r,i,o,s,a){if(!a&&_y(e,n,t,r,i)){Jo(e)&&fL(t,e.index);return}if(e.type&3){let c=Dn(e,t);r=hL(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function fL(n,e){let t=wn(e,n);t[J]&16||(t[J]|=64)}function pL(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Jo(t)&&cL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Kl(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=$a(e,n,s,t);if(ts(c,e),o!==null&&_L(e,s-r,c,a,t,o),In(a)){let l=wn(t.index,e);l[Pt]=$a(e,n,s,t)}}}function gL(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=yO();try{Oi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];zg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&mL(c,l)}}finally{Oi(-1),zg(s)}}function mL(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function vy(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];FC(e,o.selectors,!1)&&(r??=[],In(o)?r.unshift(o):r.push(o))}return r}function yL(n,e,t,r,i,o){let s=Dn(n,e);vL(e[Pe],s,o,n.value,t,r,i)}function vL(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?zn(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function _L(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];hm(r,t,c,l)}}function IL(n,e){let t=n[Pi],r=t?t.get(Vi,null):null;r&&r.handleError(e)}function _y(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],d=s[c+1],f=e.data[l];hm(f,t[l],d,i),a=!0}if(o)for(let c of o){let l=t[c],d=e.data[c];hm(d,l,r,i),a=!0}return a}function EL(n,e){let t=wn(e,n),r=t[se];wL(r,t);let i=t[Qn];i!==null&&t[Ba]===null&&(t[Ba]=DC(i,t[Pi])),Ee(18),Iy(r,t,t[Pt]),Ee(19,t[Pt])}function wL(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Iy(n,e,t){ty(e);try{let r=n.viewQuery;r!==null&&rm(1,r,t);let i=n.template;i!==null&&HC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Gn]?.finishViewCreation(n),n.staticContentQueries&&bC(n,e),n.staticViewQueries&&rm(2,n.viewQuery,t);let o=n.components;o!==null&&TL(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,ny()}}function TL(n,e){for(let t=0;t<e.length;t++)EL(n,e[t])}function qC(n,e,t,r){let i=le(null);try{let o=e.tView,a=n[J]&4096?4096:16,c=py(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Mi]=l;let d=n[Gn];return d!==null&&(c[Gn]=d.createEmbeddedView(o)),Iy(o,c,t),c}finally{le(i)}}function fm(n,e){return!e||e.firstChild===null||pC(n)}var DL;function Ey(n,e){return DL(n,e)}var Jl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Jl||{});function wy(n){return(n.flags&32)===32}function Bo(n,e,t,r,i){if(r!=null){let o,s=!1;Yn(r)?o=r:Ar(r)&&(s=!0,r=r[Qn]);let a=En(r);n===0&&t!==null?i==null?VC(e,t,a):Zl(e,t,a,i||null,!0):n===1&&t!==null?Zl(e,t,a,i||null,!0):n===2?rL(e,a,s):n===3&&e.destroyNode(a),o!=null&&kL(e,n,o,t,i)}}function bL(n,e){zC(n,e),e[Qn]=null,e[Mt]=null}function CL(n,e,t,r,i,o){r[Qn]=i,r[Mt]=e,Sd(n,r,t,1,i,o)}function zC(n,e){e[Wn].changeDetectionScheduler?.notify(9),Sd(n,e,e[Pe],2,null,null)}function SL(n){let e=n[Ua];if(!e)return Cg(n[se],n);for(;e;){let t=null;if(Ar(e))t=e[Ua];else{let r=e[Bt];r&&(t=r)}if(!t){for(;e&&!e[on]&&e!==n;)Ar(e)&&Cg(e[se],e),e=e[at];e===null&&(e=n),Ar(e)&&Cg(e[se],e),t=e&&e[on]}e=t}}function Ty(n,e){let t=n[qo],r=t.indexOf(e);t.splice(r,1)}function WC(n,e){if(Xo(e))return;let t=e[Pe];t.destroyNode&&Sd(n,e,t,3,null,null),SL(e)}function Cg(n,e){if(Xo(e))return;let t=le(null);try{e[J]&=-129,e[J]|=256,e[Qt]&&zp(e[Qt]),NL(n,e),AL(n,e),e[se].type===1&&e[Pe].destroy();let r=e[Mi];if(r!==null&&Yn(e[at])){r!==e[at]&&Ty(r,e);let i=e[Gn];i!==null&&i.detachView(n)}em(e)}finally{le(t)}}function AL(n,e){let t=n.cleanup,r=e[Ul];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Ul]=null);let i=e[Sr];if(i!==null){e[Sr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[$l];if(o!==null){e[$l]=null;for(let s of o)s.destroy()}}function NL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Fi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ee(4,a,c);try{c.call(a)}finally{Ee(5,a,c)}}else{Ee(4,i,o);try{o.call(i)}finally{Ee(5,i,o)}}}}}function GC(n,e,t){return RL(n,e.parent,t)}function RL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Qn];if(Jo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ha.None||i===Ha.Emulated)return null}return Dn(r,t)}function KC(n,e,t){return ML(n,e,t)}function PL(n,e,t){return n.type&40?Dn(n,t):null}var ML=PL,$D;function Cd(n,e,t,r){let i=GC(n,r,e),o=e[Pe],s=r.parent||e[Mt],a=KC(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)UD(o,i,t[c],a,!1);else UD(o,i,t,a,!1);$D!==void 0&&$D(o,r,e,t,i)}function La(n,e){if(e!==null){let t=e.type;if(t&3)return Dn(e,n);if(t&4)return pm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return La(n,r);{let i=n[e.index];return Yn(i)?pm(-1,i):En(i)}}else{if(t&128)return La(n,e.next);if(t&32)return Ey(e,n)()||En(n[e.index]);{let r=QC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ki(n[Yt]);return La(i,r)}else return La(n,e.next)}}}return null}function QC(n,e){if(e!==null){let r=n[Yt][Mt],i=e.projection;return r.projection[i]}return null}function pm(n,e){let t=Bt+n+1;if(t<e.length){let r=e[t],i=r[se].firstChild;if(i!==null)return La(r,i)}return e[xi]}function Dy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ts(En(a),r),t.flags|=2),!wy(t))if(c&8)Dy(n,e,t.child,r,i,o,!1),Bo(e,n,i,a,o);else if(c&32){let l=Ey(t,r),d;for(;d=l();)Bo(e,n,i,d,o);Bo(e,n,i,a,o)}else c&16?YC(n,e,r,t,i,o):Bo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Sd(n,e,t,r,i,o){Dy(t,r,n.firstChild,e,i,o,!1)}function xL(n,e,t){let r=e[Pe],i=GC(n,t,e),o=t.parent||e[Mt],s=KC(o,t,e);YC(r,0,e,t,i,s)}function YC(n,e,t,r,i,o){let s=t[Yt],c=s[Mt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Bo(e,n,i,d,o)}else{let l=c,d=s[at];pC(r)&&(l.flags|=128),Dy(n,e,l,d,i,o,!0)}}function kL(n,e,t,r,i){let o=t[xi],s=En(t);o!==s&&Bo(e,n,r,o,i);for(let a=Bt;a<t.length;a++){let c=t[a];Sd(c[se],c,n,e,r,o)}}function OL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Jl.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Jl.Important),n.setStyle(t,r,i,o))}}function Xl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(En(o)),Yn(o)&&FL(o,r);let s=t.type;if(s&8)Xl(n,e,t.child,r);else if(s&32){let a=Ey(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=QC(e,t);if(Array.isArray(a))r.push(...a);else{let c=ki(e[Yt]);Xl(c[se],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function FL(n,e){for(let t=Bt;t<n.length;t++){let r=n[t],i=r[se].firstChild;i!==null&&Xl(r[se],r,i,e)}n[xi]!==n[Qn]&&e.push(n[xi])}function ZC(n){if(n[Uo]!==null){for(let e of n[Uo])e.impl.addSequence(e);n[Uo].length=0}}var JC=[];function LL(n){return n[Qt]??VL(n)}function VL(n){let e=JC.pop()??Object.create(BL);return e.lView=n,e}function jL(n){n.lView[Qt]!==n&&(n.lView=null,JC.push(n))}var BL=Dt(Tt({},Ca),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Qa(n.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function UL(n){let e=n[Qt]??Object.create($L);return e.lView=n,e}var $L=Dt(Tt({},Ca),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ki(n.lView);for(;e&&!XC(e[se]);)e=ki(e);e&&Fb(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function XC(n){return n.type!==2}function e0(n){if(n[$l]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[$l])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var HL=100;function t0(n,e=!0,t=0){let i=n[Wn].rendererFactory,o=!1;o||i.begin?.();try{qL(n,t)}catch(s){throw e&&IL(n,s),s}finally{o||i.end?.()}}function qL(n,e){let t=Bb();try{wD(!0),gm(n,e);let r=0;for(;fd(n);){if(r===HL)throw new oe(103,!1);r++,gm(n,1)}}finally{wD(t)}}function zL(n,e,t,r){if(Xo(e))return;let i=e[J],o=!1,s=!1;ty(e);let a=!0,c=null,l=null;o||(XC(n)?(l=LL(e),c=Wu(l)):jp()===null?(a=!1,l=UL(e),c=Wu(l)):e[Qt]&&(zp(e[Qt]),e[Qt]=null));try{Ob(e),pO(n.bindingStartIndex),t!==null&&HC(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let m=n.preOrderCheckHooks;m!==null&&Rl(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Pl(e,m,0,null),Dg(e,0)}if(s||WL(e),e0(e),n0(e,0),n.contentQueries!==null&&bC(n,e),!o)if(d){let m=n.contentCheckHooks;m!==null&&Rl(e,m)}else{let m=n.contentHooks;m!==null&&Pl(e,m,1),Dg(e,1)}KL(n,e);let f=n.components;f!==null&&i0(e,f,0);let g=n.viewQuery;if(g!==null&&rm(2,g,r),!o)if(d){let m=n.viewCheckHooks;m!==null&&Rl(e,m)}else{let m=n.viewHooks;m!==null&&Pl(e,m,2),Dg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Tg]){for(let m of e[Tg])m();e[Tg]=null}o||(ZC(e),e[J]&=-73)}catch(d){throw o||Qa(e),d}finally{l!==null&&(Hp(l,c),a&&jL(l)),ny()}}function n0(n,e){for(let t=yC(n);t!==null;t=vC(t))for(let r=Bt;r<t.length;r++){let i=t[r];r0(i,e)}}function WL(n){for(let e=yC(n);e!==null;e=vC(e)){if(!(e[J]&2))continue;let t=e[qo];for(let r=0;r<t.length;r++){let i=t[r];Fb(i)}}}function GL(n,e,t){Ee(18);let r=wn(e,n);r0(r,t),Ee(19,r[Pt])}function r0(n,e){Km(n)&&gm(n,e)}function gm(n,e){let r=n[se],i=n[J],o=n[Qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&qp(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)zL(r,n,r.template,n[Pt]);else if(i&8192){e0(n),n0(n,1);let a=r.components;a!==null&&i0(n,a,1),ZC(n)}}function i0(n,e,t){for(let r=0;r<e.length;r++)GL(n,e[r],t)}function KL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Oi(~i);else{let o=i,s=t[++r],a=t[++r];mO(s,o);let c=e[o];Ee(24,c),a(2,c),Ee(25,c)}}}finally{Oi(-1)}}function by(n,e){let t=Bb()?64:1088;for(n[Wn].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=ki(n);if(ql(n)&&!r)return n;n=r}return null}function o0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function s0(n,e,t,r=!0){let i=e[se];if(QL(i,e,n,t),r){let s=pm(t,n),a=e[Pe],c=a.parentNode(n[xi]);c!==null&&CL(i,n[Mt],a,e,c,s)}let o=e[Ba];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function mm(n,e){if(n.length<=Bt)return;let t=Bt+e,r=n[t];if(r){let i=r[Mi];i!==null&&i!==n&&Ty(i,r),e>0&&(n[t-1][on]=r[on]);let o=Vl(n,Bt+e);bL(r[se],r);let s=o[Gn];s!==null&&s.detachView(o[se]),r[at]=null,r[on]=null,r[J]&=-129}return r}function QL(n,e,t,r){let i=Bt+r,o=t.length;r>0&&(t[i-1][on]=e),r<o-Bt?(e[on]=t[i],yb(t,Bt+r,e)):(t.push(e),e[on]=null),e[at]=t;let s=e[Mi];s!==null&&t!==s&&a0(s,e);let a=e[Gn];a!==null&&a.insertView(n),Hg(e),e[J]|=128}function a0(n,e){let t=n[qo],r=e[at];if(Ar(r))n[J]|=2;else{let i=r[at][Yt];e[Yt]!==i&&(n[J]|=2)}t===null?n[qo]=[e]:t.push(e)}var qa=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[se];return Xl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Pt]}set context(e){this._lView[Pt]=e}get destroyed(){return Xo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[at];if(Yn(e)){let t=e[Hl],r=t?t.indexOf(this):-1;r>-1&&(mm(e,r),Vl(t,r))}this._attachedToViewContainer=!1}WC(this._lView[se],this._lView)}onDestroy(e){Lb(this._lView,e)}markForCheck(){by(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){Hg(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,t0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ql(this._lView),t=this._lView[Mi];t!==null&&!e&&Ty(t,this._lView),zC(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e;let t=ql(this._lView),r=this._lView[Mi];r!==null&&!t&&a0(r,this._lView),Hg(this._lView)}};var ji=(()=>{class n{static __NG_ELEMENT_ID__=JL}return n})(),YL=ji,ZL=class extends YL{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=qC(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new qa(i)}};function JL(){return Ad(It(),ie())}function Ad(n,e){return n.type&4?new ZL(e,n,es(n,e)):null}function ec(n,e,t,r,i){let o=n.data[e];if(o===null)o=XL(n,e,t,r,i),gO()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=hO();o.injectorIndex=s===null?-1:s.injectorIndex}return $i(o,!0),o}function XL(n,e,t,r,i){let o=jb(),s=Jm(),a=s?o:o&&o.parent,c=n.data[e]=tV(n,a,t,e,r,i);return eV(n,c,o,s),c}function eV(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function tV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Vb()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var J7=new RegExp(`^(\\d+)*(${aF}|${sF})*(.*)`);var nV=()=>null;function ym(n,e){return nV(n,e)}var rV=class{},c0=class{},vm=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Rt(e)}.`)}},Nd=class{static NULL=new vm},ed=class{},Cy=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>iV()}return n})();function iV(){let n=ie(),e=It(),t=wn(e.index,n);return(Ar(t)?t:n)[Pe]}var oV=(()=>{class n{static \u0275prov=ve({token:n,providedIn:"root",factory:()=>null})}return n})();var Sg={},_m=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=cd(r);let i=this.injector.get(e,Sg,r);return i!==Sg||t===Sg?i:this.parentInjector.get(e,t,r)}};function Im(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Og(i,a);else if(o==2){let c=a,l=e[++s];r=Og(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function lt(n,e=ae.Default){let t=ie();if(t===null)return tt(n,e);let r=It();return rC(r,t,_t(n),e)}function nK(){let n="invalid";throw new Error(n)}function Sy(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,l=null,d=aV(s);d===null?a=s:[a,c,l]=d,lV(n,e,t,a,o,c,l)}o!==null&&r!==null&&sV(t,r,o)}function sV(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new oe(-301,!1);r.push(e[i],o)}}function aV(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&In(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,cV(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function cV(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function uV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function lV(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let m=r[g];!c&&In(m)&&(c=!0,uV(n,t,g)),Gg(Kl(t,e),n,m.type)}mV(t,n.data.length,a);for(let g=0;g<a;g++){let m=r[g];m.providersResolver&&m.providersResolver(m)}let l=!1,d=!1,f=UC(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let m=r[g];if(t.mergedAttrs=Wo(t.mergedAttrs,m.hostAttrs),hV(n,t,e,f,m),gV(f,m,i),s!==null&&s.has(m)){let[S,P]=s.get(m);t.directiveToIndex.set(m.type,[f,S+t.directiveStart,P+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let I=m.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!d&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}dV(n,t,o)}function dV(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))HD(0,e,i,r),HD(1,e,i,r),zD(e,r,!1);else{let o=t.get(i);qD(0,e,o,r),qD(1,e,o,r),zD(e,r,!0)}}}function HD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),u0(e,o)}}function qD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),u0(e,s)}}function u0(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function zD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||hy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let d of l)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let d=0;d<l.length;d+=2)if(l[d]===e){s??=[],s.push(l[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function hV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ni(i.type,!0)),s=new Fi(o,In(i),lt);n.blueprint[r]=s,t[r]=s,fV(n,e,r,UC(n,t,i.hostVars,Et),i)}function fV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;pV(s)!=a&&s.push(a),s.push(t,r,o)}}function pV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function gV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;In(e)&&(t[""]=n)}}function mV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function l0(n,e,t,r,i,o,s,a){let c=e.consts,l=zo(c,s),d=ec(e,n,2,r,l);return o&&Sy(e,t,d,zo(c,a),i),d.mergedAttrs=Wo(d.mergedAttrs,d.attrs),d.attrs!==null&&Im(d,d.attrs,!1),d.mergedAttrs!==null&&Im(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function d0(n,e){ry(n,e),Wm(e)&&n.queries.elementEnd(e)}var td=class extends Nd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Nr(e);return new Bi(t,this.ngModule)}};function yV(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Dd.SignalBased)!==0};return i&&(o.transform=i),o})}function vV(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function _V(n,e,t){let r=e instanceof _n?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new _m(t,r):t}function IV(n){let e=n.get(ed,null);if(e===null)throw new oe(407,!1);let t=n.get(oV,null),r=n.get(Li,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function EV(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return LC(e,t,t==="svg"?eO:t==="math"?tO:null)}var Bi=class extends c0{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=yV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=vV(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=JF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Ee(22);let o=le(null);try{let s=this.componentDef,a=r?["ng-version","19.2.11"]:XF(this.componentDef.selectors[0]),c=fy(0,null,null,1,0,null,null,null,null,[a],null),l=_V(s,i||this.ngModule,e),d=IV(l),f=d.rendererFactory.createRenderer(null,s),g=r?uL(f,r,s.encapsulation,l):EV(s,f),m=py(null,c,null,512|BC(s),null,null,d,f,l,null,DC(g,l,!0));m[ct]=g,ty(m);let I=null;try{let S=l0(ct,c,m,"#host",()=>[this.componentDef],!0,0);g&&(jC(f,g,S),ts(g,m)),bd(c,m,S),ly(c,S,m),d0(c,S),t!==void 0&&wV(S,this.ngContentSelectors,t),I=wn(S.index,m),m[Pt]=I[Pt],Iy(c,m,null)}catch(S){throw I!==null&&em(I),em(m),S}finally{Ee(23),ny()}return new Em(this.componentType,m)}finally{le(o)}}},Em=class extends rV{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=kb(t[se],ct),this.location=es(this._tNode,t),this.instance=wn(this._tNode.index,t)[Pt],this.hostView=this.changeDetectorRef=new qa(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=_y(r,i[se],i,e,t);this.previousInputValues.set(e,t);let s=wn(r.index,i);by(s,1)}get injector(){return new Ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function wV(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ns=(()=>{class n{static __NG_ELEMENT_ID__=TV}return n})();function TV(){let n=It();return f0(n,ie())}var DV=ns,h0=class extends DV{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return es(this._hostTNode,this._hostLView)}get injector(){return new Ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=iy(this._hostTNode,this._hostLView);if(Zb(e)){let t=Wl(e,this._hostLView),r=zl(e),i=t[se].data[r+8];return new Ai(i,t)}else return new Ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=WD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ym(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,fm(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!Q1(e),a;if(s)a=t;else{let I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}let c=s?e:new Bi(Nr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let S=(s?l:this.parentInjector).get(_n,null);S&&(o=S)}let d=Nr(c.componentType??{}),f=ym(this._lContainer,d?.id??null),g=f?.firstChild??null,m=c.create(l,i,g,o);return this.insertImpl(m.hostView,a,fm(this._hostTNode,f)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(rO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[at],l=new h0(c,c[Mt],c[at]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return s0(s,i,o,r),e.attachToViewContainerRef(),yb(Ag(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=WD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=mm(this._lContainer,t);r&&(Vl(Ag(this._lContainer),t),WC(r[se],r))}detach(e){let t=this._adjustIndex(e,-1),r=mm(this._lContainer,t);return r&&Vl(Ag(this._lContainer),t)!=null?new qa(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function WD(n){return n[Hl]}function Ag(n){return n[Hl]||(n[Hl]=[])}function f0(n,e){let t,r=e[n.index];return Yn(r)?t=r:(t=o0(r,e,null,n),e[n.index]=t,gy(e,t)),CV(t,e,n,r),new h0(t,n,e)}function bV(n,e){let t=n[Pe],r=t.createComment(""),i=Dn(e,n),o=t.parentNode(i);return Zl(t,o,r,t.nextSibling(i),!1),r}var CV=NV,SV=()=>!1;function AV(n,e,t){return SV(n,e,t)}function NV(n,e,t,r){if(n[xi])return;let i;t.type&8?i=En(r):i=bV(e,t),n[xi]=i}var wm=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Tm=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Ay(e,t).matches!==null&&this.queries[t].setDirty()}},Dm=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=LV(e):this.predicate=e}},bm=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Cm=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,RV(t,o)),this.matchTNodeWithReadOption(e,t,Ml(t,e,o,!1,!1))}else r===ji?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ml(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Hi||i===ns||i===ji&&t.type&4)this.addMatch(t.index,-2);else{let o=Ml(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function RV(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function PV(n,e){return n.type&11?es(n,e):n.type&4?Ad(n,e):null}function MV(n,e,t,r){return t===-1?PV(e,n):t===-2?xV(n,e,r):$a(n,n[se],t,e)}function xV(n,e,t){if(t===Hi)return es(e,n);if(t===ji)return Ad(e,n);if(t===ns)return f0(e,n)}function p0(n,e,t,r){let i=e[Gn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(MV(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Sm(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=p0(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let f=Bt;f<d.length;f++){let g=d[f];g[Mi]===g[at]&&Sm(g[se],g,l,r)}if(d[qo]!==null){let f=d[qo];for(let g=0;g<f.length;g++){let m=f[g];Sm(m[se],m,l,r)}}}}}return r}function kV(n,e){return n[Gn].queries[e].queryList}function OV(n,e,t){let r=new Xg((t&4)===4);return sO(n,e,r,r.destroy),(e[Gn]??=new Tm).queries.push(new wm(r))-1}function FV(n,e,t){let r=Le();return r.firstCreatePass&&(VV(r,new Dm(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),OV(r,ie(),e)}function LV(n){return n.split(",").map(e=>e.trim())}function VV(n,e,t){n.queries===null&&(n.queries=new bm),n.queries.track(new Cm(e,t))}function Ay(n,e){return n.queries.getByIndex(e)}function jV(n,e){let t=n[se],r=Ay(t,e);return r.crossesNgTemplate?Sm(t,n,e,[]):p0(t,n,r,e)}var Go=class{},BV=class{};var Am=class extends Go{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new td(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Ib(e);this._bootstrapComponents=kC(o.bootstrap),this._r3Injector=aC(e,t,[{provide:Go,useValue:this},{provide:Nd,useValue:this.componentFactoryResolver},...r],Rt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Nm=class extends BV{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Am(this.moduleType,e,[])}};var nd=class extends Go{injector;componentFactoryResolver=new td(this);instance=null;constructor(e){super();let t=new ja([...e.providers,{provide:Go,useValue:this},{provide:Nd,useValue:this.componentFactoryResolver}],e.parent||ud(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function UV(n,e,t=null){return new nd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var $V=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Eb(!1,t.type),i=r.length>0?UV([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ve({token:n,providedIn:"environment",factory:()=>new n(tt(_n))})}return n})();function sK(n){return Ga(()=>{let e=g0(n),t=Dt(Tt({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get($V).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ha.Emulated,styles:n.styles||Nt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Za("NgStandalone"),m0(t);let r=n.dependencies;return t.directiveDefs=GD(r,!1),t.pipeDefs=GD(r,!0),t.id=GV(t),t})}function HV(n){return Nr(n)||L1(n)}function qV(n){return n!==null}function Rd(n){return Ga(()=>({type:n.type,bootstrap:n.bootstrap||Nt,declarations:n.declarations||Nt,imports:n.imports||Nt,exports:n.exports||Nt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function zV(n,e){if(n==null)return Ri;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Dd.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function WV(n){if(n==null)return Ri;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Pd(n){return Ga(()=>{let e=g0(n);return m0(e),e})}function Md(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function g0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ri,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Nt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zV(n.inputs,e),outputs:WV(n.outputs),debugInfo:null}}function m0(n){n.features?.forEach(e=>e(n))}function GD(n,e){if(!n)return null;let t=e?V1:HV;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(qV)}function GV(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function KV(n){return Object.getPrototypeOf(n.prototype).constructor}function QV(n){let e=KV(n.type),t=!0,r=[n];for(;e;){let i;if(In(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new oe(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Ng(n.inputs),s.declaredInputs=Ng(n.declaredInputs),s.outputs=Ng(n.outputs);let a=i.hostBindings;a&&e2(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&JV(n,c),l&&XV(n,l),YV(n,i),p1(n.outputs,i.outputs),In(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===QV&&(t=!1)}}e=Object.getPrototypeOf(e)}ZV(r)}function YV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function ZV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wo(i.hostAttrs,t=Wo(t,i.hostAttrs))}}function Ng(n){return n===Ri?{}:n===Nt?[]:n}function JV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function XV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function e2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function y0(n){return n2(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function t2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function n2(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ny(n,e,t){return n[e]=t}function r2(n,e){return n[e]}function Tn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Ry(n,e,t,r){let i=Tn(n,e,t);return Tn(n,e+1,r)||i}function i2(n,e,t,r,i){let o=Ry(n,e,t,r);return Tn(n,e+2,i)||o}function o2(n,e,t,r,i,o,s,a,c){let l=e.consts,d=ec(e,n,4,s||null,a||null);Zm()&&Sy(e,t,d,zo(l,c),vy),d.mergedAttrs=Wo(d.mergedAttrs,d.attrs),ry(e,d);let f=d.tView=fy(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function v0(n,e,t,r,i,o,s,a,c,l){let d=t+ct,f=e.firstCreatePass?o2(d,e,n,r,i,o,s,a,c):e.data[d];$i(f,!1);let g=a2(e,n,f,t);vd()&&Cd(e,n,g,f),ts(g,n);let m=o0(g,n,g,f);return n[d]=m,gy(n,m),AV(m,f,n),hd(f)&&bd(e,n,f),c!=null&&my(n,f,l),f}function s2(n,e,t,r,i,o,s,a){let c=ie(),l=Le(),d=zo(l.consts,o);return v0(c,l,n,e,t,r,i,d,s,a),s2}var a2=c2;function c2(n,e,t,r){return _d(!0),e[Pe].createComment("")}var aK=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var u2=new ee("");var l2=(()=>{class n{static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new Rm})}return n})(),Rm=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Py(n){return!!n&&typeof n.then=="function"}function _0(n){return!!n&&typeof n.subscribe=="function"}var I0=new ee("");function cK(n){return Rr([{provide:I0,multi:!0,useValue:n}])}var E0=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=z(I0,{optional:!0})??[];injector=z(ut);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Yo(this.injector,i);if(Py(o))t.push(o);else if(_0(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),d2=new ee("");function h2(){Gp(()=>{throw new oe(600,!1)})}function f2(n){return n.isBoundToModule}var p2=10;var za=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=z(zO);afterRenderManager=z(wC);zonelessEnabled=z(oy);rootEffectScheduler=z(l2);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Kt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=z(Ya).hasPendingTasks.pipe(St(t=>!t));constructor(){z(wd,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=z(_n);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=ut.NULL){Ee(10);let o=t instanceof c0;if(!this._injector.get(E0).done){let m="";throw new oe(405,m)}let a;o?a=t:a=this._injector.get(Nd).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=f2(a)?void 0:this._injector.get(Go),l=r||a.selector,d=a.create(i,[],l,c),f=d.location.nativeElement,g=d.injector.get(u2,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),xl(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),Ee(11,d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(uy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new oe(101,!1);let t=le(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,le(t),this.afterTick.next(),Ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ed,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<p2;)Ee(14),this.synchronizeOnce(),Ee(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)g2(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>fd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;xl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(d2,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>xl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new oe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function g2(n,e,t,r){if(!t&&!fd(n))return;t0(n,e,t&&!r?0:1)}function m2(n,e,t,r){let i=ie(),o=gd();if(Tn(i,o,e)){let s=Le(),a=yd();yL(a,i,n,e,t,r)}return m2}function w0(n,e,t,r){return Tn(n,gd(),t)?e+zn(t)+r:Et}function y2(n,e,t,r,i,o){let s=Ub(),a=Ry(n,s,t,i);return md(2),a?e+zn(t)+r+zn(i)+o:Et}function v2(n,e,t,r,i,o,s,a){let c=Ub(),l=i2(n,c,t,i,s);return md(3),l?e+zn(t)+r+zn(i)+o+zn(s)+a:Et}function Al(n,e){return n<<17|e<<2}function Ui(n){return n>>17&32767}function _2(n){return(n&2)==2}function I2(n,e){return n&131071|e<<17}function Pm(n){return n|2}function Ko(n){return(n&131068)>>2}function Rg(n,e){return n&-131069|e<<2}function E2(n){return(n&1)===1}function Mm(n){return n|1}function w2(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ui(s),c=Ko(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Ka(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=Ui(n[a+1]);n[r+1]=Al(g,a),g!==0&&(n[g+1]=Rg(n[g+1],r)),n[a+1]=I2(n[a+1],r)}else n[r+1]=Al(a,0),a!==0&&(n[a+1]=Rg(n[a+1],r)),a=r;else n[r+1]=Al(c,0),a===0?a=r:n[c+1]=Rg(n[c+1],r),c=r;l&&(n[r+1]=Pm(n[r+1])),KD(n,d,r,!0),KD(n,d,r,!1),T2(e,d,n,r,o),s=Al(a,c),o?e.classBindings=s:e.styleBindings=s}function T2(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ka(o,e)>=0&&(t[r+1]=Mm(t[r+1]))}function KD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ui(i):Ko(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];D2(c,e)&&(a=!0,n[s+1]=r?Mm(l):Pm(l)),s=r?Ui(l):Ko(l)}a&&(n[t+1]=r?Pm(i):Mm(i))}function D2(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ka(n,e)>=0:!1}var rn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function b2(n){return n.substring(rn.key,rn.keyEnd)}function C2(n){return S2(n),T0(n,D0(n,0,rn.textEnd))}function T0(n,e){let t=rn.textEnd;return t===e?-1:(e=rn.keyEnd=A2(n,rn.key=e,t),D0(n,e,t))}function S2(n){rn.key=0,rn.keyEnd=0,rn.value=0,rn.valueEnd=0,rn.textEnd=n.length}function D0(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function A2(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function N2(n,e,t){let r=ie(),i=gd();if(Tn(r,i,e)){let o=Le(),s=yd();yy(o,s,r,n,e,r[Pe],t,!1)}return N2}function xm(n,e,t,r,i){_y(e,n,t,i?"class":"style",r)}function R2(n,e,t){return b0(n,e,t,!1),R2}function P2(n,e){return b0(n,e,null,!0),P2}function uK(n){x2(j2,M2,n,!0)}function M2(n,e){for(let t=C2(e);t>=0;t=T0(e,t))qm(n,b2(e),!0)}function b0(n,e,t,r){let i=ie(),o=Le(),s=md(2);if(o.firstUpdatePass&&S0(o,n,s,r),e!==Et&&Tn(i,s,e)){let a=o.data[Zn()];A0(o,a,i,i[Pe],n,i[s+1]=U2(e,t),r,s)}}function x2(n,e,t,r){let i=Le(),o=md(2);i.firstUpdatePass&&S0(i,null,o,r);let s=ie();if(t!==Et&&Tn(s,o,t)){let a=i.data[Zn()];if(N0(a,r)&&!C0(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Og(c,t||"")),xm(i,a,s,t,r)}else B2(i,a,s,s[Pe],s[o+1],s[o+1]=V2(n,e,t),r,o)}}function C0(n,e){return e>=n.expandoStartIndex}function S0(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Zn()],s=C0(n,t);N0(o,r)&&e===null&&!s&&(e=!1),e=k2(i,o,e,r),w2(i,o,e,t,s,r)}}function k2(n,e,t,r){let i=vO(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Pg(null,n,e,t,r),t=Wa(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Pg(i,n,e,t,r),o===null){let c=O2(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Pg(null,n,e,c[1],r),c=Wa(c,e.attrs,r),F2(n,e,r,c))}else o=L2(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function O2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ko(r)!==0)return n[Ui(r)]}function F2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ui(i)]=r}function L2(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Wa(r,s,t)}return Wa(r,e.attrs,t)}function Pg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Wa(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Wa(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),qm(n,s,t?!0:e[++o]))}return n===void 0?null:n}function V2(n,e,t){if(t==null||t==="")return Nt;let r=[],i=Ja(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function j2(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&qm(n,r,t)}function B2(n,e,t,r,i,o,s,a){i===Et&&(i=Nt);let c=0,l=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,m=l<o.length?o[l+1]:void 0,I=null,S;d===f?(c+=2,l+=2,g!==m&&(I=f,S=m)):f===null||d!==null&&d<f?(c+=2,I=d):(l+=2,I=f,S=m),I!==null&&A0(n,e,t,r,I,S,s,a),d=c<i.length?i[c]:null,f=l<o.length?o[l]:null}}function A0(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=E2(l)?QD(c,e,t,i,Ko(l),s):void 0;if(!rd(d)){rd(o)||_2(l)&&(o=QD(c,null,t,i,a,s));let f=xb(Zn(),t);OL(r,s,f,i,o)}}function QD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===Et&&(g=f?Nt:void 0);let m=f?Eg(g,r):d===r?g:void 0;if(l&&!rd(m)&&(m=Eg(c,r)),rd(m)&&(a=m,s))return a;let I=n[i+1];i=s?Ui(I):Ko(I)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Eg(c,r))}return a}function rd(n){return n!==void 0}function U2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Rt(Ja(n)))),n}function N0(n,e){return(n.flags&(e?8:16))!==0}function R0(n,e,t,r){let i=ie(),o=Le(),s=ct+n,a=i[Pe],c=o.firstCreatePass?l0(s,o,i,e,vy,Zm(),t,r):o.data[s],l=H2(o,i,c,a,e,n);i[s]=l;let d=hd(c);return $i(c,!0),jC(a,l,c),!wy(c)&&vd()&&Cd(o,i,l,c),(aO()===0||d)&&ts(l,i),cO(),d&&(bd(o,i,c),ly(o,c,i)),r!==null&&my(i,c),R0}function P0(){let n=It();Jm()?Xm():(n=n.parent,$i(n,!1));let e=n;lO(e)&&dO(),uO();let t=Le();return t.firstCreatePass&&d0(t,e),e.classesWithoutHost!=null&&DO(e)&&xm(t,e,ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&bO(e)&&xm(t,e,ie(),e.stylesWithoutHost,!1),P0}function $2(n,e,t,r){return R0(n,e,t,r),P0(),$2}var H2=(n,e,t,r,i,o)=>(_d(!0),LC(r,i,EO()));function q2(n,e,t,r,i){let o=e.consts,s=zo(o,r),a=ec(e,n,8,"ng-container",s);s!==null&&Im(a,s,!0);let c=zo(o,i);return Zm()&&Sy(e,t,a,c,vy),a.mergedAttrs=Wo(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function z2(n,e,t){let r=ie(),i=Le(),o=n+ct,s=i.firstCreatePass?q2(o,i,r,e,t):i.data[o];$i(s,!0);let a=G2(i,r,s,n);return r[o]=a,vd()&&Cd(i,r,a,s),ts(a,r),hd(s)&&(bd(i,r,s),ly(i,s,r)),t!=null&&my(r,s),z2}function W2(){let n=It(),e=Le();return Jm()?Xm():(n=n.parent,$i(n,!1)),e.firstCreatePass&&(ry(e,n),Wm(n)&&e.queries.elementEnd(n)),W2}var G2=(n,e,t,r)=>(_d(!0),nL(e[Pe],""));function lK(){return ie()}var Ci=void 0;function K2(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Q2=["en",[["a","p"],["AM","PM"],Ci],[["AM","PM"],Ci,Ci],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ci,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ci,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ci,"{1} 'at' {0}",Ci],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",K2],Mg={};function $t(n){let e=Y2(n),t=YD(e);if(t)return t;let r=e.split("-")[0];if(t=YD(r),t)return t;if(r==="en")return Q2;throw new oe(701,!1)}function YD(n){return n in Mg||(Mg[n]=br.ng&&br.ng.common&&br.ng.common.locales&&br.ng.common.locales[n]),Mg[n]}var Oe=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Oe||{});function Y2(n){return n.toLowerCase().replace(/_/g,"-")}var id="en-US";var Z2=id;function J2(n){typeof n=="string"&&(Z2=n.toLowerCase().replace(/_/g,"-"))}function ZD(n,e,t){return function r(i){if(i===Function)return t;let o=Jo(n)?wn(n.index,e):e;by(o,5);let s=e[Pt],a=JD(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=JD(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function JD(n,e,t,r){let i=le(null);try{return Ee(6,e,t),t(r)!==!1}catch(o){return X2(n,o),!1}finally{Ee(7,e,t),le(i)}}function X2(n,e){let t=n[Pi],r=t?t.get(Vi,null):null;r&&r.handleError(e)}function XD(n,e,t,r,i,o){let s=e[t],a=e[se],l=a.data[t].outputs[r],d=s[l],f=a.firstCreatePass?Ym(a):null,g=Qm(e),m=d.subscribe(o),I=g.length;g.push(o,m),f&&f.push(i,n.index,I,-(I+1))}var ej=new Map;function tj(n,e,t,r){let i=ie(),o=Le(),s=It();return M0(o,i,i[Pe],s,n,e,r),tj}function nj(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ul],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function M0(n,e,t,r,i,o,s){let a=hd(r),l=n.firstCreatePass?Ym(n):null,d=Qm(e),f=!0;if(r.type&3||s){let g=Dn(r,e),m=s?s(g):g,I=d.length,S=s?O=>s(En(O[r.index])):r.index,P=null;if(!s&&a&&(P=nj(n,e,i,r.index)),P!==null){let O=P.__ngLastListenerFn__||P;O.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,f=!1}else{o=ZD(r,e,o);let O=e[Pi].get(rF);ej.get(O)?.(m,i,o);let B=t.listen(m,i,o);d.push(o,B),l&&l.push(i,S,I,I+1)}}else o=ZD(r,e,o);if(f){let g=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let I=0;I<m.length;I+=2){let S=m[I],P=m[I+1];XD(r,e,S,P,i,o)}if(g&&g.length)for(let I of g)XD(r,e,I,i,i,o)}}function dK(n=1){return IO(n)}function rj(n,e){let t=null,r=GF(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?FC(n,o,!0):YF(r,o))return i}return t}function hK(n){let e=ie()[Yt][Mt];if(!e.projection){let t=n?n.length:1,r=e.projection=k1(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?rj(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function fK(n,e=0,t,r,i,o){let s=ie(),a=Le(),c=r?n+1:null;c!==null&&v0(s,a,c,r,i,o,null,t);let l=ec(a,ct+n,16,null,t||null);l.projection===null&&(l.projection=e),Xm();let f=!s[Ba]||Vb();s[Yt][Mt].projection[l.projection]===null&&c!==null?ij(s,a,c):f&&!wy(l)&&xL(a,s,l)}function ij(n,e,t){let r=ct+t,i=e.data[r],o=n[r],s=ym(o,i.tView.ssrId),a=qC(n,i,void 0,{dehydratedView:s});s0(o,a,0,fm(i,s))}function oj(n,e,t,r,i){let o=ie(),s=w0(o,e,t,r);if(s!==Et){let a=Le(),c=yd();yy(a,c,o,n,s,o[Pe],i,!1)}return oj}function pK(n,e,t){FV(n,e,t)}function gK(n){let e=ie(),t=Le(),r=$b();ey(r+1);let i=Ay(t,r);if(n.dirty&&nO(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=jV(e,r);n.reset(o,KO),n.notifyOnChanges()}return!0}return!1}function mK(){return kV(ie(),$b())}function sj(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function yK(n){let e=fO();return Gm(e,ct+n)}function vK(n,e=""){let t=ie(),r=Le(),i=n+ct,o=r.firstCreatePass?ec(r,i,1,e,null):r.data[i],s=aj(r,t,o,e,n);t[i]=s,vd()&&Cd(r,t,s,o),$i(o,!1)}var aj=(n,e,t,r,i)=>(_d(!0),eL(e[Pe],r));function cj(n){return x0("",n,""),cj}function x0(n,e,t){let r=ie(),i=w0(r,n,e,t);return i!==Et&&My(r,Zn(),i),x0}function uj(n,e,t,r,i){let o=ie(),s=y2(o,n,e,t,r,i);return s!==Et&&My(o,Zn(),s),uj}function lj(n,e,t,r,i,o,s){let a=ie(),c=v2(a,n,e,t,r,i,o,s);return c!==Et&&My(a,Zn(),c),lj}function My(n,e,t){let r=xb(e,n);tL(n[Pe],r,t)}function dj(n,e,t){fC(e)&&(e=e());let r=ie(),i=gd();if(Tn(r,i,e)){let o=Le(),s=yd();yy(o,s,r,n,e,r[Pe],t,!1)}return dj}function _K(n,e){let t=fC(n);return t&&n.set(e),t}function hj(n,e){let t=ie(),r=Le(),i=It();return M0(r,t,t[Pe],i,n,e),hj}function fj(n,e,t){let r=Le();if(r.firstCreatePass){let i=In(n);km(t,r.data,r.blueprint,i,!0),km(e,r.data,r.blueprint,i,!1)}}function km(n,e,t,r,i){if(n=_t(n),Array.isArray(n))for(let o=0;o<n.length;o++)km(n[o],e,t,r,i);else{let o=Le(),s=ie(),a=It(),c=Ho(n)?n:_t(n.provide),l=bb(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Ho(n)||!n.multi){let m=new Fi(l,i,lt),I=kg(c,e,i?d:d+g,f);I===-1?(Gg(Kl(a,s),o,c),xg(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[I]=m,s[I]=m)}else{let m=kg(c,e,d+g,f),I=kg(c,e,d,d+g),S=m>=0&&t[m],P=I>=0&&t[I];if(i&&!P||!i&&!S){Gg(Kl(a,s),o,c);let O=mj(i?gj:pj,t.length,i,r,l);!i&&P&&(t[I].providerFactory=O),xg(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),s.push(O)}else{let O=k0(t[i?I:m],l,!i&&r);xg(o,n,m>-1?m:I,O)}!i&&r&&P&&t[I].componentProviders++}}}function xg(n,e,t,r){let i=Ho(e),o=H1(e);if(i||o){let c=(o?_t(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function k0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function kg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function pj(n,e,t,r,i){return Om(this.multi,[])}function gj(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=$a(r,r[se],this.providerFactory.index,i);s=c.slice(0,a),Om(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Om(o,s);return s}function Om(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function mj(n,e,t,r,i){let o=new Fi(n,t,lt);return o.multi=[],o.index=e,o.componentProviders=0,k0(o,i,r&&!t),o}function IK(n,e=[]){return t=>{t.providersResolver=(r,i)=>fj(r,i?i(n):n,e)}}function EK(n,e,t){let r=pd()+n,i=ie();return i[r]===Et?Ny(i,r,t?e.call(t):e()):r2(i,r)}function wK(n,e,t,r){return F0(ie(),pd(),n,e,t,r)}function O0(n,e){let t=n[e];return t===Et?void 0:t}function F0(n,e,t,r,i,o){let s=e+t;return Tn(n,s,i)?Ny(n,s+1,o?r.call(o,i):r(i)):O0(n,s+1)}function yj(n,e,t,r,i,o,s){let a=e+t;return Ry(n,a,i,o)?Ny(n,a+2,s?r.call(s,i,o):r(i,o)):O0(n,a+2)}function TK(n,e){let t=Le(),r,i=n+ct;t.firstCreatePass?(r=vj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ni(r.type,!0)),s,a=At(lt);try{let c=Gl(!1),l=o();return Gl(c),sj(t,ie(),i,l),l}finally{At(a)}}function vj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function DK(n,e,t){let r=n+ct,i=ie(),o=Gm(i,r);return L0(i,r)?F0(i,pd(),e,o.transform,t,o):o.transform(t)}function bK(n,e,t,r){let i=n+ct,o=ie(),s=Gm(o,i);return L0(o,i)?yj(o,pd(),e,s.transform,t,r,s):s.transform(t,r)}function L0(n,e){return n[se].data[e].pure}function CK(n,e){return Ad(n,e)}var Qo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},V0=new Qo("19.2.11"),Fm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},SK=(()=>{class n{compileModuleSync(t){return new Nm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Ib(t),o=kC(i.declarations).reduce((s,a)=>{let c=Nr(a);return c&&s.push(new Bi(c)),s},[]);return new Fm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _j=(()=>{class n{zone=z(Re);changeDetectionScheduler=z(Li);applicationRef=z(za);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ij=new ee("",{factory:()=>!1});function j0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Re(Dt(Tt({},B0()),{scheduleInRootZone:t})),[{provide:Re,useFactory:n},{provide:jl,multi:!0,useFactory:()=>{let r=z(_j,{optional:!0});return()=>r.initialize()}},{provide:jl,multi:!0,useFactory:()=>{let r=z(Ej);return()=>{r.initialize()}}},e===!0?{provide:uC,useValue:!0}:[],{provide:lC,useValue:t??cC}]}function AK(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=j0({ngZoneFactory:()=>{let i=B0(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Za("NgZone_CoalesceEvent"),new Re(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Rr([{provide:Ij,useValue:!0},{provide:oy,useValue:!1},r])}function B0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Ej=(()=>{class n{subscription=new qe;initialized=!1;zone=z(Re);pendingTasks=z(Ya);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Re.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wj=(()=>{class n{appRef=z(za);taskService=z(Ya);ngZone=z(Re);zonelessEnabled=z(oy);tracing=z(wd,{optional:!0});disableScheduling=z(uC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new qe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Yl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(z(lC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?ND:dC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Yl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ND(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tj(){return typeof $localize<"u"&&$localize.locale||id}var tc=new ee("",{providedIn:"root",factory:()=>z(tc,ae.Optional|ae.SkipSelf)||Tj()});var Lm=new ee(""),Dj=new ee("");function Oa(n){return!n.moduleRef}function bj(n){let e=Oa(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Re);return t.run(()=>{Oa(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Vi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Oa(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Lm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Lm);s.add(o),n.moduleRef.onDestroy(()=>{xl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Sj(r,t,()=>{let o=e.get(E0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(tc,id);if(J2(s||id),!e.get(Dj,!0))return Oa(n)?e.get(za):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Oa(n)){let c=e.get(za);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return Cj(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Cj(n,e){let t=n.injector.get(za);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new oe(-403,!1);e.push(n)}function Sj(n,e,t){try{let r=t();return Py(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var kl=null;function Aj(n=[],e){return ut.create({name:e,providers:[{provide:Db,useValue:"platform"},{provide:Lm,useValue:new Set([()=>kl=null])},...n]})}function Nj(n=[]){if(kl)return kl;let e=Aj(n);return kl=e,h2(),Rj(e),e}function Rj(n){let e=n.get(oF,null);Yo(n,()=>{e?.forEach(t=>t())})}function xy(){return!1}var U0=(()=>{class n{static __NG_ELEMENT_ID__=Pj}return n})();function Pj(n){return Mj(It(),ie(),(n&16)===16)}function Mj(n,e,t){if(Jo(n)&&!t){let r=wn(n.index,e);return new qa(r,r)}else if(n.type&175){let r=e[Yt];return new qa(r,e)}return null}var Vm=class{constructor(){}supports(e){return y0(e)}create(e){return new jm(e)}},xj=(n,e)=>e,jm=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||xj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<eb(r,i,o)?t:r,a=eb(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let m=g<o.length?o[g]:o[g]=0,I=m+g;d<=I&&I<l&&(o[g]=m+1)}let f=s.previousIndex;o[f]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!y0(e))throw new oe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,t2(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Bm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new od),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new od),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Bm=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Um=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},od=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Um,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function eb(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function tb(){return new ky([new Vm])}var ky=(()=>{class n{factories;static \u0275prov=ve({token:n,providedIn:"root",factory:tb});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||tb()),deps:[[n,new P1,new Ut]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new oe(901,!1)}}return n})();function NK(n){Ee(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Nj(r),o=[j0({}),{provide:Li,useExisting:wj},...t||[]],s=new nd({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return bj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ee(9)}}function kj(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function $0(n){return Yp(n)}function Oj(n,e){return Wp(n,e?.equal)}var nb=class{[Gt];constructor(e){this[Gt]=e}destroy(){this[Gt].destroy()}};function RK(n,e){let t=Nr(n),r=e.elementInjector||ud();return new Bi(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}function PK(n){let e=Nr(n);if(!e)return null;let t=new Bi(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var H0=()=>{};var W0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Fj=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},kd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,m=l&63;c||(m=64,s||(g=64)),r.push(t[d],t[f],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(W0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Fj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||f==null)throw new Fy;let g=o<<2|a>>4;if(r.push(g),l!==64){let m=a<<4&240|l>>2;if(r.push(m),f!==64){let I=l<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Fy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Lj=function(n){let e=W0(n);return kd.encodeByteArray(e,!0)},rc=function(n){return Lj(n).replace(/\./g,"")},Od=function(n){try{return kd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Vj=()=>Fd().__FIREBASE_DEFAULTS__,jj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Bj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Od(n[1]);return e&&JSON.parse(e)},Ld=()=>{try{return H0()||Vj()||jj()||Bj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Vy=n=>{var e,t;return(t=(e=Ld())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},G0=n=>{let e=Vy(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jy=()=>{var n;return(n=Ld())===null||n===void 0?void 0:n.config},By=n=>{var e;return(e=Ld())===null||e===void 0?void 0:e[`_${n}`]};var qi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Pr(n){return n.endsWith(".cloudworkstations.dev")}function ic(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function K0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[rc(JSON.stringify(t)),rc(JSON.stringify(s)),""].join(".")}var nc={};function Uj(){let n={prod:[],emulator:[]};for(let e of Object.keys(nc))nc[e]?n.emulator.push(e):n.prod.push(e);return n}function $j(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var q0=!1;function rs(n,e){if(typeof window>"u"||typeof document>"u"||!Pr(window.location.host)||nc[n]===e||nc[n]||q0)return;nc[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=Uj().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{q0=!0,s()},g}function d(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){let g=$j(r),m=t("text"),I=document.getElementById(m)||document.createElement("span"),S=t("learnmore"),P=document.getElementById(S)||document.createElement("a"),O=t("preprendIcon"),j=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let B=g.element;a(B),d(P,S);let Q=l();c(j,O),B.append(j,I,P,Q),document.body.appendChild(B)}o?(I.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Hj(){var n;let e=(n=Ld())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Y0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Z0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function J0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X0(){let n=Ve();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Uy(){return!Hj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function is(){try{return typeof indexedDB=="object"}catch{return!1}}function eS(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var qj="FirebaseError",Ht=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qj,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}},sn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?zj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ht(i,a,r)}};function zj(n,e){return n.replace(Wj,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Wj=/\{\$([^}]+)}/g;function tS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(z0(o)&&z0(s)){if(!xt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function z0(n){return n!==null&&typeof n=="object"}function oc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function os(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ss(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function nS(n,e){let t=new Ly(n,e);return t.subscribe.bind(t)}var Ly=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Gj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Oy),i.error===void 0&&(i.error=Oy),i.complete===void 0&&(i.complete=Oy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Gj(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Oy(){}var OK=4*60*60*1e3;function fe(n){return n&&n._delegate?n._delegate:n}var wt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zi="[DEFAULT]";var $y=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new qi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qj(e))try{this.getOrInitializeService({instanceIdentifier:zi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=zi){return this.instances.has(e)}getOptions(e=zi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Kj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zi){return this.component?this.component.multipleInstances?e:zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Kj(n){return n===zi?void 0:n}function Qj(n){return n.instantiationMode==="EAGER"}var Vd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new $y(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Yj=[],ce=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ce||{}),Zj={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},Jj=ce.INFO,Xj={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},eB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Xj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},bn=class{constructor(e){this.name=e,this._logLevel=Jj,this._logHandler=eB,this._userLogHandler=null,Yj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var tB=(n,e)=>e.some(t=>n instanceof t),rS,iS;function nB(){return rS||(rS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rB(){return iS||(iS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var oS=new WeakMap,qy=new WeakMap,sS=new WeakMap,Hy=new WeakMap,Wy=new WeakMap;function iB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Cn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&oS.set(t,n)}).catch(()=>{}),Wy.set(e,n),e}function oB(n){if(qy.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});qy.set(n,e)}var zy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aS(n){zy=n(zy)}function sB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(jd(this),e,...t);return sS.set(r,e.sort?e.sort():[e]),Cn(r)}:rB().includes(n)?function(...e){return n.apply(jd(this),e),Cn(oS.get(this))}:function(...e){return Cn(n.apply(jd(this),e))}}function aB(n){return typeof n=="function"?sB(n):(n instanceof IDBTransaction&&oB(n),tB(n,nB())?new Proxy(n,zy):n)}function Cn(n){if(n instanceof IDBRequest)return iB(n);if(Hy.has(n))return Hy.get(n);let e=aB(n);return e!==n&&(Hy.set(n,e),Wy.set(e,n)),e}var jd=n=>Wy.get(n);function uS(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Cn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Cn(s.result),c.oldVersion,c.newVersion,Cn(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var cB=["get","getKey","getAll","getAllKeys","count"],uB=["put","add","delete","clear"],Gy=new Map;function cS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gy.get(e))return Gy.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=uB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cB.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return Gy.set(e,o),o}aS(n=>Dt(Tt({},n),{get:(e,t,r)=>cS(e,t)||n.get(e,t,r),has:(e,t)=>!!cS(e,t)||n.has(e,t)}));var Qy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function lB(n){let e=n.getComponent();return e?.type==="VERSION"}var Yy="@firebase/app",lS="0.12.3";var Xn=new bn("@firebase/app"),dB="@firebase/app-compat",hB="@firebase/analytics-compat",fB="@firebase/analytics",pB="@firebase/app-check-compat",gB="@firebase/app-check",mB="@firebase/auth",yB="@firebase/auth-compat",vB="@firebase/database",_B="@firebase/data-connect",IB="@firebase/database-compat",EB="@firebase/functions",wB="@firebase/functions-compat",TB="@firebase/installations",DB="@firebase/installations-compat",bB="@firebase/messaging",CB="@firebase/messaging-compat",SB="@firebase/performance",AB="@firebase/performance-compat",NB="@firebase/remote-config",RB="@firebase/remote-config-compat",PB="@firebase/storage",MB="@firebase/storage-compat",xB="@firebase/firestore",kB="@firebase/vertexai",OB="@firebase/firestore-compat",FB="firebase",LB="11.7.3";var Bd="[DEFAULT]",VB={[Yy]:"fire-core",[dB]:"fire-core-compat",[fB]:"fire-analytics",[hB]:"fire-analytics-compat",[gB]:"fire-app-check",[pB]:"fire-app-check-compat",[mB]:"fire-auth",[yB]:"fire-auth-compat",[vB]:"fire-rtdb",[_B]:"fire-data-connect",[IB]:"fire-rtdb-compat",[EB]:"fire-fn",[wB]:"fire-fn-compat",[TB]:"fire-iid",[DB]:"fire-iid-compat",[bB]:"fire-fcm",[CB]:"fire-fcm-compat",[SB]:"fire-perf",[AB]:"fire-perf-compat",[NB]:"fire-rc",[RB]:"fire-rc-compat",[PB]:"fire-gcs",[MB]:"fire-gcs-compat",[xB]:"fire-fst",[OB]:"fire-fst-compat",[kB]:"fire-vertex","fire-js":"fire-js",[FB]:"fire-js-all"};var sc=new Map,jB=new Map,Zy=new Map;function dS(n,e){try{n.container.addComponent(e)}catch(t){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function an(n){let e=n.name;if(Zy.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;Zy.set(e,n);for(let t of sc.values())dS(t,n);for(let t of jB.values())dS(t,n);return!0}function xr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function gS(n,e,t=Bd){xr(n,e).clearInstance(t)}function kt(n){return n==null?!1:n.settings!==void 0}var BB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new sn("app","Firebase",BB);var Jy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}};var kr=LB;function tv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Bd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Mr.create("bad-app-name",{appName:String(i)});if(t||(t=jy()),!t)throw Mr.create("no-options");let o=sc.get(i);if(o){if(xt(t,o.options)&&xt(r,o.config))return o;throw Mr.create("duplicate-app",{appName:i})}let s=new Vd(i);for(let c of Zy.values())s.addComponent(c);let a=new Jy(t,r,s);return sc.set(i,a),a}function Wi(n=Bd){let e=sc.get(n);if(!e&&n===Bd&&jy())return tv();if(!e)throw Mr.create("no-app",{appName:n});return e}function Ud(){return Array.from(sc.values())}function Me(n,e,t){var r;let i=(r=VB[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(a.join(" "));return}an(new wt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var UB="firebase-heartbeat-database",$B=1,ac="firebase-heartbeat-store",Ky=null;function mS(){return Ky||(Ky=uS(UB,$B,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ac)}catch(t){console.warn(t)}}}}).catch(n=>{throw Mr.create("idb-open",{originalErrorMessage:n.message})})),Ky}function HB(n){return v(this,null,function*(){try{let t=(yield mS()).transaction(ac),r=yield t.objectStore(ac).get(yS(n));return yield t.done,r}catch(e){if(e instanceof Ht)Xn.warn(e.message);else{let t=Mr.create("idb-get",{originalErrorMessage:e?.message});Xn.warn(t.message)}}})}function hS(n,e){return v(this,null,function*(){try{let r=(yield mS()).transaction(ac,"readwrite");yield r.objectStore(ac).put(e,yS(n)),yield r.done}catch(t){if(t instanceof Ht)Xn.warn(t.message);else{let r=Mr.create("idb-set",{originalErrorMessage:t?.message});Xn.warn(r.message)}}})}function yS(n){return`${n.name}!${n.options.appId}`}var qB=1024,zB=30,Xy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ev(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=fS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>zB){let s=GB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=fS(),{heartbeatsToSend:r,unsentEntries:i}=WB(this._heartbeatsCache.heartbeats),o=rc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Xn.warn(t),""}})}};function fS(){return new Date().toISOString().substring(0,10)}function WB(n,e=qB){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),pS(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),pS(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ev=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return is()?eS().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield HB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return hS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return hS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function pS(n){return rc(JSON.stringify({version:2,heartbeats:n})).length}function GB(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function KB(n){an(new wt("platform-logger",e=>new Qy(e),"PRIVATE")),an(new wt("heartbeat",e=>new Xy(e),"PRIVATE")),Me(Yy,lS,n),Me(Yy,lS,"esm2017"),Me("fire-js","")}KB("");var QB="firebase",YB="11.7.3";Me(QB,YB,"app");function nv(n){n===void 0&&(ld(nv),n=z(ut));let e=n.get(Ed);return t=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var er=new Qo("ANGULARFIRE2_VERSION");function cc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ki=(n,e)=>{let t=e?[e]:Ud(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},as=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(as||{}),vS=xy()&&typeof Zone<"u"?as.WARN:as.SILENT;var $d=class{zone;delegate;constructor(e,t=lg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Or=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=z(Re);this.outsideAngular=t.runOutsideAngular(()=>new $d(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new $d(typeof Zone>"u"?void 0:Zone.current,wr))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_S=!1;function ZB(n,e){!_S&&(vS>as.SILENT||xy())&&(_S=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),vS>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function JB(n){let e=z(Re,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Gi(n){let e=z(Re,{optional:!0});return e?e.run(()=>n()):n()}var XB=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Yo(t,()=>Gi(()=>n.apply(void 0,r)))),F=(n,e,t)=>(t||=e?as.WARN:as.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=z(Or),s=z(Ed),a=z(_n)}catch{return ZB(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Gi(()=>s.add())),i[l]=XB(i[l],r,a));let c=JB(()=>n.apply(this,i));return e?c instanceof ne?c.pipe(Dr(o.outsideAngular),Tr(o.insideAngular),nv(a)):c instanceof Promise?Gi(()=>new Promise((l,d)=>{s.run(()=>c).then(f=>Yo(a,()=>Gi(()=>l(f))),f=>Yo(a,()=>Gi(()=>d(f))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Gi(()=>c):c instanceof ne?c.pipe(Dr(o.outsideAngular),Tr(o.insideAngular)):Gi(()=>c)});var tr=class{constructor(e){return e}},Qi=class{constructor(){return Ud()}};function eU(n){return n&&n.length===1?n[0]:new tr(Wi())}var rv=new ee("angularfire2._apps"),tU={provide:tr,useFactory:eU,deps:[[new Ut,rv]]},nU={provide:Qi,deps:[[new Ut,rv]]};function rU(n){return(e,t)=>{let r=t.get(cy);Me("angularfire",er.full,"core"),Me("angularfire",er.full,"app"),Me("angular",V0.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new tr(i)}}function xQ(n,...e){return Rr([tU,nU,{provide:rv,useFactory:rU(n),multi:!0,deps:[Re,ut,Or,...e]}])}var kQ=F(tv,!0);var uc=new ee("");var wS=null;function Hd(){return wS}function iU(n){wS??=n}var iv=class{},lc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:()=>z(TS),providedIn:"platform"})}return n})(),oU=new ee(""),TS=(()=>{class n extends lc{_location;_history;_doc=z(uc);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hd().getBaseHref(this._doc)}onPopState(t){let r=Hd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Hd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function qd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function IS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function cn(n){return n&&n[0]!=="?"?`?${n}`:n}var cs=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ve({token:n,factory:()=>z(DS),providedIn:"root"})}return n})(),zd=new ee(""),DS=(()=>{class n extends cs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??z(uc).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+cn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+cn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+cn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(tt(lc),tt(zd,8))};static \u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bS=(()=>{class n{_subject=new Kt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=cU(IS(ES(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+cn(r))}normalize(t){return n.stripTrailingSlash(aU(this._basePath,ES(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+cn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+cn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=cn;static joinWithSlash=qd;static stripTrailingSlash=IS;static \u0275fac=function(r){return new(r||n)(tt(cs))};static \u0275prov=ve({token:n,factory:()=>sU(),providedIn:"root"})}return n})();function sU(){return new bS(tt(cs))}function aU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function ES(n){return n.replace(/\/index.html$/,"")}function cU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var uU=(()=>{class n extends cs{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=qd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+cn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+cn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(tt(lc),tt(zd,8))};static \u0275prov=ve({token:n,factory:n.\u0275fac})}return n})();var dv=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(dv||{});var dt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(dt||{}),we=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(we||{}),Ot=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ot||{}),Ft={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function PS(n){return $t(n)[Oe.LocaleId]}function MS(n,e,t){let r=$t(n),i=[r[Oe.DayPeriodsFormat],r[Oe.DayPeriodsStandalone]],o=Zt(i,e);return Zt(o,t)}function xS(n,e,t){let r=$t(n),i=[r[Oe.DaysFormat],r[Oe.DaysStandalone]],o=Zt(i,e);return Zt(o,t)}function kS(n,e,t){let r=$t(n),i=[r[Oe.MonthsFormat],r[Oe.MonthsStandalone]],o=Zt(i,e);return Zt(o,t)}function OS(n,e){let r=$t(n)[Oe.Eras];return Zt(r,e)}function dc(n,e){let t=$t(n);return Zt(t[Oe.DateFormat],e)}function hc(n,e){let t=$t(n);return Zt(t[Oe.TimeFormat],e)}function fc(n,e){let r=$t(n)[Oe.DateTimeFormat];return Zt(r,e)}function Sn(n,e){let t=$t(n),r=t[Oe.NumberSymbols][e];if(typeof r>"u"){if(e===Ft.CurrencyDecimal)return t[Oe.NumberSymbols][Ft.Decimal];if(e===Ft.CurrencyGroup)return t[Oe.NumberSymbols][Ft.Group]}return r}function FS(n,e){return $t(n)[Oe.NumberFormats][e]}function LS(n){if(!n[Oe.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Oe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function VS(n){let e=$t(n);return LS(e),(e[Oe.ExtraData][2]||[]).map(r=>typeof r=="string"?ov(r):[ov(r[0]),ov(r[1])])}function jS(n,e,t){let r=$t(n);LS(r);let i=[r[Oe.ExtraData][0],r[Oe.ExtraData][1]],o=Zt(i,e)||[];return Zt(o,t)||[]}function Zt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function ov(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var lU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Wd={},dU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function BS(n,e,t,r){let i=IU(n);e=nr(t,e)||e;let s=[],a;for(;e;)if(a=dU.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=$S(r,c),i=_U(i,r));let l="";return s.forEach(d=>{let f=yU(d);l+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Zd(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function nr(n,e){let t=PS(n);if(Wd[t]??={},Wd[t][e])return Wd[t][e];let r="";switch(e){case"shortDate":r=dc(n,Ot.Short);break;case"mediumDate":r=dc(n,Ot.Medium);break;case"longDate":r=dc(n,Ot.Long);break;case"fullDate":r=dc(n,Ot.Full);break;case"shortTime":r=hc(n,Ot.Short);break;case"mediumTime":r=hc(n,Ot.Medium);break;case"longTime":r=hc(n,Ot.Long);break;case"fullTime":r=hc(n,Ot.Full);break;case"short":let i=nr(n,"shortTime"),o=nr(n,"shortDate");r=Gd(fc(n,Ot.Short),[i,o]);break;case"medium":let s=nr(n,"mediumTime"),a=nr(n,"mediumDate");r=Gd(fc(n,Ot.Medium),[s,a]);break;case"long":let c=nr(n,"longTime"),l=nr(n,"longDate");r=Gd(fc(n,Ot.Long),[c,l]);break;case"full":let d=nr(n,"fullTime"),f=nr(n,"fullDate");r=Gd(fc(n,Ot.Full),[d,f]);break}return r&&(Wd[t][e]=r),r}function Gd(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function un(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function hU(n,e){return un(n,3).substring(0,e)}function ze(n,e,t=0,r=!1,i=!1){return function(o,s){let a=fU(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return hU(a,e);let c=Sn(s,Ft.MinusSign);return un(a,e,c,r,i)}}function fU(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ce(n,e,t=dt.Format,r=!1){return function(i,o){return pU(i,o,n,e,t,r)}}function pU(n,e,t,r,i,o){switch(t){case 2:return kS(e,i,r)[n.getMonth()];case 1:return xS(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=VS(e),d=jS(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[m,I]=g,S=s>=m.hours&&a>=m.minutes,P=s<I.hours||s===I.hours&&a<I.minutes;if(m.hours<I.hours){if(S&&P)return!0}else if(S||P)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return MS(e,i,r)[s<12?0:1];case 3:return OS(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Kd(n){return function(e,t,r){let i=-1*r,o=Sn(t,Ft.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+un(s,2,o)+un(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+un(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+un(s,2,o)+":"+un(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+un(s,2,o)+":"+un(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var gU=0,Yd=4;function mU(n){let e=Zd(n,gU,1).getDay();return Zd(n,0,1+(e<=Yd?Yd:Yd+7)-e)}function US(n){let e=n.getDay(),t=e===0?-3:Yd-e;return Zd(n.getFullYear(),n.getMonth(),n.getDate()+t)}function sv(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=US(t),s=mU(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return un(i,n,Sn(r,Ft.MinusSign))}}function Qd(n,e=!1){return function(t,r){let o=US(t).getFullYear();return un(o,n,Sn(r,Ft.MinusSign),e)}}var av={};function yU(n){if(av[n])return av[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ce(3,we.Abbreviated);break;case"GGGG":e=Ce(3,we.Wide);break;case"GGGGG":e=Ce(3,we.Narrow);break;case"y":e=ze(0,1,0,!1,!0);break;case"yy":e=ze(0,2,0,!0,!0);break;case"yyy":e=ze(0,3,0,!1,!0);break;case"yyyy":e=ze(0,4,0,!1,!0);break;case"Y":e=Qd(1);break;case"YY":e=Qd(2,!0);break;case"YYY":e=Qd(3);break;case"YYYY":e=Qd(4);break;case"M":case"L":e=ze(1,1,1);break;case"MM":case"LL":e=ze(1,2,1);break;case"MMM":e=Ce(2,we.Abbreviated);break;case"MMMM":e=Ce(2,we.Wide);break;case"MMMMM":e=Ce(2,we.Narrow);break;case"LLL":e=Ce(2,we.Abbreviated,dt.Standalone);break;case"LLLL":e=Ce(2,we.Wide,dt.Standalone);break;case"LLLLL":e=Ce(2,we.Narrow,dt.Standalone);break;case"w":e=sv(1);break;case"ww":e=sv(2);break;case"W":e=sv(1,!0);break;case"d":e=ze(2,1);break;case"dd":e=ze(2,2);break;case"c":case"cc":e=ze(7,1);break;case"ccc":e=Ce(1,we.Abbreviated,dt.Standalone);break;case"cccc":e=Ce(1,we.Wide,dt.Standalone);break;case"ccccc":e=Ce(1,we.Narrow,dt.Standalone);break;case"cccccc":e=Ce(1,we.Short,dt.Standalone);break;case"E":case"EE":case"EEE":e=Ce(1,we.Abbreviated);break;case"EEEE":e=Ce(1,we.Wide);break;case"EEEEE":e=Ce(1,we.Narrow);break;case"EEEEEE":e=Ce(1,we.Short);break;case"a":case"aa":case"aaa":e=Ce(0,we.Abbreviated);break;case"aaaa":e=Ce(0,we.Wide);break;case"aaaaa":e=Ce(0,we.Narrow);break;case"b":case"bb":case"bbb":e=Ce(0,we.Abbreviated,dt.Standalone,!0);break;case"bbbb":e=Ce(0,we.Wide,dt.Standalone,!0);break;case"bbbbb":e=Ce(0,we.Narrow,dt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ce(0,we.Abbreviated,dt.Format,!0);break;case"BBBB":e=Ce(0,we.Wide,dt.Format,!0);break;case"BBBBB":e=Ce(0,we.Narrow,dt.Format,!0);break;case"h":e=ze(3,1,-12);break;case"hh":e=ze(3,2,-12);break;case"H":e=ze(3,1);break;case"HH":e=ze(3,2);break;case"m":e=ze(4,1);break;case"mm":e=ze(4,2);break;case"s":e=ze(5,1);break;case"ss":e=ze(5,2);break;case"S":e=ze(6,1);break;case"SS":e=ze(6,2);break;case"SSS":e=ze(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Kd(0);break;case"ZZZZZ":e=Kd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Kd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Kd(2);break;default:return null}return av[n]=e,e}function $S(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function vU(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function _U(n,e,t){let i=n.getTimezoneOffset(),o=$S(e,i);return vU(n,-1*(o-i))}function IU(n){if(CS(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Zd(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(lU))return EU(r)}let e=new Date(n);if(!CS(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function EU(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function CS(n){return n instanceof Date&&!isNaN(n.valueOf())}var wU=/^(\d+)?\.((\d+)(-(\d+))?)?$/,SS=22,Jd=".",pc="0",TU=";",DU=",",cv="#";function bU(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=Sn(t,Ft.Infinity);else{let l=AU(n);s&&(l=SU(l));let d=e.minInt,f=e.minFrac,g=e.maxFrac;if(o){let j=o.match(wU);if(j===null)throw new Error(`${o} is not a valid digit info`);let B=j[1],Q=j[3],he=j[5];B!=null&&(d=uv(B)),Q!=null&&(f=uv(Q)),he!=null?g=uv(he):Q!=null&&f>g&&(g=f)}NU(l,f,g);let m=l.digits,I=l.integerLen,S=l.exponent,P=[];for(c=m.every(j=>!j);I<d;I++)m.unshift(0);for(;I<0;I++)m.unshift(0);I>0?P=m.splice(I,m.length):(P=m,m=[0]);let O=[];for(m.length>=e.lgSize&&O.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)O.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&O.unshift(m.join("")),a=O.join(Sn(t,r)),P.length&&(a+=Sn(t,i)+P.join("")),S&&(a+=Sn(t,Ft.Exponential)+"+"+S)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function HS(n,e,t){let r=FS(e,dv.Decimal),i=CU(r,Sn(e,Ft.MinusSign));return bU(n,i,e,Ft.Group,Ft.Decimal,t)}function CU(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(TU),i=r[0],o=r[1],s=i.indexOf(Jd)!==-1?i.split(Jd):[i.substring(0,i.lastIndexOf(pc)+1),i.substring(i.lastIndexOf(pc)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(cv));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===pc?t.minFrac=t.maxFrac=d+1:f===cv?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(DU);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(cv);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function SU(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function AU(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Jd))>-1&&(e=e.replace(Jd,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===pc;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===pc;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>SS&&(r=r.splice(0,SS-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function NU(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,d=r.reduceRight(function(f,g,m,I){return g=g+f,I[m]=g<10?g:g-10,c&&(I[m]===0&&m>=l?I.pop():c=!1),g>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function uv(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var lv=/\s+/,AS=[],RU=(()=>{class n{_ngEl;_renderer;initialClasses=AS;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(lv):AS}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(lv):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(lv).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(lt(Hi),lt(Cy))};static \u0275dir=Pd({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Xd=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qS=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Xd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),NS(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);NS(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(lt(ns),lt(ji),lt(ky))};static \u0275dir=Pd({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function NS(n,e){n.context.$implicit=e.item}var PU=(()=>{class n{_viewContainer;_context=new eh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){RS(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){RS(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(lt(ns),lt(ji))};static \u0275dir=Pd({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),eh=class{$implicit=null;ngIf=null};function RS(n,e){if(n&&!n.createEmbeddedView)throw new oe(2020,!1)}function zS(n,e){return new oe(2100,!1)}var MU="mediumDate",WS=new ee(""),GS=new ee(""),xU=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??MU,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return BS(t,s,o||this.locale,a)}catch(s){throw zS(n,s.message)}}static \u0275fac=function(r){return new(r||n)(lt(tc,16),lt(WS,24),lt(GS,24))};static \u0275pipe=Md({name:"date",type:n,pure:!0})}return n})();var kU=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Md({name:"json",type:n,pure:!1})}return n})();var OU=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!FU(t))return null;i||=this._locale;try{let o=LU(t);return HS(o,i,r)}catch(o){throw zS(n,o.message)}}static \u0275fac=function(r){return new(r||n)(lt(tc,16))};static \u0275pipe=Md({name:"number",type:n,pure:!0})}return n})();function FU(n){return!(n==null||n===""||n!==n)}function LU(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var VU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rd({type:n});static \u0275inj=sd({})}return n})();function jU(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var KS="browser",QS="server";function BU(n){return n===KS}function UU(n){return n===QS}var hv=class{};var rZ=(()=>{class n{static \u0275prov=ve({token:n,providedIn:"root",factory:()=>new fv(z(uc),window)})}return n})(),fv=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=$U(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function $U(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var HU=new Map,qU={activated:!1,tokenObservers:[]},zU={initialized:!1,enabled:!1};function ln(n){return HU.get(n)||Object.assign({},qU)}function XS(){return zU}var WU="https://content-firebaseappcheck.googleapis.com/v1";var GU="exchangeDebugToken",YS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},gZ=24*60*60*1e3;var mv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new qi,this.pending.promise.catch(t=>{}),yield KU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new qi,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function KU(n){return new Promise(e=>{setTimeout(e,n)})}var QU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Fr=new sn("appCheck","AppCheck",QU);function eA(n){if(!ln(n).activated)throw Fr.create("use-before-activation",{appName:n.name})}function tA(r,i){return v(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(m){throw Fr.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Fr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw Fr.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Fr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function nA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${WU}/projects/${t}/apps/${r}:${GU}?key=${i}`,body:{debug_token:e}}}var YU="firebase-app-check-database",ZU=1,yv="firebase-app-check-store";var th=null;function JU(){return th||(th=new Promise((n,e)=>{try{let t=indexedDB.open(YU,ZU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Fr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yv,{keyPath:"compositeKey"})}}}catch(t){e(Fr.create("storage-open",{originalErrorMessage:t?.message}))}}),th)}function XU(n,e){return e$(t$(n),e)}function e$(n,e){return v(this,null,function*(){let r=(yield JU()).transaction(yv,"readwrite"),o=r.objectStore(yv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Fr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function t$(n){return`${n.options.appId}-${n.name}`}var gc=new bn("@firebase/app-check");function pv(n,e){return is()?XU(n,e).catch(t=>{gc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rA(){return XS().enabled}function iA(){return v(this,null,function*(){let n=XS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var n$={error:"UNKNOWN_ERROR"};function r$(n){return kd.encodeString(JSON.stringify(n),!1)}function vv(n,e=!1,t=!1){return v(this,null,function*(){let r=n.app;eA(r);let i=ln(r),o=i.token,s;if(o&&!mc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(mc(l)?o=l:yield pv(r,void 0))}if(!e&&o&&mc(o))return{token:o.token};let a=!1;if(rA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=tA(nA(r,yield iA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield pv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?gc.warn(l.message):t&&gc.error(l),gv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield ln(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?gc.warn(l.message):t&&gc.error(l),s=l}let c;return o?s?mc(o)?c={token:o.token,internalError:s}:c=gv(s):(c={token:o.token},i.token=o,yield pv(r,o)):c=gv(s),a&&a$(r,c),c})}function i$(n){return v(this,null,function*(){let e=n.app;eA(e);let{provider:t}=ln(e);if(rA()){let r=yield iA(),{token:i}=yield tA(nA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function o$(n,e,t,r){let{app:i}=n,o=ln(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&mc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),ZS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ZS(n))}function oA(n,e){let t=ln(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ZS(n){let{app:e}=n,t=ln(e),r=t.tokenRefresher;r||(r=s$(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function s$(n){let{app:e}=n;return new mv(()=>v(null,null,function*(){let t=ln(e),r;if(t.token?r=yield vv(n,!0):r=yield vv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ln(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},YS.RETRIAL_MIN_WAIT,YS.RETRIAL_MAX_WAIT)}function a$(n,e){let t=ln(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function mc(n){return n.expireTimeMillis-Date.now()>0}function gv(n){return{token:r$(n$),error:n}}var _v=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ln(this.app);for(let t of e)oA(this.app,t.next);return Promise.resolve()}};function c$(n,e){return new _v(n,e)}function u$(n){return{getToken:e=>vv(n,e),getLimitedUseToken:()=>i$(n),addTokenListener:e=>o$(n,"INTERNAL",e),removeTokenListener:e=>oA(n.app,e)}}var l$="@firebase/app-check",d$="0.9.3";var h$="app-check",JS="app-check-internal";function f$(){an(new wt(h$,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return c$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(JS).initialize()})),an(new wt(JS,n=>{let e=n.getProvider("app-check").getImmediate();return u$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Me(l$,d$)}f$();var p$="app-check";var us=class{constructor(){return Ki(p$)}};var g$=["localhost","0.0.0.0","127.0.0.1"],AZ=typeof window<"u"&&g$.includes(window.location.hostname);function EA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wA=EA,TA=new sn("auth","Firebase",EA());var ah=new bn("@firebase/auth");function m$(n,...e){ah.logLevel<=ce.WARN&&ah.warn(`Auth (${kr}): ${n}`,...e)}function rh(n,...e){ah.logLevel<=ce.ERROR&&ah.error(`Auth (${kr}): ${n}`,...e)}function Nn(n,...e){throw qv(n,...e)}function Yi(n,...e){return qv(n,...e)}function DA(n,e,t){let r=Object.assign(Object.assign({},wA()),{[e]:t});return new sn("auth","Firebase",r).create(e,{appName:n.name})}function or(n){return DA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return TA.create(n,...e)}function K(n,e,...t){if(!n)throw qv(e,...t)}function rr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw rh(e),new Error(e)}function jr(n,e){n||rr(e)}function Tv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function y$(){return sA()==="http:"||sA()==="https:"}function sA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function v$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y$()||Z0()||"connection"in navigator)?navigator.onLine:!0}function _$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Zi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,jr(t>e,"Short delay should be less than long delay!"),this.isMobile=Q0()||J0()}get(){return v$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function zv(n,e){jr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ch=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var I$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var E$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],w$=new Zi(3e4,6e4);function Br(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Rn(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){return bA(n,i,()=>v(null,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=oc(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:g},l);return Y0()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Pr(n.emulatorConfig.host)&&(m.credentials="include"),ch.fetch()(yield CA(n,n.config.apiHost,t,f),m)}))})}function bA(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},I$),e);try{let i=new Dv(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw nh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw nh(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw nh(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw DA(n,d,l);Nn(n,d)}}catch(i){if(i instanceof Ht)throw i;Nn(n,"network-request-failed",{message:String(i)})}})}function Dc(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Rn(n,e,t,r,i);return"mfaPendingCredential"in l&&Nn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function CA(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?zv(n.config,i):`${n.config.apiScheme}://${i}`;return E$.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function T$(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Dv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Yi(this.auth,"network-request-failed")),w$.get())})}};function nh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Yi(n,e,r);return i.customData._tokenResponse=t,i}function aA(n){return n!==void 0&&n.enterprise!==void 0}var bv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return T$(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function D$(n,e){return v(this,null,function*(){return Rn(n,"GET","/v2/recaptchaConfig",Br(n,e))})}function b$(n,e){return v(this,null,function*(){return Rn(n,"POST","/v1/accounts:delete",e)})}function uh(n,e){return v(this,null,function*(){return Rn(n,"POST","/v1/accounts:lookup",e)})}function vc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Wv(n,e=!1){return v(this,null,function*(){let t=fe(n),r=yield t.getIdToken(e),i=Gv(r);K(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:vc(Iv(i.auth_time)),issuedAtTime:vc(Iv(i.iat)),expirationTime:vc(Iv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Iv(n){return Number(n)*1e3}function Gv(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return rh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Od(t);return i?JSON.parse(i):(rh("Failed to decode base64 JWT payload"),null)}catch(i){return rh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cA(n){let e=Gv(n);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ji(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ht&&C$(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function C$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Cv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ic=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vc(this.lastLoginAt),this.creationTime=vc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lh(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ji(n,uh(t,{idToken:r}));K(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?SA(o.providerUserInfo):[],a=S$(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,d=c?l:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ic(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function Kv(n){return v(this,null,function*(){let e=fe(n);yield lh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function S$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SA(n){return n.map(e=>{var{providerId:t}=e,r=hg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function A$(n,e){return v(this,null,function*(){let t=yield bA(n,{},()=>v(null,null,function*(){let r=oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield CA(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ch.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function N$(n,e){return v(this,null,function*(){return Rn(n,"POST","/v2/accounts:revokeToken",Br(n,e))})}var _c=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){K(e.length!==0,"internal-error");let t=cA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield A$(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(K(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(K(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return rr("not implemented")}};function Lr(n,e){K(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Vr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ic(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Ji(this,this.stsTokenManager.getToken(this.auth,e));return K(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Wv(this,e)}reload(){return Kv(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield lh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(kt(this.auth.app))return Promise.reject(or(this.auth));let e=yield this.getIdToken();return yield Ji(this,b$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,I=(s=t.photoURL)!==null&&s!==void 0?s:void 0,S=(a=t.tenantId)!==null&&a!==void 0?a:void 0,P=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,j=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:B,emailVerified:Q,isAnonymous:he,providerData:Z,stsTokenManager:T}=t;K(B&&T,e,"internal-error");let _=_c.fromJSON(this.name,T);K(typeof B=="string",e,"internal-error"),Lr(f,e.name),Lr(g,e.name),K(typeof Q=="boolean",e,"internal-error"),K(typeof he=="boolean",e,"internal-error"),Lr(m,e.name),Lr(I,e.name),Lr(S,e.name),Lr(P,e.name),Lr(O,e.name),Lr(j,e.name);let w=new n({uid:B,auth:e,email:g,emailVerified:Q,displayName:f,isAnonymous:he,photoURL:I,phoneNumber:m,tenantId:S,stsTokenManager:_,createdAt:O,lastLoginAt:j});return Z&&Array.isArray(Z)&&(w.providerData=Z.map(D=>Object.assign({},D))),P&&(w._redirectEventId=P),w}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new _c;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield lh(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];K(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?SA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new _c;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ic(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var uA=new Map;function ir(n){jr(n instanceof Function,"Expected a class definition");let e=uA.get(n);return e?(jr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uA.set(n,e),e)}var R$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Sv=R$;function ih(n,e,t){return`firebase:${n}:${e}:${t}`}var dh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=ih(this.userKey,i.apiKey,o),this.fullPersistenceKey=ih("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield uh(this.auth,{idToken:e}).catch(()=>{});return t?Vr._fromGetAccountInfoResponse(this.auth,t,e):null}return Vr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(ir(Sv),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ir(Sv),s=ih(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(s);if(d){let f;if(typeof d=="string"){let g=yield uh(e,{idToken:d}).catch(()=>{});if(!g)break;f=yield Vr._fromGetAccountInfoResponse(e,g,d)}else f=Vr._fromJSON(e,d);l!==o&&(a=f),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function lA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xA(e))return"Blackberry";if(kA(e))return"Webos";if(NA(e))return"Safari";if((e.includes("chrome/")||RA(e))&&!e.includes("edge/"))return"Chrome";if(MA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function AA(n=Ve()){return/firefox\//i.test(n)}function NA(n=Ve()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RA(n=Ve()){return/crios\//i.test(n)}function PA(n=Ve()){return/iemobile/i.test(n)}function MA(n=Ve()){return/android/i.test(n)}function xA(n=Ve()){return/blackberry/i.test(n)}function kA(n=Ve()){return/webos/i.test(n)}function Qv(n=Ve()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function P$(n=Ve()){var e;return Qv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function M$(){return X0()&&document.documentMode===10}function OA(n=Ve()){return Qv(n)||MA(n)||kA(n)||xA(n)||/windows phone/i.test(n)||PA(n)}function FA(n,e=[]){let t;switch(n){case"Browser":t=lA(Ve());break;case"Worker":t=`${lA(Ve())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${kr}/${r}`}var Av=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function x$(t){return v(this,arguments,function*(n,e={}){return Rn(n,"GET","/v2/passwordPolicy",Br(n,e))})}var k$=6,Nv=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:k$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Rv=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hh(this),this.idTokenSubscription=new hh(this),this.beforeStateQueue=new Av(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ir(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield dh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield uh(this,{idToken:e}),r=yield Vr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(kt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield lh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=_$()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(kt(this.app))return Promise.reject(or(this));let t=e?fe(e):null;return t&&K(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return kt(this.app)?Promise.reject(or(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return kt(this.app)?Promise.reject(or(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(ir(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield x$(this),t=new Nv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield N$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ir(e)||this._popupRedirectResolver;K(t,this,"argument-error"),this.redirectPersistenceManager=yield dh.create(this,[ir(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&m$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function eo(n){return fe(n)}var hh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=nS(t=>this.observer=t)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _h={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O$(n){_h=n}function LA(n){return _h.loadJS(n)}function F$(){return _h.recaptchaEnterpriseScript}function L$(){return _h.gapiScript}function VA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Pv=class{constructor(){this.enterprise=new Mv}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Mv=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var V$="recaptcha-enterprise",jA="NO_RECAPTCHA",xv=class{constructor(e){this.type=V$,this.auth=eo(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){D$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new bv(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;aA(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(jA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Pv().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&aA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=F$();c.length!==0&&(c+=a),LA(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function yc(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new xv(n),s;if(i)s=jA;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function kv(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield yc(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield yc(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield yc(n,e,t);return r(n,a).catch(c=>v(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let d=yield yc(n,e,t,!1,!0);return r(n,d)}return Promise.reject(c)}))}else{let a=yield yc(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function Yv(n,e){let t=xr(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(xt(o,e??{}))return i;Nn(i,"already-initialized")}return t.initialize({options:e})}function j$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ir);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Zv(n,e,t){let r=eo(n);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=BA(e),{host:s,port:a}=B$(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(xt(l,r.config.emulator)&&xt(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Pr(s)?(rs("Auth",!0),ic(`${o}//${s}${c}`)):i||U$()}function BA(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function B$(n){let e=BA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:dA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:dA(s)}}}function dA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function U$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ec=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,t){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}};function $$(n,e){return v(this,null,function*(){return Rn(n,"POST","/v1/accounts:update",e)})}function H$(n,e){return v(this,null,function*(){return Rn(n,"POST","/v1/accounts:signUp",e)})}function q$(n,e){return v(this,null,function*(){return Dc(n,"POST","/v1/accounts:signInWithPassword",Br(n,e))})}function z$(n,e){return v(this,null,function*(){return Dc(n,"POST","/v1/accounts:signInWithEmailLink",Br(n,e))})}function W$(n,e){return v(this,null,function*(){return Dc(n,"POST","/v1/accounts:signInWithEmailLink",Br(n,e))})}var wc=class n extends Ec{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kv(e,t,"signInWithPassword",q$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return z$(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kv(e,r,"signUpPassword",H$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return W$(e,{idToken:t,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Ev(n,e){return v(this,null,function*(){return Dc(n,"POST","/v1/accounts:signInWithIdp",Br(n,e))})}function G$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function K$(n){let e=os(ss(n)).link,t=e?os(ss(e)).deep_link_id:null,r=os(ss(n)).deep_link_id;return(r?os(ss(r)).link:null)||r||t||e||n}var fh=class n{constructor(e){var t,r,i,o,s,a;let c=os(ss(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=G$((i=c.mode)!==null&&i!==void 0?i:null);K(l&&d&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=d,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=K$(e);try{return new n(t)}catch{return null}}};var UA=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return wc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=fh.parseLink(r);return K(i,"argument-error"),wc._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),ph=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ov=class extends ph{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Q$(n,e){return v(this,null,function*(){return Dc(n,"POST","/v1/accounts:signUp",Br(n,e))})}var ls=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield Vr._fromIdTokenResponse(e,r,i),s=hA(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=hA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function hA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Fv=class n extends Ht{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function $A(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Fv._fromErrorAndOperation(n,o,e,r):o})}function Y$(n,e,t=!1){return v(this,null,function*(){let r=yield Ji(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ls._forOperation(n,"link",r)})}function HA(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(kt(r.app))return Promise.reject(or(r));let i="reauthenticate";try{let o=yield Ji(n,$A(r,i,e,n),t);K(o.idToken,r,"internal-error");let s=Gv(o.idToken);K(s,r,"internal-error");let{sub:a}=s;return K(n.uid===a,r,"user-mismatch"),ls._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Nn(r,"user-mismatch"),o}})}function qA(n,e,t=!1){return v(this,null,function*(){if(kt(n.app))return Promise.reject(or(n));let r="signIn",i=yield $A(n,r,e),o=yield ls._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Jv(n,e){return v(this,null,function*(){return qA(eo(n),e)})}function Xv(n,e){return v(this,null,function*(){return HA(fe(n),e)})}function zA(n){return v(this,null,function*(){let e=eo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function e_(n,e,t){return v(this,null,function*(){if(kt(n.app))return Promise.reject(or(n));let r=eo(n),s=yield kv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q$,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&zA(n),c}),a=yield ls._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function t_(n,e,t){return kt(n.app)?Promise.reject(or(n)):Jv(fe(n),UA.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&zA(n),r}))}function Z$(n,e){return v(this,null,function*(){return Rn(n,"POST","/v1/accounts:update",e)})}function n_(r,i){return v(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=fe(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield Ji(o,Z$(o.auth,a));o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null;let l=o.providerData.find(({providerId:d})=>d==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(c)})}function r_(n,e){return J$(fe(n),null,e)}function J$(n,e,t){return v(this,null,function*(){let{auth:r}=n,o={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let s=yield Ji(n,$$(r,o));yield n._updateTokensIfNecessary(s,!0)})}function i_(n,e,t,r){return fe(n).onIdTokenChanged(e,t,r)}function o_(n,e,t){return fe(n).beforeAuthStateChanged(e,t)}function s_(n,e,t,r){return fe(n).onAuthStateChanged(e,t,r)}function a_(n){return fe(n).signOut()}function c_(n){return v(this,null,function*(){return fe(n).delete()})}var gh="__sak";var mh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var X$=1e3,eH=10,tH=(()=>{class n extends mh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);M$()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,eH):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},X$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield gn(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield gn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield gn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),WA=tH;var nH=(()=>{class n extends mh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),u_=nH;function rH(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var iH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>v(this,null,function*(){return d(r.origin,s)})),l=yield rH(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function GA(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Lv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=GA("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function An(){return window}function oH(n){An().location.href=n}function KA(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}function sH(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function aH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function cH(){return KA()?self:null}var QA="firebaseLocalStorageDb",uH=1,yh="firebaseLocalStorage",YA="fbase_key",Xi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Ih(n,e){return n.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function lH(){let n=indexedDB.deleteDatabase(QA);return new Xi(n).toPromise()}function Vv(){let n=indexedDB.open(QA,uH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(yh,{keyPath:YA})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(yh)?e(r):(r.close(),yield lH(),e(yield Vv()))}))})}function fA(n,e,t){return v(this,null,function*(){let r=Ih(n,!0).put({[YA]:e,value:t});return new Xi(r).toPromise()})}function dH(n,e){return v(this,null,function*(){let t=Ih(n,!1).get(e),r=yield new Xi(t).toPromise();return r===void 0?null:r.value})}function pA(n,e){let t=Ih(n,!0).delete(e);return new Xi(t).toPromise()}var hH=800,fH=3,pH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Vv(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>fH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return KA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=iH._getInstance(cH()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield sH(),!this.activeServiceWorker)return;this.sender=new Lv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||aH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Vv();return yield fA(t,gh,"1"),yield pA(t,gh),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>fA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>dH(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>pA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Ih(o,!1).getAll();return new Xi(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),hH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ZA=pH;var FZ=VA("rcb"),LZ=new Zi(3e4,6e4);function gH(n,e){return e?ir(e):(K(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Tc=class extends Ec{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ev(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ev(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ev(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function mH(n){return qA(n.auth,new Tc(n),n.bypassAuthState)}function yH(n){let{auth:e,user:t}=n;return K(t,e,"internal-error"),HA(t,new Tc(n),n.bypassAuthState)}function vH(n){return v(this,null,function*(){let{auth:e,user:t}=n;return K(t,e,"internal-error"),Y$(t,new Tc(n),n.bypassAuthState)})}var jv=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mH;case"linkViaPopup":case"linkViaRedirect":return vH;case"reauthViaPopup":case"reauthViaRedirect":return yH;default:Nn(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var VZ=new Zi(2e3,1e4);var _H="pendingRedirect",oh=new Map,Bv=class n extends jv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=oh.get(this.auth._key());if(!e){try{let r=(yield IH(this.resolver,this.auth))?yield gn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}oh.set(this.auth._key(),e)}return this.bypassAuthState||oh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return gn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,gn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function IH(n,e){return v(this,null,function*(){let t=TH(e),r=wH(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function EH(n,e){oh.set(n._key(),e)}function wH(n){return ir(n._redirectPersistence)}function TH(n){return ih(_H,n.config.apiKey,n.name)}function DH(n,e,t=!1){return v(this,null,function*(){if(kt(n.app))return Promise.reject(or(n));let r=eo(n),i=gH(r,e),s=yield new Bv(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var bH=10*60*1e3,Uv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Yi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bH&&this.cachedEventUids.clear(),this.cachedEventUids.has(gA(e))}saveEventToCache(e){this.cachedEventUids.add(gA(e)),this.lastProcessedEventTime=Date.now()}};function gA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function CH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JA(n);default:return!1}}function SH(t){return v(this,arguments,function*(n,e={}){return Rn(n,"GET","/v1/projects",e)})}var AH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NH=/^https?/;function RH(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield SH(n);for(let t of e)try{if(PH(t))return}catch{}Nn(n,"unauthorized-domain")})}function PH(n){let e=Tv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!NH.test(t))return!1;if(AH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var MH=new Zi(3e4,6e4);function mA(){let n=An().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xH(n){return new Promise((e,t)=>{var r,i,o;function s(){mA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mA(),t(Yi(n,"network-request-failed"))},timeout:MH.get()})}if(!((i=(r=An().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=An().gapi)===null||o===void 0)&&o.load)s();else{let a=VA("iframefcb");return An()[a]=()=>{gapi.load?s():t(Yi(n,"network-request-failed"))},LA(`${L$()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw sh=null,e})}var sh=null;function kH(n){return sh=sh||xH(n),sh}var OH=new Zi(5e3,15e3),FH="__/auth/iframe",LH="emulator/auth/iframe",VH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BH(n){let e=n.config;K(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?zv(e,LH):`https://${n.config.authDomain}/${FH}`,r={apiKey:e.apiKey,appName:n.name,v:kr},i=jH.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${oc(r).slice(1)}`}function UH(n){return v(this,null,function*(){let e=yield kH(n),t=An().gapi;return K(t,n,"internal-error"),e.open({where:document.body,url:BH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VH,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Yi(n,"network-request-failed"),a=An().setTimeout(()=>{o(s)},OH.get());function c(){An().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var $H={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HH=500,qH=600,zH="_blank",WH="http://localhost",vh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function GH(n,e,t,r=HH,i=qH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},$H),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ve().toLowerCase();t&&(a=RA(l)?zH:t),AA(l)&&(e=e||WH,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[m,I])=>`${g}${m}=${I},`,"");if(P$(l)&&a!=="_self")return KH(e||"",a),new vh(null);let f=window.open(e||"",a,d);K(f,n,"popup-blocked");try{f.focus()}catch{}return new vh(f)}function KH(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var QH="__/auth/handler",YH="emulator/auth/handler",ZH=encodeURIComponent("fac");function yA(n,e,t,r,i,o){return v(this,null,function*(){K(n.config.authDomain,n,"auth-domain-config-required"),K(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:kr,eventId:i};if(e instanceof ph){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",tS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof Ov){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${ZH}=${encodeURIComponent(c)}`:"";return`${JH(n)}?${oc(a).slice(1)}${l}`})}function JH({config:n}){return n.emulator?zv(n,YH):`https://${n.authDomain}/${QH}`}var wv="webStorageSupport",$v=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u_,this._completeRedirectFn=DH,this._overrideRedirectResult=EH}_openPopup(e,t,r,i){return v(this,null,function*(){var o;jr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield yA(e,t,r,Tv(),i);return GH(e,s,GA())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield yA(e,t,r,Tv(),i);return oH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(jr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield UH(e),r=new Uv(e);return t.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wv,{type:wv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[wv];s!==void 0&&t(!!s),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=RH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return OA()||NA()||Qv()}},XA=$v;var vA="@firebase/auth",_A="1.10.4";var Hv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function XH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e4(n){an(new wt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;K(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FA(n)},l=new Rv(r,i,o,c);return j$(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),an(new wt("auth-internal",e=>{let t=eo(e.getProvider("auth").getImmediate());return(r=>new Hv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(vA,_A,XH(n)),Me(vA,_A,"esm2017")}var t4=5*60,n4=By("authIdTokenMaxAge")||t4,IA=null,r4=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>n4)return;let i=t?.token;IA!==i&&(IA=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function l_(n=Wi()){let e=xr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Yv(n,{popupRedirectResolver:XA,persistence:[ZA,WA,u_]}),r=By("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=r4(o.toString());o_(t,s,()=>s(t.currentUser)),i_(t,a=>s(a))}}let i=Vy("auth");return i?Zv(t,`http://${i}`):rs("Auth",!1),t}function i4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}O$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Yi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",i4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e4("Browser");var eN="auth",bc=class{constructor(e){return e}},Cc=class{constructor(){return Ki(eN)}};var d_=new ee("angularfire2.auth-instances");function $4(n,e){let t=cc(eN,n,e);return t&&new bc(t)}function H4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new bc(r)}}var q4={provide:Cc,deps:[[new Ut,d_]]},z4={provide:bc,useFactory:$4,deps:[[new Ut,d_],tr]};function DJ(n,...e){return Me("angularfire",er.full,"auth"),Rr([z4,q4,{provide:d_,useFactory:H4(n),multi:!0,deps:[Re,ut,Or,Qi,[new Ut,us],...e]}])}var bJ=F(e_,!0,2),CJ=F(c_,!0,2);var SJ=F(l_,!0);var AJ=F(s_,!0);var NJ=F(Xv,!0,2);var RJ=F(t_,!0,2);var PJ=F(a_,!0,2);var MJ=F(r_,!0,2);var xJ=F(n_,!0,2);var tN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nN={};var sr,h_;(function(){var n;function e(T,_){function w(){}w.prototype=_.prototype,T.D=_.prototype,T.prototype=new w,T.prototype.constructor=T,T.C=function(D,b,A){for(var E=Array(arguments.length-2),Bn=2;Bn<arguments.length;Bn++)E[Bn-2]=arguments[Bn];return _.prototype[b].apply(D,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,w){w||(w=0);var D=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)D[b]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(b=0;16>b;++b)D[b]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=T.g[0],w=T.g[1],b=T.g[2];var A=T.g[3],E=_+(A^w&(b^A))+D[0]+3614090360&4294967295;_=w+(E<<7&4294967295|E>>>25),E=A+(b^_&(w^b))+D[1]+3905402710&4294967295,A=_+(E<<12&4294967295|E>>>20),E=b+(w^A&(_^w))+D[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(_^b&(A^_))+D[3]+3250441966&4294967295,w=b+(E<<22&4294967295|E>>>10),E=_+(A^w&(b^A))+D[4]+4118548399&4294967295,_=w+(E<<7&4294967295|E>>>25),E=A+(b^_&(w^b))+D[5]+1200080426&4294967295,A=_+(E<<12&4294967295|E>>>20),E=b+(w^A&(_^w))+D[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(_^b&(A^_))+D[7]+4249261313&4294967295,w=b+(E<<22&4294967295|E>>>10),E=_+(A^w&(b^A))+D[8]+1770035416&4294967295,_=w+(E<<7&4294967295|E>>>25),E=A+(b^_&(w^b))+D[9]+2336552879&4294967295,A=_+(E<<12&4294967295|E>>>20),E=b+(w^A&(_^w))+D[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(_^b&(A^_))+D[11]+2304563134&4294967295,w=b+(E<<22&4294967295|E>>>10),E=_+(A^w&(b^A))+D[12]+1804603682&4294967295,_=w+(E<<7&4294967295|E>>>25),E=A+(b^_&(w^b))+D[13]+4254626195&4294967295,A=_+(E<<12&4294967295|E>>>20),E=b+(w^A&(_^w))+D[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(_^b&(A^_))+D[15]+1236535329&4294967295,w=b+(E<<22&4294967295|E>>>10),E=_+(b^A&(w^b))+D[1]+4129170786&4294967295,_=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(_^w))+D[6]+3225465664&4294967295,A=_+(E<<9&4294967295|E>>>23),E=b+(_^w&(A^_))+D[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^_&(b^A))+D[0]+3921069994&4294967295,w=b+(E<<20&4294967295|E>>>12),E=_+(b^A&(w^b))+D[5]+3593408605&4294967295,_=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(_^w))+D[10]+38016083&4294967295,A=_+(E<<9&4294967295|E>>>23),E=b+(_^w&(A^_))+D[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^_&(b^A))+D[4]+3889429448&4294967295,w=b+(E<<20&4294967295|E>>>12),E=_+(b^A&(w^b))+D[9]+568446438&4294967295,_=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(_^w))+D[14]+3275163606&4294967295,A=_+(E<<9&4294967295|E>>>23),E=b+(_^w&(A^_))+D[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^_&(b^A))+D[8]+1163531501&4294967295,w=b+(E<<20&4294967295|E>>>12),E=_+(b^A&(w^b))+D[13]+2850285829&4294967295,_=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(_^w))+D[2]+4243563512&4294967295,A=_+(E<<9&4294967295|E>>>23),E=b+(_^w&(A^_))+D[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^_&(b^A))+D[12]+2368359562&4294967295,w=b+(E<<20&4294967295|E>>>12),E=_+(w^b^A)+D[5]+4294588738&4294967295,_=w+(E<<4&4294967295|E>>>28),E=A+(_^w^b)+D[8]+2272392833&4294967295,A=_+(E<<11&4294967295|E>>>21),E=b+(A^_^w)+D[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^_)+D[14]+4259657740&4294967295,w=b+(E<<23&4294967295|E>>>9),E=_+(w^b^A)+D[1]+2763975236&4294967295,_=w+(E<<4&4294967295|E>>>28),E=A+(_^w^b)+D[4]+1272893353&4294967295,A=_+(E<<11&4294967295|E>>>21),E=b+(A^_^w)+D[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^_)+D[10]+3200236656&4294967295,w=b+(E<<23&4294967295|E>>>9),E=_+(w^b^A)+D[13]+681279174&4294967295,_=w+(E<<4&4294967295|E>>>28),E=A+(_^w^b)+D[0]+3936430074&4294967295,A=_+(E<<11&4294967295|E>>>21),E=b+(A^_^w)+D[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^_)+D[6]+76029189&4294967295,w=b+(E<<23&4294967295|E>>>9),E=_+(w^b^A)+D[9]+3654602809&4294967295,_=w+(E<<4&4294967295|E>>>28),E=A+(_^w^b)+D[12]+3873151461&4294967295,A=_+(E<<11&4294967295|E>>>21),E=b+(A^_^w)+D[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^_)+D[2]+3299628645&4294967295,w=b+(E<<23&4294967295|E>>>9),E=_+(b^(w|~A))+D[0]+4096336452&4294967295,_=w+(E<<6&4294967295|E>>>26),E=A+(w^(_|~b))+D[7]+1126891415&4294967295,A=_+(E<<10&4294967295|E>>>22),E=b+(_^(A|~w))+D[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~_))+D[5]+4237533241&4294967295,w=b+(E<<21&4294967295|E>>>11),E=_+(b^(w|~A))+D[12]+1700485571&4294967295,_=w+(E<<6&4294967295|E>>>26),E=A+(w^(_|~b))+D[3]+2399980690&4294967295,A=_+(E<<10&4294967295|E>>>22),E=b+(_^(A|~w))+D[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~_))+D[1]+2240044497&4294967295,w=b+(E<<21&4294967295|E>>>11),E=_+(b^(w|~A))+D[8]+1873313359&4294967295,_=w+(E<<6&4294967295|E>>>26),E=A+(w^(_|~b))+D[15]+4264355552&4294967295,A=_+(E<<10&4294967295|E>>>22),E=b+(_^(A|~w))+D[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~_))+D[13]+1309151649&4294967295,w=b+(E<<21&4294967295|E>>>11),E=_+(b^(w|~A))+D[4]+4149444226&4294967295,_=w+(E<<6&4294967295|E>>>26),E=A+(w^(_|~b))+D[11]+3174756917&4294967295,A=_+(E<<10&4294967295|E>>>22),E=b+(_^(A|~w))+D[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~_))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var w=_-this.blockSize,D=this.B,b=this.h,A=0;A<_;){if(b==0)for(;A<=w;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(D[b++]=T.charCodeAt(A++),b==this.blockSize){i(this,D),b=0;break}}else for(;A<_;)if(D[b++]=T[A++],b==this.blockSize){i(this,D),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var w=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=w&255,w/=256;for(this.u(T),T=Array(16),_=w=0;4>_;++_)for(var D=0;32>D;D+=8)T[w++]=this.g[_]>>>D&255;return T};function o(T,_){var w=a;return Object.prototype.hasOwnProperty.call(w,T)?w[T]:w[T]=_(T)}function s(T,_){this.h=_;for(var w=[],D=!0,b=T.length-1;0<=b;b--){var A=T[b]|0;D&&A==_||(w[b]=A,D=!1)}this.g=w}var a={};function c(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return P(l(-T));for(var _=[],w=1,D=0;T>=w;D++)_[D]=T/w|0,w*=4294967296;return new s(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return P(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),D=f,b=0;b<T.length;b+=8){var A=Math.min(8,T.length-b),E=parseInt(T.substring(b,b+A),_);8>A?(A=l(Math.pow(_,A)),D=D.j(A).add(l(E))):(D=D.j(w),D=D.add(l(E)))}return D}var f=c(0),g=c(1),m=c(16777216);n=s.prototype,n.m=function(){if(S(this))return-P(this).m();for(var T=0,_=1,w=0;w<this.g.length;w++){var D=this.i(w);T+=(0<=D?D:4294967296+D)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(I(this))return"0";if(S(this))return"-"+P(this).toString(T);for(var _=l(Math.pow(T,6)),w=this,D="";;){var b=Q(w,_).g;w=O(w,b.j(_));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(T);if(w=b,I(w))return A+D;for(;6>A.length;)A="0"+A;D=A+D}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function I(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function S(T){return T.h==-1}n.l=function(T){return T=O(this,T),S(T)?-1:I(T)?0:1};function P(T){for(var _=T.g.length,w=[],D=0;D<_;D++)w[D]=~T.g[D];return new s(w,~T.h).add(g)}n.abs=function(){return S(this)?P(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],D=0,b=0;b<=_;b++){var A=D+(this.i(b)&65535)+(T.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);D=E>>>16,A&=65535,E&=65535,w[b]=E<<16|A}return new s(w,w[w.length-1]&-2147483648?-1:0)};function O(T,_){return T.add(P(_))}n.j=function(T){if(I(this)||I(T))return f;if(S(this))return S(T)?P(this).j(P(T)):P(P(this).j(T));if(S(T))return P(this.j(P(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,w=[],D=0;D<2*_;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(var b=0;b<T.g.length;b++){var A=this.i(D)>>>16,E=this.i(D)&65535,Bn=T.i(b)>>>16,sa=T.i(b)&65535;w[2*D+2*b]+=E*sa,j(w,2*D+2*b),w[2*D+2*b+1]+=A*sa,j(w,2*D+2*b+1),w[2*D+2*b+1]+=E*Bn,j(w,2*D+2*b+1),w[2*D+2*b+2]+=A*Bn,j(w,2*D+2*b+2)}for(D=0;D<_;D++)w[D]=w[2*D+1]<<16|w[2*D];for(D=_;D<2*_;D++)w[D]=0;return new s(w,0)};function j(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function B(T,_){this.g=T,this.h=_}function Q(T,_){if(I(_))throw Error("division by zero");if(I(T))return new B(f,f);if(S(T))return _=Q(P(T),_),new B(P(_.g),P(_.h));if(S(_))return _=Q(T,P(_)),new B(P(_.g),_.h);if(30<T.g.length){if(S(T)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var w=g,D=_;0>=D.l(T);)w=he(w),D=he(D);var b=Z(w,1),A=Z(D,1);for(D=Z(D,2),w=Z(w,2);!I(D);){var E=A.add(D);0>=E.l(T)&&(b=b.add(w),A=E),D=Z(D,1),w=Z(w,1)}return _=O(T,b.j(_)),new B(b,_)}for(b=f;0<=T.l(_);){for(w=Math.max(1,Math.floor(T.m()/_.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),A=l(w),E=A.j(_);S(E)||0<E.l(T);)w-=D,A=l(w),E=A.j(_);I(A)&&(A=g),b=b.add(A),T=O(T,E)}return new B(b,T)}n.A=function(T){return Q(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],D=0;D<_;D++)w[D]=this.i(D)&T.i(D);return new s(w,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],D=0;D<_;D++)w[D]=this.i(D)|T.i(D);return new s(w,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],D=0;D<_;D++)w[D]=this.i(D)^T.i(D);return new s(w,this.h^T.h)};function he(T){for(var _=T.g.length+1,w=[],D=0;D<_;D++)w[D]=T.i(D)<<1|T.i(D-1)>>>31;return new s(w,T.h)}function Z(T,_){var w=_>>5;_%=32;for(var D=T.g.length-w,b=[],A=0;A<D;A++)b[A]=0<_?T.i(A+w)>>>_|T.i(A+w+1)<<32-_:T.i(A+w);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,h_=nN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,sr=nN.Integer=s}).apply(typeof tN<"u"?tN:typeof self<"u"?self:typeof window<"u"?window:{});var Eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ar={};var f_,W4,ds,p_,Sc,wh,g_,m_,y_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eh=="object"&&Eh];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var C=u[y];if(!(C in p))break e;p=p[C]}u=u[u.length-1],y=p[u],h=h(y),h!=y&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function o(u,h){u instanceof String&&(u+="");var p=0,y=!1,C={next:function(){if(!y&&p<u.length){var M=p++;return{value:h(M,u[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),u.apply(h,C)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function I(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(y,C,M){for(var V=Array(arguments.length-2),De=2;De<arguments.length;De++)V[De-2]=arguments[De];return h.prototype[C].apply(y,V)}}function S(u){let h=u.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=u[y];return p}return[]}function P(u,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(c(y)){let C=u.length||0,M=y.length||0;u.length=C+M;for(let V=0;V<M;V++)u[C+V]=y[V]}else u.push(y)}}class O{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function j(u){return/^[\s\xa0]*$/.test(u)}function B(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Q(u){return Q[" "](u),u}Q[" "]=function(){};var he=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function Z(u,h,p){for(let y in u)h.call(p,u[y],y,u)}function T(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function _(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,h){let p,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(p in y)u[p]=y[p];for(let M=0;M<w.length;M++)p=w[M],Object.prototype.hasOwnProperty.call(y,p)&&(u[p]=y[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=up;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Bn{constructor(){this.h=this.g=null}add(h,p){let y=sa.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var sa=new O(()=>new xx,u=>u.reset());class xx{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let aa,ca=!1,up=new Bn,Mw=()=>{let u=a.Promise.resolve(void 0);aa=()=>{u.then(kx)}};var kx=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){A(p)}var h=sa;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}ca=!1};function vr(){this.s=this.s,this.C=this.C}vr.prototype.s=!1,vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var Ox=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function ua(u,h){if(rt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(he){e:{try{Q(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Fx[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ua.aa.h.call(this)}}I(ua,rt);var Fx={2:"touch",3:"pen",4:"mouse"};ua.prototype.h=function(){ua.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var la="closure_listenable_"+(1e6*Math.random()|0),Lx=0;function Vx(u,h,p,y,C){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=C,this.key=++Lx,this.da=this.fa=!1}function Cu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Su(u){this.src=u,this.g={},this.h=0}Su.prototype.add=function(u,h,p,y,C){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var V=dp(u,h,y,C);return-1<V?(h=u[V],p||(h.fa=!1)):(h=new Vx(h,this.src,M,!!y,C),h.fa=p,u.push(h)),h};function lp(u,h){var p=h.type;if(p in u.g){var y=u.g[p],C=Array.prototype.indexOf.call(y,h,void 0),M;(M=0<=C)&&Array.prototype.splice.call(y,C,1),M&&(Cu(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function dp(u,h,p,y){for(var C=0;C<u.length;++C){var M=u[C];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==y)return C}return-1}var hp="closure_lm_"+(1e6*Math.random()|0),fp={};function xw(u,h,p,y,C){if(y&&y.once)return Ow(u,h,p,y,C);if(Array.isArray(h)){for(var M=0;M<h.length;M++)xw(u,h[M],p,y,C);return null}return p=yp(p),u&&u[la]?u.K(h,p,l(y)?!!y.capture:!!y,C):kw(u,h,p,!1,y,C)}function kw(u,h,p,y,C,M){if(!h)throw Error("Invalid event type");var V=l(C)?!!C.capture:!!C,De=gp(u);if(De||(u[hp]=De=new Su(u)),p=De.add(h,p,y,V,M),p.proxy)return p;if(y=jx(),p.proxy=y,y.src=u,y.listener=p,u.addEventListener)Ox||(C=V),C===void 0&&(C=!1),u.addEventListener(h.toString(),y,C);else if(u.attachEvent)u.attachEvent(Lw(h.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function jx(){function u(p){return h.call(u.src,u.listener,p)}let h=Bx;return u}function Ow(u,h,p,y,C){if(Array.isArray(h)){for(var M=0;M<h.length;M++)Ow(u,h[M],p,y,C);return null}return p=yp(p),u&&u[la]?u.L(h,p,l(y)?!!y.capture:!!y,C):kw(u,h,p,!0,y,C)}function Fw(u,h,p,y,C){if(Array.isArray(h))for(var M=0;M<h.length;M++)Fw(u,h[M],p,y,C);else y=l(y)?!!y.capture:!!y,p=yp(p),u&&u[la]?(u=u.i,h=String(h).toString(),h in u.g&&(M=u.g[h],p=dp(M,p,y,C),-1<p&&(Cu(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete u.g[h],u.h--)))):u&&(u=gp(u))&&(h=u.g[h.toString()],u=-1,h&&(u=dp(h,p,y,C)),(p=-1<u?h[u]:null)&&pp(p))}function pp(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[la])lp(h.i,u);else{var p=u.type,y=u.proxy;h.removeEventListener?h.removeEventListener(p,y,u.capture):h.detachEvent?h.detachEvent(Lw(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=gp(h))?(lp(p,u),p.h==0&&(p.src=null,h[hp]=null)):Cu(u)}}}function Lw(u){return u in fp?fp[u]:fp[u]="on"+u}function Bx(u,h){if(u.da)u=!0;else{h=new ua(h,this);var p=u.listener,y=u.ha||u.src;u.fa&&pp(u),u=p.call(y,h)}return u}function gp(u){return u=u[hp],u instanceof Su?u:null}var mp="__closure_events_fn_"+(1e9*Math.random()>>>0);function yp(u){return typeof u=="function"?u:(u[mp]||(u[mp]=function(h){return u.handleEvent(h)}),u[mp])}function it(){vr.call(this),this.i=new Su(this),this.M=this,this.F=null}I(it,vr),it.prototype[la]=!0,it.prototype.removeEventListener=function(u,h,p,y){Fw(this,u,h,p,y)};function mt(u,h){var p,y=u.F;if(y)for(p=[];y;y=y.F)p.push(y);if(u=u.M,y=h.type||h,typeof h=="string")h=new rt(h,u);else if(h instanceof rt)h.target=h.target||u;else{var C=h;h=new rt(y,u),D(h,C)}if(C=!0,p)for(var M=p.length-1;0<=M;M--){var V=h.g=p[M];C=Au(V,y,!0,h)&&C}if(V=h.g=u,C=Au(V,y,!0,h)&&C,C=Au(V,y,!1,h)&&C,p)for(M=0;M<p.length;M++)V=h.g=p[M],C=Au(V,y,!1,h)&&C}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],y=0;y<p.length;y++)Cu(p[y]);delete u.g[h],u.h--}}this.F=null},it.prototype.K=function(u,h,p,y){return this.i.add(String(u),h,!1,p,y)},it.prototype.L=function(u,h,p,y){return this.i.add(String(u),h,!0,p,y)};function Au(u,h,p,y){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,M=0;M<h.length;++M){var V=h[M];if(V&&!V.da&&V.capture==p){var De=V.listener,et=V.ha||V.src;V.fa&&lp(u.i,V),C=De.call(et,y)!==!1&&C}}return C&&!y.defaultPrevented}function Vw(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function jw(u){u.g=Vw(()=>{u.g=null,u.i&&(u.i=!1,jw(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class Ux extends vr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:jw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function da(u){vr.call(this),this.h=u,this.g={}}I(da,vr);var Bw=[];function Uw(u){Z(u.g,function(h,p){this.g.hasOwnProperty(p)&&pp(h)},u),u.g={}}da.prototype.N=function(){da.aa.N.call(this),Uw(this)},da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vp=a.JSON.stringify,$x=a.JSON.parse,Hx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function _p(){}_p.prototype.h=null;function $w(u){return u.h||(u.h=u.i())}function Hw(){}var ha={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ip(){rt.call(this,"d")}I(Ip,rt);function Ep(){rt.call(this,"c")}I(Ep,rt);var pi={},qw=null;function Nu(){return qw=qw||new it}pi.La="serverreachability";function zw(u){rt.call(this,pi.La,u)}I(zw,rt);function fa(u){let h=Nu();mt(h,new zw(h))}pi.STAT_EVENT="statevent";function Ww(u,h){rt.call(this,pi.STAT_EVENT,u),this.stat=h}I(Ww,rt);function yt(u){let h=Nu();mt(h,new Ww(h,u))}pi.Ma="timingevent";function Gw(u,h){rt.call(this,pi.Ma,u),this.size=h}I(Gw,rt);function pa(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function ga(){this.g=!0}ga.prototype.xa=function(){this.g=!1};function qx(u,h,p,y,C,M){u.info(function(){if(u.g)if(M)for(var V="",De=M.split("&"),et=0;et<De.length;et++){var me=De[et].split("=");if(1<me.length){var ot=me[0];me=me[1];var st=ot.split("_");V=2<=st.length&&st[1]=="type"?V+(ot+"="+me+"&"):V+(ot+"=redacted&")}}else V=null;else V=M;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+h+`
`+p+`
`+V})}function zx(u,h,p,y,C,M,V){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+h+`
`+p+`
`+M+" "+V})}function Co(u,h,p,y){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+Gx(u,p)+(y?" "+y:"")})}function Wx(u,h){u.info(function(){return"TIMEOUT: "+h})}ga.prototype.info=function(){};function Gx(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var y=p[u];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var M=C[0];if(M!="noop"&&M!="stop"&&M!="close")for(var V=1;V<C.length;V++)C[V]=""}}}}return vp(p)}catch{return h}}var Ru={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wp;function Pu(){}I(Pu,_p),Pu.prototype.g=function(){return new XMLHttpRequest},Pu.prototype.i=function(){return{}},wp=new Pu;function _r(u,h,p,y){this.j=u,this.i=h,this.l=p,this.R=y||1,this.U=new da(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qw}function Qw(){this.i=null,this.g="",this.h=!1}var Yw={},Tp={};function Dp(u,h,p){u.L=1,u.v=Ou(Un(h)),u.m=p,u.P=!0,Zw(u,null)}function Zw(u,h){u.F=Date.now(),Mu(u),u.A=Un(u.v);var p=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),dT(p.i,"t",y),u.C=0,p=u.j.J,u.h=new Qw,u.g=NT(u.j,p?h:null,!u.m),0<u.O&&(u.M=new Ux(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,y=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(Bw[0]=C.toString()),C=Bw);for(var M=0;M<C.length;M++){var V=xw(p,C[M],y||h.handleEvent,!1,h.h||h);if(!V)break;h.g[V.key]=V}h=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),fa(),qx(u.i,u.u,u.A,u.l,u.R,u.m)}_r.prototype.ca=function(u){u=u.target;let h=this.M;h&&$n(u)==3?h.j():this.Y(u)},_r.prototype.Y=function(u){try{if(u==this.g)e:{let st=$n(this.g);var h=this.g.Ba();let No=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||vT(this.g)))){this.J||st!=4||h==7||(h==8||0>=No?fa(3):fa(2)),bp(this);var p=this.g.Z();this.X=p;t:if(Jw(this)){var y=vT(this.g);u="";var C=y.length,M=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gi(this),ma(this);var V="";break t}this.h.i=new a.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,u+=this.h.i.decode(y[h],{stream:!(M&&h==C-1)});y.length=0,this.h.g+=u,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=p==200,zx(this.i,this.u,this.A,this.l,this.R,st,p),this.o){if(this.T&&!this.K){t:{if(this.g){var De,et=this.g;if((De=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(De)){var me=De;break t}}me=null}if(p=me)Co(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cp(this,p);else{this.o=!1,this.s=3,yt(12),gi(this),ma(this);break e}}if(this.P){p=!0;let en;for(;!this.J&&this.C<V.length;)if(en=Kx(this,V),en==Tp){st==4&&(this.s=4,yt(14),p=!1),Co(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Yw){this.s=4,yt(15),Co(this.i,this.l,V,"[Invalid Chunk]"),p=!1;break}else Co(this.i,this.l,en,null),Cp(this,en);if(Jw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||V.length!=0||this.h.h||(this.s=1,yt(16),p=!1),this.o=this.o&&p,!p)Co(this.i,this.l,V,"[Invalid Chunked Response]"),gi(this),ma(this);else if(0<V.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Mp(ot),ot.M=!0,yt(11))}}else Co(this.i,this.l,V,null),Cp(this,V);st==4&&gi(this),this.o&&!this.J&&(st==4?bT(this.j,this):(this.o=!1,Mu(this)))}else dk(this.g),p==400&&0<V.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),gi(this),ma(this)}}}catch{}finally{}};function Jw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Kx(u,h){var p=u.C,y=h.indexOf(`
`,p);return y==-1?Tp:(p=Number(h.substring(p,y)),isNaN(p)?Yw:(y+=1,y+p>h.length?Tp:(h=h.slice(y,y+p),u.C=y+p,h)))}_r.prototype.cancel=function(){this.J=!0,gi(this)};function Mu(u){u.S=Date.now()+u.I,Xw(u,u.I)}function Xw(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pa(g(u.ba,u),h)}function bp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}_r.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Wx(this.i,this.A),this.L!=2&&(fa(),yt(17)),gi(this),this.s=2,ma(this)):Xw(this,this.S-u)};function ma(u){u.j.G==0||u.J||bT(u.j,u)}function gi(u){bp(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,Uw(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Cp(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||Sp(p.h,u))){if(!u.K&&Sp(p.h,u)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Bu(p),Vu(p);else break e;Pp(p),yt(18)}}else p.za=C[1],0<p.za-p.T&&37500>C[2]&&p.F&&p.v==0&&!p.C&&(p.C=pa(g(p.Za,p),6e3));if(1>=nT(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else yi(p,11)}else if((u.K||p.g==u)&&Bu(p),!j(h))for(C=p.Da.g.parse(h),h=0;h<C.length;h++){let me=C[h];if(p.T=me[0],me=me[1],p.G==2)if(me[0]=="c"){p.K=me[1],p.ia=me[2];let ot=me[3];ot!=null&&(p.la=ot,p.j.info("VER="+p.la));let st=me[4];st!=null&&(p.Aa=st,p.j.info("SVER="+p.Aa));let No=me[5];No!=null&&typeof No=="number"&&0<No&&(y=1.5*No,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let en=u.g;if(en){let $u=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($u){var M=y.h;M.g||$u.indexOf("spdy")==-1&&$u.indexOf("quic")==-1&&$u.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Ap(M,M.h),M.h=null))}if(y.D){let xp=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;xp&&(y.ya=xp,Se(y.I,y.D,xp))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var V=u;if(y.qa=AT(y,y.J?y.ia:null,y.W),V.K){rT(y.h,V);var De=V,et=y.L;et&&(De.I=et),De.B&&(bp(De),Mu(De)),y.g=V}else TT(y);0<p.i.length&&ju(p)}else me[0]!="stop"&&me[0]!="close"||yi(p,7);else p.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?yi(p,7):Rp(p):me[0]!="noop"&&p.l&&p.l.ta(me),p.v=0)}}fa(4)}catch{}}var Qx=class{constructor(u,h){this.g=u,this.map=h}};function eT(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tT(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function nT(u){return u.h?1:u.g?u.g.size:0}function Sp(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Ap(u,h){u.g?u.g.add(h):u.h=h}function rT(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}eT.prototype.cancel=function(){if(this.i=iT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function iT(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return S(u.i)}function Yx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,y=0;y<p;y++)h.push(u[y]);return h}h=[],p=0;for(y in u)h[p++]=u[y];return h}function Zx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let y in u)h[p++]=y;return h}}}function oT(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=Zx(u),y=Yx(u),C=y.length,M=0;M<C;M++)h.call(void 0,y[M],p&&p[M],u)}var sT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jx(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var y=u[p].indexOf("="),C=null;if(0<=y){var M=u[p].substring(0,y);C=u[p].substring(y+1)}else M=u[p];h(M,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function mi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof mi){this.h=u.h,xu(this,u.j),this.o=u.o,this.g=u.g,ku(this,u.s),this.l=u.l;var h=u.i,p=new _a;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),aT(this,p),this.m=u.m}else u&&(h=String(u).match(sT))?(this.h=!1,xu(this,h[1]||"",!0),this.o=ya(h[2]||""),this.g=ya(h[3]||"",!0),ku(this,h[4]),this.l=ya(h[5]||"",!0),aT(this,h[6]||"",!0),this.m=ya(h[7]||"")):(this.h=!1,this.i=new _a(null,this.h))}mi.prototype.toString=function(){var u=[],h=this.j;h&&u.push(va(h,cT,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(va(h,cT,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(va(p,p.charAt(0)=="/"?tk:ek,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",va(p,rk)),u.join("")};function Un(u){return new mi(u)}function xu(u,h,p){u.j=p?ya(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function ku(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function aT(u,h,p){h instanceof _a?(u.i=h,ik(u.i,u.h)):(p||(h=va(h,nk)),u.i=new _a(h,u.h))}function Se(u,h,p){u.i.set(h,p)}function Ou(u){return Se(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ya(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function va(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,Xx),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Xx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var cT=/[#\/\?@]/g,ek=/[#\?:]/g,tk=/[#\?]/g,nk=/[#\?@]/g,rk=/#/g;function _a(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function Ir(u){u.g||(u.g=new Map,u.h=0,u.i&&Jx(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=_a.prototype,n.add=function(u,h){Ir(this),this.i=null,u=So(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function uT(u,h){Ir(u),h=So(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function lT(u,h){return Ir(u),h=So(u,h),u.g.has(h)}n.forEach=function(u,h){Ir(this),this.g.forEach(function(p,y){p.forEach(function(C){u.call(h,C,y,this)},this)},this)},n.na=function(){Ir(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let C=u[y];for(let M=0;M<C.length;M++)p.push(h[y])}return p},n.V=function(u){Ir(this);let h=[];if(typeof u=="string")lT(this,u)&&(h=h.concat(this.g.get(So(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return Ir(this),this.i=null,u=So(this,u),lT(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function dT(u,h,p){uT(u,h),0<p.length&&(u.i=null,u.g.set(So(u,h),S(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let M=encodeURIComponent(String(y)),V=this.V(y);for(y=0;y<V.length;y++){var C=M;V[y]!==""&&(C+="="+encodeURIComponent(String(V[y]))),u.push(C)}}return this.i=u.join("&")};function So(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function ik(u,h){h&&!u.j&&(Ir(u),u.i=null,u.g.forEach(function(p,y){var C=y.toLowerCase();y!=C&&(uT(this,y),dT(this,C,p))},u)),u.j=h}function ok(u,h){let p=new ga;if(a.Image){let y=new Image;y.onload=m(Er,p,"TestLoadImage: loaded",!0,h,y),y.onerror=m(Er,p,"TestLoadImage: error",!1,h,y),y.onabort=m(Er,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(Er,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else h(!1)}function sk(u,h){let p=new ga,y=new AbortController,C=setTimeout(()=>{y.abort(),Er(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:y.signal}).then(M=>{clearTimeout(C),M.ok?Er(p,"TestPingServer: ok",!0,h):Er(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Er(p,"TestPingServer: error",!1,h)})}function Er(u,h,p,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(p)}catch{}}function ak(){this.g=new Hx}function ck(u,h,p){let y=p||"";try{oT(u,function(C,M){let V=C;l(C)&&(V=vp(C)),h.push(y+M+"="+encodeURIComponent(V))})}catch(C){throw h.push(y+"type="+encodeURIComponent("_badmap")),C}}function Ia(u){this.l=u.Ub||null,this.j=u.eb||!1}I(Ia,_p),Ia.prototype.g=function(){return new Fu(this.l,this.j)},Ia.prototype.i=function(u){return function(){return u}}({});function Fu(u,h){it.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Fu,it),n=Fu.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,wa(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hT(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function hT(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Ea(this):wa(this),this.readyState==3&&hT(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ea(this))},n.Qa=function(u){this.g&&(this.response=u,Ea(this))},n.ga=function(){this.g&&Ea(this)};function Ea(u){u.readyState=4,u.l=null,u.j=null,u.v=null,wa(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function wa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function fT(u){let h="";return Z(u,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function Np(u,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=fT(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Se(u,h,p))}function ke(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ke,it);var uk=/^https?$/i,lk=["POST","PUT"];n=ke.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wp.g(),this.v=this.o?$w(this.o):$w(wp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(M){pT(this,M);return}if(u=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)p.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let M of y.keys())p.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(lk,h,void 0))||y||C||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,V]of p)this.g.setRequestHeader(M,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yT(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){pT(this,M)}};function pT(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,gT(u),Lu(u)}function gT(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),Lu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lu(this,!0)),ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mT(this):this.bb())},n.bb=function(){mT(this)};function mT(u){if(u.h&&typeof s<"u"&&(!u.v[1]||$n(u)!=4||u.Z()!=2)){if(u.u&&$n(u)==4)Vw(u.Ea,0,u);else if(mt(u,"readystatechange"),$n(u)==4){u.h=!1;try{let V=u.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=V===0){var C=String(u.D).match(sT)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),y=!uk.test(C?C.toLowerCase():"")}p=y}if(p)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var M=2<$n(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",gT(u)}}finally{Lu(u)}}}}function Lu(u,h){if(u.g){yT(u);let p=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||mt(u,"ready");try{p.onreadystatechange=y}catch{}}}function yT(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function $n(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),$x(h)}};function vT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function dk(u){let h={};u=(u.g&&2<=$n(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(j(u[y]))continue;var p=b(u[y]);let C=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[C]||[];h[C]=M,M.push(p)}T(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function _T(u){this.Aa=0,this.i=[],this.j=new ga,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ta("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ta("baseRetryDelayMs",5e3,u),this.cb=Ta("retryDelaySeedMs",1e4,u),this.Wa=Ta("forwardChannelMaxRetries",2,u),this.wa=Ta("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new eT(u&&u.concurrentRequestLimit),this.Da=new ak,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_T.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,y){yt(0),this.W=u,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=AT(this,null,this.W),ju(this)};function Rp(u){if(IT(u),u.G==3){var h=u.U++,p=Un(u.I);if(Se(p,"SID",u.K),Se(p,"RID",h),Se(p,"TYPE","terminate"),Da(u,p),h=new _r(u,u.j,h),h.L=2,h.v=Ou(Un(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=NT(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Mu(h)}ST(u)}function Vu(u){u.g&&(Mp(u),u.g.cancel(),u.g=null)}function IT(u){Vu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Bu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ju(u){if(!tT(u.h)&&!u.s){u.s=!0;var h=u.Ga;aa||Mw(),ca||(aa(),ca=!0),up.add(h,u),u.B=0}}function hk(u,h){return nT(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pa(g(u.Ga,u,h),CT(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new _r(this,this.j,u),M=this.o;if(this.S&&(M?(M=_(M),D(M,this.S)):M=this.S),this.m!==null||this.O||(C.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=wT(this,C,h),p=Un(this.I),Se(p,"RID",u),Se(p,"CVER",22),this.D&&Se(p,"X-HTTP-Session-Id",this.D),Da(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(fT(M)))+"&"+h:this.m&&Np(p,this.m,M)),Ap(this.h,C),this.Ua&&Se(p,"TYPE","init"),this.P?(Se(p,"$req",h),Se(p,"SID","null"),C.T=!0,Dp(C,p,null)):Dp(C,p,h),this.G=2}}else this.G==3&&(u?ET(this,u):this.i.length==0||tT(this.h)||ET(this))};function ET(u,h){var p;h?p=h.l:p=u.U++;let y=Un(u.I);Se(y,"SID",u.K),Se(y,"RID",p),Se(y,"AID",u.T),Da(u,y),u.m&&u.o&&Np(y,u.m,u.o),p=new _r(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=wT(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ap(u.h,p),Dp(p,y,h)}function Da(u,h){u.H&&Z(u.H,function(p,y){Se(h,y,p)}),u.l&&oT({},function(p,y){Se(h,y,p)})}function wT(u,h,p){p=Math.min(u.i.length,p);var y=u.l?g(u.l.Na,u.l,u):null;e:{var C=u.i;let M=-1;for(;;){let V=["count="+p];M==-1?0<p?(M=C[0].g,V.push("ofs="+M)):M=0:V.push("ofs="+M);let De=!0;for(let et=0;et<p;et++){let me=C[et].g,ot=C[et].map;if(me-=M,0>me)M=Math.max(0,C[et].g-100),De=!1;else try{ck(ot,V,"req"+me+"_")}catch{y&&y(ot)}}if(De){y=V.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,y}function TT(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;aa||Mw(),ca||(aa(),ca=!0),up.add(h,u),u.v=0}}function Pp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pa(g(u.Fa,u),CT(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,DT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pa(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Vu(this),DT(this))};function Mp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function DT(u){u.g=new _r(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Un(u.qa);Se(h,"RID","rpc"),Se(h,"SID",u.K),Se(h,"AID",u.T),Se(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Se(h,"TO",u.ja),Se(h,"TYPE","xmlhttp"),Da(u,h),u.m&&u.o&&Np(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Ou(Un(h)),p.m=null,p.P=!0,Zw(p,u)}n.Za=function(){this.C!=null&&(this.C=null,Vu(this),Pp(this),yt(19))};function Bu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function bT(u,h){var p=null;if(u.g==h){Bu(u),Mp(u),u.g=null;var y=2}else if(Sp(u.h,h))p=h.D,rT(u.h,h),y=1;else return;if(u.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var C=u.B;y=Nu(),mt(y,new Gw(y,p)),ju(u)}else TT(u);else if(C=h.s,C==3||C==0&&0<h.X||!(y==1&&hk(u,h)||y==2&&Pp(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),C){case 1:yi(u,5);break;case 4:yi(u,10);break;case 3:yi(u,6);break;default:yi(u,2)}}}function CT(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function yi(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),y=u.Xa;let C=!y;y=new mi(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xu(y,"https"),Ou(y),C?ok(y.toString(),p):sk(y.toString(),p)}else yt(2);u.G=0,u.l&&u.l.sa(h),ST(u),IT(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function ST(u){if(u.G=0,u.ka=[],u.l){let h=iT(u.h);(h.length!=0||u.i.length!=0)&&(P(u.ka,h),P(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function AT(u,h,p){var y=p instanceof mi?Un(p):new mi(p);if(y.g!="")h&&(y.g=h+"."+y.g),ku(y,y.s);else{var C=a.location;y=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var M=new mi(null);y&&xu(M,y),h&&(M.g=h),C&&ku(M,C),p&&(M.l=p),y=M}return p=u.D,h=u.ya,p&&h&&Se(y,p,h),Se(y,"VER",u.la),Da(u,y),y}function NT(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new ke(new Ia({eb:p})):new ke(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function RT(){}n=RT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Uu(){}Uu.prototype.g=function(u,h){return new jt(u,h)};function jt(u,h){it.call(this),this.g=new _T(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!j(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!j(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Ao(this)}I(jt,it),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){Rp(this.g)},jt.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=vp(u),u=p);h.i.push(new Qx(h.Ya++,u)),h.G==3&&ju(h)},jt.prototype.N=function(){this.g.l=null,delete this.j,Rp(this.g),delete this.g,jt.aa.N.call(this)};function PT(u){Ip.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}I(PT,Ip);function MT(){Ep.call(this),this.status=1}I(MT,Ep);function Ao(u){this.g=u}I(Ao,RT),Ao.prototype.ua=function(){mt(this.g,"a")},Ao.prototype.ta=function(u){mt(this.g,new PT(u))},Ao.prototype.sa=function(u){mt(this.g,new MT)},Ao.prototype.ra=function(){mt(this.g,"b")},Uu.prototype.createWebChannel=Uu.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,y_=ar.createWebChannelTransport=function(){return new Uu},m_=ar.getStatEventTarget=function(){return Nu()},g_=ar.Event=pi,wh=ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ru.NO_ERROR=0,Ru.TIMEOUT=8,Ru.HTTP_ERROR=6,Sc=ar.ErrorCode=Ru,Kw.COMPLETE="complete",p_=ar.EventType=Kw,Hw.EventType=ha,ha.OPEN="a",ha.CLOSE="b",ha.ERROR="c",ha.MESSAGE="d",it.prototype.listen=it.prototype.K,ds=ar.WebChannel=Hw,W4=ar.FetchXmlHttpFactory=Ia,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,f_=ar.XhrIo=ke}).apply(typeof Eh<"u"?Eh:typeof self<"u"?self:typeof window<"u"?window:{});var rN="@firebase/firestore",iN="4.7.14";var Ke=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");var Js="11.7.3";var Qr=new bn("@firebase/firestore");function vs(){return Qr.logLevel}function IR(n){Qr.setLogLevel(n)}function k(n,...e){if(Qr.logLevel<=ce.DEBUG){let t=e.map(LE);Qr.debug(`Firestore (${Js}): ${n}`,...t)}}function je(n,...e){if(Qr.logLevel<=ce.ERROR){let t=e.map(LE);Qr.error(`Firestore (${Js}): ${n}`,...t)}}function Jt(n,...e){if(Qr.logLevel<=ce.WARN){let t=e.map(LE);Qr.warn(`Firestore (${Js}): ${n}`,...t)}}function LE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function $(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,ER(n,r,t)}function ER(n,e,t){let r=`FIRESTORE (${Js}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw je(r),new Error(r)}function H(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||ER(e,i,r)}function WJ(n,e){n||$(57014,e)}function L(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends Ht{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qe=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Fh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},b_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ke.UNAUTHENTICATED))}shutdown(){}},C_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},S_=class{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){H(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Qe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qe)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(H(typeof r.accessToken=="string",31837,{l:r}),new Fh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return H(e===null||typeof e=="string",2055,{h:e}),new Ke(e)}},A_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},N_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new A_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Bc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},R_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){H(this.o===void 0,3512);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Bc(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(H(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Bc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}},oN=class{getToken(){return Promise.resolve(new Bc(""))}invalidateToken(){}start(e,t){}shutdown(){}};function G4(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function VE(){return new TextEncoder}var Lh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=G4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function W(n,e){return n<e?-1:n>e?1:0}function P_(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return W(r,i);{let o=VE(),s=K4(o.encode(sN(n,t)),o.encode(sN(e,t)));return s!==0?s:W(r,i)}}t+=r>65535?2:1}return W(n.length,e.length)}function sN(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function K4(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return W(n[t],e[t]);return W(n.length,e.length)}function Cs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function wR(n){return n+"\0"}var aN=-62135596800,cN=1e6,Be=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*cN);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<aN)throw new x(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cN}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-aN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var q=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Be(0,0))}static max(){return new n(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var M_="__name__",Vh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&$(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&$(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return W(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):P_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sr.fromString(e.substring(4,e.length-2))}},ge=class n extends Vh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Q4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ye=class n extends Vh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Q4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M_}static keyField(){return new n([M_])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new x(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new x(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new x(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new x(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var U=class n{constructor(e){this.path=e}static fromPath(e){return new n(ge.fromString(e))}static fromName(e){return new n(ge.fromString(e).popFirst(5))}static empty(){return new n(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ge(e.slice()))}};var Ss=-1,Yr=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function x_(n){return n.fields.find(e=>e.kind===2)}function no(n){return n.fields.filter(e=>e.kind!==2)}function Y4(n,e){let t=W(n.collectionGroup,e.collectionGroup);if(t!==0)return t;for(let r=0;r<Math.min(n.fields.length,e.fields.length);++r)if(t=Z4(n.fields[r],e.fields[r]),t!==0)return t;return W(n.fields.length,e.fields.length)}Yr.UNKNOWN_ID=-1;var lr=class{constructor(e,t){this.fieldPath=e,this.kind=t}};function Z4(n,e){let t=Ye.comparator(n.fieldPath,e.fieldPath);return t!==0?t:W(n.kind,e.kind)}var As=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Xt.min())}};function TR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new Be(t+1,0):new Be(t,r));return new Xt(i,U.empty(),e)}function DR(n){return new Xt(n.readTime,n.key,Ss)}var Xt=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(q.min(),U.empty(),Ss)}static max(){return new n(q.max(),U.empty(),Ss)}};function jE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=U.comparator(n.documentKey,e.documentKey),t!==0?t:W(n.largestBatchId,e.largestBatchId))}var bR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ci(n){return v(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==bR)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var N=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var qt="SimpleDb",Bh=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new lo(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Qe,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new lo(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=BE(r.target.error);this.S.reject(new lo(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(k(qt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new O_(t)}},Zr=class n{static delete(e){return k(qt,"Removing database:",e),io(Fd().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!is())return!1;if(n.F())return!0;let e=Ve(),t=n.M(e),r=0<t&&t<10,i=CR(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(Ve())===12.2&&je("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return v(this,null,function*(){return this.db||(k(qt,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new lo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new x(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new x(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new lo(e,s))},i.onupgradeneeded=o=>{k(qt,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{k(qt,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db})}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return v(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=Bh.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),N.reject(l))).toPromise();return c.catch(()=>{}),yield a.D,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k(qt,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function CR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var k_=class{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return io(this.K.delete())}},lo=class extends x{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ui(n){return n.name==="IndexedDbTransactionError"}var O_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k(qt,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(k(qt,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),io(r)}add(e){return k(qt,"ADD",this.store.name,e,e),io(this.store.add(e))}get(e){return io(this.store.get(e)).next(t=>(t===void 0&&(t=null),k(qt,"GET",this.store.name,e,t),t))}delete(e){return k(qt,"DELETE",this.store.name,e),io(this.store.delete(e))}count(){return k(qt,"COUNT",this.store.name),io(this.store.count())}J(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new N((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.Y(o,(a,c)=>{s.push(c)}).next(()=>s)}}Z(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new N((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}X(e,t){k(qt,"DELETE ALL",this.store.name);let r=this.options(e,t);r.ee=!1;let i=this.cursor(r);return this.Y(i,(o,s,a)=>a.delete())}te(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.Y(i,t)}ne(e){let t=this.cursor({});return new N((r,i)=>{t.onerror=o=>{let s=BE(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}Y(e,t){let r=[];return new N((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new k_(a),l=t(a.primaryKey,a.value,c);if(l instanceof N){let d=l.catch(f=>(c.done(),N.reject(f)));r.push(d)}c.isDone?i():c.j===null?a.continue():a.continue(c.j)}}).next(()=>N.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function io(n){return new N((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=BE(r.target.error);t(i)}})}var uN=!1;function BE(n){let e=Zr.M(Ve());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new x("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uN||(uN=!0,setTimeout(()=>{throw r},0)),r}}return n}var kc="IndexBackfiller",F_=class{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){k(kc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>v(this,null,function*(){this.task=null;try{let t=yield this.re.se();k(kc,`Documents written: ${t}`)}catch(t){ui(t)?k(kc,"Ignoring IndexedDB error during index backfill: ",t):yield ci(t)}yield this.ie(6e4)}))}},L_=class{constructor(e,t){this.localStore=e,this.persistence=t}se(e=50){return v(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))})}oe(e,t){let r=new Set,i=t,o=!0;return N.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k(kc,`Processing collection: ${s}`),this._e(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ae(i,o)).next(a=>(k(kc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}ae(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=DR(o);jE(s,r)>0&&(r=s)}),new Xt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var zt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),Kr=-1;function mu(n){return n==null}function Uc(n){return n===0&&1/n==-1/0}function SR(n){return typeof n=="number"&&Number.isInteger(n)&&!Uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Uh="";function pt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lN(e)),e=J4(n.get(t),e);return lN(e)}function J4(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Uh:t+="";break;default:t+=o}}return t}function lN(n){return n+Uh+""}function Mn(n){let e=n.length;if(H(e>=2,64408,{path:n}),e===2)return H(n.charAt(0)===Uh&&n.charAt(1)==="",56145,{path:n}),ge.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Uh,o);switch((s<0||s>t)&&$(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:$(61167,{path:n})}o=s+2}return new ge(r)}var ro="remoteDocuments",yu="owner",hs="owner",$c="mutationQueues",X4="userId",dn="mutations",dN="batchId",co="userMutationsIndex",hN=["userId","batchId"];function Nh(n,e){return[n,pt(e)]}function AR(n,e,t){return[n,pt(e),t]}var e6={},Ns="documentMutations",$h="remoteDocumentsV14",t6=["prefixPath","collectionGroup","readTime","documentId"],Rh="documentKeyIndex",n6=["prefixPath","collectionGroup","documentId"],NR="collectionGroupIndex",r6=["collectionGroup","readTime","prefixPath","documentId"],Hc="remoteDocumentGlobal",V_="remoteDocumentGlobalKey",Rs="targets",RR="queryTargetsIndex",i6=["canonicalId","targetId"],Ps="targetDocuments",o6=["targetId","path"],UE="documentTargetsIndex",s6=["path","targetId"],Hh="targetGlobalKey",ho="targetGlobal",qc="collectionParents",a6=["collectionId","parent"],Ms="clientMetadata",c6="clientId",Uf="bundles",u6="bundleId",$f="namedQueries",l6="name",$E="indexConfiguration",d6="indexId",j_="collectionGroupIndex",h6="collectionGroup",qh="indexState",f6=["indexId","uid"],PR="sequenceNumberIndex",p6=["uid","sequenceNumber"],zh="indexEntries",g6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MR="documentKeyIndex",m6=["indexId","uid","orderedDocumentKey"],Hf="documentOverlays",y6=["userId","collectionPath","documentId"],B_="collectionPathOverlayIndex",v6=["userId","collectionPath","largestBatchId"],xR="collectionGroupOverlayIndex",_6=["userId","collectionGroup","largestBatchId"],HE="globals",I6="name",kR=[$c,dn,Ns,ro,Rs,yu,ho,Ps,Ms,Hc,qc,Uf,$f],E6=[...kR,Hf],OR=[$c,dn,Ns,$h,Rs,yu,ho,Ps,Ms,Hc,qc,Uf,$f,Hf],FR=OR,qE=[...FR,$E,qh,zh],w6=qE,T6=[...qE,HE];var zc=class extends jh{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}};function Xe(n,e){let t=L(n);return Zr.N(t.he,e)}function fN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function li(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LR(n,e){let t=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function VR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ae=class n{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ws(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ws(this.root,e,this.comparator,!1)}getReverseIterator(){return new ws(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ws(this.root,e,this.comparator,!0)}},ws=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},kn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}};kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Te=class n{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wh(this.data.getIterator())}getIteratorFrom(e){return new Wh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Wh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function fs(n){return n.hasNext()?n.getNext():void 0}var Wt=class n{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new n([])}unionWith(e){let t=new Te(Ye.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Gh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function KJ(){return typeof atob<"u"}var He=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Gh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};He.EMPTY_BYTE_STRING=new He("");var D6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(n){if(H(!!n,39018),typeof n=="string"){let e=0,t=D6.exec(n);if(H(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hr(n){return typeof n=="string"?He.fromBase64String(n):He.fromUint8Array(n)}var jR="server_timestamp",BR="__type__",UR="__previous_value__",$R="__local_write_time__";function qf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[BR])===null||t===void 0?void 0:t.stringValue)===jR}function zf(n){let e=n.mapValue.fields[UR];return qf(e)?zf(e):e}function Wc(n){let e=dr(n.mapValue.fields[$R].timestampValue);return new Be(e.seconds,e.nanos)}var U_=class{constructor(e,t,r,i,o,s,a,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=d}},Gc="(default)",xs=class n{constructor(e,t){this.projectId=e,this.database=t||Gc}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Gc}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zE="__type__",HR="__max__",Wr={mapValue:{fields:{__type__:{stringValue:HR}}}},WE="__vector__",ks="value",Ph={nullValue:"NULL_VALUE"};function Jr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qf(n)?4:qR(n)?9007199254740991:Wf(n)?10:11:$(28295,{value:n})}function Ln(n,e){if(n===e)return!0;let t=Jr(n);if(t!==Jr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wc(n).isEqual(Wc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=dr(i.timestampValue),a=dr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return hr(i.bytesValue).isEqual(hr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?Uc(s)===Uc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Cs(n.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(fN(s)!==fN(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Ln(s[c],a[c])))return!1;return!0}(n,e);default:return $(52216,{left:n})}}function Kc(n,e){return(n.values||[]).find(t=>Ln(t,e))!==void 0}function Xr(n,e){if(n===e)return 0;let t=Jr(n),r=Jr(e);if(t!==r)return W(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return W(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),c=Ne(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return pN(n.timestampValue,e.timestampValue);case 4:return pN(Wc(n),Wc(e));case 5:return P_(n.stringValue,e.stringValue);case 6:return function(o,s){let a=hr(o),c=hr(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=W(a[l],c[l]);if(d!==0)return d}return W(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=W(Ne(o.latitude),Ne(s.latitude));return a!==0?a:W(Ne(o.longitude),Ne(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return gN(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,d;let f=o.fields||{},g=s.fields||{},m=(a=f[ks])===null||a===void 0?void 0:a.arrayValue,I=(c=g[ks])===null||c===void 0?void 0:c.arrayValue,S=W(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:gN(m,I)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Wr.mapValue&&s===Wr.mapValue)return 0;if(o===Wr.mapValue)return 1;if(s===Wr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=P_(c[f],d[f]);if(g!==0)return g;let m=Xr(a[c[f]],l[d[f]]);if(m!==0)return m}return W(c.length,d.length)}(n.mapValue,e.mapValue);default:throw $(23264,{Pe:t})}}function pN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return W(n,e);let t=dr(n),r=dr(e),i=W(t.seconds,r.seconds);return i!==0?i:W(t.nanos,r.nanos)}function gN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Xr(t[i],r[i]);if(o)return o}return W(t.length,r.length)}function Os(n){return $_(n)}function $_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=dr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return hr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return U.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=$_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${$_(t.fields[s])}`;return i+"}"}(n.mapValue):$(61005,{value:n})}function Mh(n){switch(Jr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=zf(n);return e?16+Mh(e):16;case 5:return 2*n.stringValue.length;case 6:return hr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Mh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return li(r.fields,(o,s)=>{i+=o.length+Mh(s)}),i}(n.mapValue);default:throw $(13486,{value:n})}}function fo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function H_(n){return!!n&&"integerValue"in n}function Qc(n){return!!n&&"arrayValue"in n}function mN(n){return!!n&&"nullValue"in n}function yN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xh(n){return!!n&&"mapValue"in n}function Wf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[zE])===null||t===void 0?void 0:t.stringValue)===WE}function Oc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return li(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Oc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Oc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===HR}var zR={mapValue:{fields:{[zE]:{stringValue:WE},[ks]:{arrayValue:{}}}}};function b6(n){return"nullValue"in n?Ph:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fo(xs.empty(),U.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Wf(n)?zR:{mapValue:{}}:$(35942,{value:n})}function C6(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fo(xs.empty(),U.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?zR:"mapValue"in n?Wf(n)?{mapValue:{}}:Wr:$(61959,{value:n})}function vN(n,e){let t=Xr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function _N(n,e){let t=Xr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var ft=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oc(t)}setAll(e){let t=Ye.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Oc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());xh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){li(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Oc(this.value))}};function WR(n){let e=[];return li(n.fields,(t,r)=>{let i=new Ye([t]);if(xh(r)){let o=WR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Wt(e)}var Ze=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,q.min(),q.min(),q.min(),ft.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,q.min(),q.min(),ft.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,q.min(),q.min(),ft.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vn=class{constructor(e,t){this.position=e,this.inclusive=t}};function IN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=U.comparator(U.fromName(s.referenceValue),t.key):r=Xr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function EN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ln(n.position[t],e.position[t]))return!1;return!0}var po=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function S6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Kh=class{},de=class n extends Kh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new W_(e,t,r):t==="array-contains"?new Q_(e,r):t==="in"?new Qh(e,r):t==="not-in"?new Y_(e,r):t==="array-contains-any"?new Z_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new G_(e,r):new K_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xr(t,this.value)):t!==null&&Jr(this.value)===Jr(t)&&this.matchesComparison(Xr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},_e=class n extends Kh{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return Fs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function Fs(n){return n.op==="and"}function q_(n){return n.op==="or"}function GE(n){return GR(n)&&Fs(n)}function GR(n){for(let e of n.filters)if(e instanceof _e)return!1;return!0}function z_(n){if(n instanceof de)return n.field.canonicalString()+n.op.toString()+Os(n.value);if(GE(n))return n.filters.map(e=>z_(e)).join(",");{let e=n.filters.map(t=>z_(t)).join(",");return`${n.op}(${e})`}}function KR(n,e){return n instanceof de?function(r,i){return i instanceof de&&r.op===i.op&&r.field.isEqual(i.field)&&Ln(r.value,i.value)}(n,e):n instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&KR(s,i.filters[a]),!0):!1}(n,e):void $(19439)}function QR(n,e){let t=n.filters.concat(e);return _e.create(t,n.op)}function YR(n){return n instanceof de?function(t){return`${t.field.canonicalString()} ${t.op} ${Os(t.value)}`}(n):n instanceof _e?function(t){return t.op.toString()+" {"+t.getFilters().map(YR).join(" ,")+"}"}(n):"Filter"}var W_=class extends de{constructor(e,t,r){super(e,t,r),this.key=U.fromName(r.referenceValue)}matches(e){let t=U.comparator(e.key,this.key);return this.matchesComparison(t)}},G_=class extends de{constructor(e,t){super(e,"in",t),this.keys=ZR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},K_=class extends de{constructor(e,t){super(e,"not-in",t),this.keys=ZR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function ZR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>U.fromName(r.referenceValue))}var Q_=class extends de{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Qc(t)&&Kc(t.arrayValue,this.value)}},Qh=class extends de{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Kc(this.value.arrayValue,t)}},Y_=class extends de{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Kc(this.value.arrayValue,t)}},Z_=class extends de{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Qc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Kc(this.value.arrayValue,r))}};var J_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function X_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new J_(n,e,t,r,i,o,s)}function go(n){let e=L(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>z_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),mu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Os(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Os(r)).join(",")),e.Ie=t}return e.Ie}function vu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!S6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!EN(n.startAt,e.startAt)&&EN(n.endAt,e.endAt)}function Yh(n){return U.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Zh(n,e){return n.filters.filter(t=>t instanceof de&&t.field.isEqual(e))}function wN(n,e,t){let r=Ph,i=!0;for(let o of Zh(n,e)){let s=Ph,a=!0;switch(o.op){case"<":case"<=":s=b6(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Ph}vN({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];vN({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function TN(n,e,t){let r=Wr,i=!0;for(let o of Zh(n,e)){let s=Wr,a=!0;switch(o.op){case">=":case">":s=C6(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Wr}_N({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];_N({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var hn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function JR(n,e,t,r,i,o,s,a){return new hn(n,e,t,r,i,o,s,a)}function Xs(n){return new hn(n)}function DN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function KE(n){return n.collectionGroup!==null}function Ts(n){let e=L(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Te(Ye.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new po(o,r))}),t.has(Ye.keyField().canonicalString())||e.Ee.push(new po(Ye.keyField(),r))}return e.Ee}function gt(n){let e=L(n);return e.de||(e.de=eP(e,Ts(n))),e.de}function XR(n){let e=L(n);return e.Ae||(e.Ae=eP(e,n.explicitOrderBy)),e.Ae}function eP(n,e){if(n.limitType==="F")return X_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new po(i.field,o)});let t=n.endAt?new Vn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vn(n.startAt.position,n.startAt.inclusive):null;return X_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function eI(n,e){let t=n.filters.concat([e]);return new hn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jh(n,e,t){return new hn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _u(n,e){return vu(gt(n),gt(e))&&n.limitType===e.limitType}function tP(n){return`${go(gt(n))}|lt:${n.limitType}`}function _s(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>YR(i)).join(", ")}]`),mu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Os(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Os(i)).join(",")),`Target(${r})`}(gt(n))}; limitType=${n.limitType})`}function Iu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):U.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ts(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=IN(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Ts(r),i)||r.endAt&&!function(s,a,c){let l=IN(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Ts(r),i))}(n,e)}function nP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rP(n){return(e,t)=>{let r=!1;for(let i of Ts(n)){let o=A6(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function A6(n,e,t){let r=n.field.isKeyField()?U.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Xr(c,l):$(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:n.dir})}}var fn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){li(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return VR(this.inner)}size(){return this.innerSize}};var N6=new Ae(U.comparator);function Vt(){return N6}var iP=new Ae(U.comparator);function Mc(...n){let e=iP;for(let t of n)e=e.insert(t.key,t);return e}function oP(n){let e=iP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xn(){return Fc()}function sP(){return Fc()}function Fc(){return new fn(n=>n.toString(),(n,e)=>n.isEqual(e))}var R6=new Ae(U.comparator),P6=new Te(U.comparator);function te(...n){let e=P6;for(let t of n)e=e.add(t);return e}var M6=new Te(W);function QE(){return M6}function YE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function aP(n){return{integerValue:""+n}}function cP(n,e){return SR(e)?aP(e):YE(n,e)}var Ls=class{constructor(){this._=void 0}};function x6(n,e,t){return n instanceof ei?function(i,o){let s={fields:{[BR]:{stringValue:jR},[$R]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&qf(o)&&(o=zf(o)),o&&(s.fields[UR]=o),{mapValue:s}}(t,e):n instanceof fr?lP(n,e):n instanceof pr?dP(n,e):function(i,o){let s=uP(i,o),a=bN(s)+bN(i.Re);return H_(s)&&H_(i.Re)?aP(a):YE(i.serializer,a)}(n,e)}function k6(n,e,t){return n instanceof fr?lP(n,e):n instanceof pr?dP(n,e):t}function uP(n,e){return n instanceof ti?function(r){return H_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ei=class extends Ls{},fr=class extends Ls{constructor(e){super(),this.elements=e}};function lP(n,e){let t=hP(e);for(let r of n.elements)t.some(i=>Ln(i,r))||t.push(r);return{arrayValue:{values:t}}}var pr=class extends Ls{constructor(e){super(),this.elements=e}};function dP(n,e){let t=hP(e);for(let r of n.elements)t=t.filter(i=>!Ln(i,r));return{arrayValue:{values:t}}}var ti=class extends Ls{constructor(e,t){super(),this.serializer=e,this.Re=t}};function bN(n){return Ne(n.integerValue||n.doubleValue)}function hP(n){return Qc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var mo=class{constructor(e,t){this.field=e,this.transform=t}};function O6(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof fr&&i instanceof fr||r instanceof pr&&i instanceof pr?Cs(r.elements,i.elements,Ln):r instanceof ti&&i instanceof ti?Ln(r.Re,i.Re):r instanceof ei&&i instanceof ei}(n.transform,e.transform)}var tI=class{constructor(e,t){this.version=e,this.transformResults=t}},Fe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Vs=class{};function fP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ri(n.key,Fe.none()):new ni(n.key,n.data,Fe.none());{let t=n.data,r=ft.empty(),i=new Te(Ye.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new pn(n.key,r,new Wt(i.toArray()),Fe.none())}}function F6(n,e,t){n instanceof ni?function(i,o,s){let a=i.value.clone(),c=SN(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof pn?function(i,o,s){if(!kh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=SN(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(pP(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Lc(n,e,t,r){return n instanceof ni?function(o,s,a,c){if(!kh(o.precondition,s))return a;let l=o.value.clone(),d=AN(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof pn?function(o,s,a,c){if(!kh(o.precondition,s))return a;let l=AN(o.fieldTransforms,c,s),d=s.data;return d.setAll(pP(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return kh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function L6(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=uP(r.transform,i||null);o!=null&&(t===null&&(t=ft.empty()),t.set(r.field,o))}return t||null}function CN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Cs(r,i,(o,s)=>O6(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ni=class extends Vs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},pn=class extends Vs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function pP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function SN(n,e,t){let r=new Map;H(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,k6(s,a,t[i]))}return r}function AN(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,x6(o,s,e))}return r}var ri=class extends Vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yc=class extends Vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Zc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&F6(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Lc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Lc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=sP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=fP(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),te())}isEqual(e){return this.batchId===e.batchId&&Cs(this.mutations,e.mutations,(t,r)=>CN(t,r))&&Cs(this.baseMutations,e.baseMutations,(t,r)=>CN(t,r))}},nI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){H(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return R6}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Jc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Xh=class{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}};var rI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var We,pe;function gP(n){switch(n){case R.OK:return $(64938);case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return $(15467,{code:n})}}function mP(n){if(n===void 0)return je("GRPC error has no .code"),R.UNKNOWN;switch(n){case We.OK:return R.OK;case We.CANCELLED:return R.CANCELLED;case We.UNKNOWN:return R.UNKNOWN;case We.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case We.INTERNAL:return R.INTERNAL;case We.UNAVAILABLE:return R.UNAVAILABLE;case We.UNAUTHENTICATED:return R.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case We.NOT_FOUND:return R.NOT_FOUND;case We.ALREADY_EXISTS:return R.ALREADY_EXISTS;case We.PERMISSION_DENIED:return R.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case We.ABORTED:return R.ABORTED;case We.OUT_OF_RANGE:return R.OUT_OF_RANGE;case We.UNIMPLEMENTED:return R.UNIMPLEMENTED;case We.DATA_LOSS:return R.DATA_LOSS;default:return $(39323,{code:n})}}(pe=We||(We={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var ef=null;var V6=new sr([4294967295,4294967295],0);function NN(n){let e=VE().encode(n),t=new h_;return t.update(e),new Uint8Array(t.digest())}function RN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new sr([t,r],0),new sr([i,o],0)]}var iI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new uo(`Invalid padding: ${t}`);if(r<0)throw new uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new uo(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=sr.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(sr.fromNumber(r)));return i.compare(V6)===1&&(i=new sr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=NN(e),[r,i]=RN(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=NN(e),[r,i]=RN(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},uo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Xc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(q.min(),i,new Ae(W),Vt(),te())}},eu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,te(),te(),te())}};var Ds=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},tf=class{constructor(e,t){this.targetId=e,this.Ce=t}},nf=class{constructor(e,t,r=He.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},rf=class{constructor(){this.Fe=0,this.Me=PN(),this.xe=He.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=te(),t=te(),r=te();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:o})}}),new eu(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=PN()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,H(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},oI=class{constructor(e){this.ze=e,this.je=new Map,this.He=Vt(),this.Je=Th(),this.Ye=Th(),this.Ze=new Ae(W)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(Yh(o))if(r===0){let s=new U(o.path);this.tt(t,s,Ze.newNoDocument(s,q.min()))}else H(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),c=a?this.lt(a,e,s):1;if(c!==0){this.st(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,l)}ef?.ht(function(d,f,g,m,I){var S,P,O,j,B,Q;let he={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Z=f.unchangedNames;return Z&&(he.bloomFilter={applied:I===0,hashCount:(S=Z?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(j=(O=(P=Z?.bits)===null||P===void 0?void 0:P.bitmap)===null||O===void 0?void 0:O.length)!==null&&j!==void 0?j:0,padding:(Q=(B=Z?.bits)===null||B===void 0?void 0:B.padding)!==null&&Q!==void 0?Q:0,mightContain:T=>{var _;return(_=m?.mightContain(T))!==null&&_!==void 0&&_}}),he}(s,e.Ce,this.ze.Pt(),a,c))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=hr(r).toUint8Array()}catch(c){if(c instanceof Gh)return Jt("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new iI(s,i,o)}catch(c){return Jt(c instanceof uo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&Yh(a.target)){let c=new U(a.target.path);this.Et(c).has(s)||this.dt(s,c)||this.tt(s,c,Ze.newNoDocument(c,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=te();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this._t(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Xc(e,t,this.Ze,this.He,r);return this.He=Vt(),this.Je=Th(),this.Ye=Th(),this.Ze=new Ae(W),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new rf,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Te(W),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Te(W),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new rf),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function Th(){return new Ae(U.comparator)}function PN(){return new Ae(U.comparator)}var j6={asc:"ASCENDING",desc:"DESCENDING"},B6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U6={and:"AND",or:"OR"},sI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function aI(n,e){return n.useProto3Json||mu(e)?e:{value:e}}function js(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $6(n,e){return js(n,e.toTimestamp())}function Ue(n){return H(!!n,49232),q.fromTimestamp(function(t){let r=dr(t);return new Be(r.seconds,r.nanos)}(n))}function ZE(n,e){return cI(n,e).canonicalString()}function cI(n,e){let t=function(i){return new ge(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function vP(n){let e=ge.fromString(n);return H(AP(e),10190,{key:e.toString()}),e}function tu(n,e){return ZE(n.databaseId,e.path)}function On(n,e){let t=vP(e);if(t.get(1)!==n.databaseId.projectId)throw new x(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new U(EP(t))}function _P(n,e){return ZE(n.databaseId,e)}function IP(n){let e=vP(n);return e.length===4?ge.emptyPath():EP(e)}function uI(n){return new ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EP(n){return H(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function MN(n,e,t){return{name:tu(n,e),fields:t.value.mapValue.fields}}function wP(n,e,t){let r=On(n,e.name),i=Ue(e.updateTime),o=e.createTime?Ue(e.createTime):q.min(),s=new ft({mapValue:{fields:e.fields}}),a=Ze.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function H6(n,e){return"found"in e?function(r,i){H(!!i.found,43571),i.found.name,i.found.updateTime;let o=On(r,i.found.name),s=Ue(i.found.updateTime),a=i.found.createTime?Ue(i.found.createTime):q.min(),c=new ft({mapValue:{fields:i.found.fields}});return Ze.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){H(!!i.missing,3894),H(!!i.readTime,22933);let o=On(r,i.missing),s=Ue(i.readTime);return Ze.newNoDocument(o,s)}(n,e):$(7234,{result:e})}function q6(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(H(d===void 0||typeof d=="string",58123),He.fromBase64String(d||"")):(H(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),He.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?R.UNKNOWN:mP(l.code);return new x(d,l.message||"")}(s);t=new nf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=On(n,r.document.name),o=Ue(r.document.updateTime),s=r.document.createTime?Ue(r.document.createTime):q.min(),a=new ft({mapValue:{fields:r.document.fields}}),c=Ze.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Ds(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=On(n,r.document),o=r.readTime?Ue(r.readTime):q.min(),s=Ze.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ds([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=On(n,r.document),o=r.removedTargetIds||[];t=new Ds([],o,i,null)}else{if(!("filter"in e))return $(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new rI(i,o),a=r.targetId;t=new tf(a,s)}}return t}function nu(n,e){let t;if(e instanceof ni)t={update:MN(n,e.key,e.value)};else if(e instanceof ri)t={delete:tu(n,e.key)};else if(e instanceof pn)t={update:MN(n,e.key,e.data),updateMask:Y6(e.fieldMask)};else{if(!(e instanceof Yc))return $(16599,{ft:e.type});t={verify:tu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ei)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ti)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw $(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:$6(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$(27497)}(n,e.precondition)),t}function lI(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Fe.updateTime(Ue(o.updateTime)):o.exists!==void 0?Fe.exists(o.exists):Fe.none()}(e.currentDocument):Fe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)H(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new ei;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new fr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new pr(d)}else"increment"in a?c=new ti(s,a.increment):$(16584,{proto:a});let l=Ye.fromServerFormat(a.fieldPath);return new mo(l,c)}(n,i)):[];if(e.update){e.update.name;let i=On(n,e.update.name),o=new ft({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Wt(l.map(d=>Ye.fromServerFormat(d)))}(e.updateMask);return new pn(i,o,s,t,r)}return new ni(i,o,t,r)}if(e.delete){let i=On(n,e.delete);return new ri(i,t)}if(e.verify){let i=On(n,e.verify);return new Yc(i,t)}return $(1463,{proto:e})}function z6(n,e){return n&&n.length>0?(H(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Ue(i.updateTime):Ue(o);return s.isEqual(q.min())&&(s=Ue(o)),new tI(s,i.transformResults||[])}(t,e))):[]}function TP(n,e){return{documents:[_P(n,e.path)]}}function Gf(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_P(n,i);let o=function(l){if(l.length!==0)return SP(_e.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:qr(g.field),direction:G6(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=aI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:t,parent:i}}function DP(n,e,t,r){let{gt:i,parent:o}=Gf(n,e),s={},a=[],c=0;return t.forEach(l=>{let d=r?l.alias:"aggregate_"+c++;s[d]=l.alias,l.aggregateType==="count"?a.push({alias:d,count:{}}):l.aggregateType==="avg"?a.push({alias:d,avg:{field:qr(l.fieldPath)}}):l.aggregateType==="sum"&&a.push({alias:d,sum:{field:qr(l.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},yt:s,parent:o}}function bP(n){let e=IP(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){H(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=CP(f);return g instanceof _e&&GE(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(I){return new po(Is(I.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,mu(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new Vn(m,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,m=f.values||[];return new Vn(m,g)}(t.endAt)),JR(e,i,s,o,a,"F",c,l)}function W6(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Is(t.unaryFilter.field);return de.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Is(t.unaryFilter.field);return de.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Is(t.unaryFilter.field);return de.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Is(t.unaryFilter.field);return de.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}}(n):n.fieldFilter!==void 0?function(t){return de.create(Is(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return _e.create(t.compositeFilter.filters.map(r=>CP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}}(t.compositeFilter.op))}(n):$(30097,{filter:n})}function G6(n){return j6[n]}function K6(n){return B6[n]}function Q6(n){return U6[n]}function qr(n){return{fieldPath:n.canonicalString()}}function Is(n){return Ye.fromServerFormat(n.fieldPath)}function SP(n){return n instanceof de?function(t){if(t.op==="=="){if(yN(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NAN"}};if(mN(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yN(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NOT_NAN"}};if(mN(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qr(t.field),op:K6(t.op),value:t.value}}}(n):n instanceof _e?function(t){let r=t.getFilters().map(i=>SP(i));return r.length===1?r[0]:{compositeFilter:{op:Q6(t.op),filters:r}}}(n):$(54877,{filter:n})}function Y6(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function AP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Bs=class n{constructor(e,t,r,i,o=q.min(),s=q.min(),a=He.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var of=class{constructor(e){this.wt=e}};function Z6(n,e){let t;if(e.document)t=wP(n.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=U.fromSegments(e.noDocument.path),i=vo(e.noDocument.readTime);t=Ze.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $(56709);{let r=U.fromSegments(e.unknownDocument.path),i=vo(e.unknownDocument.version);t=Ze.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Be(i[0],i[1]);return q.fromTimestamp(o)}(e.readTime)),t}function xN(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:tu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:js(o,s.version.toTimestamp()),createTime:js(o,s.createTime.toTimestamp())}}(n.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:yo(e.version)};else{if(!e.isUnknownDocument())return $(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:yo(e.version)}}return r}function sf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function yo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vo(n){let e=new Be(n.seconds,n.nanoseconds);return q.fromTimestamp(e)}function oo(n,e){let t=(e.baseMutations||[]).map(o=>lI(n.wt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>lI(n.wt,o)),i=Be.fromMillis(e.localWriteTimeMs);return new Zc(e.batchId,i,t,r)}function xc(n){let e=vo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?vo(n.lastLimboFreeSnapshotVersion):q.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){let s=o.documents.length;return H(s===1,1966,{count:s}),gt(Xs(IP(o.documents[0])))}(n.query):function(o){return gt(bP(o))}(n.query),new Bs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,He.fromBase64String(n.resumeToken))}function NP(n,e){let t=yo(e.snapshotVersion),r=yo(e.lastLimboFreeSnapshotVersion),i;i=Yh(e.target)?TP(n.wt,e.target):Gf(n.wt,e.target).gt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:go(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function JE(n){let e=bP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jh(e,e.limit,"L"):e}function v_(n,e){return new Jc(e.largestBatchId,lI(n.wt,e.overlayMutation))}function kN(n,e){let t=e.path.lastSegment();return[n,pt(e.path.popLast()),t]}function ON(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:yo(r.readTime),documentKey:pt(r.documentKey.path),largestBatchId:r.largestBatchId}}var dI=class{getBundleMetadata(e,t){return FN(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:vo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return FN(e).put(function(i){return{bundleId:i.id,createTime:yo(Ue(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return LN(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:JE(o.bundledQuery),readTime:vo(o.readTime)}}(r)})}saveNamedQuery(e,t){return LN(e).put(function(i){return{name:i.name,readTime:yo(Ue(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function FN(n){return Xe(n,Uf)}function LN(n){return Xe(n,$f)}var af=class n{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Ac(e).get(kN(this.userId,t)).next(r=>r?v_(this.serializer,r):null)}getOverlays(e,t){let r=xn();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Jc(t,s);i.push(this.St(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(pt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ac(e).X(B_,a))}),N.waitFor(o)}getOverlaysForCollection(e,t,r){let i=xn(),o=pt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ac(e).J(B_,s).next(a=>{for(let c of a){let l=v_(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=xn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ac(e).te({index:xR,range:a},(c,l,d)=>{let f=v_(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}St(e,t){return Ac(e).put(function(i,o,s){let[a,c,l]=kN(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:nu(i.wt,s.mutation)}}(this.serializer,this.userId,t))}};function Ac(n){return Xe(n,Hf)}var hI=class{Dt(e){return Xe(e,HE)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{let r=t?.value;return r?He.fromUint8Array(r):He.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var cr=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Uc(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=dr(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(hr(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?qR(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Wf(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):$(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=ks,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(Ne(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),U.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};cr.Wt=new cr;var ps=255;function J6(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function VN(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=J6(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var fI=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{let i=t.codePointAt(0);this.zt(240|i>>>18),this.zt(128|63&i>>>12),this.zt(128|63&i>>>6),this.zt(128|63&i)}}this.jt()}Xt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{let i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Yt()}en(e){let t=this.tn(e),r=VN(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}rn(e){let t=this.tn(e),r=VN(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}sn(){this._n(ps),this._n(255)}an(){this.un(ps),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}zt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===ps?(this._n(ps),this._n(0)):this._n(t)}Jt(e){let t=255&e;t===0?(this.un(0),this.un(255)):t===ps?(this.un(ps),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},pI=class{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}},gI=class{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}},so=class{constructor(){this.ln=new fI,this.hn=new pI(this.ln),this.Pn=new gI(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}};var ao=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}In(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Ur(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=jN(n.arrayValue,e.arrayValue),t!==0?t:(t=jN(n.directionalValue,e.directionalValue),t!==0?t:U.comparator(n.documentKey,e.documentKey)))}function jN(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var cf=class{constructor(e){this.En=new Te((t,r)=>Ye.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.An=[];for(let t of e.filters){let r=t;r.isInequality()?this.En=this.En.add(r):this.An.push(r)}}get Rn(){return this.En.size>1}Vn(e){if(H(e.collectionGroup===this.collectionId,49279),this.Rn)return!1;let t=x_(e);if(t!==void 0&&!this.mn(t))return!1;let r=no(e),i=new Set,o=0,s=0;for(;o<r.length&&this.mn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.En.size>0){let a=this.En.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.fn(a,c)||!this.gn(this.dn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.dn.length||!this.gn(this.dn[s++],a))return!1}return!0}pn(){if(this.Rn)return null;let e=new Te(Ye.comparator),t=[];for(let r of this.An)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new lr(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new lr(r.field,0))}for(let r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new lr(r.field,r.dir==="asc"?0:1)));return new Yr(Yr.UNKNOWN_ID,this.collectionId,t,As.empty())}mn(e){for(let t of this.An)if(this.fn(t,e))return!0;return!1}fn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}gn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function RP(n){var e,t;if(H(n instanceof de||n instanceof _e,20012),n instanceof de){if(n instanceof Qh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>de.create(n.field,"==",o)))||[];return _e.create(i,"or")}return n}let r=n.filters.map(i=>RP(i));return _e.create(r,n.op)}function X6(n){if(n.getFilters().length===0)return[];let e=vI(RP(n));return H(PP(e),7391),mI(e)||yI(e)?[e]:e.getFilters()}function mI(n){return n instanceof de}function yI(n){return n instanceof _e&&GE(n)}function PP(n){return mI(n)||yI(n)||function(t){if(t instanceof _e&&q_(t)){for(let r of t.getFilters())if(!mI(r)&&!yI(r))return!1;return!0}return!1}(n)}function vI(n){if(H(n instanceof de||n instanceof _e,34018),n instanceof de)return n;if(n.filters.length===1)return vI(n.filters[0]);let e=n.filters.map(r=>vI(r)),t=_e.create(e,n.op);return t=uf(t),PP(t)?t:(H(t instanceof _e,64498),H(Fs(t),40251),H(t.filters.length>1,57927),t.filters.reduce((r,i)=>XE(r,i)))}function XE(n,e){let t;return H(n instanceof de||n instanceof _e,38388),H(e instanceof de||e instanceof _e,25473),t=n instanceof de?e instanceof de?function(i,o){return _e.create([i,o],"and")}(n,e):BN(n,e):e instanceof de?BN(e,n):function(i,o){if(H(i.filters.length>0&&o.filters.length>0,48005),Fs(i)&&Fs(o))return QR(i,o.getFilters());let s=q_(i)?i:o,a=q_(i)?o:i,c=s.filters.map(l=>XE(l,a));return _e.create(c,"or")}(n,e),uf(t)}function BN(n,e){if(Fs(e))return QR(e,n.getFilters());{let t=e.filters.map(r=>XE(n,r));return _e.create(t,"or")}}function uf(n){if(H(n instanceof de||n instanceof _e,11850),n instanceof de)return n;let e=n.getFilters();if(e.length===1)return uf(e[0]);if(GR(n))return n;let t=e.map(i=>uf(i)),r=[];return t.forEach(i=>{i instanceof de?r.push(i):i instanceof _e&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_e.create(r,n.op)}var _I=class{constructor(){this.yn=new ru}addToCollectionParentIndex(e,t){return this.yn.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(Xt.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(Xt.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},ru=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Te(ge.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Te(ge.comparator)).toArray()}};var UN="IndexedDbIndexManager",Dh=new Uint8Array(0),II=class{constructor(e,t){this.databaseId=t,this.wn=new ru,this.bn=new fn(r=>go(r),(r,i)=>vu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.wn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.wn.add(t)});let o={collectionId:r,parent:pt(i)};return $N(e).put(o)}return N.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[wR(t),""],!1,!0);return $N(e).J(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Mn(s.parent))}return r})}addFieldIndex(e,t){let r=Nc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=ms(e);return o.next(a=>{s.put(ON(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Nc(e),i=ms(e),o=gs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Nc(e),r=gs(e),i=ms(e);return t.X().next(()=>r.X()).next(()=>i.X())}createTargetIndexes(e,t){return N.forEach(this.Sn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new cf(r).pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=gs(e),i=!0,o=new Map;return N.forEach(this.Sn(t),s=>this.Dn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=te(),a=[];return N.forEach(o,(c,l)=>{k(UN,`Using index ${function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(c)} to execute ${go(t)}`);let d=function(B,Q){let he=x_(Q);if(he===void 0)return null;for(let Z of Zh(B,he.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,c),f=function(B,Q){let he=new Map;for(let Z of no(Q))for(let T of Zh(B,Z.fieldPath))switch(T.op){case"==":case"in":he.set(Z.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return he.set(Z.fieldPath.canonicalString(),T.value),Array.from(he.values())}return null}(l,c),g=function(B,Q){let he=[],Z=!0;for(let T of no(Q)){let _=T.kind===0?wN(B,T.fieldPath,B.startAt):TN(B,T.fieldPath,B.startAt);he.push(_.value),Z&&(Z=_.inclusive)}return new Vn(he,Z)}(l,c),m=function(B,Q){let he=[],Z=!0;for(let T of no(Q)){let _=T.kind===0?TN(B,T.fieldPath,B.endAt):wN(B,T.fieldPath,B.endAt);he.push(_.value),Z&&(Z=_.inclusive)}return new Vn(he,Z)}(l,c),I=this.vn(c,l,g),S=this.vn(c,l,m),P=this.Cn(c,l,f),O=this.Fn(c.indexId,d,I,g.inclusive,S,m.inclusive,P);return N.forEach(O,j=>r.Z(j,t.limit).next(B=>{B.forEach(Q=>{let he=U.fromSegments(Q.documentKey);s.has(he)||(s=s.add(he),a.push(he))})}))}).next(()=>a)}return N.resolve(null)})}Sn(e){let t=this.bn.get(e);return t||(e.filters.length===0?t=[e]:t=X6(_e.create(e.filters,"and")).map(r=>X_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.bn.set(e,t),t)}Fn(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let g=t?this.Mn(t[f/l]):Dh,m=this.xn(e,g,r[f%l],i),I=this.On(e,g,o[f%l],s),S=a.map(P=>this.xn(e,g,P,!0));d.push(...this.createRange(m,I,S))}return d}xn(e,t,r,i){let o=new ao(e,U.empty(),t,r);return i?o:o.In()}On(e,t,r,i){let o=new ao(e,U.empty(),t,r);return i?o.In():o}Dn(e,t){let r=new cf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.Vn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Sn(t);return N.forEach(i,o=>this.Dn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Te(Ye.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Nn(e,t){let r=new so;for(let i of no(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Tn(i.kind);cr.Wt.vt(o,s)}return r.cn()}Mn(e){let t=new so;return cr.Wt.vt(e,t.Tn(0)),t.cn()}Bn(e,t){let r=new so;return cr.Wt.vt(fo(this.databaseId,t),r.Tn(function(o){let s=no(o);return s.length===0?0:s[s.length-1].kind}(e))),r.cn()}Cn(e,t,r){if(r===null)return[];let i=[];i.push(new so);let o=0;for(let s of no(e)){let a=r[o++];for(let c of i)if(this.Ln(t,s.fieldPath)&&Qc(a))i=this.kn(i,s,a);else{let l=c.Tn(s.kind);cr.Wt.vt(a,l)}}return this.qn(i)}vn(e,t,r){return this.Cn(e,t,r.position)}qn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}kn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new so;c.seed(a.cn()),cr.Wt.vt(s,c.Tn(t.kind)),o.push(c)}return o}Ln(e,t){return!!e.filters.find(r=>r instanceof de&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Nc(e),i=ms(e);return(t?r.J(j_,IDBKeyRange.bound(t,t)):r.J()).next(o=>{let s=[];return N.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let g=f?new As(f.sequenceNumber,new Xt(vo(f.readTime),new U(Mn(f.documentKey)),f.largestBatchId)):As.empty(),m=d.fields.map(([I,S])=>new lr(Ye.fromServerFormat(I),S));return new Yr(d.indexId,d.collectionGroup,m,g)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:W(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Nc(e),o=ms(e);return this.Qn(e).next(s=>i.J(j_,IDBKeyRange.bound(t,t)).next(a=>N.forEach(a,c=>o.put(ON(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return N.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?N.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,c=>this.$n(e,i,c).next(l=>{let d=this.Un(o,c);return l.isEqual(d)?N.resolve():this.Kn(e,o,c,l,d)}))))})}Wn(e,t,r,i){return gs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Bn(r,t.key),documentKey:t.key.path.toArray()})}Gn(e,t,r,i){return gs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Bn(r,t.key),t.key.path.toArray()])}$n(e,t,r){let i=gs(e),o=new Te(Ur);return i.te({index:MR,range:IDBKeyRange.only([r.indexId,this.uid,this.Bn(r,t)])},(s,a)=>{o=o.add(new ao(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Un(e,t){let r=new Te(Ur),i=this.Nn(t,e);if(i==null)return r;let o=x_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Qc(s))for(let a of s.arrayValue.values||[])r=r.add(new ao(t.indexId,e.key,this.Mn(a),i))}else r=r.add(new ao(t.indexId,e.key,Dh,i));return r}Kn(e,t,r,i,o){k(UN,"Updating index entries for document '%s'",t.key);let s=[];return function(c,l,d,f,g){let m=c.getIterator(),I=l.getIterator(),S=fs(m),P=fs(I);for(;S||P;){let O=!1,j=!1;if(S&&P){let B=d(S,P);B<0?j=!0:B>0&&(O=!0)}else S!=null?j=!0:O=!0;O?(f(P),P=fs(I)):j?(g(S),S=fs(m)):(S=fs(m),P=fs(I))}}(i,o,Ur,a=>{s.push(this.Wn(e,t,r,a))},a=>{s.push(this.Gn(e,t,r,a))}),N.waitFor(s)}Qn(e){let t=1;return ms(e).te({index:PR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Ur(s,a)).filter((s,a,c)=>!a||Ur(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ur(s,e),c=Ur(s,t);if(a===0)i[0]=e.In();else if(a>0&&c<0)i.push(s),i.push(s.In());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.zn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Dh,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Dh,[]];o.push(IDBKeyRange.bound(a,c))}return o}zn(e,t){return Ur(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(HN)}getMinOffset(e,t){return N.mapArray(this.Sn(t),r=>this.Dn(e,r).next(i=>i||$(44426))).next(HN)}};function $N(n){return Xe(n,qc)}function gs(n){return Xe(n,zh)}function Nc(n){return Xe(n,$E)}function ms(n){return Xe(n,qh)}function HN(n){H(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;jE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Xt(e.readTime,e.documentKey,t)}var qN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MP=41943040,Lt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function xP(n,e,t){let r=n.store(dn),i=n.store(Ns),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.te({range:s},(d,f,g)=>(a++,g.delete()));o.push(c.next(()=>{H(a===1,47070,{batchId:t.batchId})}));let l=[];for(let d of t.mutations){let f=AR(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return N.waitFor(o).next(()=>l)}function lf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $(14731);e=n.noDocument}return JSON.stringify(e).length}Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(MP,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var df=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.jn={}}static bt(e,t,r,i){H(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).te({index:co,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Es(e),s=$r(e);return s.add({}).next(a=>{H(typeof a=="number",49019);let c=new Zc(a,t,r,i),l=function(m,I,S){let P=S.baseMutations.map(j=>nu(m.wt,j)),O=S.mutations.map(j=>nu(m.wt,j));return{userId:I,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:P,mutations:O}}(this.serializer,this.userId,c),d=[],f=new Te((g,m)=>W(g.canonicalString(),m.canonicalString()));for(let g of i){let m=AR(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(m,e6))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.jn[a]=c.keys()}),N.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return $r(e).get(t).next(r=>r?(H(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),oo(this.serializer,r)):null)}Hn(e,t){return this.jn[t]?N.resolve(this.jn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.jn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return $r(e).te({index:co,range:i},(s,a,c)=>{a.userId===this.userId&&(H(a.batchId>=r,47524,{Jn:r}),o=oo(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Kr;return $r(e).te({index:co,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Kr],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).J(co,t).next(r=>r.map(i=>oo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Nh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Es(e).te({range:i},(s,a,c)=>{let[l,d,f]=s,g=Mn(d);if(l===this.userId&&t.path.isEqual(g))return $r(e).get(f).next(m=>{if(!m)throw $(61480,{Yn:s,batchId:f});H(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:f}),o.push(oo(this.serializer,m))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Te(W),i=[];return t.forEach(o=>{let s=Nh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Es(e).te({range:a},(l,d,f)=>{let[g,m,I]=l,S=Mn(m);g===this.userId&&o.path.isEqual(S)?r=r.add(I):f.done()});i.push(c)}),N.waitFor(i).next(()=>this.Zn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Nh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Te(W);return Es(e).te({range:s},(c,l,d)=>{let[f,g,m]=c,I=Mn(g);f===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(m)):d.done()}).next(()=>this.Zn(e,a))}Zn(e,t){let r=[],i=[];return t.forEach(o=>{i.push($r(e).get(o).next(s=>{if(s===null)throw $(35274,{batchId:o});H(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(oo(this.serializer,s))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return xP(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Xn(t.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Xn(e){delete this.jn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return N.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Es(e).te({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Mn(o[1]);i.push(c)}else a.done()}).next(()=>{H(i.length===0,56720,{er:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return kP(e,this.userId,t)}tr(e){return OP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Kr,lastStreamToken:""})}};function kP(n,e,t){let r=Nh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Es(n).te({range:o,ee:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function $r(n){return Xe(n,dn)}function Es(n){return Xe(n,Ns)}function OP(n){return Xe(n,$c)}var Us=class n{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new n(0)}static ir(){return new n(-1)}};var EI=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.sr(e).next(t=>{let r=new Us(t.highestTargetId);return t.highestTargetId=r.next(),this._r(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.sr(e).next(t=>q.fromTimestamp(new Be(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.sr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.sr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this._r(e,i)))}addTargetData(e,t){return this.ar(e,t).next(()=>this.sr(e).next(r=>(r.targetCount+=1,this.ur(t,r),this._r(e,r))))}updateTargetData(e,t){return this.ar(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ys(e).delete(t.targetId)).next(()=>this.sr(e)).next(r=>(H(r.targetCount>0,8065),r.targetCount-=1,this._r(e,r)))}removeTargets(e,t,r){let i=0,o=[];return ys(e).te((s,a)=>{let c=xc(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>N.waitFor(o)).next(()=>i)}forEachTarget(e,t){return ys(e).te((r,i)=>{let o=xc(i);t(o)})}sr(e){return zN(e).get(Hh).next(t=>(H(t!==null,2888),t))}_r(e,t){return zN(e).put(Hh,t)}ar(e,t){return ys(e).put(NP(this.serializer,t))}ur(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.sr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=go(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ys(e).te({range:i,index:RR},(s,a,c)=>{let l=xc(a);vu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=zr(e);return t.forEach(s=>{let a=pt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),N.waitFor(i)}removeMatchingKeys(e,t,r){let i=zr(e);return N.forEach(t,o=>{let s=pt(o.path);return N.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=zr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=zr(e),o=te();return i.te({range:r,ee:!0},(s,a,c)=>{let l=Mn(s[1]),d=new U(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=pt(t.path),i=IDBKeyRange.bound([r],[wR(r)],!1,!0),o=0;return zr(e).te({index:UE,ee:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Rt(e,t){return ys(e).get(t).next(r=>r?xc(r):null)}};function ys(n){return Xe(n,Rs)}function zN(n){return Xe(n,ho)}function zr(n){return Xe(n,Ps)}var WN="LruGarbageCollector",FP=1048576;function GN([n,e],[t,r]){let i=W(n,t);return i===0?W(e,r):i}var wI=class{constructor(e){this.cr=e,this.buffer=new Te(GN),this.lr=0}hr(){return++this.lr}Pr(e){let t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();GN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},hf=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){k(WN,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Tr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ui(t)?k(WN,"Ignoring IndexedDB error during garbage collection: ",t):yield ci(t)}yield this.Ir(3e5)}))}},TI=class{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return N.resolve(zt.le);let r=new wI(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(qN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qN):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),vs()<=ce.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function LP(n,e){return new TI(n,e)}var DI=class{constructor(e,t){this.db=e,this.garbageCollector=LP(this,t)}dr(e){let t=this.Vr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ar(e,t){return this.mr(e,(r,i)=>t(i))}addReference(e,t,r){return bh(e,r)}removeReference(e,t,r){return bh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return bh(e,t)}gr(e,t){return function(i,o){let s=!1;return OP(i).ne(a=>kP(i,a,o).next(c=>(c&&(s=!0),N.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.mr(e,(s,a)=>{if(a<=t){let c=this.gr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,q.min()),zr(e).delete(function(f){return[0,pt(f.path)]}(s))))});i.push(c)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return bh(e,t)}mr(e,t){let r=zr(e),i,o=zt.le;return r.te({index:UE},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==zt.le&&t(new U(Mn(i)),o),o=l,i=c):o=zt.le}).next(()=>{o!==zt.le&&t(new U(Mn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function bh(n,e){return zr(n).put(function(r,i){return{targetId:0,path:pt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var ff=class{constructor(){this.changes=new fn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ze.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var bI=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return to(e).put(r)}removeEntry(e,t,r){return to(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],sf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.pr(e,r)))}getEntry(e,t){let r=Ze.newInvalidDocument(t);return to(e).te({index:Rh,range:IDBKeyRange.only(Rc(t))},(i,o)=>{r=this.yr(t,o)}).next(()=>r)}wr(e,t){let r={size:0,document:Ze.newInvalidDocument(t)};return to(e).te({index:Rh,range:IDBKeyRange.only(Rc(t))},(i,o)=>{r={document:this.yr(t,o),size:lf(o)}}).next(()=>r)}getEntries(e,t){let r=Vt();return this.br(e,t,(i,o)=>{let s=this.yr(i,o);r=r.insert(i,s)}).next(()=>r)}Sr(e,t){let r=Vt(),i=new Ae(U.comparator);return this.br(e,t,(o,s)=>{let a=this.yr(o,s);r=r.insert(o,a),i=i.insert(o,lf(s))}).next(()=>({documents:r,Dr:i}))}br(e,t,r){if(t.isEmpty())return N.resolve();let i=new Te(YN);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Rc(i.first()),Rc(i.last())),s=i.getIterator(),a=s.getNext();return to(e).te({index:Rh,range:o},(c,l,d)=>{let f=U.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&YN(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.H(Rc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),sf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return to(e).J(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Vt();for(let f of l){let g=this.yr(U.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Iu(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=Vt(),s=QN(t,r),a=QN(t,Xt.max());return to(e).te({index:NR,range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let f=this.yr(U.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new CI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return KN(e).get(V_).next(t=>(H(!!t,20021),t))}pr(e,t){return KN(e).put(V_,t)}yr(e,t){if(t){let r=Z6(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(q.min())))return r}return Ze.newInvalidDocument(e)}};function VP(n){return new bI(n)}var CI=class extends ff{constructor(e,t){super(),this.vr=e,this.trackRemovals=t,this.Cr=new fn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Te((o,s)=>W(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Cr.get(o);if(t.push(this.vr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=xN(this.vr.serializer,s);i=i.add(o.path.popLast());let l=lf(c);r+=l-a.size,t.push(this.vr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=xN(this.vr.serializer,s.convertToNoDocument(q.min()));t.push(this.vr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.vr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.vr.updateMetadata(e,r)),N.waitFor(t)}getFromCache(e,t){return this.vr.wr(e,t).next(r=>(this.Cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.vr.Sr(e,t).next(({documents:r,Dr:i})=>(i.forEach((o,s)=>{this.Cr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function KN(n){return Xe(n,Hc)}function to(n){return Xe(n,$h)}function Rc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QN(n,e){let t=e.documentKey.path.toArray();return[n,sf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function YN(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=W(t[o],r[o]),i)return i;return i=W(t.length,r.length),i||(i=W(t[t.length-2],r[r.length-2]),i||W(t[t.length-1],r[r.length-1]))}var SI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var pf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Lc(r.mutation,i,Wt.empty(),Be.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,t,r=te()){let i=xn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Mc();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=xn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,te()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Vt(),s=Fc(),a=function(){return Fc()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof pn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Lc(d.mutation,l,d.mutation.getFieldMask(),Be.now())):s.set(l.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new SI(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Fc(),i=new Ae((s,a)=>s-a),o=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Wt.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||te()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=sP();d.forEach(g=>{if(!o.has(g)){let m=fP(t.get(g),r.get(g));m!==null&&f.set(g,m),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return U.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):KE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):N.resolve(xn()),a=Ss,c=o;return s.next(l=>N.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?N.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,te())).next(d=>({batchId:a,changes:oP(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new U(t)).next(r=>{let i=Mc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Mc();return this.indexManager.getCollectionParents(e,o).next(a=>N.forEach(a,c=>{let l=function(f,g){return new hn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,Ze.newInvalidDocument(d)))});let a=Mc();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&Lc(d.mutation,l,Wt.empty(),Be.now()),Iu(t,l)&&(a=a.insert(c,l))}),a})}};var AI=class{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return N.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ue(i.createTime)}}(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:JE(i.bundledQuery),readTime:Ue(i.readTime)}}(t)),N.resolve()}};var NI=class{constructor(){this.overlays=new Ae(U.comparator),this.Or=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let r=xn();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),N.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Or.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){let i=xn(),o=t.length+1,s=new U(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ae((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=xn(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=xn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return N.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Jc(t,r));let o=this.Or.get(t);o===void 0&&(o=te(),this.Or.set(t,o)),this.Or.set(t,o.add(r.key))}};var RI=class{constructor(){this.sessionToken=He.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var iu=class{constructor(){this.Nr=new Te(Ge.Br),this.Lr=new Te(Ge.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){let r=new Ge(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Ge(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){let t=new U(new ge([])),r=new Ge(t,e),i=new Ge(t,e+1),o=[];return this.Lr.forEachInRange([r,i],s=>{this.Qr(s),o.push(s.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){let t=new U(new ge([])),r=new Ge(t,e),i=new Ge(t,e+1),o=te();return this.Lr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ge(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ge=class{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return U.comparator(e.key,t.key)||W(e.Gr,t.Gr)}static kr(e,t){return W(e.Gr,t.Gr)||U.comparator(e.key,t.key)}};var PI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Te(Ge.Br)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Zc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.zr=this.zr.add(new Ge(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,t){return N.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Hr(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?Kr:this.Jn-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ge(t,0),i=new Ge(t,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([r,i],s=>{let a=this.jr(s.Gr);o.push(a)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Te(W);return t.forEach(i=>{let o=new Ge(i,0),s=new Ge(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,s],a=>{r=r.add(a.Gr)})}),N.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;U.isDocumentKey(o)||(o=o.child(""));let s=new Ge(new U(o),0),a=new Te(W);return this.zr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Gr)),!0)},s),N.resolve(this.Jr(a))}Jr(e){let t=[];return e.forEach(r=>{let i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){H(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return N.forEach(t.mutations,i=>{let o=new Ge(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){let r=new Ge(t,0),i=this.zr.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){let t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var MI=class{constructor(e){this.Zr=e,this.docs=function(){return new Ae(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():Ze.newInvalidDocument(t))}getEntries(e,t){let r=Vt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ze.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vt(),s=t.path,a=new U(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||jE(DR(d),r)<=0||(i.has(d.key)||Iu(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,t,r,i){$(9500)}Xr(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xI(this)}getSize(e){return N.resolve(this.size)}},xI=class extends ff{constructor(e){super(),this.vr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}};var kI=class{constructor(e){this.persistence=e,this.ei=new fn(t=>go(t),vu),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.ti=0,this.ni=new iu,this.targetCount=0,this.ri=Us.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),N.resolve()}ar(e){this.ei.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ri=new Us(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.ar(t),N.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ei.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let r=this.ei.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),N.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ni.Wr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this.ni.containsKey(t))}};var ou=class{constructor(e,t){this.ii={},this.overlays={},this.si=new zt(0),this.oi=!1,this.oi=!0,this._i=new RI,this.referenceDelegate=e(this),this.ai=new kI(this),this.indexManager=new _I,this.remoteDocumentCache=function(i){return new MI(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new of(t),this.ci=new AI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new PI(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new OI(this.si.next());return this.referenceDelegate.li(),r(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,t){return N.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}},OI=class extends jh{constructor(e){super(),this.currentSequenceNumber=e}},gf=class n{constructor(e){this.persistence=e,this.Ti=new iu,this.Ii=null}static Ei(e){return new n(e)}get di(){if(this.Ii)return this.Ii;throw $(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),N.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.di,r=>{let i=U.fromPath(r);return this.Ai(e,i).next(o=>{o||t.removeEntry(i,q.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return N.or([()=>N.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}},mf=class n{constructor(e,t){this.persistence=e,this.Ri=new fn(r=>pt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=LP(this,t)}static Ei(e,t){return new n(e,t)}li(){}hi(e){return N.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return N.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(o=>o?N.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,s=>this.gr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,q.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),N.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),N.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Mh(e.data.value)),t}gr(e,t,r){return N.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.Ri.get(t);return N.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var FI=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new Bh("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore(yu)}(e),function(c){c.createObjectStore($c,{keyPath:X4}),c.createObjectStore(dn,{keyPath:dN,autoIncrement:!0}).createIndex(co,hN,{unique:!0}),c.createObjectStore(Ns)}(e),ZN(e),function(c){c.createObjectStore(ro)}(e));let s=N.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore(Ps),c.deleteObjectStore(Rs),c.deleteObjectStore(ho)}(e),ZN(e)),s=s.next(()=>function(c){let l=c.store(ho),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:q.min().toTimestamp(),targetCount:0};return l.put(Hh,d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store(dn).J().next(f=>{c.deleteObjectStore(dn),c.createObjectStore(dn,{keyPath:dN,autoIncrement:!0}).createIndex(co,hN,{unique:!0});let g=l.store(dn),m=f.map(I=>g.put(I));return N.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(Ms,{keyPath:c6})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Vi(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore(Hc)}(e),this.mi(o)))),r<7&&i>=7&&(s=s.next(()=>this.fi(o))),r<8&&i>=8&&(s=s.next(()=>this.gi(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.pi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(Uf,{keyPath:u6})})(e),function(c){c.createObjectStore($f,{keyPath:l6})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore(Hf,{keyPath:y6});l.createIndex(B_,v6,{unique:!1}),l.createIndex(xR,_6,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore($h,{keyPath:t6});l.createIndex(Rh,n6),l.createIndex(NR,r6)}(e)).next(()=>this.yi(e,o)).next(()=>e.deleteObjectStore(ro))),r<14&&i>=14&&(s=s.next(()=>this.wi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore($E,{keyPath:d6,autoIncrement:!0}).createIndex(j_,h6,{unique:!1}),c.createObjectStore(qh,{keyPath:f6}).createIndex(PR,p6,{unique:!1}),c.createObjectStore(zh,{keyPath:g6}).createIndex(MR,m6,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(qh).clear()}).next(()=>{t.objectStore(zh).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(HE,{keyPath:I6})})(e)})),s}mi(e){let t=0;return e.store(ro).te((r,i)=>{t+=lf(i)}).next(()=>{let r={byteSize:t};return e.store(Hc).put(V_,r)})}Vi(e){let t=e.store($c),r=e.store(dn);return t.J().next(i=>N.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,Kr],[o.userId,o.lastAcknowledgedBatchId]);return r.J(co,s).next(a=>N.forEach(a,c=>{H(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let l=oo(this.serializer,c);return xP(e,o.userId,l).next(()=>{})}))}))}fi(e){let t=e.store(Ps),r=e.store(ro);return e.store(ho).get(Hh).next(i=>{let o=[];return r.te((s,a)=>{let c=new ge(s),l=function(f){return[0,pt(f)]}(c);o.push(t.get(l).next(d=>d?N.resolve():(f=>t.put({targetId:0,path:pt(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>N.waitFor(o))})}gi(e,t){e.createObjectStore(qc,{keyPath:a6});let r=t.store(qc),i=new ru,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:pt(c)})}};return t.store(ro).te({ee:!0},(s,a)=>{let c=new ge(s);return o(c.popLast())}).next(()=>t.store(Ns).te({ee:!0},([s,a,c],l)=>{let d=Mn(a);return o(d.popLast())}))}pi(e){let t=e.store(Rs);return t.te((r,i)=>{let o=xc(i),s=NP(this.serializer,o);return t.put(s)})}yi(e,t){let r=t.store(ro),i=[];return r.te((o,s)=>{let a=t.store($h),c=function(f){return f.document?new U(ge.fromString(f.document.name).popFirst(5)):f.noDocument?U.fromSegments(f.noDocument.path):f.unknownDocument?U.fromSegments(f.unknownDocument.path):$(36783)}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>N.waitFor(i))}wi(e,t){let r=t.store(dn),i=VP(this.serializer),o=new ou(gf.Ei,this.serializer.wt);return r.J().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:te();oo(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),N.forEach(a,(c,l)=>{let d=new Ke(l),f=af.bt(this.serializer,d),g=o.getIndexManager(d),m=df.bt(d,this.serializer,g,o.referenceDelegate);return new pf(i,m,f,g).recalculateAndSaveOverlaysForDocumentKeys(new zc(t,zt.le),c).next()})})}};function ZN(n){n.createObjectStore(Ps,{keyPath:o6}).createIndex(UE,s6,{unique:!0}),n.createObjectStore(Rs,{keyPath:"targetId"}).createIndex(RR,i6,{unique:!0}),n.createObjectStore(ho)}var Hr="IndexedDbPersistence",__=18e5,I_=5e3,E_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jP="main",LI=class n{constructor(e,t,r,i,o,s,a,c,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.bi=o,this.window=s,this.document=a,this.Si=l,this.Di=d,this.Ci=f,this.si=null,this.oi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Mi=null,this.xi=null,this.Oi=Number.NEGATIVE_INFINITY,this.Ni=g=>Promise.resolve(),!n.C())throw new x(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new DI(this,i),this.Bi=t+jP,this.serializer=new of(c),this.Li=new Zr(this.Bi,this.Ci,new FI(this.serializer)),this._i=new hI,this.ai=new EI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VP(this.serializer),this.ci=new dI,this.window&&this.window.localStorage?this.ki=this.window.localStorage:(this.ki=null,d===!1&&je(Hr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.qi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new x(R.FAILED_PRECONDITION,E_);return this.Qi(),this.$i(),this.Ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ai.getHighestSequenceNumber(e))}).then(e=>{this.si=new zt(e,this.Si)}).then(()=>{this.oi=!0}).catch(e=>(this.Li&&this.Li.close(),Promise.reject(e)))}Ki(e){return this.Ni=t=>v(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Li.U(t=>v(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.bi.enqueueAndForget(()=>v(this,null,function*(){this.started&&(yield this.qi())})))}qi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ch(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Wi(e).next(t=>{t||(this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)))})}).next(()=>this.Gi(e)).next(t=>this.isPrimary&&!t?this.zi(e).next(()=>!1):!!t&&this.ji(e).next(()=>!0))).catch(e=>{if(ui(e))return k(Hr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k(Hr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.bi.enqueueRetryable(()=>this.Ni(e)),this.isPrimary=e})}Wi(e){return Pc(e).get(hs).next(t=>N.resolve(this.Hi(t)))}Ji(e){return Ch(e).delete(this.clientId)}Yi(){return v(this,null,function*(){if(this.isPrimary&&!this.Zi(this.Oi,__)){this.Oi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Xe(t,Ms);return r.J().next(i=>{let o=this.Xi(i,__),s=i.filter(a=>o.indexOf(a)===-1);return N.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.ki)for(let t of e)this.ki.removeItem(this.es(t.clientId))}})}Ui(){this.xi=this.bi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.qi().then(()=>this.Yi()).then(()=>this.Ui()))}Hi(e){return!!e&&e.ownerId===this.clientId}Gi(e){return this.Di?N.resolve(!0):Pc(e).get(hs).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,I_)&&!this.ts(t.ownerId)){if(this.Hi(t)&&this.networkEnabled)return!0;if(!this.Hi(t)){if(!t.allowTabSynchronization)throw new x(R.FAILED_PRECONDITION,E_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ch(e).J().next(r=>this.Xi(r,I_).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k(Hr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return v(this,null,function*(){this.oi=!1,this.ns(),this.xi&&(this.xi.cancel(),this.xi=null),this.rs(),this.ss(),yield this.Li.runTransaction("shutdown","readwrite",[yu,Ms],e=>{let t=new zc(e,zt.le);return this.zi(t).next(()=>this.Ji(t))}),this.Li.close(),this._s()})}Xi(e,t){return e.filter(r=>this.Zi(r.updateTimeMs,t)&&!this.ts(r.clientId))}us(){return this.runTransaction("getActiveClients","readonly",e=>Ch(e).J().next(t=>this.Xi(t,__).map(r=>r.clientId)))}get started(){return this.oi}getGlobalsCache(){return this._i}getMutationQueue(e,t){return df.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new II(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return af.bt(this.serializer,e)}getBundleCache(){return this.ci}runTransaction(e,t,r){k(Hr,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?T6:c===16?w6:c===15?qE:c===14?FR:c===13?OR:c===12?E6:c===11?kR:void $(60245)}(this.Ci),s;return this.Li.runTransaction(e,i,o,a=>(s=new zc(a,this.si?this.si.next():zt.le),t==="readwrite-primary"?this.Wi(s).next(c=>!!c||this.Gi(s)).next(c=>{if(!c)throw je(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)),new x(R.FAILED_PRECONDITION,bR);return r(s)}).next(c=>this.ji(s).next(()=>c)):this.cs(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}cs(e){return Pc(e).get(hs).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,I_)&&!this.ts(t.ownerId)&&!this.Hi(t)&&!(this.Di||this.allowTabSynchronization&&t.allowTabSynchronization))throw new x(R.FAILED_PRECONDITION,E_)})}ji(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pc(e).put(hs,t)}static C(){return Zr.C()}zi(e){let t=Pc(e);return t.get(hs).next(r=>this.Hi(r)?(k(Hr,"Releasing primary lease."),t.delete(hs)):N.resolve())}Zi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(je(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Qi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Mi=()=>{this.bi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.qi()))},this.document.addEventListener("visibilitychange",this.Mi),this.inForeground=this.document.visibilityState==="visible")}rs(){this.Mi&&(this.document.removeEventListener("visibilitychange",this.Mi),this.Mi=null)}$i(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Fi=()=>{this.ns();let t=/(?:Version|Mobile)\/1[456]/;Uy()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.bi.enterRestrictedMode(!0),this.bi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Fi))}ss(){this.Fi&&(this.window.removeEventListener("pagehide",this.Fi),this.Fi=null)}ts(e){var t;try{let r=((t=this.ki)===null||t===void 0?void 0:t.getItem(this.es(e)))!==null;return k(Hr,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return je(Hr,"Failed to get zombied client id.",r),!1}}ns(){if(this.ki)try{this.ki.setItem(this.es(this.clientId),String(Date.now()))}catch(e){je("Failed to set zombie client id.",e)}}_s(){if(this.ki)try{this.ki.removeItem(this.es(this.clientId))}catch{}}es(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Pc(n){return Xe(n,yu)}function Ch(n){return Xe(n,Ms)}function ew(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var VI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=te(),i=te();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var jI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var yf=class{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return Uy()?8:CR(Ve())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Vs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new jI;return this.fs(e,t,s).next(a=>{if(o.result=a,this.Is)return this.gs(e,t,s,a.size)})}).next(()=>o.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(vs()<=ce.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",_s(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),N.resolve()):(vs()<=ce.DEBUG&&k("QueryEngine","Query:",_s(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(vs()<=ce.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",_s(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gt(t))):N.resolve())}Rs(e,t){if(DN(t))return N.resolve(null);let r=gt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Jh(t,null,"F"),r=gt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=te(...o);return this.As.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ps(t,a);return this.ys(t,l,s,c.readTime)?this.Rs(e,Jh(t,null,"F")):this.ws(e,l,t,c)}))})))}Vs(e,t,r,i){return DN(t)||i.isEqual(q.min())?N.resolve(null):this.As.getDocuments(e,r).next(o=>{let s=this.ps(t,o);return this.ys(t,s,r,i)?N.resolve(null):(vs()<=ce.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_s(t)),this.ws(e,s,t,TR(i,Ss)).next(a=>a))})}ps(e,t){let r=new Te(rP(e));return t.forEach((i,o)=>{Iu(e,o)&&(r=r.add(o))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,t,r){return vs()<=ce.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",_s(t)),this.As.getDocumentsMatchingQuery(e,t,Xt.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tw="LocalStore",eq=3e8,BI=class{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new Ae(W),this.Ds=new fn(o=>go(o),vu),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pf(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}};function BP(n,e,t,r){return new BI(n,e,t,r)}function UP(n,e){return v(this,null,function*(){let t=L(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=te();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ms:l,removedBatchIds:s,addedBatchIds:a}))})})})}function tq(n,e){let t=L(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),m=N.resolve();return g.forEach(I=>{m=m.next(()=>d.getEntry(c,I)).next(S=>{let P=l.docVersions.get(I);H(P!==null,48541),S.version.compareTo(P)<0&&(f.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),d.addEntry(S)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=te();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function $P(n){let e=L(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function nq(n,e){let t=L(n),r=e.snapshotVersion,i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.ai.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.ai.addMatchingKeys(o,d.addedDocuments,f)));let m=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(He.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(S,P,O){return S.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=eq?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,m,d)&&a.push(t.ai.updateTargetData(o,m))});let c=Vt(),l=te();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(HP(o,s,e.documentUpdates).next(d=>{c=d.xs,l=d.Os})),!r.isEqual(q.min())){let d=t.ai.getLastRemoteSnapshotVersion(o).next(f=>t.ai.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return N.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Ss=i,o))}function HP(n,e,t){let r=te(),i=te();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Vt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(q.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k(tw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{xs:s,Os:i}})}function rq(n,e){let t=L(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Kr),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $s(n,e){let t=L(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):t.ai.allocateTargetId(r).next(s=>(i=new Bs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}function Hs(n,e,t){return v(this,null,function*(){let r=L(n),i=r.Ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ui(s))throw s;k(tw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)})}function vf(n,e,t){let r=L(n),i=q.min(),o=te();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let f=L(c),g=f.Ds.get(d);return g!==void 0?N.resolve(f.Ss.get(g)):f.ai.getTargetData(l,d)}(r,s,gt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.bs.getDocumentsMatchingQuery(s,e,t?i:q.min(),t?o:te())).next(a=>(WP(r,nP(e),a),{documents:a,Ns:o})))}function qP(n,e){let t=L(n),r=L(t.ai),i=t.Ss.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Rt(o,e).next(s=>s?s.target:null))}function zP(n,e){let t=L(n),r=t.vs.get(e)||q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Cs.getAllFromCollectionGroup(i,e,TR(r,Ss),Number.MAX_SAFE_INTEGER)).then(i=>(WP(t,e,i),i))}function WP(n,e,t){let r=n.vs.get(e)||q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.vs.set(e,r)}function iq(n,e,t,r){return v(this,null,function*(){let i=L(n),o=te(),s=Vt();for(let l of t){let d=e.Bs(l.metadata.name);l.document&&(o=o.add(d));let f=e.Ls(l);f.setReadTime(e.ks(l.metadata.readTime)),s=s.insert(d,f)}let a=i.Cs.newChangeBuffer({trackRemovals:!0}),c=yield $s(i,function(d){return gt(Xs(ge.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>HP(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.ai.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.ai.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.xs,d.Os)).next(()=>d.xs)))})}function oq(r,i){return v(this,arguments,function*(n,e,t=te()){let o=yield $s(n,gt(JE(e.bundledQuery))),s=L(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ue(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.ci.saveNamedQuery(a,e);let l=o.withResumeToken(He.EMPTY_BYTE_STRING,c);return s.Ss=s.Ss.insert(l.targetId,l),s.ai.updateTargetData(a,l).next(()=>s.ai.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.ai.addMatchingKeys(a,t,o.targetId)).next(()=>s.ci.saveNamedQuery(a,e))})})}var GP="firestore_clients";function JN(n,e){return`${GP}_${n}_${e}`}var KP="firestore_mutations";function XN(n,e,t){let r=`${KP}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var QP="firestore_targets";function w_(n,e){return`${QP}_${n}_${e}`}var Pn="SharedClientState",_f=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static qs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new x(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(je(Pn,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Qs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Vc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static qs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new x(r.error.code,r.error.message))),o?new n(e,r.state,i):(je(Pn,`Failed to parse target state for ID '${e}': ${t}`),null)}Qs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},If=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static qs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=QE();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=SR(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(je(Pn,`Failed to parse client data for instance '${e}': ${t}`),null)}},UI=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static qs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(je(Pn,`Failed to parse online state: ${e}`),null)}},su=class{constructor(){this.activeTargetIds=QE()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},jc=class{constructor(e,t,r,i,o){this.window=e,this.bi=t,this.persistenceKey=r,this.Ks=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ws=this.Gs.bind(this),this.zs=new Ae(W),this.started=!1,this.js=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Hs=JN(this.persistenceKey,this.Ks),this.Js=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.zs=this.zs.insert(this.Ks,new su),this.Ys=new RegExp(`^${GP}_${s}_([^_]*)$`),this.Zs=new RegExp(`^${KP}_${s}_(\\d+)(?:_(.*))?$`),this.Xs=new RegExp(`^${QP}_${s}_(\\d+)$`),this.eo=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.no=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ws)}static C(e){return!(!e||!e.localStorage)}start(){return v(this,null,function*(){let e=yield this.syncEngine.us();for(let r of e){if(r===this.Ks)continue;let i=this.getItem(JN(this.persistenceKey,r));if(i){let o=If.qs(r,i);o&&(this.zs=this.zs.insert(o.clientId,o))}}this.ro();let t=this.storage.getItem(this.eo);if(t){let r=this.io(t);r&&this.so(r)}for(let r of this.js)this.Gs(r);this.js=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Js,JSON.stringify(e))}getAllActiveQueryTargets(){return this.oo(this.zs)}isActiveQueryTarget(e){let t=!1;return this.zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this._o(e,"pending")}updateMutationState(e,t,r){this._o(e,t,r),this.ao(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(w_(this.persistenceKey,e));if(i){let o=Vc.qs(e,i);o&&(r=o.state)}}return t&&this.uo.$s(e),this.ro(),r}removeLocalQueryTarget(e){this.uo.Us(e),this.ro()}isLocalQueryTarget(e){return this.uo.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(w_(this.persistenceKey,e))}updateQueryState(e,t,r){this.co(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ao(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.lo(e)}notifyBundleLoaded(e){this.ho(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ws),this.removeItem(this.Hs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k(Pn,"READ",e,t),t}setItem(e,t){k(Pn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){k(Pn,"REMOVE",e),this.storage.removeItem(e)}Gs(e){let t=e;if(t.storageArea===this.storage){if(k(Pn,"EVENT",t.key,t.newValue),t.key===this.Hs)return void je("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bi.enqueueRetryable(()=>v(this,null,function*(){if(this.started){if(t.key!==null){if(this.Ys.test(t.key)){if(t.newValue==null){let r=this.Po(t.key);return this.To(r,null)}{let r=this.Io(t.key,t.newValue);if(r)return this.To(r.clientId,r)}}else if(this.Zs.test(t.key)){if(t.newValue!==null){let r=this.Eo(t.key,t.newValue);if(r)return this.Ao(r)}}else if(this.Xs.test(t.key)){if(t.newValue!==null){let r=this.Ro(t.key,t.newValue);if(r)return this.Vo(r)}}else if(t.key===this.eo){if(t.newValue!==null){let r=this.io(t.newValue);if(r)return this.so(r)}}else if(t.key===this.Js){let r=function(o){let s=zt.le;if(o!=null)try{let a=JSON.parse(o);H(typeof a=="number",30636,{mo:o}),s=a}catch(a){je(Pn,"Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==zt.le&&this.sequenceNumberHandler(r)}else if(t.key===this.no){let r=this.fo(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.po(i)))}}}else this.js.push(t)}))}}get uo(){return this.zs.get(this.Ks)}ro(){this.setItem(this.Hs,this.uo.Qs())}_o(e,t,r){let i=new _f(this.currentUser,e,t,r),o=XN(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Qs())}ao(e){let t=XN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}lo(e){let t={clientId:this.Ks,onlineState:e};this.storage.setItem(this.eo,JSON.stringify(t))}co(e,t,r){let i=w_(this.persistenceKey,e),o=new Vc(e,t,r);this.setItem(i,o.Qs())}ho(e){let t=JSON.stringify(Array.from(e));this.setItem(this.no,t)}Po(e){let t=this.Ys.exec(e);return t?t[1]:null}Io(e,t){let r=this.Po(e);return If.qs(r,t)}Eo(e,t){let r=this.Zs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return _f.qs(new Ke(o),i,t)}Ro(e,t){let r=this.Xs.exec(e),i=Number(r[1]);return Vc.qs(i,t)}io(e){return UI.qs(e)}fo(e){return JSON.parse(e)}Ao(e){return v(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.yo(e.batchId,e.state,e.error);k(Pn,`Ignoring mutation for non-active user ${e.user.uid}`)})}Vo(e){return this.syncEngine.wo(e.targetId,e.state,e.error)}To(e,t){let r=t?this.zs.insert(e,t):this.zs.remove(e),i=this.oo(this.zs),o=this.oo(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.bo(s,a).then(()=>{this.zs=r})}so(e){this.zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}oo(e){let t=QE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Ef=class{constructor(){this.So=new su,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new su,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var $I=class{vo(e){}shutdown(){}};var eR="ConnectivityMonitor",wf=class{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){k(eR,"Network connectivity changed: AVAILABLE");for(let e of this.Oo)e(0)}xo(){k(eR,"Network connectivity changed: UNAVAILABLE");for(let e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Sh=null;function HI(){return Sh===null?Sh=function(){return 268435456+Math.round(2147483648*Math.random())}():Sh++,"0x"+Sh.toString(16)}var T_="RestConnection",sq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qI=class{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Gc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,o){let s=HI(),a=this.$o(e,t.toUriEncodedString());k(T_,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(c,i,o);let{host:l}=new URL(a),d=Pr(l);return this.Ko(e,a,c,r,d).then(f=>(k(T_,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Jt(T_,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Wo(e,t,r,i,o,s){return this.Qo(e,t,r,i,o)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Js}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}$o(e,t){let r=sq[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}};var zI=class{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}};var ht="WebChannelConnection",WI=class extends qI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i,o){let s=HI();return new Promise((a,c)=>{let l=new f_;l.setWithCredentials(!0),l.listenOnce(p_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Sc.NO_ERROR:let f=l.getResponseJson();k(ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Sc.TIMEOUT:k(ht,`RPC '${e}' ${s} timed out`),c(new x(R.DEADLINE_EXCEEDED,"Request time out"));break;case Sc.HTTP_ERROR:let g=l.getStatus();if(k(ht,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let I=m?.error;if(I&&I.status&&I.message){let S=function(O){let j=O.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(j)>=0?j:R.UNKNOWN}(I.status);c(new x(S,I.message))}else c(new x(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new x(R.UNAVAILABLE,"Connection failed."));break;default:$(9055,{s_:e,streamId:s,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{k(ht,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);k(ht,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",d,r,15)})}a_(e,t,r){let i=HI(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=y_(),a=m_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");k(ht,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),g=!1,m=!1,I=new zI({Go:P=>{m?k(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(g||(k(ht,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),k(ht,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},zo:()=>f.close()}),S=(P,O,j)=>{P.listen(O,B=>{try{j(B)}catch(Q){setTimeout(()=>{throw Q},0)}})};return S(f,ds.EventType.OPEN,()=>{m||(k(ht,`RPC '${e}' stream ${i} transport opened.`),I.t_())}),S(f,ds.EventType.CLOSE,()=>{m||(m=!0,k(ht,`RPC '${e}' stream ${i} transport closed`),I.r_())}),S(f,ds.EventType.ERROR,P=>{m||(m=!0,Jt(ht,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),I.r_(new x(R.UNAVAILABLE,"The operation could not be completed")))}),S(f,ds.EventType.MESSAGE,P=>{var O;if(!m){let j=P.data[0];H(!!j,16349);let B=j,Q=B?.error||((O=B[0])===null||O===void 0?void 0:O.error);if(Q){k(ht,`RPC '${e}' stream ${i} received error:`,Q);let he=Q.status,Z=function(w){let D=We[w];if(D!==void 0)return mP(D)}(he),T=Q.message;Z===void 0&&(Z=R.INTERNAL,T="Unknown error status: "+he+" with message "+Q.message),m=!0,I.r_(new x(Z,T)),f.close()}else k(ht,`RPC '${e}' stream ${i} received:`,j),I.i_(j)}}),S(a,g_.STAT_EVENT,P=>{P.stat===wh.PROXY?k(ht,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===wh.NOPROXY&&k(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.n_()},0),I}};function YP(){return typeof window<"u"?window:null}function Oh(){return typeof document<"u"?document:null}function Eu(n){return new sI(n,!0)}var au=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();let t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}};var tR="PersistentStream",Tf=class{constructor(e,t,r,i,o,s,a,c){this.bi=e,this.R_=r,this.V_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new au(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}stop(){return v(this,null,function*(){this.w_()&&(yield this.close(0))})}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){return v(this,null,function*(){if(this.b_())return this.close(0)})}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,t){return v(this,null,function*(){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(je(t.toString()),je("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Zo(t)})}O_(){}auth(){this.state=1;let e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{let i=new x(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){let r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(()=>v(this,null,function*(){this.state=0,this.start()}))}L_(e){return k(tR,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(k(tR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},GI=class extends Tf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();let t=q6(this.serializer,e),r=function(o){if(!("targetChange"in o))return q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?q.min():s.readTime?Ue(s.readTime):q.min()}(e);return this.listener.Q_(t,r)}U_(e){let t={};t.database=uI(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Yh(c)?{documents:TP(o,c)}:{query:Gf(o,c).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=yP(o,s.resumeToken);let l=aI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(q.min())>0){a.readTime=js(o,s.snapshotVersion.toTimestamp());let l=aI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=W6(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){let t={};t.database=uI(this.serializer),t.removeTarget=e,this.F_(t)}},KI=class extends Tf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return H(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,H(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){H(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();let t=z6(e.writeResults,e.commitTime),r=Ue(e.commitTime);return this.listener.j_(r,t)}H_(){let e={};e.database=uI(this.serializer),this.F_(e)}G_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>nu(this.serializer,r))};this.F_(t)}};var QI=class{},YI=class extends QI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new x(R.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Qo(e,cI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(R.UNKNOWN,o.toString())})}Wo(e,t,r,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,cI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(R.UNKNOWN,s.toString())})}terminate(){this.J_=!0,this.connection.terminate()}},ZI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(je(t),this.ea=!1):k("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}};var _o="RemoteStore",JI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){di(this)&&(k(_o,"Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let l=L(c);l.aa.add(4),yield ea(l),l.la.set("Unknown"),l.aa.delete(4),yield wu(l)})}(this))}))}),this.la=new ZI(r,i)}};function wu(n){return v(this,null,function*(){if(di(n))for(let e of n.ua)yield e(!0)})}function ea(n){return v(this,null,function*(){for(let e of n.ua)yield e(!1)})}function Kf(n,e){let t=L(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),iw(t)?rw(t):na(t).b_()&&nw(t,e))}function qs(n,e){let t=L(n),r=na(t);t._a.delete(e),r.b_()&&ZP(t,e),t._a.size===0&&(r.b_()?r.v_():di(t)&&t.la.set("Unknown"))}function nw(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}na(n).U_(e)}function ZP(n,e){n.ha.Ke(e),na(n).K_(e)}function rw(n){n.ha=new oI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),na(n).start(),n.la.ta()}function iw(n){return di(n)&&!na(n).w_()&&n._a.size>0}function di(n){return L(n).aa.size===0}function JP(n){n.ha=void 0}function aq(n){return v(this,null,function*(){n.la.set("Online")})}function cq(n){return v(this,null,function*(){n._a.forEach((e,t)=>{nw(n,e)})})}function uq(n,e){return v(this,null,function*(){JP(n),iw(n)?(n.la.ia(e),rw(n)):n.la.set("Unknown")})}function lq(n,e,t){return v(this,null,function*(){if(n.la.set("Online"),e instanceof nf&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i._a.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i._a.delete(a),i.ha.removeTarget(a))})}(n,e)}catch(r){k(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Df(n,r)}else if(e instanceof Ds?n.ha.Xe(e):e instanceof tf?n.ha.ot(e):n.ha.nt(e),!t.isEqual(q.min()))try{let r=yield $P(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.ha.It(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o._a.get(l);d&&o._a.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o._a.get(c);if(!d)return;o._a.set(c,d.withResumeToken(He.EMPTY_BYTE_STRING,d.snapshotVersion)),ZP(o,c);let f=new Bs(d.target,c,l,d.sequenceNumber);nw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k(_o,"Failed to raise snapshot:",r),yield Df(n,r)}})}function Df(n,e,t){return v(this,null,function*(){if(!ui(e))throw e;n.aa.add(1),yield ea(n),n.la.set("Offline"),t||(t=()=>$P(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){k(_o,"Retrying IndexedDB access"),yield t(),n.aa.delete(1),yield wu(n)}))})}function XP(n,e){return e().catch(t=>Df(n,t,e))}function ta(n){return v(this,null,function*(){let e=L(n),t=ii(e),r=e.oa.length>0?e.oa[e.oa.length-1].batchId:Kr;for(;dq(e);)try{let i=yield rq(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,hq(e,i)}catch(i){yield Df(e,i)}eM(e)&&tM(e)})}function dq(n){return di(n)&&n.oa.length<10}function hq(n,e){n.oa.push(e);let t=ii(n);t.b_()&&t.W_&&t.G_(e.mutations)}function eM(n){return di(n)&&!ii(n).w_()&&n.oa.length>0}function tM(n){ii(n).start()}function fq(n){return v(this,null,function*(){ii(n).H_()})}function pq(n){return v(this,null,function*(){let e=ii(n);for(let t of n.oa)e.G_(t.mutations)})}function gq(n,e,t){return v(this,null,function*(){let r=n.oa.shift(),i=nI.from(r,e,t);yield XP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ta(n)})}function mq(n,e){return v(this,null,function*(){e&&ii(n).W_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return gP(s)&&s!==R.ABORTED}(i.code)){let o=r.oa.shift();ii(r).D_(),yield XP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ta(r)}})}(n,e)),eM(n)&&tM(n)})}function nR(n,e){return v(this,null,function*(){let t=L(n);t.asyncQueue.verifyOperationInProgress(),k(_o,"RemoteStore received new credentials");let r=di(t);t.aa.add(3),yield ea(t),r&&t.la.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),yield wu(t)})}function XI(n,e){return v(this,null,function*(){let t=L(n);e?(t.aa.delete(2),yield wu(t)):e||(t.aa.add(2),yield ea(t),t.la.set("Unknown"))})}function na(n){return n.Pa||(n.Pa=function(t,r,i){let o=L(t);return o.Y_(),new GI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:aq.bind(null,n),Jo:cq.bind(null,n),Zo:uq.bind(null,n),Q_:lq.bind(null,n)}),n.ua.push(e=>v(null,null,function*(){e?(n.Pa.D_(),iw(n)?rw(n):n.la.set("Unknown")):(yield n.Pa.stop(),JP(n))}))),n.Pa}function ii(n){return n.Ta||(n.Ta=function(t,r,i){let o=L(t);return o.Y_(),new KI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:fq.bind(null,n),Zo:mq.bind(null,n),z_:pq.bind(null,n),j_:gq.bind(null,n)}),n.ua.push(e=>v(null,null,function*(){e?(n.Ta.D_(),yield ta(n)):(yield n.Ta.stop(),n.oa.length>0&&(k(_o,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))}))),n.Ta}var eE=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ra(n,e){if(je("AsyncQueue",`${e}: ${n}`),ui(n))return new x(R.UNAVAILABLE,`${e}: ${n}`);throw n}var bf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||U.comparator(t.key,r.key):(t,r)=>U.comparator(t.key,r.key),this.keyedMap=Mc(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Cf=class{constructor(){this.Ia=new Ae(U.comparator)}track(e){let t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):$(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){let e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}},zs=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,bf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var tE=class{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}},nE=class{constructor(){this.queries=rR(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){let i=L(t),o=i.queries;i.queries=rR(),o.forEach((s,a)=>{for(let c of a.Ra)c.onError(r)})})(this,new x(R.ABORTED,"Firestore shutting down"))}};function rR(){return new fn(n=>tP(n),_u)}function ow(n,e){return v(this,null,function*(){let t=L(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Va()&&e.ma()&&(r=2):(o=new tE,r=e.ma()?0:1);try{switch(r){case 0:o.Aa=yield t.onListen(i,!0);break;case 1:o.Aa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ra(s,`Initialization of query '${_s(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Ra.push(e),e.ga(t.onlineState),o.Aa&&e.pa(o.Aa)&&aw(t)})}function sw(n,e){return v(this,null,function*(){let t=L(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Ra.indexOf(e);s>=0&&(o.Ra.splice(s,1),o.Ra.length===0?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function yq(n,e){let t=L(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Ra)a.pa(i)&&(r=!0);s.Aa=i}}r&&aw(t)}function vq(n,e,t){let r=L(n),i=r.queries.get(e);if(i)for(let o of i.Ra)o.onError(t);r.queries.delete(e)}function aw(n){n.fa.forEach(e=>{e.next()})}var rE,iR;(iR=rE||(rE={})).ya="default",iR.Cache="cache";var cu=class{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;let r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;let t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==rE.Cache}};var iE=class{constructor(e,t){this.Ma=e,this.byteLength=t}xa(){return"metadata"in this.Ma}};var Sf=class{constructor(e){this.serializer=e}Bs(e){return On(this.serializer,e)}Ls(e){return e.metadata.exists?wP(this.serializer,e.document,!1):Ze.newNoDocument(this.Bs(e.metadata.name),this.ks(e.metadata.readTime))}ks(e){return Ue(e)}},oE=class{constructor(e,t,r){this.Oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nM(e)}Na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ma.namedQuery)this.queries.push(e.Ma.namedQuery);else if(e.Ma.documentMetadata){this.documents.push({metadata:e.Ma.documentMetadata}),e.Ma.documentMetadata.exists||++t;let r=ge.fromString(e.Ma.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ma.document&&(this.documents[this.documents.length-1].document=e.Ma.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ba(e){let t=new Map,r=new Sf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Bs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||te()).add(o);t.set(s,a)}}return t}complete(){return v(this,null,function*(){let e=yield iq(this.localStore,new Sf(this.serializer),this.documents,this.Oa.id),t=this.Ba(this.documents);for(let r of this.queries)yield oq(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,La:this.collectionGroups,ka:e}})}};function nM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Af=class{constructor(e){this.key=e}},Nf=class{constructor(e){this.key=e}},Rf=class{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=te(),this.mutatedKeys=te(),this.Ua=rP(e),this.Ka=new bf(this.Ua)}get Wa(){return this.qa}Ga(e,t){let r=t?t.za:new Cf,i=t?t.Ka:this.Ka,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=Iu(this.query,f)?f:null,I=!!g&&this.mutatedKeys.has(g.key),S=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),P=!1;g&&m?g.data.isEqual(m.data)?I!==S&&(r.track({type:3,doc:m}),P=!0):this.ja(g,m)||(r.track({type:2,doc:m}),P=!0,(c&&this.Ua(m,c)>0||l&&this.Ua(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),P=!0):g&&!m&&(r.track({type:1,doc:g}),P=!0,(c||l)&&(a=!0)),P&&(m?(s=s.add(m),o=S?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ka:s,za:r,ys:a,mutatedKeys:o}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;let s=e.za.da();s.sort((d,f)=>function(m,I){let S=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{Vt:P})}};return S(m)-S(I)}(d.type,f.type)||this.Ua(d.doc,f.doc)),this.Ha(r),i=i!=null&&i;let a=t&&!i?this.Ja():[],c=this.$a.size===0&&this.current&&!i?1:0,l=c!==this.Qa;return this.Qa=c,s.length!==0||l?{snapshot:new zs(this.query,e.Ka,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Cf,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];let e=this.$a;this.$a=te(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});let t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new Nf(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new Af(r))}),t}Xa(e){this.qa=e.Ns,this.$a=te();let t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return zs.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}},hi="SyncEngine",sE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},aE=class{constructor(e){this.key=e,this.tu=!1}},cE=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new fn(a=>tP(a),_u),this.iu=new Map,this.su=new Set,this.ou=new Ae(U.comparator),this._u=new Map,this.au=new iu,this.uu={},this.cu=new Map,this.lu=Us.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}};function _q(n,e,t=!0){return v(this,null,function*(){let r=Qf(n),i,o=r.ru.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=yield rM(r,e,t,!0),i})}function Iq(n,e){return v(this,null,function*(){let t=Qf(n);yield rM(t,e,!0,!1)})}function rM(n,e,t,r){return v(this,null,function*(){let i=yield $s(n.localStore,gt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield cw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Kf(n.remoteStore,i),a})}function cw(n,e,t,r,i){return v(this,null,function*(){n.Pu=(f,g,m)=>function(S,P,O,j){return v(this,null,function*(){let B=P.view.Ga(O);B.ys&&(B=yield vf(S.localStore,P.query,!1).then(({documents:T})=>P.view.Ga(T,B)));let Q=j&&j.targetChanges.get(P.targetId),he=j&&j.targetMismatches.get(P.targetId)!=null,Z=P.view.applyChanges(B,S.isPrimaryClient,Q,he);return uE(S,P.targetId,Z.Ya),Z.snapshot})}(n,f,g,m);let o=yield vf(n.localStore,e,!0),s=new Rf(e,o.Ns),a=s.Ga(o.documents),c=eu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);uE(n,t,l.Ya);let d=new sE(e,t,s);return n.ru.set(e,d),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),l.snapshot})}function Eq(n,e,t){return v(this,null,function*(){let r=L(n),i=r.ru.get(e),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter(s=>!_u(s,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Hs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&qs(r.remoteStore,i.targetId),Ws(r,i.targetId)}).catch(ci))):(Ws(r,i.targetId),yield Hs(r.localStore,i.targetId,!0))})}function wq(n,e){return v(this,null,function*(){let t=L(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),qs(t.remoteStore,r.targetId))})}function Tq(n,e,t){return v(this,null,function*(){let r=hw(n);try{let i=yield function(s,a){let c=L(s),l=Be.now(),d=a.reduce((m,I)=>m.add(I.key),te()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let I=Vt(),S=te();return c.Cs.getEntries(m,d).next(P=>{I=P,I.forEach((O,j)=>{j.isValidDocument()||(S=S.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,I)).next(P=>{f=P;let O=[];for(let j of a){let B=L6(j,f.get(j.key).overlayedDocument);B!=null&&O.push(new pn(j.key,B,WR(B.value.mapValue),Fe.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,O,a)}).next(P=>{g=P;let O=P.applyToLocalDocumentSet(f,S);return c.documentOverlayCache.saveOverlays(m,P.batchId,O)})}).then(()=>({batchId:g.batchId,changes:oP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.uu[s.currentUser.toKey()];l||(l=new Ae(W)),l=l.insert(a,c),s.uu[s.currentUser.toKey()]=l}(r,i.batchId,t),yield yr(r,i.changes),yield ta(r.remoteStore)}catch(i){let o=ra(i,"Failed to persist write");t.reject(o)}})}function iM(n,e){return v(this,null,function*(){let t=L(n);try{let r=yield nq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t._u.get(o);s&&(H(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.tu=!0:i.modifiedDocuments.size>0?H(s.tu,14607):i.removedDocuments.size>0&&(H(s.tu,42227),s.tu=!1))}),yield yr(t,r,e)}catch(r){yield ci(r)}})}function oR(n,e,t){let r=L(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ru.forEach((o,s)=>{let a=s.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=L(s);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.Ra)g.ga(a)&&(l=!0)}),l&&aw(c)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Dq(n,e,t){return v(this,null,function*(){let r=L(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r._u.get(e),o=i&&i.key;if(o){let s=new Ae(U.comparator);s=s.insert(o,Ze.newNoDocument(o,q.min()));let a=te().add(o),c=new Xc(q.min(),new Map,new Ae(W),s,a);yield iM(r,c),r.ou=r.ou.remove(o),r._u.delete(e),dw(r)}else yield Hs(r.localStore,e,!1).then(()=>Ws(r,e,t)).catch(ci)})}function bq(n,e){return v(this,null,function*(){let t=L(n),r=e.batch.batchId;try{let i=yield tq(t.localStore,e);lw(t,r,null),uw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yr(t,i)}catch(i){yield ci(i)}})}function Cq(n,e,t){return v(this,null,function*(){let r=L(n);try{let i=yield function(s,a){let c=L(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(H(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);lw(r,e,t),uw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yr(r,i)}catch(i){yield ci(i)}})}function Sq(n,e){return v(this,null,function*(){let t=L(n);di(t.remoteStore)||k(hi,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=L(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===Kr)return void e.resolve();let i=t.cu.get(r)||[];i.push(e),t.cu.set(r,i)}catch(r){let i=ra(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function uw(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function lw(n,e,t){let r=L(n),i=r.uu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function Ws(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||oM(n,r)})}function oM(n,e){n.su.delete(e.path.canonicalString());let t=n.ou.get(e);t!==null&&(qs(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),dw(n))}function uE(n,e,t){for(let r of t)r instanceof Af?(n.au.addReference(r.key,e),Aq(n,r)):r instanceof Nf?(k(hi,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||oM(n,r.key)):$(19791,{Iu:r})}function Aq(n,e){let t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(k(hi,"New document in limbo: "+t),n.su.add(r),dw(n))}function dw(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){let e=n.su.values().next().value;n.su.delete(e);let t=new U(ge.fromString(e)),r=n.lu.next();n._u.set(r,new aE(t)),n.ou=n.ou.insert(t,r),Kf(n.remoteStore,new Bs(gt(Xs(t.path)),r,"TargetPurposeLimboResolution",zt.le))}}function yr(n,e,t){return v(this,null,function*(){let r=L(n),i=[],o=[],s=[];r.ru.isEmpty()||(r.ru.forEach((a,c)=>{s.push(r.Pu(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=VI.Ps(c.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.nu.Q_(i),yield function(c,l){return v(this,null,function*(){let d=L(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>N.forEach(l,g=>N.forEach(g.ls,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>N.forEach(g.hs,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!ui(f))throw f;k(tw,"Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let m=d.Ss.get(g),I=m.snapshotVersion,S=m.withLastLimboFreeSnapshotVersion(I);d.Ss=d.Ss.insert(g,S)}}})}(r.localStore,o))})}function Nq(n,e){return v(this,null,function*(){let t=L(n);if(!t.currentUser.isEqual(e)){k(hi,"User change. New user:",e.toKey());let r=yield UP(t.localStore,e);t.currentUser=e,function(o,s){o.cu.forEach(a=>{a.forEach(c=>{c.reject(new x(R.CANCELLED,s))})}),o.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yr(t,r.Ms)}})}function Rq(n,e){let t=L(n),r=t._u.get(e);if(r&&r.tu)return te().add(r.key);{let i=te(),o=t.iu.get(e);if(!o)return i;for(let s of o){let a=t.ru.get(s);i=i.unionWith(a.view.Wa)}return i}}function Pq(n,e){return v(this,null,function*(){let t=L(n),r=yield vf(t.localStore,e.query,!0),i=e.view.Xa(r);return t.isPrimaryClient&&uE(t,e.targetId,i.Ya),i})}function Mq(n,e){return v(this,null,function*(){let t=L(n);return zP(t.localStore,e).then(r=>yr(t,r))})}function xq(n,e,t,r){return v(this,null,function*(){let i=L(n),o=yield function(a,c){let l=L(a),d=L(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Hn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):N.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ta(i.remoteStore):t==="acknowledged"||t==="rejected"?(lw(i,e,r||null),uw(i,e),function(a,c){L(L(a).mutationQueue).Xn(c)}(i.localStore,e)):$(6720,"Unknown batchState",{Eu:t}),yield yr(i,o)):k(hi,"Cannot apply mutation batch with id: "+e)})}function kq(n,e){return v(this,null,function*(){let t=L(n);if(Qf(t),hw(t),e===!0&&t.hu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield sR(t,r.toArray());t.hu=!0,yield XI(t.remoteStore,!0);for(let o of i)Kf(t.remoteStore,o)}else if(e===!1&&t.hu!==!1){let r=[],i=Promise.resolve();t.iu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ws(t,s),Hs(t.localStore,s,!0))),qs(t.remoteStore,s)}),yield i,yield sR(t,r),function(s){let a=L(s);a._u.forEach((c,l)=>{qs(a.remoteStore,l)}),a.au.Kr(),a._u=new Map,a.ou=new Ae(U.comparator)}(t),t.hu=!1,yield XI(t.remoteStore,!1)}})}function sR(n,e,t){return v(this,null,function*(){let r=L(n),i=[],o=[];for(let s of e){let a,c=r.iu.get(s);if(c&&c.length!==0){a=yield $s(r.localStore,gt(c[0]));for(let l of c){let d=r.ru.get(l),f=yield Pq(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield qP(r.localStore,s);a=yield $s(r.localStore,l),yield cw(r,sM(l),s,!1,a.resumeToken)}i.push(a)}return r.nu.Q_(o),i})}function sM(n){return JR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Oq(n){return function(t){return L(L(t).persistence).us()}(L(n).localStore)}function Fq(n,e,t,r){return v(this,null,function*(){let i=L(n);if(i.hu)return void k(hi,"Ignoring unexpected query state notification.");let o=i.iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield zP(i.localStore,nP(o[0])),a=Xc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",He.EMPTY_BYTE_STRING);yield yr(i,s,a);break}case"rejected":yield Hs(i.localStore,e,!0),Ws(i,e,r);break;default:$(64155,t)}})}function Lq(n,e,t){return v(this,null,function*(){let r=Qf(n);if(r.hu){for(let i of e){if(r.iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k(hi,"Adding an already active target "+i);continue}let o=yield qP(r.localStore,i),s=yield $s(r.localStore,o);yield cw(r,sM(o),s.targetId,!1,s.resumeToken),Kf(r.remoteStore,s)}for(let i of t)r.iu.has(i)&&(yield Hs(r.localStore,i,!1).then(()=>{qs(r.remoteStore,i),Ws(r,i)}).catch(ci))}})}function Qf(n){let e=L(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dq.bind(null,e),e.nu.Q_=yq.bind(null,e.eventManager),e.nu.Tu=vq.bind(null,e.eventManager),e}function hw(n){let e=L(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Cq.bind(null,e),e}function Vq(n,e,t){let r=L(n);(function(o,s,a){return v(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(m,I){let S=L(m),P=Ue(I.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",O=>S.ci.getBundleMetadata(O,I.id)).then(O=>!!O&&O.createTime.compareTo(P)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(nM(c));let l=new oE(c,o.localStore,s.serializer),d=yield s.du();for(;d;){let g=yield l.Na(d);g&&a._updateProgress(g),d=yield s.du()}let f=yield l.complete();return yield yr(o,f.ka,void 0),yield function(m,I){let S=L(m);return S.persistence.runTransaction("Save bundle","readwrite",P=>S.ci.saveBundleMetadata(P,I))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.La)}catch(c){return Jt(hi,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Yf=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Eu(t.databaseInfo.databaseId),this.sharedClientState=this.Au(t),this.persistence=this.Ru(t),yield this.persistence.start(),this.localStore=this.Vu(t),this.gcScheduler=this.mu(t,this.localStore),this.indexBackfillerScheduler=this.fu(t,this.localStore)})}mu(t,r){return null}fu(t,r){return null}Vu(t){return BP(this.persistence,new yf,t.initialUser,this.serializer)}Ru(t){return new ou(gf.Ei,this.serializer)}Au(t){return new Ef}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),uu=class extends Yf{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){H(this.persistence.referenceDelegate instanceof mf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new hf(r,e.asyncQueue,t)}Ru(e){let t=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new ou(r=>mf.Ei(r,t),this.serializer)}},lu=class n extends Yf{constructor(e,t,r){super(),this.gu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){yield gn(n.prototype,this,"initialize").call(this,e),yield this.gu.initialize(this,e),yield hw(this.gu.syncEngine),yield ta(this.gu.remoteStore),yield this.persistence.Ki(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}Vu(e){return BP(this.persistence,new yf,e.initialUser,this.serializer)}mu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new hf(r,e.asyncQueue,t)}fu(e,t){let r=new L_(t,this.persistence);return new F_(e.asyncQueue,r)}Ru(e){let t=ew(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new LI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,YP(),Oh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Au(e){return new Ef}},Pf=class n extends lu{constructor(e,t){super(e,t,!1),this.gu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return v(this,null,function*(){yield gn(n.prototype,this,"initialize").call(this,e);let t=this.gu.syncEngine;this.sharedClientState instanceof jc&&(this.sharedClientState.syncEngine={yo:xq.bind(null,t),wo:Fq.bind(null,t),bo:Lq.bind(null,t),us:Oq.bind(null,t),po:Mq.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.Ki(r=>v(this,null,function*(){yield kq(this.gu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Au(e){let t=YP();if(!jc.C(t))throw new x(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=ew(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},ia=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>oR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nq.bind(null,this.syncEngine),yield XI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new nE}()}createDatastore(t){let r=Eu(t.databaseInfo.databaseId),i=function(s){return new WI(s)}(t.databaseInfo);return function(s,a,c,l){return new YI(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new JI(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>oR(this.syncEngine,r,0),function(){return wf.C()?new wf:new $I}())}createSyncEngine(t,r){return function(o,s,a,c,l,d,f){let g=new cE(o,s,a,c,l,d);return f&&(g.hu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=L(o);k(_o,"RemoteStore shutting down."),s.aa.add(5),yield ea(s),s.ca.shutdown(),s.la.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function aR(n,e=10240){let t=0;return{read(){return v(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return v(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Gs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):je("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var lE=class{constructor(e,t){this.wu=e,this.serializer=t,this.metadata=new Qe,this.buffer=new Uint8Array,this.bu=function(){return new TextDecoder("utf-8")}(),this.Su().then(r=>{r&&r.xa()?this.metadata.resolve(r.Ma.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Ma)}`))},r=>this.metadata.reject(r))}close(){return this.wu.cancel()}getMetadata(){return v(this,null,function*(){return this.metadata.promise})}du(){return v(this,null,function*(){return yield this.getMetadata(),this.Su()})}Su(){return v(this,null,function*(){let e=yield this.Du();if(e===null)return null;let t=this.bu.decode(e),r=Number(t);isNaN(r)&&this.vu(`length string (${t}) is not valid number`);let i=yield this.Cu(r);return new iE(JSON.parse(i),e.length+r)})}Fu(){return this.buffer.findIndex(e=>e===123)}Du(){return v(this,null,function*(){for(;this.Fu()<0&&!(yield this.Mu()););if(this.buffer.length===0)return null;let e=this.Fu();e<0&&this.vu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Cu(e){return v(this,null,function*(){for(;this.buffer.length<e;)(yield this.Mu())&&this.vu("Reached the end of bundle when more is expected.");let t=this.bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}vu(e){throw this.wu.cancel(),new Error(`Invalid bundle format: ${e}`)}Mu(){return v(this,null,function*(){let e=yield this.wu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var dE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return v(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new x(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return v(this,null,function*(){let s=L(i),a={documents:o.map(f=>tu(s.serializer,f))},c=yield s.Wo("BatchGetDocuments",s.serializer.databaseId,ge.emptyPath(),a,o.length),l=new Map;c.forEach(f=>{let g=H6(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());H(!!g,55234,{key:f}),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ri(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return v(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=U.fromPath(r);this.mutations.push(new Yc(i,this.precondition(i)))}),yield function(r,i){return v(this,null,function*(){let o=L(r),s={writes:i.map(a=>nu(o.serializer,a))};yield o.Qo("Commit",o.serializer.databaseId,ge.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $(50498,{xu:e.constructor.name});t=q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new x(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(q.min())?Fe.exists(!1):Fe.updateTime(t):Fe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(q.min()))throw new x(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fe.updateTime(t)}return Fe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var hE=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Ou=r.maxAttempts,this.y_=new au(this.asyncQueue,"transaction_retry")}Nu(){this.Ou-=1,this.Bu()}Bu(){this.y_.E_(()=>v(this,null,function*(){let e=new dE(this.datastore),t=this.Lu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ku(i)}))}).catch(r=>{this.ku(r)})}))}Lu(e){try{let t=this.updateFunction(e);return!mu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ku(e){this.Ou>0&&this.qu(e)?(this.Ou-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bu(),Promise.resolve()))):this.deferred.reject(e)}qu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!gP(t)}return!1}};var oi="FirestoreClient",fE=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ke.UNAUTHENTICATED,this.clientId=Lh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){k(oi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k(oi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ra(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function D_(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k(oi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield UP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function cR(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield fw(n);k(oi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nR(e.remoteStore,i)),n._onlineComponents=e})}function fw(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k(oi,"Using user provided OfflineComponentProvider");try{yield D_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Jt("Error using user provided cache. Falling back to memory cache: "+t),yield D_(n,new Yf)}}else k(oi,"Using default OfflineComponentProvider"),yield D_(n,new uu(void 0));return n._offlineComponents})}function Zf(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k(oi,"Using user provided OnlineComponentProvider"),yield cR(n,n._uninitializedComponentsProvider._online)):(k(oi,"Using default OnlineComponentProvider"),yield cR(n,new ia))),n._onlineComponents})}function aM(n){return fw(n).then(e=>e.persistence)}function oa(n){return fw(n).then(e=>e.localStore)}function cM(n){return Zf(n).then(e=>e.remoteStore)}function pw(n){return Zf(n).then(e=>e.syncEngine)}function uM(n){return Zf(n).then(e=>e.datastore)}function Ks(n){return v(this,null,function*(){let e=yield Zf(n),t=e.eventManager;return t.onListen=_q.bind(null,e.syncEngine),t.onUnlisten=Eq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Iq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wq.bind(null,e.syncEngine),t})}function jq(n){return n.asyncQueue.enqueue(()=>v(null,null,function*(){let e=yield aM(n),t=yield cM(n);return e.setNetworkEnabled(!0),function(i){let o=L(i);return o.aa.delete(0),wu(o)}(t)}))}function Bq(n){return n.asyncQueue.enqueue(()=>v(null,null,function*(){let e=yield aM(n),t=yield cM(n);return e.setNetworkEnabled(!1),function(i){return v(this,null,function*(){let o=L(i);o.aa.add(0),yield ea(o),o.la.set("Offline")})}(t)}))}function Uq(n,e){let t=new Qe;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(i,o,s){return v(this,null,function*(){try{let a=yield function(l,d){let f=L(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new x(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=ra(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield oa(n),e,t)})),t.promise}function lM(n,e,t={}){let r=new Qe;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,c,l){let d=new Gs({next:g=>{d.yu(),s.enqueueAndForget(()=>sw(o,f));let m=g.docs.has(a);!m&&g.fromCache?l.reject(new x(R.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?l.reject(new x(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new cu(Xs(a.path),d,{includeMetadataChanges:!0,Fa:!0});return ow(o,f)}(yield Ks(n),n.asyncQueue,e,t,r)})),r.promise}function $q(n,e){let t=new Qe;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(i,o,s){return v(this,null,function*(){try{let a=yield vf(i,o,!0),c=new Rf(o,a.Ns),l=c.Ga(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=ra(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield oa(n),e,t)})),t.promise}function dM(n,e,t={}){let r=new Qe;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,c,l){let d=new Gs({next:g=>{d.yu(),s.enqueueAndForget(()=>sw(o,f)),g.fromCache&&c.source==="server"?l.reject(new x(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new cu(a,d,{includeMetadataChanges:!0,Fa:!0});return ow(o,f)}(yield Ks(n),n.asyncQueue,e,t,r)})),r.promise}function Hq(n,e,t){let r=new Qe;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){try{let i=yield uM(n);r.resolve(function(s,a,c){return v(this,null,function*(){var l;let d=L(s),{request:f,yt:g,parent:m}=DP(d.serializer,XR(a),c);d.connection.Bo||delete f.parent;let I=(yield d.Wo("RunAggregationQuery",d.serializer.databaseId,m,f,1)).filter(P=>!!P.result);H(I.length===1,64727);let S=(l=I[0].result)===null||l===void 0?void 0:l.aggregateFields;return Object.keys(S).reduce((P,O)=>(P[g[O]]=S[O],P),{})})}(i,e,t))}catch(i){r.reject(i)}})),r.promise}function qq(n,e){let t=new Gs(e);return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(i,o){L(i).fa.add(o),o.next()}(yield Ks(n),t)})),()=>{t.yu(),n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(i,o){L(i).fa.delete(o)}(yield Ks(n),t)}))}}function zq(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?VE().encode(s):s,function(d,f){return new lE(d,f)}(function(d,f){if(d instanceof Uint8Array)return aR(d,f);if(d instanceof ArrayBuffer)return aR(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Eu(e));n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){Vq(yield pw(n),i,r)}))}function Wq(n,e){return n.asyncQueue.enqueue(()=>v(null,null,function*(){return function(r,i){let o=L(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.ci.getNamedQuery(s,i))}(yield oa(n),e)}))}function Gq(n,e){return n.asyncQueue.enqueue(()=>v(null,null,function*(){return function(r,i){return v(this,null,function*(){let o=L(r),s=o.indexManager,a=[];return o.persistence.runTransaction("Configure indexes","readwrite",c=>s.getFieldIndexes(c).next(l=>function(f,g,m,I,S){f=[...f],g=[...g],f.sort(m),g.sort(m);let P=f.length,O=g.length,j=0,B=0;for(;j<O&&B<P;){let Q=m(f[B],g[j]);Q<0?S(f[B++]):Q>0?I(g[j++]):(j++,B++)}for(;j<O;)I(g[j++]);for(;B<P;)S(f[B++])}(l,i,Y4,d=>{a.push(s.addFieldIndex(c,d))},d=>{a.push(s.deleteFieldIndex(c,d))})).next(()=>N.waitFor(a)))})}(yield oa(n),e)}))}function Kq(n,e){return n.asyncQueue.enqueue(()=>v(null,null,function*(){return function(r,i){L(r).bs.Is=i}(yield oa(n),e)}))}function Qq(n){return n.asyncQueue.enqueue(()=>v(null,null,function*(){return function(t){let r=L(t),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",o=>i.deleteAllFieldIndexes(o))}(yield oa(n))}))}function hM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var uR=new Map;function gw(n,e,t){if(!t)throw new x(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Yq(n,e,t,r){if(e===!0&&r===!0)throw new x(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lR(n){if(!U.isDocumentKey(n))throw new x(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dR(n){if(U.isDocumentKey(n))throw new x(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$(12329,{type:typeof n})}function ue(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Jf(n);throw new x(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fM(n,e){if(e<=0)throw new x(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var pM="firestore.googleapis.com",hR=!0,Mf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new x(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pM,this.ssl=hR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FP)throw new x(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Io=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new b_;switch(r.type){case"firstParty":return new N_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,rs("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=uR.get(t);r&&(k("ComponentProvider","Removing Datastore"),uR.delete(t),r.terminate())}(this),Promise.resolve()}};function mw(n,e,t,r={}){var i;n=ue(n,Io);let o=Pr(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s.host!==pM&&s.host!==c&&Jt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!xt(l,a)&&(n._setSettings(l),o&&(ic(`https://${c}`),rs("Firestore",!0)),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=Ke.MOCK_USER;else{d=K0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new x(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ke(g)}n._authCredentials=new C_(new Fh(d,f))}}var nt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$e=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Fn=class n extends nt{constructor(e,t,r){super(e,t,Xs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new U(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function gM(n,e,...t){if(n=fe(n),gw("collection","path",e),n instanceof Io){let r=ge.fromString(e,...t);return dR(r),new Fn(n,null,r)}{if(!(n instanceof $e||n instanceof Fn))throw new x(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ge.fromString(e,...t));return dR(r),new Fn(n.firestore,null,r)}}function mM(n,e){if(n=ue(n,Io),gw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new x(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new nt(n,null,function(r){return new hn(ge.emptyPath(),r)}(e))}function yw(n,e,...t){if(n=fe(n),arguments.length===1&&(e=Lh.newId()),gw("doc","path",e),n instanceof Io){let r=ge.fromString(e,...t);return lR(r),new $e(n,null,new U(r))}{if(!(n instanceof $e||n instanceof Fn))throw new x(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ge.fromString(e,...t));return lR(r),new $e(n.firestore,n instanceof Fn?n.converter:null,new U(r))}}function fi(n,e){return n=fe(n),e=fe(e),(n instanceof $e||n instanceof Fn)&&(e instanceof $e||e instanceof Fn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Xf(n,e){return n=fe(n),e=fe(e),n instanceof nt&&e instanceof nt&&n.firestore===e.firestore&&_u(n._query,e._query)&&n.converter===e.converter}var fR="AsyncQueue",xf=class{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new au(this,"async_queue_retry"),this.ju=()=>{let r=Oh();r&&k(fR,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;let t=Oh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;let t=Oh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});let t=new Qe;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){return v(this,null,function*(){if(this.Qu.length!==0){try{yield this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!ui(e))throw e;k(fR,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}})}Yu(e){let t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,je("INTERNAL UNHANDLED ERROR: ",pR(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);let i=eE.createAndSchedule(this,e,t,r,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&$(47125,{ec:pR(this.Ku)})}verifyOperationInProgress(){}tc(){return v(this,null,function*(){let e;do e=this.Hu,yield e;while(e!==this.Hu)})}nc(e){for(let t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){let t=this.Uu.indexOf(e);this.Uu.splice(t,1)}};function pR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function pE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var gE=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var QJ=-1,Ie=class extends Io{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new xf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new xf(e),this._firestoreClient=void 0,yield e}})}};function yM(n,e,t){t||(t=Gc);let r=xr(n,"firestore");if(r.isInitialized(t)){let i=r.getImmediate({identifier:t}),o=r.getOptions(t);if(xt(o,e))return i;throw new x(R.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new x(R.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FP)throw new x(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Pr(e.host)&&ic(e.host),r.initialize({options:e,instanceIdentifier:t})}function vM(n,e){let t=typeof n=="object"?n:Wi(),r=typeof n=="string"?n:e||Gc,i=xr(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=G0("firestore");o&&mw(i,...o)}return i}function xe(n){if(n._terminated)throw new x(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_M(n),n._firestoreClient}function _M(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,d){return new U_(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hM(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new fE(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function IM(n,e){Jt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return wM(n,ia.provider,{build:r=>new lu(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function EM(n){return v(this,null,function*(){Jt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();wM(n,ia.provider,{build:t=>new Pf(t,e.cacheSizeBytes)})})}function wM(n,e,t){if((n=ue(n,Ie))._firestoreClient||n._terminated)throw new x(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new x(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},_M(n)}function TM(n){if(n._initialized&&!n._terminated)throw new x(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Qe;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>v(null,null,function*(){try{yield function(r){return v(this,null,function*(){if(!Zr.C())return Promise.resolve();let i=r+jP;yield Zr.delete(i)})}(ew(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function DM(n){return function(t){let r=new Qe;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return Sq(yield pw(t),r)})),r.promise}(xe(n=ue(n,Ie)))}function bM(n){return jq(xe(n=ue(n,Ie)))}function CM(n){return Bq(xe(n=ue(n,Ie)))}function SM(n){return gS(n.app,"firestore",n._databaseId.database),n._delete()}function AM(n,e){let t=xe(n=ue(n,Ie)),r=new gE;return zq(t,n._databaseId,e,r),r}function NM(n,e){return Wq(xe(n=ue(n,Ie)),e).then(t=>t?new nt(n,null,t.query):null)}var Eo=class{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}},mE=class{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}};var Qs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(He.fromBase64String(e))}catch(t){throw new x(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var gr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};function RM(){return new gr(M_)}var mr=class{constructor(e){this._methodName=e}};var du=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}};var Ys=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var Zq=/^__.*__$/,yE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new pn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ni(e,this.data,t,this.fieldTransforms)}},kf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new pn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function PM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{oc:n})}}var Of=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this._c(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Ff(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(PM(this.oc)&&Zq.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}},vE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Eu(e)}dc(e,t,r,i=!1){return new Of({oc:e,methodName:t,Ec:r,path:Ye.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Do(n){let e=n._freezeSettings(),t=Eu(n._databaseId);return new vE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ep(n,e,t,r,i,o={}){let s=n.dc(o.merge||o.mergeFields?2:0,e,t,i);Iw("Data must be an object, but it was:",s,r);let a=kM(r,s),c,l;if(o.merge)c=new Wt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=fu(e,f,t);if(!s.contains(g))throw new x(R.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);FM(d,g)||d.push(g)}c=new Wt(d),l=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=s.fieldTransforms;return new yE(new ft(a),c,l)}var hu=class n extends mr{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function MM(n,e,t){return new Of({oc:3,Ec:e.settings.Ec,methodName:n._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var _E=class n extends mr{_toFieldTransform(e){return new mo(e.path,new ei)}isEqual(e){return e instanceof n}},IE=class n extends mr{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){let t=MM(this,e,!0),r=this.Ac.map(o=>bo(o,t)),i=new fr(r);return new mo(e.path,i)}isEqual(e){return e instanceof n&&xt(this.Ac,e.Ac)}},EE=class n extends mr{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){let t=MM(this,e,!0),r=this.Ac.map(o=>bo(o,t)),i=new pr(r);return new mo(e.path,i)}isEqual(e){return e instanceof n&&xt(this.Ac,e.Ac)}},wE=class n extends mr{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){let t=new ti(e.serializer,cP(e.serializer,this.Rc));return new mo(e.path,t)}isEqual(e){return e instanceof n&&this.Rc===e.Rc}};function vw(n,e,t,r){let i=n.dc(1,e,t);Iw("Data must be an object, but it was:",i,r);let o=[],s=ft.empty();li(r,(c,l)=>{let d=tp(e,c,t);l=fe(l);let f=i.hc(d);if(l instanceof hu)o.push(d);else{let g=bo(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Wt(o);return new kf(s,a,i.fieldTransforms)}function _w(n,e,t,r,i,o){let s=n.dc(1,e,t),a=[fu(e,r,t)],c=[i];if(o.length%2!=0)throw new x(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(fu(e,o[g])),c.push(o[g+1]);let l=[],d=ft.empty();for(let g=a.length-1;g>=0;--g)if(!FM(l,a[g])){let m=a[g],I=c[g];I=fe(I);let S=s.hc(m);if(I instanceof hu)l.push(m);else{let P=bo(I,S);P!=null&&(l.push(m),d.set(m,P))}}let f=new Wt(l);return new kf(d,f,s.fieldTransforms)}function xM(n,e,t,r=!1){return bo(t,n.dc(r?4:3,e))}function bo(n,e){if(OM(n=fe(n)))return Iw("Unsupported field value:",e,n),kM(n,e);if(n instanceof mr)return function(r,i){if(!PM(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=bo(a,i.Pc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Be.fromDate(r);return{timestampValue:js(i.serializer,o)}}if(r instanceof Be){let o=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:js(i.serializer,o)}}if(r instanceof du)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qs)return{bytesValue:yP(i.serializer,r._byteString)};if(r instanceof $e){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Tc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ZE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ys)return function(s,a){return{mapValue:{fields:{[zE]:{stringValue:WE},[ks]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Tc("VectorValues must only contain numeric values.");return YE(a.serializer,l)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${Jf(r)}`)}(n,e)}function kM(n,e){let t={};return VR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):li(n,(r,i)=>{let o=bo(i,e.uc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function OM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Be||n instanceof du||n instanceof Qs||n instanceof $e||n instanceof mr||n instanceof Ys)}function Iw(n,e,t){if(!OM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Jf(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function fu(n,e,t){if((e=fe(e))instanceof gr)return e._internalPath;if(typeof e=="string")return tp(n,e);throw Ff("Field path arguments must be of type string or ",n,!1,void 0,t)}var Jq=new RegExp("[~\\*/\\[\\]]");function tp(n,e,t){if(e.search(Jq)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gr(...e.split("."))._internalPath}catch{throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ff(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new x(R.INVALID_ARGUMENT,a+n+c)}function FM(n,e){return n.some(t=>t.isEqual(e))}var wo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new TE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(np("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},TE=class extends wo{data(){return super.data()}};function np(n,e){return typeof e=="string"?tp(n,e):e instanceof gr?e._internalPath:e._delegate._internalPath}function LM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pu=class{},To=class extends pu{};function VM(n,e,...t){let r=[];e instanceof pu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof Zs).length,a=o.filter(c=>c instanceof gu).length;if(s>1||s>0&&a>0)throw new x(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var gu=class n extends To{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return YM(e._query,t),new nt(e.firestore,e.converter,eI(e._query,t))}_parse(e){let t=Do(e.firestore);return function(o,s,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new x(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){mR(f,d);let I=[];for(let S of f)I.push(gR(c,o,S));g={arrayValue:{values:I}}}else g=gR(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||mR(f,d),g=xM(a,s,f,d==="in"||d==="not-in");return de.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function jM(n,e,t){let r=e,i=np("where",n);return gu._create(i,r,t)}var Zs=class n extends pu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:_e.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)YM(s,c),s=eI(s,c)}(e._query,t),new nt(e.firestore,e.converter,eI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function BM(...n){return n.forEach(e=>ZM("or",e)),Zs._create("or",n)}function UM(...n){return n.forEach(e=>ZM("and",e)),Zs._create("and",n)}var DE=class n extends To{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new x(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new x(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new po(o,s)}(e._query,this._field,this._direction);return new nt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new hn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function $M(n,e="asc"){let t=e,r=np("orderBy",n);return DE._create(r,t)}var Lf=class n extends To{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new nt(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}};function HM(n){return fM("limit",n),Lf._create("limit",n,"F")}function qM(n){return fM("limitToLast",n),Lf._create("limitToLast",n,"L")}var Vf=class n extends To{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=QM(e,this.type,this._docOrFields,this._inclusive);return new nt(e.firestore,e.converter,function(i,o){return new hn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function zM(...n){return Vf._create("startAt",n,!0)}function WM(...n){return Vf._create("startAfter",n,!1)}var jf=class n extends To{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=QM(e,this.type,this._docOrFields,this._inclusive);return new nt(e.firestore,e.converter,function(i,o){return new hn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function GM(...n){return jf._create("endBefore",n,!1)}function KM(...n){return jf._create("endAt",n,!0)}function QM(n,e,t,r){if(t[0]=fe(t[0]),t[0]instanceof wo)return function(o,s,a,c,l){if(!c)throw new x(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Ts(o))if(f.field.isKeyField())d.push(fo(s,c.key));else{let g=c.data.field(f.field);if(qf(g))throw new x(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new x(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new Vn(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Do(n.firestore);return function(s,a,c,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new x(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let I=0;I<d.length;I++){let S=d[I];if(g[I].field.isKeyField()){if(typeof S!="string")throw new x(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!KE(s)&&S.indexOf("/")!==-1)throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let P=s.path.child(ge.fromString(S));if(!U.isDocumentKey(P))throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);let O=new U(P);m.push(fo(a,O))}else{let P=xM(c,l,S);m.push(P)}}return new Vn(m,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function gR(n,e,t){if(typeof(t=fe(t))=="string"){if(t==="")throw new x(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KE(e)&&t.indexOf("/")!==-1)throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ge.fromString(t));if(!U.isDocumentKey(r))throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fo(n,new U(r))}if(t instanceof $e)return fo(n,t._key);throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(t)}.`)}function mR(n,e){if(!Array.isArray(n)||n.length===0)throw new x(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YM(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new x(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ZM(n,e){if(!(e instanceof gu||e instanceof Zs))throw new x(R.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}var Bf=class{convertValue(e,t="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return li(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ks].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new Ys(o)}convertGeoPoint(e){return new du(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=zf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wc(e));default:return null}}convertTimestamp(e){let t=dr(e);return new Be(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ge.fromString(e);H(AP(r),9688,{name:e});let i=new xs(r.get(1),r.get(3)),o=new U(r.popFirst(5));return i.isEqual(t)||je(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function rp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var bE=class extends Bf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,t)}};function JM(n){return new Eo("sum",fu("sum",n))}function YJ(n){return new Eo("avg",fu("average",n))}function Xq(){return new Eo("count")}function XM(n,e){var t,r;return n instanceof Eo&&e instanceof Eo&&n.aggregateType===e.aggregateType&&((t=n._internalFieldPath)===null||t===void 0?void 0:t.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function ex(n,e){return Xf(n.query,e.query)&&xt(n.data(),e.data())}var ur=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},si=class extends wo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new bs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(np("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},bs=class extends si{data(e={}){return super.data(e)}},ai=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ur(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bs(this._firestore,this._userDataWriter,r.key,r,new ur(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new bs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ur(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new bs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ur(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:e3(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function e3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:n})}}function tx(n,e){return n instanceof si&&e instanceof si?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ai&&e instanceof ai&&n._firestore===e._firestore&&Xf(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function nx(n){n=ue(n,$e);let e=ue(n.firestore,Ie);return lM(xe(e),n._key).then(t=>Ew(e,n,t))}var jn=class extends Bf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,t)}};function rx(n){n=ue(n,$e);let e=ue(n.firestore,Ie),t=xe(e),r=new jn(e);return Uq(t,n._key).then(i=>new si(e,r,n._key,i,new ur(i!==null&&i.hasLocalMutations,!0),n.converter))}function ix(n){n=ue(n,$e);let e=ue(n.firestore,Ie);return lM(xe(e),n._key,{source:"server"}).then(t=>Ew(e,n,t))}function ox(n){n=ue(n,nt);let e=ue(n.firestore,Ie),t=xe(e),r=new jn(e);return LM(n._query),dM(t,n._query).then(i=>new ai(e,r,n,i))}function sx(n){n=ue(n,nt);let e=ue(n.firestore,Ie),t=xe(e),r=new jn(e);return $q(t,n._query).then(i=>new ai(e,r,n,i))}function ax(n){n=ue(n,nt);let e=ue(n.firestore,Ie),t=xe(e),r=new jn(e);return dM(t,n._query,{source:"server"}).then(i=>new ai(e,r,n,i))}function cx(n,e,t){n=ue(n,$e);let r=ue(n.firestore,Ie),i=rp(n.converter,e,t);return Tu(r,[ep(Do(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Fe.none())])}function ux(n,e,t,...r){n=ue(n,$e);let i=ue(n.firestore,Ie),o=Do(i),s;return s=typeof(e=fe(e))=="string"||e instanceof gr?_w(o,"updateDoc",n._key,e,t,r):vw(o,"updateDoc",n._key,e),Tu(i,[s.toMutation(n._key,Fe.exists(!0))])}function lx(n){return Tu(ue(n.firestore,Ie),[new ri(n._key,Fe.none())])}function dx(n,e){let t=ue(n.firestore,Ie),r=yw(n),i=rp(n.converter,e);return Tu(t,[ep(Do(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Fe.exists(!1))]).then(()=>r)}function ip(n,...e){var t,r,i;n=fe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||pE(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(pE(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof $e)l=ue(n.firestore,Ie),d=Xs(n._key.path),c={next:f=>{e[s]&&e[s](Ew(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=ue(n,nt);l=ue(f.firestore,Ie),d=f._query;let g=new jn(l);c={next:m=>{e[s]&&e[s](new ai(l,g,f,m))},error:e[s+1],complete:e[s+2]},LM(n._query)}return function(g,m,I,S){let P=new Gs(S),O=new cu(m,P,I);return g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return ow(yield Ks(g),O)})),()=>{P.yu(),g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return sw(yield Ks(g),O)}))}}(xe(l),d,a,c)}function hx(n,e){return qq(xe(n=ue(n,Ie)),pE(e)?e:{next:e})}function Tu(n,e){return function(r,i){let o=new Qe;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return Tq(yield pw(r),i,o)})),o.promise}(xe(n),e)}function Ew(n,e,t){let r=t.docs.get(e._key),i=new jn(n);return new si(n,i,e._key,r,new ur(t.hasPendingWrites,t.fromCache),e.converter)}function op(n){return ww(n,{count:Xq()})}function ww(n,e){let t=ue(n.firestore,Ie),r=xe(t),i=LR(e,(o,s)=>new Xh(s,o.aggregateType,o._internalFieldPath));return Hq(r,n._query,i).then(o=>function(a,c,l){let d=new jn(a);return new mE(c,d,l)}(t,n,o))}var CE=class{constructor(e){this.kind="memory",this._onlineComponentProvider=ia.provider,e?.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new uu(void 0)}}toJSON(){return{kind:this.kind}}},SE=class{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=t3(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}},AE=class{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Yf.provider}toJSON(){return{kind:this.kind}}},NE=class{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new uu(e)}}toJSON(){return{kind:this.kind}}};function ZJ(){return new AE}function JJ(n){return new NE(n?.cacheSizeBytes)}function XJ(n){return new CE(n)}function eX(n){return new SE(n)}var RE=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ia.provider,this._offlineComponentProvider={build:t=>new lu(t,e?.cacheSizeBytes,this.forceOwnership)}}},PE=class{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ia.provider,this._offlineComponentProvider={build:t=>new Pf(t,e?.cacheSizeBytes)}}};function t3(n){return new RE(n?.forceOwnership)}function tX(){return new PE}var n3={maxAttempts:5};var ME=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Do(e)}set(e,t,r){this._verifyNotCommitted();let i=Gr(e,this._firestore),o=rp(i.converter,t,r),s=ep(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Fe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Gr(e,this._firestore),s;return s=typeof(t=fe(t))=="string"||t instanceof gr?_w(this._dataReader,"WriteBatch.update",o._key,t,r,i):vw(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Fe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Gr(e,this._firestore);return this._mutations=this._mutations.concat(new ri(t._key,Fe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new x(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Gr(n,e){if((n=fe(n)).firestore!==e)throw new x(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var xE=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Do(e)}get(e){let t=Gr(e,this._firestore),r=new bE(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return $(24041);let o=i[0];if(o.isFoundDocument())return new wo(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new wo(this._firestore,r,t._key,null,t.converter);throw $(18433,{doc:o})})}set(e,t,r){let i=Gr(e,this._firestore),o=rp(i.converter,t,r),s=ep(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Gr(e,this._firestore),s;return s=typeof(t=fe(t))=="string"||t instanceof gr?_w(this._dataReader,"Transaction.update",o._key,t,r,i):vw(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Gr(e,this._firestore);return this._transaction.delete(t._key),this}};var kE=class extends xE{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Gr(e,this._firestore),r=new jn(this._firestore);return super.get(e).then(i=>new si(this._firestore,r,t._key,i._document,new ur(!1,!1),t.converter))}};function fx(n,e,t){n=ue(n,Ie);let r=Object.assign(Object.assign({},n3),t);return function(o){if(o.maxAttempts<1)throw new x(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Qe;return o.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){let l=yield uM(o);new hE(o.asyncQueue,l,a,s,c).Nu()})),c.promise}(xe(n),i=>e(new kE(n,i)),r)}function px(){return new hu("deleteField")}function nX(){return new _E("serverTimestamp")}function rX(...n){return new IE("arrayUnion",n)}function iX(...n){return new EE("arrayRemove",n)}function gx(n){return new wE("increment",n)}function mx(n){return new Ys(n)}function yx(n){return xe(n=ue(n,Ie)),new ME(n,e=>Tu(n,e))}function vx(n,e){let t=xe(n=ue(n,Ie));if(!t._uninitializedComponentsProvider||t._uninitializedComponentsProvider._offline.kind==="memory")return Jt("Cannot enable indexes when persistence is disabled"),Promise.resolve();let r=function(o){let s=typeof o=="string"?function(l){try{return JSON.parse(l)}catch(d){throw new x(R.INVALID_ARGUMENT,"Failed to parse JSON: "+d?.message)}}(o):o,a=[];if(Array.isArray(s.indexes))for(let c of s.indexes){let l=yR(c,"collectionGroup"),d=[];if(Array.isArray(c.fields))for(let f of c.fields){let g=tp("setIndexConfiguration",yR(f,"fieldPath"));f.arrayConfig==="CONTAINS"?d.push(new lr(g,2)):f.order==="ASCENDING"?d.push(new lr(g,0)):f.order==="DESCENDING"&&d.push(new lr(g,1))}a.push(new Yr(Yr.UNKNOWN_ID,l,d,As.empty()))}return a}(e);return Gq(t,r)}function yR(n,e){if(typeof n[e]!="string")throw new x(R.INVALID_ARGUMENT,"Missing string value for: "+e);return n[e]}var OE=class{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}};function _x(n){var e;n=ue(n,Ie);let t=vR.get(n);if(t)return t;if(((e=xe(n)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;let r=new OE(n);return vR.set(n,r),r}function Ix(n){Tx(n,!0)}function Ex(n){Tx(n,!1)}function wx(n){Qq(xe(n._firestore)).then(e=>k("deleting all persistent cache indexes succeeded")).catch(e=>Jt("deleting all persistent cache indexes failed",e))}function Tx(n,e){Kq(xe(n._firestore),e).then(t=>k(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(t=>Jt(`setting persistent cache index auto creation isEnabled=${e} failed`,t))}var vR=new WeakMap;function oX(n){var e;let t=(e=xe(ue(n.firestore,Ie))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return t===void 0?null:Gf(t,gt(n._query)).gt}function sX(n,e){var t;let r=LR(e,(o,s)=>new Xh(s,o.aggregateType,o._internalFieldPath)),i=(t=xe(ue(n.firestore,Ie))._onlineComponents)===null||t===void 0?void 0:t.datastore.serializer;return i===void 0?null:DP(i,XR(n._query),r,!0).request}var _R=class{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return FE.instance.onExistenceFilterMismatch(e)}},FE=class n{constructor(){this.Vc=new Map}static get instance(){return Ah||(Ah=new n,function(t){if(ef)throw new Error("a TestingHooksSpi instance is already set");ef=t}(Ah)),Ah}ht(e){this.Vc.forEach(t=>t(e))}onExistenceFilterMismatch(e){let t=Symbol(),r=this.Vc;return r.set(t,e),()=>r.delete(t)}},Ah=null;(function(e,t=!0){(function(i){Js=i})(kr),an(new wt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ie(new S_(r.getProvider("auth-internal")),new R_(s,r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new x(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xs(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Me(rN,iN,e),Me(rN,iN,"esm2017")})();var sp=function(){return sp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},sp.apply(this,arguments)};function bw(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var r3={includeMetadataChanges:!1};function Du(n,e){return e===void 0&&(e=r3),new ne(function(t){var r=ip(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Cw(n){return Du(n,{includeMetadataChanges:!0})}function Dx(n,e){return e===void 0&&(e={}),Cw(n).pipe(St(function(t){return ap(t,e)}))}function ap(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:sp(sp({},r),(t={},t[e.idField]=n.id,t))}var bx=["added","modified","removed"],i3=function(n){return yn(function(e){for(var t=!1,r=0;r<e.length;r++){var i=e[r];if(n&&n.indexOf(i.type)>=0){t=!0;break}}return t})};function Tw(n,e,t){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=n.slice();return o.splice.apply(o,bw([e,t],r,!1)),o}function o3(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&fi(n[e.newIndex].doc.ref,e.doc.ref)))return Tw(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||fi(n[e.oldIndex].doc.ref,e.doc.ref))if(e.oldIndex!==e.newIndex){var t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Tw(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&fi(n[e.oldIndex].doc.ref,e.doc.ref))return Tw(n,e.oldIndex,1);break}return n}function s3(n,e,t){return t===void 0&&(t=bx),e.forEach(function(r){t.indexOf(r.type)>-1&&(n=o3(n,r))}),n}var Cx=function(){return tl(Ig(void 0),vg())},Dw=function(n,e){return JSON.stringify(n.metadata)===JSON.stringify(e.metadata)},a3=function(){return tl(Cx(),yn(function(n){var e=n[0],t=n[1];return t.length>0||e===void 0}),St(function(n){var e=n[1];return e}))};function cp(n,e){return e===void 0&&(e={}),Du(n,{includeMetadataChanges:!0}).pipe(Cx(),St(function(t){var r=t[0],i=t[1],o=i.docChanges();return r&&!Dw(r,i)&&i.docs.forEach(function(s,a){var c=o.find(function(d){return fi(d.doc.ref,s.ref)});if(c){if(Dw(c.doc,s))return}else{var l=r?.docs.find(function(d){return fi(d.ref,s.ref)});if(l&&Dw(l,s))return}o.push({oldIndex:a,newIndex:a,type:"modified",doc:s})}),o}),i3(e.events||bx),a3())}function Sw(n){return Du(n,{includeMetadataChanges:!0}).pipe(St(function(e){return e.docs}))}function Sx(n,e){return e===void 0&&(e={}),cp(n,e).pipe(Tl(function(t,r){return s3(t,r,e.events)},[]),mg())}function Ax(n,e){return e===void 0&&(e={}),cp(n,e).pipe(Tl(function(t,r){return bw(bw([],t,!0),r,!0)},[]))}function Nx(n,e){return e===void 0&&(e={}),Sw(n).pipe(St(function(t){return t.map(function(r){return ap(r,e)})}))}function Aw(n){return Ct(op(n))}function Rx(n){return Aw(n).pipe(St(function(e){return e.data().count}))}var bu=class{constructor(e){return e}},Rw="firestore",Nw=class{constructor(){return Ki(Rw)}},CX=xa(0,300).pipe(fg(()=>Ct(Ki(Rw))),gg()),Pw=new ee("angularfire2.firestore-instances");function c3(n,e){let t=cc(Rw,n,e);return t&&new bu(t)}function u3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new bu(r)}}var Px={provide:Nw,deps:[[new Ut,Pw]]},Mx={provide:bu,useFactory:c3,deps:[[new Ut,Pw],tr]},SX=(()=>{class n{constructor(){Me("angularfire",er.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Rd({type:n});static \u0275inj=sd({providers:[Mx,Px]})}return n})();function AX(n,...e){return Me("angularfire",er.full,"fst"),Rr([Mx,Px,{provide:Pw,useFactory:u3(n),multi:!0,deps:[Re,ut,Or,Qi,[new Ut,Cc],[new Ut,us],...e]}])}var NX=F(Ax,!0),RX=F(Sw,!0),PX=F(cp,!0),MX=F(Rx,!0),xX=F(Aw,!0),kX=F(Nx,!0),OX=F(Cw,!0),FX=F(Dx,!0),LX=F(Du,!0),VX=F(ap,!0),jX=F(Sx,!0),BX=F(dx,!0,2),UX=F(XM,!0,2),$X=F(ex,!0,2),HX=F(UM,!0,2),qX=F(TM,!0),zX=F(gM,!0,2),WX=F(mM,!0,2),GX=F(mw,!0),KX=F(wx,!0),QX=F(lx,!0,2),YX=F(px,!0,2),ZX=F(CM,!0),JX=F(Ex,!0),XX=F(yw,!0,2),eee=F(RM,!0,2),tee=F(IM,!0),nee=F(EM,!0),ree=F(bM,!0),iee=F(Ix,!0),oee=F(KM,!0,2),see=F(GM,!0,2),aee=F(ww,!0),cee=F(op,!0),uee=F(nx,!0),lee=F(rx,!0),dee=F(ix,!0),hee=F(ox,!0),fee=F(sx,!0),pee=F(ax,!0),gee=F(vM,!0),mee=F(_x,!0),yee=F(gx,!0,2),vee=F(yM,!0),_ee=F(HM,!0,2),Iee=F(qM,!0,2),Eee=F(AM,!0),wee=F(NM,!0,2),Tee=F(ip,!0),Dee=F(hx,!0),bee=F(BM,!0,2),Cee=F($M,!0,2),See=F(VM,!0,2),Aee=F(Xf,!0,2),Nee=F(fi,!0,2),Ree=F(fx,!0),Pee=F(cx,!0,2),Mee=F(vx,!0),xee=F(IR,!0),kee=F(tx,!0,2),Oee=F(WM,!0,2),Fee=F(zM,!0,2),Lee=F(JM,!0,2),Vee=F(SM,!0),jee=F(ux,!0,2),Bee=F(mx,!0,2),Uee=F(DM,!0),$ee=F(jM,!0,2),Hee=F(yx,!0,2);export{Tt as a,Dt as b,l3 as c,v as d,qe as e,tl as f,ne as g,sg as h,ag as i,Kt as j,Ra as k,wi as l,Ct as m,Vk as n,jk as o,Bk as p,Di as q,St as r,Kk as s,bi as t,Ma as u,El as v,Yk as w,Zk as x,Jk as y,yn as z,Xk as A,hD as B,fg as C,e1 as D,ka as E,pg as F,mg as G,r1 as H,i1 as I,yg as J,o1 as K,Tl as L,s1 as M,a1 as N,Ig as O,c1 as P,u1 as Q,l1 as R,oe as S,cb as T,ve as U,sd as V,k7 as W,ee as X,ae as Y,tt as Z,z as _,Rr as $,j1 as aa,Db as ba,_n as ca,Yo as da,Y1 as ea,O7 as fa,F7 as ga,L7 as ha,sC as ia,ut as ja,AD as ka,Id as la,Ya as ma,Cr as na,Re as oa,Vi as pa,V7 as qa,Hi as ra,YO as sa,j7 as ta,rF as ua,oF as va,cy as wa,B7 as xa,U7 as ya,wd as za,Za as Aa,hF as Ba,fF as Ca,Ha as Da,Ja as Ea,CC as Fa,$7 as Ga,H7 as Ha,q7 as Ia,z7 as Ja,W7 as Ka,SC as La,G7 as Ma,dy as Na,K7 as Oa,Q7 as Pa,Jl as Qa,ed as Ra,Cy as Sa,lt as Ta,nK as Ua,ns as Va,Go as Wa,BV as Xa,UV as Ya,sK as Za,Rd as _a,Pd as $a,QV as ab,s2 as bb,aK as cb,Py as db,cK as eb,d2 as fb,za as gb,m2 as hb,N2 as ib,R2 as jb,P2 as kb,uK as lb,R0 as mb,P0 as nb,$2 as ob,z2 as pb,W2 as qb,lK as rb,tj as sb,dK as tb,hK as ub,fK as vb,oj as wb,pK as xb,gK as yb,mK as zb,yK as Ab,vK as Bb,cj as Cb,x0 as Db,uj as Eb,lj as Fb,dj as Gb,_K as Hb,hj as Ib,IK as Jb,EK as Kb,wK as Lb,TK as Mb,DK as Nb,bK as Ob,CK as Pb,V0 as Qb,SK as Rb,AK as Sb,U0 as Tb,NK as Ub,kj as Vb,$0 as Wb,Oj as Xb,RK as Yb,PK as Zb,uc as _b,Hd as $b,iU as ac,iv as bc,oU as cc,cs as dc,DS as ec,bS as fc,uU as gc,RU as hc,qS as ic,PU as jc,xU as kc,kU as lc,OU as mc,VU as nc,jU as oc,KS as pc,BU as qc,UU as rc,hv as sc,rZ as tc,xQ as uc,kQ as vc,UA as wc,bc as xc,DJ as yc,bJ as zc,CJ as Ac,SJ as Bc,AJ as Cc,NJ as Dc,RJ as Ec,PJ as Fc,MJ as Gc,xJ as Hc,Jt as Ic,WJ as Jc,x as Kc,b_ as Lc,oN as Mc,Lh as Nc,Be as Oc,Ye as Pc,U as Qc,KJ as Rc,He as Sc,xs as Tc,Yq as Uc,ue as Vc,nt as Wc,$e as Xc,Fn as Yc,gE as Zc,QJ as _c,xe as $c,Eo as ad,mE as bd,Qs as cd,gr as dd,mr as ed,du as fd,Ys as gd,To as hd,gu as id,Zs as jd,DE as kd,Lf as ld,Vf as md,jf as nd,Bf as od,YJ as pd,Xq as qd,ur as rd,si as sd,bs as td,ai as ud,Tu as vd,ZJ as wd,JJ as xd,XJ as yd,eX as zd,t3 as Ad,tX as Bd,ME as Cd,kE as Dd,nX as Ed,rX as Fd,iX as Gd,OE as Hd,oX as Id,sX as Jd,_R as Kd,bu as Ld,Nw as Md,CX as Nd,SX as Od,AX as Pd,NX as Qd,RX as Rd,PX as Sd,MX as Td,xX as Ud,kX as Vd,OX as Wd,FX as Xd,LX as Yd,VX as Zd,jX as _d,BX as $d,UX as ae,$X as be,HX as ce,qX as de,zX as ee,WX as fe,GX as ge,KX as he,QX as ie,YX as je,ZX as ke,JX as le,XX as me,eee as ne,tee as oe,nee as pe,ree as qe,iee as re,oee as se,see as te,aee as ue,cee as ve,uee as we,lee as xe,dee as ye,hee as ze,fee as Ae,pee as Be,gee as Ce,mee as De,yee as Ee,vee as Fe,_ee as Ge,Iee as He,Eee as Ie,wee as Je,Tee as Ke,Dee as Le,bee as Me,Cee as Ne,See as Oe,Aee as Pe,Nee as Qe,Ree as Re,Pee as Se,Mee as Te,xee as Ue,kee as Ve,Oee as We,Fee as Xe,Lee as Ye,Vee as Ze,jee as _e,Bee as $e,Uee as af,$ee as bf,Hee as cf};
