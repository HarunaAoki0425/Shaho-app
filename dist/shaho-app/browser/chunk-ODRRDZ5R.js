import{d as U,f as L,g as Y,i as q}from"./chunk-YD33KHPN.js";import{A as Q,F as V,I as E,M as k,Q as W,k as w,l as z,m as $,n as j,w as J}from"./chunk-GWX46VZL.js";import{Db as G,Eb as m,Lb as K,Mb as o,Nb as D,Ob as I,Pb as x,Vb as O,Wb as R,Xa as t,Xb as b,Zb as h,_b as H,d as T,da as F,gb as B,lb as u,sb as p,vb as l,wb as a,xb as S,yb as y,zb as s}from"./chunk-T5GPIMBU.js";var ne=n=>["/employee-edit",n],te=()=>["combinedStdSalaryKenpo","combinedStdSalaryNenkin","salaryCash","salaryInKind","salaryTotal","combinedSalary"],ie=()=>["combinedStdSalaryKenpo","combinedStdSalaryNenkin","salaryCash","salaryInKind","salaryTotal","combinedSalary","combinedStdSalaryKenpoGrade","combinedStdSalaryNenkinGrade"];function ae(n,r){n&1&&(l(0,"div",15),o(1," \u203B\u672A\u901A\u77E5\u306E\u6A19\u6E96\u5831\u916C\u6708\u984D\u306F\u66AB\u5B9A\u5024\u3067\u3059\u203B"),S(2,"br"),o(3," \u901A\u77E5\u3092\u53D7\u3051\u53D6\u308A\u6B21\u7B2C\u6B63\u5F0F\u306A\u6A19\u6E96\u5831\u916C\u6708\u984D\u3092\u5165\u529B\u3057\u3001\u518D\u8A08\u7B97\u3057\u3066\u304F\u3060\u3055\u3044\u3002 "),a())}function oe(n,r){if(n&1&&(y(0),l(1,"span"),o(2),b(3,"number"),a(),s()),n&2){let e=m(5);t(2),x("",h(3,2,e.autoStdSalaryHealth,"1.0-0"),"\u5186\uFF08\u7B49\u7D1A: ",e.autoStdSalaryHealthGrade,"\uFF09")}}function le(n,r){if(n&1&&(l(0,"div",20)(1,"div",21),o(2,"\u6A19\u6E96\u5831\u916C\u6708\u984D"),S(3,"br"),o(4,"(\u5065\u5EB7\u4FDD\u967A\u30FB\u4ECB\u8B77\u4FDD\u967A)\u203B\u672A\u901A\u77E5"),a(),l(5,"div",22),u(6,oe,4,5,"ng-container",11),a()()),n&2){let e=m(4);t(6),p("ngIf",e.autoStdSalaryHealth&&e.autoStdSalaryHealthGrade)}}function de(n,r){if(n&1&&(l(0,"div",23)(1,"div",21),o(2),a(),l(3,"div",22),o(4),b(5,"number"),a()()),n&2){let e=m(2).$implicit,d=m(2);t(2),D(e.label),t(2),x("",h(5,3,d.employee.stdSalaryHealth,"1.0-0"),"\u5186\uFF08\u7B49\u7D1A\uFF1A",d.employee.stdSalaryHealthGrade,"\uFF09")}}function re(n,r){if(n&1&&(y(0),u(1,le,7,1,"div",18)(2,de,6,6,"div",19),s()),n&2){let e=m(3);t(),p("ngIf",(!e.employee.stdSalaryHealth||e.employee.stdSalaryHealth===""||e.employee.stdSalaryHealth===null)&&(!e.employee.stdSalaryHealthGrade||e.employee.stdSalaryHealthGrade===""||e.employee.stdSalaryHealthGrade===null)),t(),p("ngIf",e.employee.stdSalaryHealth&&e.employee.stdSalaryHealthGrade)}}function me(n,r){if(n&1&&(y(0),l(1,"span"),o(2),b(3,"number"),a(),s()),n&2){let e=m(5);t(2),x("",h(3,2,e.autoStdSalaryPension,"1.0-0"),"\u5186\uFF08\u7B49\u7D1A: ",e.autoStdSalaryPensionGrade,"\uFF09")}}function pe(n,r){if(n&1&&(l(0,"div",20)(1,"div",21),o(2,"\u6A19\u6E96\u5831\u916C\u6708\u984D(\u539A\u751F\u5E74\u91D1)\u203B\u672A\u901A\u77E5"),a(),l(3,"div",22),u(4,me,4,5,"ng-container",11),a()()),n&2){let e=m(4);t(4),p("ngIf",e.autoStdSalaryPension&&e.autoStdSalaryPensionGrade)}}function ce(n,r){if(n&1&&(l(0,"div",23)(1,"div",21),o(2),a(),l(3,"div",22),o(4),b(5,"number"),a()()),n&2){let e=m(2).$implicit,d=m(2);t(2),D(e.label),t(2),x("",h(5,3,d.employee.stdSalaryPension,"1.0-0"),"\u5186\uFF08\u7B49\u7D1A\uFF1A",d.employee.stdSalaryPensionGrade,"\uFF09")}}function ue(n,r){if(n&1&&(y(0),u(1,pe,5,1,"div",18)(2,ce,6,6,"div",19),s()),n&2){let e=m(3);t(),p("ngIf",(!e.employee.stdSalaryPension||e.employee.stdSalaryPension===""||e.employee.stdSalaryPension===null)&&(!e.employee.stdSalaryPensionGrade||e.employee.stdSalaryPensionGrade===""||e.employee.stdSalaryPensionGrade===null)),t(),p("ngIf",e.employee.stdSalaryPension&&e.employee.stdSalaryPensionGrade)}}function ye(n,r){if(n&1&&(y(0),l(1,"span"),o(2),b(3,"number"),a(),s()),n&2){let e=m(5);t(2),x("",h(3,2,e.autoCombinedStdSalaryKenpo,"1.0-0"),"\u5186\uFF08\u7B49\u7D1A: ",e.autoCombinedStdSalaryKenpoGrade,"\uFF09")}}function se(n,r){if(n&1&&(l(0,"div",20)(1,"div",21),o(2,"\u5408\u7B97\u6A19\u6E96\u5831\u916C\u6708\u984D"),S(3,"br"),o(4,"(\u5065\u5EB7\u4FDD\u967A\u30FB\u4ECB\u8B77\u4FDD\u967A)\u203B\u672A\u901A\u77E5"),a(),l(5,"div",22),u(6,ye,4,5,"ng-container",11),a()()),n&2){let e=m(4);t(6),p("ngIf",e.autoCombinedStdSalaryKenpo&&e.autoCombinedStdSalaryKenpoGrade)}}function _e(n,r){if(n&1&&(l(0,"div",23)(1,"div",21),o(2),a(),l(3,"div",22),o(4),b(5,"number"),a()()),n&2){let e=m(2).$implicit,d=m(2);t(2),D(e.label),t(2),x("",h(5,3,d.employee.combinedStdSalaryKenpo,"1.0-0"),"\u5186\uFF08\u7B49\u7D1A\uFF1A",d.employee.combinedStdSalaryKenpoGrade,"\uFF09")}}function ge(n,r){if(n&1&&(y(0),u(1,se,7,1,"div",18)(2,_e,6,6,"div",19),s()),n&2){let e=m(3);t(),p("ngIf",(!e.employee.combinedStdSalaryKenpo||e.employee.combinedStdSalaryKenpo===""||e.employee.combinedStdSalaryKenpo===null)&&(!e.employee.combinedStdSalaryKenpoGrade||e.employee.combinedStdSalaryKenpoGrade===""||e.employee.combinedStdSalaryKenpoGrade===null)),t(),p("ngIf",e.employee.combinedStdSalaryKenpo&&e.employee.combinedStdSalaryKenpoGrade)}}function fe(n,r){if(n&1&&(y(0),l(1,"span"),o(2),b(3,"number"),a(),s()),n&2){let e=m(5);t(2),x("",h(3,2,e.autoCombinedStdSalaryNenkin,"1.0-0"),"\u5186\uFF08\u7B49\u7D1A: ",e.autoCombinedStdSalaryNenkinGrade,"\uFF09")}}function Se(n,r){if(n&1&&(l(0,"div",20)(1,"div",21),o(2,"\u5408\u7B97\u6A19\u6E96\u5831\u916C\u6708\u984D"),S(3,"br"),o(4,"(\u539A\u751F\u5E74\u91D1)\u203B\u672A\u901A\u77E5"),a(),l(5,"div",22),u(6,fe,4,5,"ng-container",11),a()()),n&2){let e=m(4);t(6),p("ngIf",e.autoCombinedStdSalaryNenkin&&e.autoCombinedStdSalaryNenkinGrade)}}function xe(n,r){if(n&1&&(l(0,"div",23)(1,"div",21),o(2),a(),l(3,"div",22),o(4),b(5,"number"),a()()),n&2){let e=m(2).$implicit,d=m(2);t(2),D(e.label),t(2),x("",h(5,3,d.employee.combinedStdSalaryNenkin,"1.0-0"),"\u5186\uFF08\u7B49\u7D1A\uFF1A",d.employee.combinedStdSalaryNenkinGrade,"\uFF09")}}function be(n,r){if(n&1&&(y(0),u(1,Se,7,1,"div",18)(2,xe,6,6,"div",19),s()),n&2){let e=m(3);t(),p("ngIf",(!e.employee.combinedStdSalaryNenkin||e.employee.combinedStdSalaryNenkin===""||e.employee.combinedStdSalaryNenkin===null)&&(!e.employee.combinedStdSalaryNenkinGrade||e.employee.combinedStdSalaryNenkinGrade===""||e.employee.combinedStdSalaryNenkinGrade===null)),t(),p("ngIf",e.employee.combinedStdSalaryNenkin&&e.employee.combinedStdSalaryNenkinGrade)}}function he(n,r){if(n&1&&(y(0),o(1),s()),n&2){let e=m(5);t(),x(" ",e.employee.lastName||""," ",e.employee.firstName||""," ")}}function Ce(n,r){if(n&1&&(y(0),o(1),s()),n&2){let e=m(5);t(),I(" ",e.employee.dependentRelations.join?e.employee.dependentRelations.join("\u3001"):e.employee.dependentRelations," ")}}function ve(n,r){if(n&1&&(y(0),o(1),b(2,"number"),s()),n&2){let e=m(4).$implicit,d=m(2);t(),I(" ",h(2,1,d.employee[e.key],"1.0-0"),"\u5186 ")}}function Ee(n,r){if(n&1&&(y(0),o(1),s()),n&2){let e=m(7);t(),I(" ",e.displayEmploymentType," ")}}function ke(n,r){if(n&1&&o(0),n&2){let e=m(5).$implicit,d=m(2);I(" ",d.employee[e.key]," ")}}function De(n,r){if(n&1&&(y(0),u(1,Ee,2,1,"ng-container",24)(2,ke,1,1,"ng-template",null,0,H),s()),n&2){let e=K(3),d=m(4).$implicit;t(),p("ngIf",d.key==="employmentType")("ngIfElse",e)}}function Pe(n,r){if(n&1&&(y(0),u(1,ve,3,4,"ng-container",11)(2,De,4,2,"ng-container",11),s()),n&2){let e=m(3).$implicit;t(),p("ngIf",O(2,te).includes(e.key)),t(),p("ngIf",!O(3,ie).includes(e.key))}}function Fe(n,r){if(n&1&&(l(0,"div",23)(1,"div",21),o(2),a(),l(3,"div",22),u(4,he,2,2,"ng-container",11)(5,Ce,2,1,"ng-container",11)(6,Pe,3,4,"ng-container",11),a()()),n&2){let e=m(2).$implicit,d=m(2);t(2),D(e.label),t(2),p("ngIf",e.key==="lastName"),t(),p("ngIf",e.key==="dependentRelations"&&d.employee.dependentRelations),t(),p("ngIf",e.key!=="lastName"&&e.key!=="dependentRelations")}}function Ie(n,r){if(n&1&&(l(0,"div",23)(1,"div",21),o(2,"\u5E74\u9F62"),a(),l(3,"div",22),o(4),a()()),n&2){let e=m(4);t(4),D(e.currentAge)}}function Me(n,r){if(n&1&&(y(0),u(1,Fe,7,4,"div",19)(2,Ie,5,1,"div",19),s()),n&2){let e=m().$implicit,d=m(2);t(),p("ngIf",e.key==="leaveDate"?!0:d.employee[e.key]!==null&&d.employee[e.key]!==void 0&&d.employee[e.key]!==""&&!(e.key==="dependentRelations"&&(!d.employee.dependentRelations||d.employee.dependentRelations.length===0))),t(),p("ngIf",e.key==="birthdate"&&d.currentAge!==null)}}function Oe(n,r){if(n&1&&(y(0),u(1,re,3,2,"ng-container",11)(2,ue,3,2,"ng-container",11)(3,ge,3,2,"ng-container",11)(4,be,3,2,"ng-container",11)(5,Me,3,2,"ng-container",11),s()),n&2){let e=r.$implicit,d=m(2);t(),p("ngIf",e.key==="stdSalaryHealth"),t(),p("ngIf",e.key==="stdSalaryPension"),t(),p("ngIf",e.key==="combinedStdSalaryKenpo"&&d.employee.multiOffice==="\u4E8C\u4EE5\u4E0A\u4E8B\u696D\u6240\u52E4\u52D9"),t(),p("ngIf",e.key==="combinedStdSalaryNenkin"&&d.employee.multiOffice==="\u4E8C\u4EE5\u4E0A\u4E8B\u696D\u6240\u52E4\u52D9"),t(),p("ngIf",e.key!=="stdSalaryHealth"&&e.key!=="stdSalaryPension"&&e.key!=="combinedStdSalaryKenpo"&&e.key!=="combinedStdSalaryNenkin")}}function Ae(n,r){if(n&1&&(l(0,"div")(1,"div",16),u(2,Oe,6,5,"ng-container",17),a()()),n&2){let e=m();t(2),p("ngForOf",e.displayFields)}}function Ne(n,r){n&1&&(l(0,"div")(1,"p"),o(2,"\u5F93\u696D\u54E1\u30C7\u30FC\u30BF\u3092\u53D6\u5F97\u4E2D..."),a()())}var X=class n{currentUser=null;employee=null;autoStdSalaryHealth=null;autoStdSalaryHealthGrade=null;autoStdSalaryPension=null;autoStdSalaryPensionGrade=null;autoCombinedStdSalaryKenpo=null;autoCombinedStdSalaryKenpoGrade=null;autoCombinedStdSalaryNenkin=null;autoCombinedStdSalaryNenkinGrade=null;currentAge=null;auth=F(J);route=F(U);firestore=F(V);router=F(L);displayFields=[{key:"managementNumber",label:"\u7BA1\u7406\u756A\u53F7"},{key:"lastName",label:"\u6C0F\u540D"},{key:"gender",label:"\u6027\u5225"},{key:"birthdate",label:"\u751F\u5E74\u6708\u65E5"},{key:"nationality",label:"\u56FD\u7C4D"},{key:"officeName",label:"\u4E8B\u696D\u6240"},{key:"employmentType",label:"\u96C7\u7528\u5F62\u614B"},{key:"employmentPeriodType",label:"\u96C7\u7528\u5951\u7D04\u671F\u9593"},{key:"employmentPeriodStart",label:"\u5951\u7D04\u958B\u59CB\u65E5"},{key:"employmentPeriodEnd",label:"\u5951\u7D04\u7D42\u4E86\u65E5"},{key:"workDays",label:"\u6240\u5B9A\u52B4\u50CD\u65E5\u6570\uFF08\u6708\uFF09"},{key:"workHours",label:"\u6240\u5B9A\u52B4\u50CD\u6642\u9593\uFF08\u9031\uFF09"},{key:"salaryCash",label:"\u5831\u916C\u6708\u984D\uFF08\u901A\u8CA8\uFF09"},{key:"salaryInKind",label:"\u5831\u916C\u6708\u984D\uFF08\u73FE\u7269\uFF09"},{key:"salaryTotal",label:"\u5831\u916C\u6708\u984D\uFF08\u5408\u8A08\uFF09"},{key:"stdSalaryHealth",label:"\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u5065\u5EB7\u4FDD\u967A\u30FB\u4ECB\u8B77\u4FDD\u967A\uFF09"},{key:"stdSalaryPension",label:"\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u539A\u751F\u5E74\u91D1\uFF09"},{key:"joinDate",label:"\u8CC7\u683C\u53D6\u5F97\u5E74\u6708\u65E5\uFF08\u5165\u793E\u65E5\uFF09"},{key:"leaveDate",label:"\u8CC7\u683C\u55AA\u5931\u5E74\u6708\u65E5\uFF08\u9000\u8077\u65E5\uFF09"},{key:"isStudent",label:"\u5B66\u751F\u533A\u5206"},{key:"multiOffice",label:"\u4E8C\u4EE5\u4E0A\u4E8B\u696D\u6240\u52E4\u52D9\u533A\u5206"},{key:"selectedOfficeType",label:"\u9078\u629E\u4E8B\u696D\u6240\uFF0F\u975E\u9078\u629E\u4E8B\u696D\u6240"},{key:"combinedSalary",label:"\u5408\u7B97\u5831\u916C\u6708\u984D\uFF08\u901A\u8CA8\uFF0B\u73FE\u7269\uFF09"},{key:"combinedStdSalaryKenpo",label:"\u5408\u7B97\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u5065\u5EB7\u4FDD\u967A\u30FB\u4ECB\u8B77\u4FDD\u967A\uFF09"},{key:"combinedStdSalaryNenkin",label:"\u5408\u7B97\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u539A\u751F\u5E74\u91D1\uFF09"},{key:"dependentStatus",label:"\u88AB\u6276\u990A\u8005\u306E\u6709\u7121"},{key:"dependentRelations",label:"\u88AB\u6276\u990A\u8005\u7D9A\u67C4"},{key:"dispatchedAbroad",label:"\u5916\u56FD\u6D3E\u9063\u52B4\u50CD\u8005\u533A\u5206"},{key:"socialSecurityAgreement",label:"\u793E\u4F1A\u4FDD\u969C\u5354\u5B9A\u56FD"},{key:"temporaryDispatch",label:"\u4E00\u6642\u6D3E\u9063\uFF085\u5E74\u4EE5\u5185\uFF09"}];employeeId=null;ngOnInit(){return T(this,null,function*(){Q(this.auth,e=>{this.currentUser=e});let r=this.route.snapshot.paramMap.get("id");if(this.employeeId=r,r){let e=E(this.firestore,"companies"),d=yield k(e);for(let P of d.docs){let Z=E(this.firestore,"companies",P.id,"employees"),A=(yield k(Z)).docs.find(g=>g.id===r);if(A){if(this.employee=A.data(),this.employee.birthdate){let g=new Date,f=new Date(this.employee.birthdate),_=g.getFullYear()-f.getFullYear(),c=g.getMonth()-f.getMonth();if((c<0||c===0&&g.getDate()<f.getDate())&&_--,this.currentAge=_,this.employee.age!==_){let i=E(this.firestore,"companies"),C=yield k(i);for(let v of C.docs){let ee=E(this.firestore,"companies",v.id,"employees"),N=(yield k(ee)).docs.find(M=>M.id===r);if(N){let M=N.ref;yield W(M,{age:_});break}}}}else this.currentAge=null;if((this.employee.stdSalaryHealth===null||this.employee.stdSalaryHealth===""||this.employee.stdSalaryHealth===void 0)&&this.employee.salaryTotal!==null&&this.employee.salaryTotal!==""&&this.employee.salaryTotal!==void 0){let g=E(this.firestore,"kenpo_standardMonthlySarary"),f=yield k(g),_=Number(this.employee.salaryTotal),c=f.docs.map(i=>i.data()).find(i=>{let C=i.monthlyRangeStart===null||i.monthlyRangeStart===""||i.monthlyRangeStart===void 0?-1/0:Number(i.monthlyRangeStart),v=i.monthlyRangeEnd===null||i.monthlyRangeEnd===""||i.monthlyRangeEnd===void 0?1/0:Number(i.monthlyRangeEnd);return _>=C&&_<v});c?(this.autoStdSalaryHealth=c.standardMonthlySalary??null,this.autoStdSalaryHealthGrade=c.grade??null,console.log("\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u5065\u5EB7\u4FDD\u967A\u30FB\u4ECB\u8B77\u4FDD\u967A\uFF09\u81EA\u52D5\u5224\u5B9A:",c.standardMonthlySalary,"\u7B49\u7D1A:",c.grade)):(this.autoStdSalaryHealth=null,this.autoStdSalaryHealthGrade=null,console.log("\u8A72\u5F53\u3059\u308B\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u5065\u5EB7\u4FDD\u967A\u30FB\u4ECB\u8B77\u4FDD\u967A\uFF09\u306E\u7B49\u7D1A\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F"))}if((this.employee.stdSalaryPension===null||this.employee.stdSalaryPension===""||this.employee.stdSalaryPension===void 0)&&this.employee.salaryTotal!==null&&this.employee.salaryTotal!==""&&this.employee.salaryTotal!==void 0){let g=E(this.firestore,"nenkin_standardMonthlySarary"),f=yield k(g),_=Number(this.employee.salaryTotal),c=f.docs.map(i=>i.data()).find(i=>{let C=i.nenkinStart===null||i.nenkinStart===""||i.nenkinStart===void 0?-1/0:Number(i.nenkinStart),v=i.nenkinEnd===null||i.nenkinEnd===""||i.nenkinEnd===void 0?1/0:Number(i.nenkinEnd);return _>=C&&_<v});c?(this.autoStdSalaryPension=c.nenkinMonthly??null,this.autoStdSalaryPensionGrade=c.nenkinGrade??null,console.log("\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u539A\u751F\u5E74\u91D1\uFF09\u81EA\u52D5\u5224\u5B9A:",c.nenkinMonthly,"\u7B49\u7D1A:",c.nenkinGrade)):(this.autoStdSalaryPension=null,this.autoStdSalaryPensionGrade=null,console.log("\u8A72\u5F53\u3059\u308B\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u539A\u751F\u5E74\u91D1\uFF09\u306E\u7B49\u7D1A\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F"))}if((this.employee.combinedStdSalaryKenpo===null||this.employee.combinedStdSalaryKenpo===""||this.employee.combinedStdSalaryKenpo===void 0)&&this.employee.combinedSalary!==null&&this.employee.combinedSalary!==""&&this.employee.combinedSalary!==void 0){let g=E(this.firestore,"kenpo_standardMonthlySarary"),f=yield k(g),_=Number(this.employee.combinedSalary),c=f.docs.map(i=>i.data()).find(i=>{let C=i.monthlyRangeStart===null||i.monthlyRangeStart===""||i.monthlyRangeStart===void 0?-1/0:Number(i.monthlyRangeStart),v=i.monthlyRangeEnd===null||i.monthlyRangeEnd===""||i.monthlyRangeEnd===void 0?1/0:Number(i.monthlyRangeEnd);return _>=C&&_<v});c?(this.autoCombinedStdSalaryKenpo=c.standardMonthlySalary??null,this.autoCombinedStdSalaryKenpoGrade=c.grade??null,console.log("\u5408\u7B97\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u5065\u5EB7\u4FDD\u967A\u30FB\u4ECB\u8B77\u4FDD\u967A\uFF09\u81EA\u52D5\u5224\u5B9A:",c.standardMonthlySalary,"\u7B49\u7D1A:",c.grade)):(this.autoCombinedStdSalaryKenpo=null,this.autoCombinedStdSalaryKenpoGrade=null,console.log("\u8A72\u5F53\u3059\u308B\u5408\u7B97\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u5065\u5EB7\u4FDD\u967A\u30FB\u4ECB\u8B77\u4FDD\u967A\uFF09\u306E\u7B49\u7D1A\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F"))}if((this.employee.combinedStdSalaryNenkin===null||this.employee.combinedStdSalaryNenkin===""||this.employee.combinedStdSalaryNenkin===void 0)&&this.employee.combinedSalary!==null&&this.employee.combinedSalary!==""&&this.employee.combinedSalary!==void 0){let g=E(this.firestore,"nenkin_standardMonthlySarary"),f=yield k(g),_=Number(this.employee.combinedSalary),c=f.docs.map(i=>i.data()).find(i=>{let C=i.nenkinStart===null||i.nenkinStart===""||i.nenkinStart===void 0?-1/0:Number(i.nenkinStart),v=i.nenkinEnd===null||i.nenkinEnd===""||i.nenkinEnd===void 0?1/0:Number(i.nenkinEnd);return _>=C&&_<v});c?(this.autoCombinedStdSalaryNenkin=c.nenkinMonthly??null,this.autoCombinedStdSalaryNenkinGrade=c.nenkinGrade??null,console.log("\u5408\u7B97\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u539A\u751F\u5E74\u91D1\uFF09\u81EA\u52D5\u5224\u5B9A:",c.nenkinMonthly,"\u7B49\u7D1A:",c.nenkinGrade)):(this.autoCombinedStdSalaryNenkin=null,this.autoCombinedStdSalaryNenkinGrade=null,console.log("\u8A72\u5F53\u3059\u308B\u5408\u7B97\u6A19\u6E96\u5831\u916C\u6708\u984D\uFF08\u539A\u751F\u5E74\u91D1\uFF09\u306E\u7B49\u7D1A\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F"))}return}}console.log("\u8A72\u5F53\u5F93\u696D\u54E1\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F")}})}get displayEmploymentType(){return this.employee?this.employee.employmentType==="\u305D\u306E\u4ED6"&&this.employee.employmentTypeOther?`\u305D\u306E\u4ED6\uFF08${this.employee.employmentTypeOther}\uFF09`:this.employee.employmentType||"":""}get hasUnnotified(){if(!this.employee)return!1;let r=this.employee.stdSalaryHealth===null||this.employee.stdSalaryHealth===""||this.employee.stdSalaryHealth===void 0,e=this.employee.stdSalaryPension===null||this.employee.stdSalaryPension===""||this.employee.stdSalaryPension===void 0,d=!1,P=!1;return this.employee.multiOffice==="\u4E8C\u4EE5\u4E0A\u4E8B\u696D\u6240\u52E4\u52D9"&&(d=this.employee.combinedStdSalaryKenpo===null||this.employee.combinedStdSalaryKenpo===""||this.employee.combinedStdSalaryKenpo===void 0,P=this.employee.combinedStdSalaryNenkin===null||this.employee.combinedStdSalaryNenkin===""||this.employee.combinedStdSalaryNenkin===void 0),r||e||d||P}onRecalc(){this.router.navigate(["/calculate",this.employeeId])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=B({type:n,selectors:[["app-employee-detail"]],decls:54,vars:6,consts:[["normalField",""],[1,"detail-header"],[1,"detail-header-left"],[1,"employee-detail-title",2,"display","flex","align-items","center","gap","12px"],["type","button",1,"edit-btn",3,"routerLink"],["type","button",1,"delete-btn"],["class","unnotified-warning",4,"ngIf"],[1,"detail-header-right"],[1,"insurance-title"],[1,"employee-detail-layout"],[1,"employee-detail-left"],[4,"ngIf"],[1,"employee-detail-right"],[1,"insurance-table"],["type","button",1,"recalc-btn",3,"click"],[1,"unnotified-warning"],[1,"employee-detail-grid"],[4,"ngFor","ngForOf"],["class","employee-detail-item unnotified",4,"ngIf"],["class","employee-detail-item",4,"ngIf"],[1,"employee-detail-item","unnotified"],[1,"employee-detail-label"],[1,"employee-detail-value"],[1,"employee-detail-item"],[4,"ngIf","ngIfElse"]],template:function(e,d){e&1&&(l(0,"div",1)(1,"div",2)(2,"h2",3),o(3," \u5F93\u696D\u54E1\u8A73\u7D30 "),l(4,"button",4),o(5,"\u7DE8\u96C6"),a(),l(6,"button",5),o(7,"\u524A\u9664"),a(),u(8,ae,4,0,"div",6),a()(),l(9,"div",7)(10,"h2",8),o(11,"\u793E\u4F1A\u4FDD\u967A\u6599"),a()()(),l(12,"div",9)(13,"div",10),u(14,Ae,3,1,"div",11)(15,Ne,3,0,"div",11),a(),l(16,"div",12)(17,"table",13)(18,"thead")(19,"tr"),S(20,"th"),l(21,"th"),o(22,"\u5168\u984D"),a(),l(23,"th"),o(24,"\u4F1A\u793E\u8CA0\u62C5"),a(),l(25,"th"),o(26,"\u5F93\u696D\u54E1\u8CA0\u62C5"),a()()(),l(27,"tbody")(28,"tr")(29,"th"),o(30,"\u5065\u5EB7\u4FDD\u967A\u6599"),a(),S(31,"td")(32,"td")(33,"td"),a(),l(34,"tr")(35,"th"),o(36,"\u4ECB\u8B77\u4FDD\u967A\u6599"),a(),S(37,"td")(38,"td")(39,"td"),a(),l(40,"tr")(41,"th"),o(42,"\u539A\u751F\u5E74\u91D1\u4FDD\u967A\u6599"),a(),S(43,"td")(44,"td")(45,"td"),a(),l(46,"tr")(47,"th"),o(48,"\u5408\u8A08"),a(),S(49,"td")(50,"td")(51,"td"),a()()(),l(52,"button",14),G("click",function(){return d.onRecalc()}),o(53,"\u518D\u8A08\u7B97"),a()()()),e&2&&(t(4),p("routerLink",R(4,ne,d.employeeId)),t(4),p("ngIf",d.hasUnnotified),t(6),p("ngIf",d.employee),t(),p("ngIf",!d.employee))},dependencies:[j,w,z,$,q,Y],styles:["table[_ngcontent-%COMP%]{width:100%;max-width:600px;border-collapse:separate;border-spacing:0;margin:0 auto 2rem;background:#fff;box-shadow:0 2px 8px #0000000a;border-radius:10px;overflow:hidden}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.9em 1.2em;text-align:left;font-size:1rem}th[_ngcontent-%COMP%]{background:#f4f8fb;color:#2a3b4d;font-weight:600;border-bottom:1.5px solid #d0e3f9;width:38%}td[_ngcontent-%COMP%]{background:#fcfdff;color:#333;border-bottom:1px solid #e3eaf1;width:62%;word-break:break-all}tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}@media (max-width: 600px){table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:.95rem}table[_ngcontent-%COMP%]{max-width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.7em .6em}}div[ngif][_ngcontent-%COMP%]{padding:2rem .5rem}.employee-detail-layout[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:0;margin-top:0;width:100%;max-width:100%;margin-left:0;margin-right:0;min-height:70vh}.employee-detail-left[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000a;padding:1.1rem .7rem;display:flex;flex-direction:column;justify-content:flex-start;font-size:10.5px}.employee-detail-right[_ngcontent-%COMP%]{background:#f4f8fb;border-radius:12px;box-shadow:0 2px 8px #00000008;padding:2rem 1.5rem;display:flex;flex-direction:column;justify-content:flex-start}@media (max-width: 900px){.employee-detail-layout[_ngcontent-%COMP%]{flex-direction:column;gap:1.2rem;margin-top:1.2rem}.employee-detail-left[_ngcontent-%COMP%], .employee-detail-right[_ngcontent-%COMP%]{padding:1.2rem .7rem;border-radius:10px}}.employee-detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px 10px;margin-top:10px}.employee-detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;background:#f4f8fb;border:1.5px solid #d0e3f9;border-radius:8px;padding:4px 5px;min-height:24px;box-sizing:border-box;transition:box-shadow .2s}.employee-detail-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #d0e3f92e}.employee-detail-item.unnotified[_ngcontent-%COMP%]{border:1.5px solid #e53935}.employee-detail-label[_ngcontent-%COMP%]{min-width:0;font-weight:500;margin-right:0;color:#7b8a9b;font-size:.75rem;margin-bottom:2px;flex-shrink:0}.employee-detail-value[_ngcontent-%COMP%]{flex:1;color:#222;font-size:.8rem;font-weight:600;word-break:break-all;margin-bottom:2px}@media (max-width: 900px){.employee-detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:14px 0}.employee-detail-item[_ngcontent-%COMP%]{padding:12px 10px;min-height:40px}.employee-detail-label[_ngcontent-%COMP%], .employee-detail-value[_ngcontent-%COMP%]{font-size:.98rem}}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{font-size:.92rem;padding:3px 10px;border:none;border-radius:6px;cursor:pointer;margin-left:4px;transition:background .2s,color .2s,box-shadow .2s;box-shadow:0 1px 4px #0000000a}.edit-btn[_ngcontent-%COMP%]{background:#1976d2;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background:#1565c0}.delete-btn[_ngcontent-%COMP%]{background:#e53935;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover{background:#b71c1c}.unnotified-warning[_ngcontent-%COMP%]{background:#fffbe6;color:#e65100;font-size:.7rem;padding:5px 8px;border-radius:7px;margin-left:10px;line-height:1.6;font-weight:500;box-shadow:0 1px 4px #ffc10714;display:inline-block;max-width:220px}.insurance-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px 10px;margin-top:18px}.insurance-item[_ngcontent-%COMP%]{background:#fff;border:1.2px solid #d0e3f9;border-radius:7px;padding:7px 8px;min-height:32px;font-size:.85rem;font-weight:500;color:#1976d2;display:flex;align-items:center;justify-content:space-between;box-sizing:border-box;transition:box-shadow .2s;box-shadow:0 1px 4px #2196f30a}.insurance-table[_ngcontent-%COMP%]{width:600px;max-width:600px;margin-left:auto;margin-right:auto;border-collapse:collapse;margin-top:0;background:#fff;border-radius:8px;overflow:hidden;font-size:.85rem}.insurance-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .insurance-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #d0e3f9;padding:7px 8px;text-align:center;width:25%}.insurance-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f4f8fb;color:#1976d2;font-weight:600}.insurance-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#fff;color:#222}.detail-header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding-top:2.5rem;margin-bottom:.5rem;background:transparent;z-index:2}.detail-header-left[_ngcontent-%COMP%], .detail-header-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;flex:1;text-align:left}"]})};export{X as EmployeeDetailComponent};
