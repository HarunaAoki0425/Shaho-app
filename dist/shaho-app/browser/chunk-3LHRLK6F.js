import{d as S}from"./chunk-7R4IIRUB.js";import{Bb as o,Db as a,Ld as B,Mb as r,Ob as s,Pa as u,Za as C,_ as b,a as h,bb as x,d as y,ee as d,ib as E,ic as I,kc as f,mb as t,mc as D,nb as i,nc as v,ze as c}from"./chunk-22J4FPNL.js";function N(p,n){if(p&1&&(t(0,"div",3)(1,"div",4)(2,"div"),o(3),r(4,"number"),i(),t(5,"div"),o(6),r(7,"number"),i(),t(8,"div"),o(9),r(10,"number"),i(),t(11,"div"),o(12),r(13,"number"),i(),t(14,"div"),o(15),r(16,"number"),i(),t(17,"div"),o(18),r(19,"number"),i(),t(20,"div"),o(21),r(22,"number"),i(),t(23,"div"),o(24),r(25,"number"),i(),t(26,"div"),o(27),r(28,"number"),i(),t(29,"div"),o(30),r(31,"number"),i(),t(32,"div"),o(33),r(34,"number"),i(),t(35,"div"),o(36),r(37,"number"),i()(),t(38,"div"),o(39),r(40,"date"),i(),t(41,"div"),o(42),r(43,"number"),i(),t(44,"div"),o(45),r(46,"number"),i()()),p&2){let e=n.$implicit;u(3),a("\u5065\u5EB7\u4FDD\u967A\u5168\u984D: ",e.healthInsuranceTotal!=null?s(4,15,e.healthInsuranceTotal,"1.0-0"):" ","\u5186"),u(3),a("\u5065\u5EB7\u4FDD\u967A\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.healthInsuranceCompany!=null?s(7,18,e.healthInsuranceCompany,"1.0-0"):" ","\u5186"),u(3),a("\u5065\u5EB7\u4FDD\u967A\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.healthInsuranceEmployee!=null?s(10,21,e.healthInsuranceEmployee,"1.0-0"):" ","\u5186"),u(3),a("\u4ECB\u8B77\u4FDD\u967A\u5168\u984D: ",e.careInsuranceTotal!=null?s(13,24,e.careInsuranceTotal,"1.0-0"):" ","\u5186"),u(3),a("\u4ECB\u8B77\u4FDD\u967A\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.careInsuranceCompany!=null?s(16,27,e.careInsuranceCompany,"1.0-0"):" ","\u5186"),u(3),a("\u4ECB\u8B77\u4FDD\u967A\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.careInsuranceEmployee!=null?s(19,30,e.careInsuranceEmployee,"1.0-0"):" ","\u5186"),u(3),a("\u539A\u751F\u5E74\u91D1\u5168\u984D: ",e.pensionInsuranceTotal!=null?s(22,33,e.pensionInsuranceTotal,"1.0-0"):" ","\u5186"),u(3),a("\u539A\u751F\u5E74\u91D1\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.pensionInsuranceCompany!=null?s(25,36,e.pensionInsuranceCompany,"1.0-0"):" ","\u5186"),u(3),a("\u539A\u751F\u5E74\u91D1\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.pensionInsuranceEmployee!=null?s(28,39,e.pensionInsuranceEmployee,"1.0-0"):" ","\u5186"),u(3),a("\u5408\u8A08: ",e.total!=null?s(31,42,e.total,"1.0-0"):" ","\u5186"),u(3),a("\u5408\u8A08\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.totalCompany!=null?s(34,45,e.totalCompany,"1.0-0"):" ","\u5186"),u(3),a("\u5408\u8A08\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.totalEmployee!=null?s(37,48,e.totalEmployee,"1.0-0"):" ","\u5186"),u(3),a("\u652F\u7D66\u5E74\u6708\u65E5: ",s(40,51,e.bonusDate,"yyyy/MM/dd"),""),u(3),a("\u8CDE\u4E0E\u984D: ",s(43,54,e.bonusAmount,"1.0-0"),"\u5186"),u(3),a("\u6708\u9593\u5408\u8A08\u6A19\u6E96\u8CDE\u4E0E\u984D: ",s(46,57,e.monthStandardBonusTotal,"1.0-0"),"\u5186")}}var A=class p{employeeId="";companyId="";bonuses=[];firestore=b(B);route=b(S);ngOnInit(){return y(this,null,function*(){this.employeeId=this.route.snapshot.paramMap.get("id")||"";let n=d(this.firestore,"companies"),e=yield c(n);for(let l of e.docs){let M=d(this.firestore,"companies",l.id,"employees"),O=yield c(M);for(let F of O.docs)if(F.id===this.employeeId){this.companyId=l.id;let _=d(this.firestore,"companies",this.companyId,"employees",this.employeeId,"bonus"),P=yield c(_);this.bonuses=P.docs.map(m=>h({id:m.id},m.data())),this.bonuses.sort((m,g)=>{let T=m.bonusDate?new Date(m.bonusDate).getTime():0;return(g.bonusDate?new Date(g.bonusDate).getTime():0)-T});return}}})}get healthInsuranceTotalSum(){return this.bonuses.reduce((n,e)=>n+(Number(e.healthInsuranceTotal)||0),0)}get healthInsuranceCompanySum(){return this.bonuses.reduce((n,e)=>n+(Number(e.healthInsuranceCompany)||0),0)}get healthInsuranceEmployeeSum(){return this.bonuses.reduce((n,e)=>n+(Number(e.healthInsuranceEmployee)||0),0)}get careInsuranceTotalSum(){return this.bonuses.reduce((n,e)=>n+(Number(e.careInsuranceTotal)||0),0)}get careInsuranceCompanySum(){return this.bonuses.reduce((n,e)=>n+(Number(e.careInsuranceCompany)||0),0)}get careInsuranceEmployeeSum(){return this.bonuses.reduce((n,e)=>n+(Number(e.careInsuranceEmployee)||0),0)}get pensionInsuranceTotalSum(){return this.bonuses.reduce((n,e)=>n+(Number(e.pensionInsuranceTotal)||0),0)}get pensionInsuranceCompanySum(){return this.bonuses.reduce((n,e)=>n+(Number(e.pensionInsuranceCompany)||0),0)}get pensionInsuranceEmployeeSum(){return this.bonuses.reduce((n,e)=>n+(Number(e.pensionInsuranceEmployee)||0),0)}get totalSum(){return this.bonuses.reduce((n,e)=>n+(Number(e.total)||0),0)}get totalCompanySum(){return this.bonuses.reduce((n,e)=>n+(Number(e.totalCompany)||0),0)}get totalEmployeeSum(){return this.bonuses.reduce((n,e)=>n+(Number(e.totalEmployee)||0),0)}static \u0275fac=function(e){return new(e||p)};static \u0275cmp=C({type:p,selectors:[["app-bonus-history"]],decls:5,vars:1,consts:[[1,"history-header"],[1,"history-header-title"],["class","pair-block","style","border:1px solid #aaa; margin-bottom: 24px; padding: 12px;",4,"ngFor","ngForOf"],[1,"pair-block",2,"border","1px solid #aaa","margin-bottom","24px","padding","12px"],[1,"bonus-grid"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"span",1),o(2,"\u8CDE\u4E0E\u5C65\u6B74"),i()(),t(3,"div"),x(4,N,47,60,"div",2),i()),e&2&&(u(4),E("ngForOf",l.bonuses))},dependencies:[v,I,D,f],styles:[".history-header[_ngcontent-%COMP%]{width:100%;padding-top:3.5rem;margin-bottom:18px;display:flex;align-items:flex-end;justify-content:flex-start;text-align:left}.history-header-title[_ngcontent-%COMP%]{font-size:1.25em;font-weight:700;color:#333;letter-spacing:.04em;margin-left:.2em}.pair-block[_ngcontent-%COMP%]{border:1px solid #aaa;margin-bottom:24px;padding:16px 20px;border-radius:8px;background:#fafbfc;box-shadow:0 2px 8px #00000008;font-size:.92em}.bonus-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:8px 16px;margin-top:8px;margin-bottom:8px}.bonus-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:#fff;border-radius:4px;padding:6px 8px;border:1px solid #e0e0e0;font-size:.92em;min-width:0;word-break:break-all}.bonus-history-sum[_ngcontent-%COMP%]{margin-top:2.5em;margin-bottom:2em}.bonus-history-sum-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:.5em}.bonus-history-sum-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bonus-history-sum-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e0e0e0;padding:8px 10px;text-align:right;font-size:1em}.bonus-history-sum-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f0f4f8;color:#1976d2;font-weight:600;text-align:left}.bonus-history-sum-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%], .bonus-history-sum-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{font-weight:700;background:#e3f2fd}"]})};export{A as BonusHistoryComponent};
