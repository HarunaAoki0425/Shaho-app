import{d as w}from"./chunk-XXUXD6AD.js";import{Ab as a,Bb as g,Bc as H,Cb as o,Kd as R,Lb as s,Nb as d,Ob as F,Pa as i,Ta as A,Za as b,_ as h,a as x,b as _,bb as c,d as I,de as f,hc as B,ib as m,ic as M,jc as O,lb as t,lc as P,mb as n,mc as T,sb as E,wc as k,ye as y,zb as S}from"./chunk-BG5LFNDZ.js";function G(u,p){u&1&&(t(0,"div",8),a(1,"\u793E\u4F1A\u4FDD\u967A\u5BFE\u8C61\u5916"),n())}function J(u,p){if(u&1&&(t(0,"div",10),a(1),n()),u&2){let e=E(2).$implicit;i(),g(e.standard.memo||"")}}function K(u,p){if(u&1&&(t(0,"div")(1,"div"),a(2),s(3,"date"),n(),t(4,"div"),a(5),n(),c(6,J,2,1,"div",9),n()),u&2){let e=E().$implicit;i(2),o("\u6539\u5B9A\u6708: ",e.standard.lastRevisionMonth?d(3,3,e.standard.lastRevisionMonth,"yyyy-MM"):"---",""),i(3),o("\u6539\u5B9A\u7A2E\u5225: ",e.standard.revisionType||"---",""),i(),m("ngIf",e.insurance.memo!=="\u6599\u7387\u5909\u66F4")}}function L(u,p){u&1&&(t(0,"div",10),a(1,"\u5BFE\u5FDC\u3059\u308B\u6A19\u6E96\u5831\u916C\u60C5\u5831\u304C\u3042\u308A\u307E\u305B\u3093"),n())}function Q(u,p){if(u&1&&(t(0,"div",4),c(1,G,2,0,"div",5),t(2,"div"),a(3),n(),t(4,"div"),a(5),s(6,"date"),n(),t(7,"div",6)(8,"div"),a(9),s(10,"number"),n(),t(11,"div"),a(12),s(13,"number"),n(),t(14,"div"),a(15),s(16,"number"),n(),t(17,"div"),a(18),s(19,"number"),n(),t(20,"div"),a(21),s(22,"number"),n(),t(23,"div"),a(24),s(25,"number"),n(),t(26,"div"),a(27),s(28,"number"),n(),t(29,"div"),a(30),s(31,"number"),n(),t(32,"div"),a(33),s(34,"number"),n(),t(35,"div"),a(36),s(37,"number"),n(),t(38,"div"),a(39),s(40,"number"),n(),t(41,"div"),a(42),s(43,"number"),n()(),c(44,K,7,6,"div",7)(45,L,2,0,"ng-template",null,0,F),n()),u&2){let e=p.$implicit,l=S(46);i(),m("ngIf",e.insurance.isInsuranceTarget===!1||e.insurance.isInsuranceTarget==="false"||e.insurance.isInsuranceTarget===0),i(2),g(e.insurance.memo||""),i(2),g(d(6,17,e.insurance.createdAt,"yyyy-MM-dd")),i(4),o("\u5065\u5EB7\u4FDD\u967A\u5168\u984D: ",e.insurance.healthInsuranceTotal!=null?d(10,20,e.insurance.healthInsuranceTotal,"1.0-0"):" ","\u5186"),i(3),o("\u5065\u5EB7\u4FDD\u967A\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.insurance.healthInsuranceCompany!=null?d(13,23,e.insurance.healthInsuranceCompany,"1.0-0"):" ","\u5186"),i(3),o("\u5065\u5EB7\u4FDD\u967A\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.insurance.healthInsuranceEmployee!=null?d(16,26,e.insurance.healthInsuranceEmployee,"1.0-0"):" ","\u5186"),i(3),o("\u4ECB\u8B77\u4FDD\u967A\u5168\u984D: ",e.insurance.careInsuranceTotal!=null?d(19,29,e.insurance.careInsuranceTotal,"1.0-0"):" ","\u5186"),i(3),o("\u4ECB\u8B77\u4FDD\u967A\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.insurance.careInsuranceCompany!=null?d(22,32,e.insurance.careInsuranceCompany,"1.0-0"):" ","\u5186"),i(3),o("\u4ECB\u8B77\u4FDD\u967A\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.insurance.careInsuranceEmployee!=null?d(25,35,e.insurance.careInsuranceEmployee,"1.0-0"):" ","\u5186"),i(3),o("\u539A\u751F\u5E74\u91D1\u5168\u984D: ",e.insurance.pensionInsuranceTotal!=null?d(28,38,e.insurance.pensionInsuranceTotal,"1.0-0"):" ","\u5186"),i(3),o("\u539A\u751F\u5E74\u91D1\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.insurance.pensionInsuranceCompany!=null?d(31,41,e.insurance.pensionInsuranceCompany,"1.0-0"):" ","\u5186"),i(3),o("\u539A\u751F\u5E74\u91D1\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.insurance.pensionInsuranceEmployee!=null?d(34,44,e.insurance.pensionInsuranceEmployee,"1.0-0"):" ","\u5186"),i(3),o("\u5408\u8A08: ",e.insurance.total!=null?d(37,47,e.insurance.total,"1.0-0"):" ","\u5186"),i(3),o("\u5408\u8A08\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.insurance.totalCompany!=null?d(40,50,e.insurance.totalCompany,"1.0-0"):" ","\u5186"),i(3),o("\u5408\u8A08\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.insurance.totalEmployee!=null?d(43,53,e.insurance.totalEmployee,"1.0-0"):" ","\u5186"),i(2),m("ngIf",e.standard)("ngIfElse",l)}}var z=class u{constructor(p){this.route=p;this.employeeId=this.route.snapshot.paramMap.get("id")}employeeId=null;currentUser=null;employee=null;insurances=[];standards=[];insuranceStandardPairs=[];auth=h(k);firestore=h(R);ngOnInit(){return I(this,null,function*(){if(H(this.auth,l=>I(this,null,function*(){this.currentUser=l})),!this.employeeId)return;let p=f(this.firestore,"companies"),e=yield y(p);for(let l of e.docs){let N=f(this.firestore,"companies",l.id,"employees"),D=(yield y(N)).docs.find(v=>v.id===this.employeeId);if(D){this.employee=D.data(),this.employee.companyId=l.id;let v=f(this.firestore,"companies",l.id,"employees",this.employeeId,"insurances"),U=yield y(v);this.insurances=U.docs.map(r=>x({id:r.id},r.data())).map(r=>_(x({},r),{createdAt:r.createdAt?.toDate?r.createdAt.toDate():r.createdAt?new Date(r.createdAt):null,_millis:r.createdAt?.toDate?r.createdAt.toDate().getTime():r.createdAt?new Date(r.createdAt).getTime():0})).sort((r,C)=>C._millis-r._millis);let j=f(this.firestore,"companies",l.id,"employees",this.employeeId,"standards"),$=yield y(j);this.standards=$.docs.map(r=>x({id:r.id},r.data())),this.insuranceStandardPairs=this.insurances.map(r=>{let C=this.standards.find(q=>q.id===r.standardId)||null;return{insurance:r,standard:C}});break}}})}static \u0275fac=function(e){return new(e||u)(A(w))};static \u0275cmp=b({type:u,selectors:[["app-insurance-history"]],decls:5,vars:1,consts:[["noStandard",""],[1,"history-header"],[1,"history-header-title"],["class","pair-block","style","border:1px solid #aaa; margin-bottom: 24px; padding: 12px;",4,"ngFor","ngForOf"],[1,"pair-block",2,"border","1px solid #aaa","margin-bottom","24px","padding","12px"],["class","sotai",4,"ngIf"],[1,"insurance-grid"],[4,"ngIf","ngIfElse"],[1,"sotai"],["style","color: #d32f2f;",4,"ngIf"],[2,"color","#d32f2f"]],template:function(e,l){e&1&&(t(0,"div",1)(1,"span",2),a(2,"\u793E\u4F1A\u4FDD\u967A\u6599\u5C65\u6B74"),n()(),t(3,"div"),c(4,Q,47,56,"div",3),n()),e&2&&(i(4),m("ngForOf",l.insuranceStandardPairs))},dependencies:[T,B,M,P,O],styles:["body[_ngcontent-%COMP%], .history-header[_ngcontent-%COMP%], .history-header-title[_ngcontent-%COMP%], .pair-block[_ngcontent-%COMP%], .insurance-grid[_ngcontent-%COMP%], .insurance-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .sotai[_ngcontent-%COMP%]{font-size:.92em}.history-header[_ngcontent-%COMP%]{width:100%;padding-top:3.5rem;margin-bottom:18px;display:flex;align-items:flex-end;justify-content:flex-start;text-align:left}.history-header-title[_ngcontent-%COMP%]{font-size:1.25em;font-weight:700;color:#333;letter-spacing:.04em;margin-left:.2em}.pair-block[_ngcontent-%COMP%]{border:1px solid #aaa;margin-bottom:24px;padding:16px 20px;border-radius:8px;background:#fafbfc;box-shadow:0 2px 8px #00000008;font-size:.92em}.insurance-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:8px 16px;margin:12px 0}.insurance-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:#fff;border-radius:4px;padding:6px 8px;border:1px solid #e0e0e0;font-size:.92em;min-width:0;word-break:break-all}.sotai[_ngcontent-%COMP%]{color:#d32f2f;font-weight:700;font-size:1em;margin-bottom:8px}.pair-block[_ngcontent-%COMP%]   .no-standard[_ngcontent-%COMP%]{color:#d32f2f;margin-top:8px}"]})};export{z as InsuranceHistoryComponent};
