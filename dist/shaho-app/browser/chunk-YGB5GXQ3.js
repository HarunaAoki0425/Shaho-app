var jA=Object.defineProperty,BA=Object.defineProperties;var UA=Object.getOwnPropertyDescriptors;var f_=Object.getOwnPropertySymbols,$A=Object.getPrototypeOf,HA=Object.prototype.hasOwnProperty,qA=Object.prototype.propertyIsEnumerable,zA=Reflect.get;var p_=(t,e,n)=>e in t?jA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,me=(t,e)=>{for(var n in e||={})HA.call(e,n)&&p_(t,n,e[n]);if(f_)for(var n of f_(e))qA.call(e,n)&&p_(t,n,e[n]);return t},ve=(t,e)=>BA(t,UA(e));var kn=(t,e,n)=>zA($A(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(l){i(l)}},s=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((n=n.apply(t,e)).next())});function kd(t,e){return Object.is(t,e)}var Re=null,Oa=!1,Od=1,yt=Symbol("SIGNAL");function te(t){let e=Re;return Re=t,e}function Fd(){return Re}var qo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zo(t){if(Oa)throw new Error("");if(Re===null)return;Re.consumerOnSignalRead(t);let e=Re.nextProducerIndex++;if(ja(Re),e<Re.producerNode.length&&Re.producerNode[e]!==t&&Ho(Re)){let n=Re.producerNode[e];La(n,Re.producerIndexOfThis[e])}Re.producerNode[e]!==t&&(Re.producerNode[e]=t,Re.producerIndexOfThis[e]=Ho(Re)?m_(t,Re,e):0),Re.producerLastReadVersion[e]=t.version}function g_(){Od++}function Vd(t){if(!(Ho(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Od)){if(!t.producerMustRecompute(t)&&!Ud(t)){xd(t);return}t.producerRecomputeValue(t),xd(t)}}function Ld(t){if(t.liveConsumerNode===void 0)return;let e=Oa;Oa=!0;try{for(let n of t.liveConsumerNode)n.dirty||GA(n)}finally{Oa=e}}function jd(){return Re?.consumerAllowSignalWrites!==!1}function GA(t){t.dirty=!0,Ld(t),t.consumerMarkedDirty?.(t)}function xd(t){t.dirty=!1,t.lastCleanEpoch=Od}function Va(t){return t&&(t.nextProducerIndex=0),te(t)}function Bd(t,e){if(te(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ho(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)La(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ud(t){ja(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Vd(n),r!==n.version))return!0}return!1}function $d(t){if(ja(t),Ho(t))for(let e=0;e<t.producerNode.length;e++)La(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function m_(t,e,n){if(y_(t),t.liveConsumerNode.length===0&&v_(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=m_(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function La(t,e){if(y_(t),t.liveConsumerNode.length===1&&v_(t))for(let r=0;r<t.producerNode.length;r++)La(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ja(i),i.producerIndexOfThis[r]=e}}function Ho(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ja(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function y_(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function v_(t){return t.producerNode!==void 0}function Hd(t,e){let n=Object.create(WA);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Vd(n),zo(n),n.value===Fa)throw n.error;return n.value};return r[yt]=n,r}var Md=Symbol("UNSET"),Pd=Symbol("COMPUTING"),Fa=Symbol("ERRORED"),WA=ve(me({},qo),{value:Md,dirty:!0,error:null,equal:kd,kind:"computed",producerMustRecompute(t){return t.value===Md||t.value===Pd},producerRecomputeValue(t){if(t.value===Pd)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Pd;let n=Va(t),r,i=!1;try{r=t.computation(),te(null),i=e!==Md&&e!==Fa&&r!==Fa&&t.equal(e,r)}catch(o){r=Fa,t.error=o}finally{Bd(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function KA(){throw new Error}var __=KA;function I_(t){__(t)}function qd(t){__=t}var QA=null;function zd(t,e){let n=Object.create(Ba);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(zo(n),n.value);return r[yt]=n,r}function Go(t,e){jd()||I_(t),t.equal(t.value,e)||(t.value=e,YA(t))}function Gd(t,e){jd()||I_(t),Go(t,e(t.value))}var Ba=ve(me({},qo),{equal:kd,value:void 0,kind:"signal"});function YA(t){t.version++,g_(),Ld(t),QA?.()}function Wd(t){let e=te(null);try{return t()}finally{te(e)}}var Kd;function Wo(){return Kd}function an(t){let e=Kd;return Kd=t,e}var Ua=Symbol("NotFound");function z(t){return typeof t=="function"}function si(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var $a=si(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function cr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(z(r))try{r()}catch(o){e=o instanceof $a?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{E_(o)}catch(s){e=e??[],s instanceof $a?e=[...e,...s.errors]:e.push(s)}}if(e)throw new $a(e)}}add(e){var n;if(e&&e!==this)if(this.closed)E_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&cr(n,e)}remove(e){let{_finalizers:n}=this;n&&cr(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var Qd=Ae.EMPTY;function Ha(t){return t instanceof Ae||t&&"closed"in t&&z(t.remove)&&z(t.add)&&z(t.unsubscribe)}function E_(t){z(t)?t():t.unsubscribe()}var Dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ai={setTimeout(t,e,...n){let{delegate:r}=ai;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ai;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function qa(t){ai.setTimeout(()=>{let{onUnhandledError:e}=Dt;if(e)e(t);else throw t})}function Ko(){}var w_=Yd("C",void 0,void 0);function D_(t){return Yd("E",void 0,t)}function T_(t){return Yd("N",t,void 0)}function Yd(t,e,n){return{kind:t,value:e,error:n}}var ur=null;function ci(t){if(Dt.useDeprecatedSynchronousErrorHandling){let e=!ur;if(e&&(ur={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ur;if(ur=null,n)throw r}}else t()}function b_(t){Dt.useDeprecatedSynchronousErrorHandling&&ur&&(ur.errorThrown=!0,ur.error=t)}var lr=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ha(e)&&e.add(this)):this.destination=nS}static create(e,n,r){return new cn(e,n,r)}next(e){this.isStopped?Jd(T_(e),this):this._next(e)}error(e){this.isStopped?Jd(D_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Jd(w_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eS=Function.prototype.bind;function Zd(t,e){return eS.call(t,e)}var Xd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){za(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){za(r)}else za(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){za(n)}}},cn=class extends lr{constructor(e,n,r){super();let i;if(z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Dt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zd(e.next,o),error:e.error&&Zd(e.error,o),complete:e.complete&&Zd(e.complete,o)}):i=e}this.destination=new Xd(i)}};function za(t){Dt.useDeprecatedSynchronousErrorHandling?b_(t):qa(t)}function tS(t){throw t}function Jd(t,e){let{onStoppedNotification:n}=Dt;n&&ai.setTimeout(()=>n(t,e))}var nS={closed:!0,next:Ko,error:tS,complete:Ko};var ui=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(t){return t}function rS(...t){return eh(t)}function eh(t){return t.length===0?dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=oS(n)?n:new cn(n,r,i);return ci(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=C_(r),new r((i,o)=>{let s=new cn({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ui](){return this}pipe(...n){return eh(n)(this)}toPromise(n){return n=C_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function C_(t){var e;return(e=t??Dt.Promise)!==null&&e!==void 0?e:Promise}function iS(t){return t&&z(t.next)&&z(t.error)&&z(t.complete)}function oS(t){return t&&t instanceof lr||iS(t)&&Ha(t)}function th(t){return z(t?.lift)}function Y(t){return e=>{if(th(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Z(t,e,n,r,i){return new nh(t,e,n,r,i)}var nh=class extends lr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function rh(){return Y((t,e)=>{let n=null;t._refCount++;let r=Z(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ih=class extends ne{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,th(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(Z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return rh()(this)}};var A_=si(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=(()=>{class t extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ga(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new A_}next(n){ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qd:(this.currentObservers=null,o.push(n),new Ae(()=>{this.currentObservers=null,cr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ne;return n.source=this,n}}return t.create=(e,n)=>new Ga(e,n),t})(),Ga=class extends ht{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Qd}};var Qo=class extends ht{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var oh={now(){return(oh.delegate||Date).now()},delegate:void 0};var Wa=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var Yo={setInterval(t,e,...n){let{delegate:r}=Yo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Yo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var li=class extends Wa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Yo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Yo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,cr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var di=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};di.now=oh.now;var hi=class extends di{constructor(e,n=di.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Zo=new hi(li);var Ka=class extends li{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Qa=class extends hi{};var sh=new Qa(Ka);var Jo=new ne(t=>t.complete());function S_(t){return t&&z(t.schedule)}function N_(t){return t[t.length-1]}function Ya(t){return z(N_(t))?t.pop():void 0}function On(t){return S_(N_(t))?t.pop():void 0}function ah(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function M_(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function R_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dr(t){return this instanceof dr?(this.v=t,this):new dr(t)}function P_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(C){return Promise.resolve(C).then(m,p)}}function c(m,C){r[m]&&(i[m]=function(N){return new Promise(function(R,k){o.push([m,N,R,k])>1||u(m,N)})},C&&(i[m]=C(i[m])))}function u(m,C){try{l(r[m](C))}catch(N){y(o[0][3],N)}}function l(m){m.value instanceof dr?Promise.resolve(m.value.v).then(f,p):y(o[0][2],m)}function f(m){u("next",m)}function p(m){u("throw",m)}function y(m,C){m(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function x_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof R_=="function"?R_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var Za=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ja(t){return z(t?.then)}function Xa(t){return z(t[ui])}function ec(t){return Symbol.asyncIterator&&z(t?.[Symbol.asyncIterator])}function tc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function sS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nc=sS();function rc(t){return z(t?.[nc])}function ic(t){return P_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield dr(n.read());if(i)return yield dr(void 0);yield yield dr(r)}}finally{n.releaseLock()}})}function oc(t){return z(t?.getReader)}function Ie(t){if(t instanceof ne)return t;if(t!=null){if(Xa(t))return aS(t);if(Za(t))return cS(t);if(Ja(t))return uS(t);if(ec(t))return k_(t);if(rc(t))return lS(t);if(oc(t))return dS(t)}throw tc(t)}function aS(t){return new ne(e=>{let n=t[ui]();if(z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cS(t){return new ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function uS(t){return new ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,qa)})}function lS(t){return new ne(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function k_(t){return new ne(e=>{hS(t,e).catch(n=>e.error(n))})}function dS(t){return k_(ic(t))}function hS(t,e){var n,r,i,o;return M_(this,void 0,void 0,function*(){try{for(n=x_(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function nt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Fn(t,e=0){return Y((n,r)=>{n.subscribe(Z(r,i=>nt(r,t,()=>r.next(i),e),()=>nt(r,t,()=>r.complete(),e),i=>nt(r,t,()=>r.error(i),e)))})}function Vn(t,e=0){return Y((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function O_(t,e){return Ie(t).pipe(Vn(e),Fn(e))}function F_(t,e){return Ie(t).pipe(Vn(e),Fn(e))}function V_(t,e){return new ne(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function L_(t,e){return new ne(n=>{let r;return nt(n,e,()=>{r=t[nc](),nt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>z(r?.return)&&r.return()})}function sc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ne(n=>{nt(n,e,()=>{let r=t[Symbol.asyncIterator]();nt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function j_(t,e){return sc(ic(t),e)}function B_(t,e){if(t!=null){if(Xa(t))return O_(t,e);if(Za(t))return V_(t,e);if(Ja(t))return F_(t,e);if(ec(t))return sc(t,e);if(rc(t))return L_(t,e);if(oc(t))return j_(t,e)}throw tc(t)}function Ot(t,e){return e?B_(t,e):Ie(t)}function fS(...t){let e=On(t);return Ot(t,e)}function pS(t,e){let n=z(t)?t:()=>t,r=i=>i.error(n());return new ne(e?i=>e.schedule(r,0,i):r)}function gS(t){return!!t&&(t instanceof ne||z(t.lift)&&z(t.subscribe))}var hr=si(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function un(t,e){return Y((n,r)=>{let i=0;n.subscribe(Z(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:mS}=Array;function yS(t,e){return mS(e)?t(...e):t(e)}function ac(t){return un(e=>yS(t,e))}var{isArray:vS}=Array,{getPrototypeOf:_S,prototype:IS,keys:ES}=Object;function cc(t){if(t.length===1){let e=t[0];if(vS(e))return{args:e,keys:null};if(wS(e)){let n=ES(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function wS(t){return t&&typeof t=="object"&&_S(t)===IS}function uc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function DS(...t){let e=On(t),n=Ya(t),{args:r,keys:i}=cc(t);if(r.length===0)return Ot([],e);let o=new ne(TS(r,e,i?s=>uc(i,s):dt));return n?o.pipe(ac(n)):o}function TS(t,e,n=dt){return r=>{U_(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)U_(e,()=>{let l=Ot(t[u],e),f=!1;l.subscribe(Z(r,p=>{o[u]=p,f||(f=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function U_(t,e,n){t?nt(n,t,e):e()}function $_(t,e,n,r,i,o,s,c){let u=[],l=0,f=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},m=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let R=!1;Ie(n(N,f++)).subscribe(Z(e,k=>{i?.(k),o?m(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?nt(e,s,()=>C(k)):C(k)}y()}catch(k){e.error(k)}}))};return t.subscribe(Z(e,m,()=>{p=!0,y()})),()=>{c?.()}}function fr(t,e,n=1/0){return z(e)?fr((r,i)=>un((o,s)=>e(r,o,i,s))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),Y((r,i)=>$_(r,i,t,n)))}function ch(t=1/0){return fr(dt,t)}function H_(){return ch(1)}function lc(...t){return H_()(Ot(t,On(t)))}function bS(t){return new ne(e=>{Ie(t()).subscribe(e)})}function uh(...t){let e=Ya(t),{args:n,keys:r}=cc(t),i=new ne(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;Ie(n[f]).subscribe(Z(o,y=>{p||(p=!0,l--),c[f]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?uc(r,c):c),o.complete())}))}});return e?i.pipe(ac(e)):i}function pr(t,e){return Y((n,r)=>{let i=0;n.subscribe(Z(r,o=>t.call(e,o,i++)&&r.next(o)))})}function q_(t){return Y((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Z(n,void 0,void 0,s=>{o=Ie(t(s,q_(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function z_(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(Z(s,f=>{let p=l++;u=c?t(u,f,p):(c=!0,f),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function CS(t,e){return z(e)?fr(t,e,1):fr(t,1)}function AS(t,e=Zo){return Y((n,r)=>{let i=null,o=null,s=null,c=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+t,f=e.now();if(f<l){i=this.schedule(void 0,l-f),r.add(i);return}c()}n.subscribe(Z(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{c(),r.complete()},void 0,()=>{o=i=null}))})}function Xo(t){return Y((e,n)=>{let r=!1;e.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function lh(t){return t<=0?()=>Jo:Y((e,n)=>{let r=0;e.subscribe(Z(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function dc(t=SS){return Y((e,n)=>{let r=!1;e.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function SS(){return new hr}function NS(t){return Y((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function RS(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pr((i,o)=>t(i,o,r)):dt,lh(1),n?Xo(e):dc(()=>new hr))}function dh(t){return t<=0?()=>Jo:Y((e,n)=>{let r=[];e.subscribe(Z(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function MS(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pr((i,o)=>t(i,o,r)):dt,dh(1),n?Xo(e):dc(()=>new hr))}function PS(t,e){return Y(z_(t,e,arguments.length>=2,!0))}function xS(t={}){let{connector:e=()=>new ht,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,c,u,l=0,f=!1,p=!1,y=()=>{c?.unsubscribe(),c=void 0},m=()=>{y(),s=u=void 0,f=p=!1},C=()=>{let N=s;m(),N?.unsubscribe()};return Y((N,R)=>{l++,!p&&!f&&y();let k=u=u??e();R.add(()=>{l--,l===0&&!p&&!f&&(c=hh(C,i))}),k.subscribe(R),!s&&l>0&&(s=new cn({next:F=>k.next(F),error:F=>{p=!0,y(),c=hh(m,n,F),k.error(F)},complete:()=>{f=!0,y(),c=hh(m,r),k.complete()}}),Ie(N).subscribe(s))})(o)}}function hh(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new cn({next:()=>{r.unsubscribe(),t()}});return Ie(e(...n)).subscribe(r)}function kS(t){return pr((e,n)=>t<=n)}function OS(...t){let e=On(t);return Y((n,r)=>{(e?lc(t,n,e):lc(t,n)).subscribe(r)})}function FS(t,e){return Y((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(Z(r,u=>{i?.unsubscribe();let l=0,f=o++;Ie(t(u,f)).subscribe(i=Z(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function VS(t){return Y((e,n)=>{Ie(t).subscribe(Z(n,()=>n.complete(),Ko)),!n.closed&&e.subscribe(n)})}function LS(t,e,n){let r=z(t)||e||n?{next:t,error:e,complete:n}:t;return r?Y((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(Z(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dt}var OI="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",G=class extends Error{code;constructor(e,n){super(FI(e,n)),this.code=e}};function jS(t){return`NG0${Math.abs(t)}`}function FI(t,e){return`${jS(t)}${e?": "+e:""}`}var VI=Symbol("InputSignalNode#UNSET"),BS=ve(me({},Ba),{transformFn:void 0,applyValueToInputSignal(t,e){Go(t,e)}});function LI(t,e){let n=Object.create(BS);n.value=t,n.transformFn=e?.transform;function r(){if(zo(n),n.value===VI){let i=null;throw new G(-950,i)}return n.value}return r[yt]=n,r}function ds(t){return{toString:t}.toString()}var hc="__parameters__";function US(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function jI(t,e,n){return ds(()=>{let r=US(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,f){let p=u.hasOwnProperty(hc)?u[hc]:Object.defineProperty(u,hc,{value:[]})[hc];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ln=globalThis;function ge(t){for(let e in t)if(t[e]===ge)return e;throw Error("Could not find renamed property on target object.")}function $S(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ot(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(ot).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ah(t,e){return t?e?`${t} ${e}`:t:e||""}var HS=ge({__forward_ref__:ge});function hn(t){return t.__forward_ref__=hn,t.toString=function(){return ot(this())},t}function Ze(t){return BI(t)?t():t}function BI(t){return typeof t=="function"&&t.hasOwnProperty(HS)&&t.__forward_ref__===hn}function le(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function hs(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qc(t){return G_(t,UI)||G_(t,$I)}function w6(t){return Qc(t)!==null}function G_(t,e){return t.hasOwnProperty(e)?t[e]:null}function qS(t){let e=t&&(t[UI]||t[$I]);return e||null}function W_(t){return t&&(t.hasOwnProperty(K_)||t.hasOwnProperty(zS))?t[K_]:null}var UI=ge({\u0275prov:ge}),K_=ge({\u0275inj:ge}),$I=ge({ngInjectableDef:ge}),zS=ge({ngInjectorDef:ge}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=le({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function HI(t){return t&&!!t.\u0275providers}var GS=ge({\u0275cmp:ge}),WS=ge({\u0275dir:ge}),KS=ge({\u0275pipe:ge}),QS=ge({\u0275mod:ge}),wc=ge({\u0275fac:ge}),rs=ge({__NG_ELEMENT_ID__:ge}),Q_=ge({__NG_ENV_ID__:ge});function Yc(t){return typeof t=="string"?t:t==null?"":String(t)}function YS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Yc(t)}function qI(t,e){throw new G(-200,t)}function Sf(t,e){throw new G(-201,!1)}var J=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(J||{}),Sh;function zI(){return Sh}function rt(t){let e=Sh;return Sh=t,e}function GI(t,e,n){let r=Qc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&J.Optional)return null;if(e!==void 0)return e;Sf(t,"Injector")}var ZS={},mr=ZS,Nh="__NG_DI_FLAG__",Dc=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?Ua:mr,r)}},Tc="ngTempTokenPath",JS="ngTokenPath",XS=/\n/gm,eN="\u0275",Y_="__source";function tN(t,e=J.Default){if(Wo()===void 0)throw new G(-203,!1);if(Wo()===null)return GI(t,void 0,e);{let n=Wo(),r;return n instanceof Dc?r=n.injector:r=n,r.get(t,e&J.Optional?null:void 0,e)}}function Be(t,e=J.Default){return(zI()||tN)(Ze(t),e)}function L(t,e=J.Default){return Be(t,Zc(e))}function Zc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Rh(t){let e=[];for(let n=0;n<t.length;n++){let r=Ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,o=J.Default;for(let s=0;s<r.length;s++){let c=r[s],u=nN(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(Be(i,o))}else e.push(Be(r))}return e}function WI(t,e){return t[Nh]=e,t.prototype[Nh]=e,t}function nN(t){return t[Nh]}function rN(t,e,n,r){let i=t[Tc];throw e[Y_]&&i.unshift(e[Y_]),t.message=iN(`
`+t.message,i,n,r),t[JS]=i,t[Tc]=null,t}function iN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==eN?t.slice(2):t;let i=ot(e);if(Array.isArray(e))i=e.map(ot).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):ot(c)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(XS,`
  `)}`}var pt=WI(jI("Optional"),8);var oN=WI(jI("SkipSelf"),4);function vr(t,e){let n=t.hasOwnProperty(wc);return n?t[wc]:null}function Nf(t,e){t.forEach(n=>Array.isArray(n)?Nf(n,e):e(n))}function KI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function sN(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function aN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Rf(t,e,n){let r=fs(t,e);return r>=0?t[r|1]=n:(r=~r,aN(t,r,e,n)),r}function fh(t,e){let n=fs(t,e);if(n>=0)return t[n|1]}function fs(t,e){return cN(t,e,1)}function cN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var _r={},it=[],Cc=new H(""),QI=new H("",-1),YI=new H(""),Ac=class{get(e,n=mr){if(n===mr){let r=new Error(`NullInjectorError: No provider for ${ot(e)}!`);throw r.name="NullInjectorError",r}return n}};function ZI(t,e){let n=t[QS]||null;if(!n&&e===!0)throw new Error(`Type ${ot(t)} does not have '\u0275mod' property.`);return n}function Ir(t){return t[GS]||null}function uN(t){return t[WS]||null}function lN(t){return t[KS]||null}function $n(t){return{\u0275providers:t}}function dN(...t){return{\u0275providers:JI(!0,t),\u0275fromNgModule:!0}}function JI(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Nf(e,s=>{let c=s;Mh(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&XI(i,o),n}function XI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Mf(i,o=>{e(o,r)})}}function Mh(t,e,n,r){if(t=Ze(t),!t)return!1;let i=null,o=W_(t),s=!o&&Ir(t);if(!o&&!s){let u=t.ngModule;if(o=W_(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Mh(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{Nf(o.imports,f=>{Mh(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&XI(l,e)}if(!c){let l=vr(i)||(()=>new i);e({provide:i,useFactory:l,deps:it},i),e({provide:YI,useValue:i,multi:!0},i),e({provide:Cc,useValue:()=>Be(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;Mf(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Mf(t,e){for(let n of t)HI(n)&&(n=n.\u0275providers),Array.isArray(n)?Mf(n,e):e(n)}var hN=ge({provide:String,useValue:ge});function eE(t){return t!==null&&typeof t=="object"&&hN in t}function fN(t){return!!(t&&t.useExisting)}function pN(t){return!!(t&&t.useFactory)}function _i(t){return typeof t=="function"}function gN(t){return!!t.useClass}var tE=new H(""),yc={},Z_={},ph;function Pf(){return ph===void 0&&(ph=new Ac),ph}var Vt=class{},is=class extends Vt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,xh(e,s=>this.processProvider(s)),this.records.set(QI,fi(void 0,this)),i.has("environment")&&this.records.set(Vt,fi(void 0,this));let o=this.records.get(tE);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(YI,it,J.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?Ua:mr,r)}destroy(){ts(this),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return ts(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ts(this);let n=an(this),r=rt(void 0),i;try{return e()}finally{an(n),rt(r)}}get(e,n=mr,r=J.Default){if(ts(this),e.hasOwnProperty(Q_))return e[Q_](this);r=Zc(r);let i,o=an(this),s=rt(void 0);try{if(!(r&J.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=IN(e)&&Qc(e);l&&this.injectableDefInScope(l)?u=fi(Ph(e),yc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let c=r&J.Self?Pf():this.parent;return n=r&J.Optional&&n===mr?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Tc]=c[Tc]||[]).unshift(ot(e)),o)throw c;return rN(c,e,"R3InjectorError",this.source)}else throw c}finally{rt(s),an(o)}}resolveInjectorInitializers(){let e=te(null),n=an(this),r=rt(void 0),i;try{let o=this.get(Cc,it,J.Self);for(let s of o)s()}finally{an(n),rt(r),te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ot(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ze(e);let n=_i(e)?e:Ze(e&&e.provide),r=yN(e);if(!_i(e)&&e.multi===!0){let i=this.records.get(n);i||(i=fi(void 0,yc,!0),i.factory=()=>Rh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=te(null);try{return n.value===Z_?qI(ot(e)):n.value===yc&&(n.value=Z_,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&_N(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ph(t){let e=Qc(t),n=e!==null?e.factory:vr(t);if(n!==null)return n;if(t instanceof H)throw new G(204,!1);if(t instanceof Function)return mN(t);throw new G(204,!1)}function mN(t){if(t.length>0)throw new G(204,!1);let n=qS(t);return n!==null?()=>n.factory(t):()=>new t}function yN(t){if(eE(t))return fi(void 0,t.useValue);{let e=nE(t);return fi(e,yc)}}function nE(t,e,n){let r;if(_i(t)){let i=Ze(t);return vr(i)||Ph(i)}else if(eE(t))r=()=>Ze(t.useValue);else if(pN(t))r=()=>t.useFactory(...Rh(t.deps||[]));else if(fN(t))r=(i,o)=>Be(Ze(t.useExisting),o!==void 0&&o&J.Optional?J.Optional:void 0);else{let i=Ze(t&&(t.useClass||t.provide));if(vN(t))r=()=>new i(...Rh(t.deps));else return vr(i)||Ph(i)}return r}function ts(t){if(t.destroyed)throw new G(205,!1)}function fi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function vN(t){return!!t.deps}function _N(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function IN(t){return typeof t=="function"||typeof t=="object"&&t instanceof H}function xh(t,e){for(let n of t)Array.isArray(n)?xh(n,e):n&&HI(n)?xh(n.\u0275providers,e):e(n)}function Ai(t,e){let n;t instanceof is?(ts(t),n=t):n=new Dc(t);let r,i=an(n),o=rt(void 0);try{return e()}finally{an(i),rt(o)}}function rE(){return zI()!==void 0||Wo()!=null}function xf(t){if(!rE())throw new G(-203,!1)}function EN(t){return typeof t=="function"}var fn=0,ie=1,W=2,Je=3,Ct=4,ct=5,os=6,Sc=7,st=8,Er=9,ln=10,De=11,ss=12,J_=13,Si=14,It=15,Ii=16,pi=17,Ei=18,Jc=19,iE=20,jn=21,gh=22,Nc=23,vt=24,yi=25,at=26,oE=1;var wr=7,Rc=8,Mc=9,_t=10;function Bn(t){return Array.isArray(t)&&typeof t[oE]=="object"}function pn(t){return Array.isArray(t)&&t[oE]===!0}function kf(t){return(t.flags&4)!==0}function Ni(t){return t.componentOffset>-1}function Xc(t){return(t.flags&1)===1}function Lt(t){return!!t.template}function Pc(t){return(t[W]&512)!==0}function Ri(t){return(t[W]&256)===256}var kh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function sE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var eu=(()=>{let t=()=>aE;return t.ngInherit=!0,t})();function aE(t){return t.type.prototype.ngOnChanges&&(t.setInput=DN),wN}function wN(){let t=uE(this),e=t?.current;if(e){let n=t.previous;if(n===_r)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function DN(t,e,n,r,i){let o=this.declaredInputs[r],s=uE(t)||TN(t,{previous:_r,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new kh(l&&l.currentValue,n,u===_r),sE(t,e,i,n)}var cE="__ngSimpleChanges__";function uE(t){return t[cE]||null}function TN(t,e){return t[cE]=e}var X_=null;var fe=function(t,e=null,n){X_?.(t,e,n)},bN="svg",CN="math";function jt(t){for(;Array.isArray(t);)t=t[fn];return t}function lE(t,e){return jt(e[t])}function Ut(t,e){return jt(e[t.index])}function dE(t,e){return t.data[e]}function AN(t,e){return t[e]}function Bt(t,e){let n=e[t];return Bn(n)?n:n[fn]}function Of(t){return(t[W]&128)===128}function SN(t){return pn(t[Je])}function wi(t,e){return e==null?null:t[e]}function hE(t){t[pi]=0}function fE(t){t[W]&1024||(t[W]|=1024,Of(t)&&ps(t))}function NN(t,e){for(;t>0;)e=e[Si],t--;return e}function tu(t){return!!(t[W]&9216||t[vt]?.dirty)}function Oh(t){t[ln].changeDetectionScheduler?.notify(8),t[W]&64&&(t[W]|=1024),tu(t)&&ps(t)}function ps(t){t[ln].changeDetectionScheduler?.notify(0);let e=Dr(t);for(;e!==null&&!(e[W]&8192||(e[W]|=8192,!Of(e)));)e=Dr(e)}function pE(t,e){if(Ri(t))throw new G(911,!1);t[jn]===null&&(t[jn]=[]),t[jn].push(e)}function RN(t,e){if(t[jn]===null)return;let n=t[jn].indexOf(e);n!==-1&&t[jn].splice(n,1)}function Dr(t){let e=t[Je];return pn(e)?e[Je]:e}function gE(t){return t[Sc]??=[]}function mE(t){return t.cleanup??=[]}var X={lFrame:bE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Fh=!1;function MN(){return X.lFrame.elementDepthCount}function PN(){X.lFrame.elementDepthCount++}function xN(){X.lFrame.elementDepthCount--}function Ff(){return X.bindingsEnabled}function yE(){return X.skipHydrationRootTNode!==null}function kN(t){return X.skipHydrationRootTNode===t}function ON(){X.skipHydrationRootTNode=null}function ce(){return X.lFrame.lView}function xe(){return X.lFrame.tView}function D6(t){return X.lFrame.contextLView=t,t[st]}function T6(t){return X.lFrame.contextLView=null,t}function Xe(){let t=vE();for(;t!==null&&t.type===64;)t=t.parent;return t}function vE(){return X.lFrame.currentTNode}function FN(){let t=X.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Rr(t,e){let n=X.lFrame;n.currentTNode=t,n.isParent=e}function Vf(){return X.lFrame.isParent}function Lf(){X.lFrame.isParent=!1}function _E(){return Fh}function eI(t){let e=Fh;return Fh=t,e}function IE(){let t=X.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function VN(t){return X.lFrame.bindingIndex=t}function nu(){return X.lFrame.bindingIndex++}function EE(t){let e=X.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function LN(){return X.lFrame.inI18n}function jN(t,e){let n=X.lFrame;n.bindingIndex=n.bindingRootIndex=t,Vh(e)}function BN(){return X.lFrame.currentDirectiveIndex}function Vh(t){X.lFrame.currentDirectiveIndex=t}function UN(t){let e=X.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function wE(t){X.lFrame.currentQueryIndex=t}function $N(t){let e=t[ie];return e.type===2?e.declTNode:e.type===1?t[ct]:null}function DE(t,e,n){if(n&J.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&J.Host);)if(i=$N(o),i===null||(o=o[Si],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=X.lFrame=TE();return r.currentTNode=e,r.lView=t,!0}function jf(t){let e=TE(),n=t[ie];X.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function TE(){let t=X.lFrame,e=t===null?null:t.child;return e===null?bE(t):e}function bE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function CE(){let t=X.lFrame;return X.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var AE=CE;function Bf(){let t=CE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function HN(t){return(X.lFrame.contextLView=NN(t,X.lFrame.contextLView))[st]}function Mr(){return X.lFrame.selectedIndex}function Tr(t){X.lFrame.selectedIndex=t}function Uf(){let t=X.lFrame;return dE(t.tView,t.selectedIndex)}function qN(){return X.lFrame.currentNamespace}var SE=!0;function ru(){return SE}function iu(t){SE=t}function zN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=aE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function $f(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function vc(t,e,n){NE(t,e,3,n)}function _c(t,e,n,r){(t[W]&3)===n&&NE(t,e,n,r)}function mh(t,e){let n=t[W];(n&3)===e&&(n&=16383,n+=1,t[W]=n)}function NE(t,e,n,r){let i=r!==void 0?t[pi]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[pi]+=65536),(c<o||o==-1)&&(GN(t,n,e,u),t[pi]=(t[pi]&4294901760)+u+2),u++}function tI(t,e){fe(4,t,e);let n=te(null);try{e.call(t)}finally{te(n),fe(5,t,e)}}function GN(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[W]>>14<t[pi]>>16&&(t[W]&3)===e&&(t[W]+=16384,tI(c,o)):tI(c,o)}var vi=-1,br=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function WN(t){return(t.flags&8)!==0}function KN(t){return(t.flags&16)!==0}function QN(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];YN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function RE(t){return t===3||t===4||t===6}function YN(t){return t.charCodeAt(0)===64}function Di(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?nI(t,n,i,null,e[++r]):nI(t,n,i,null,null))}}return t}function nI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function ME(t){return t!==vi}function xc(t){return t&32767}function ZN(t){return t>>16}function kc(t,e){let n=ZN(t),r=e;for(;n>0;)r=r[Si],n--;return r}var Lh=!0;function Oc(t){let e=Lh;return Lh=t,e}var JN=256,PE=JN-1,xE=5,XN=0,Ft={};function eR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(rs)&&(r=n[rs]),r==null&&(r=n[rs]=XN++);let i=r&PE,o=1<<i;e.data[t+(i>>xE)]|=o}function Fc(t,e){let n=kE(t,e);if(n!==-1)return n;let r=e[ie];r.firstCreatePass&&(t.injectorIndex=e.length,yh(r.data,t),yh(e,null),yh(r.blueprint,null));let i=Hf(t,e),o=t.injectorIndex;if(ME(i)){let s=xc(i),c=kc(i,e),u=c[ie].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function yh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function kE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Hf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=jE(i),r===null)return vi;if(n++,i=i[Si],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vi}function jh(t,e,n){eR(t,e,n)}function tR(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(RE(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function OE(t,e,n){if(n&J.Optional||t!==void 0)return t;Sf(e,"NodeInjector")}function FE(t,e,n,r){if(n&J.Optional&&r===void 0&&(r=null),(n&(J.Self|J.Host))===0){let i=t[Er],o=rt(void 0);try{return i?i.get(e,r,n&J.Optional):GI(e,r,n&J.Optional)}finally{rt(o)}}return OE(r,e,n)}function VE(t,e,n,r=J.Default,i){if(t!==null){if(e[W]&2048&&!(r&J.Self)){let s=sR(t,e,n,r,Ft);if(s!==Ft)return s}let o=LE(t,e,n,r,Ft);if(o!==Ft)return o}return FE(e,n,r,i)}function LE(t,e,n,r,i){let o=iR(n);if(typeof o=="function"){if(!DE(e,t,r))return r&J.Host?OE(i,n,r):FE(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&J.Optional))Sf(n);else return s}finally{AE()}}else if(typeof o=="number"){let s=null,c=kE(t,e),u=vi,l=r&J.Host?e[It][ct]:null;for((c===-1||r&J.SkipSelf)&&(u=c===-1?Hf(t,e):e[c+8],u===vi||!iI(r,!1)?c=-1:(s=e[ie],c=xc(u),e=kc(u,e)));c!==-1;){let f=e[ie];if(rI(o,c,f.data)){let p=nR(c,e,n,s,r,l);if(p!==Ft)return p}u=e[c+8],u!==vi&&iI(r,e[ie].data[c+8]===l)&&rI(o,c,e)?(s=f,c=xc(u),e=kc(u,e)):c=-1}}return i}function nR(t,e,n,r,i,o){let s=e[ie],c=s.data[t+8],u=r==null?Ni(c)&&Lh:r!=s&&(c.type&3)!==0,l=i&J.Host&&o===c,f=rR(c,s,n,u,l);return f!==null?Vc(e,s,f,c,i):Ft}function rR(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?c:c+f,y=i?c+f:l;for(let m=p;m<y;m++){let C=s[m];if(m<u&&n===C||m>=u&&C.type===n)return m}if(i){let m=s[u];if(m&&Lt(m)&&m.type===n)return u}return null}function Vc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof br){let c=o;c.resolving&&qI(YS(s[n]));let u=Oc(c.canSeeViewProviders);c.resolving=!0;let l,f=c.injectImpl?rt(c.injectImpl):null,p=DE(t,r,J.Default);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&zN(n,s[n],e)}finally{f!==null&&rt(f),Oc(u),c.resolving=!1,AE()}}return o}function iR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(rs)?t[rs]:void 0;return typeof e=="number"?e>=0?e&PE:oR:e}function rI(t,e,n){let r=1<<t;return!!(n[e+(t>>xE)]&r)}function iI(t,e){return!(t&J.Self)&&!(t&J.Host&&e)}var yr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return VE(this._tNode,this._lView,e,Zc(r),n)}};function oR(){return new yr(Xe(),ce())}function gs(t){return ds(()=>{let e=t.prototype.constructor,n=e[wc]||Bh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[wc]||Bh(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Bh(t){return BI(t)?()=>{let e=Bh(Ze(t));return e&&e()}:vr(t)}function sR(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[W]&2048&&!Pc(s);){let c=LE(o,s,n,r|J.Self,Ft);if(c!==Ft)return c;let u=o.parent;if(!u){let l=s[iE];if(l){let f=l.get(n,Ft,r);if(f!==Ft)return f}u=jE(s),s=s[Si]}o=u}return i}function jE(t){let e=t[ie],n=e.type;return n===2?e.declTNode:n===1?t[ct]:null}function BE(t){return tR(Xe(),t)}function oI(t,e=null,n=null,r){let i=UE(t,e,n,r);return i.resolveInjectorInitializers(),i}function UE(t,e=null,n=null,r,i=new Set){let o=[n||it,dN(t)];return r=r||(typeof t=="object"?void 0:ot(t)),new is(o,e||Pf(),r||null,i)}var Ge=class t{static THROW_IF_NOT_FOUND=mr;static NULL=new Ac;static create(e,n){if(Array.isArray(e))return oI({name:""},n,e,"");{let r=e.name??"";return oI({name:r},e.parent,e.providers,r)}}static \u0275prov=le({token:t,providedIn:"any",factory:()=>Be(QI)});static __NG_ELEMENT_ID__=-1};var sI=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>BE(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},aR=new H("");aR.__NG_ELEMENT_ID__=t=>{let e=Xe();if(e===null)throw new G(204,!1);if(e.type&2)return e.value;if(t&J.Optional)return null;throw new G(204,!1)};var $E=!1,ou=(()=>{class t{static __NG_ELEMENT_ID__=cR;static __NG_ENV_ID__=n=>n}return t})(),Uh=class extends ou{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return Ri(n)?(e(),()=>{}):(pE(n,e),()=>RN(n,e))}};function cR(){return new Uh(ce())}var Cr=class{},qf=new H("",{providedIn:"root",factory:()=>!1});var HE=new H(""),qE=new H(""),ms=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Qo(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),su=(()=>{class t{internalPendingTasks=L(ms);scheduler=L(Cr);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){return _(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),$h=class extends ht{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,rE()&&(this.destroyRef=L(ou,{optional:!0})??void 0,this.pendingTasks=L(ms,{optional:!0})??void 0)}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ae&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ft=$h;function Lc(...t){}function zE(t){let e,n;function r(){t=Lc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function aI(t){return queueMicrotask(()=>t()),()=>{t=Lc}}var zf="isAngularZone",jc=zf+"_ID",uR=0,Ee=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ft(!1);onMicrotaskEmpty=new ft(!1);onStable=new ft(!1);onError=new ft(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=$E}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,hR(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zf)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,lR,Lc,Lc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},lR={};function Gf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function dR(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){zE(()=>{t.callbackScheduled=!1,Hh(t),t.isCheckStableRunning=!0,Gf(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Hh(t)}function hR(t){let e=()=>{dR(t)},n=uR++;t._inner=t._inner.fork({name:"angular",properties:{[zf]:!0,[jc]:n,[jc+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(fR(u))return r.invokeTask(o,s,c,u);try{return cI(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),uI(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return cI(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!pR(u)&&e(),uI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Hh(t),Gf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Hh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function cI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function uI(t){t._nesting--,Gf(t)}var qh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ft;onMicrotaskEmpty=new ft;onStable=new ft;onError=new ft;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function fR(t){return GE(t,"__ignore_ng_zone__")}function pR(t){return GE(t,"__scheduler_tick__")}function GE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Ar=class{_console=console;handleError(e){this._console.error("ERROR",e)}},gR=new H("",{providedIn:"root",factory:()=>{let t=L(Ee),e=L(Ar);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function lI(t,e){return LI(t,e)}function mR(t){return LI(VI,t)}var b6=(lI.required=mR,lI);function yR(){return au(Xe(),ce())}function au(t,e){return new Hn(Ut(t,e))}var Hn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=yR}return t})();function vR(t){return typeof t=="function"&&t[yt]!==void 0}function Mi(t,e){let n=zd(t,e?.equal),r=n[yt];return n.set=i=>Go(r,i),n.update=i=>Gd(r,i),n.asReadonly=_R.bind(n),n}function _R(){let t=this[yt];if(t.readonlyFn===void 0){let e=()=>this();e[yt]=t,t.readonlyFn=e}return t.readonlyFn}function WE(t){return vR(t)&&typeof t.set=="function"}function KE(t){return(t.flags&128)===128}var QE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(QE||{}),YE=new Map,IR=0;function ER(){return IR++}function wR(t){YE.set(t[Jc],t)}function zh(t){YE.delete(t[Jc])}var dI="__ngContext__";function Pi(t,e){Bn(e)?(t[dI]=e[Jc],wR(e)):t[dI]=e}function ZE(t){return XE(t[ss])}function JE(t){return XE(t[Ct])}function XE(t){for(;t!==null&&!pn(t);)t=t[Ct];return t}var Gh;function C6(t){Gh=t}function DR(){if(Gh!==void 0)return Gh;if(typeof document<"u")return document;throw new G(210,!1)}var TR=new H("",{providedIn:"root",factory:()=>bR}),bR="ng",CR=new H(""),Wf=new H("",{providedIn:"platform",factory:()=>"unknown"});var A6=new H("",{providedIn:"root",factory:()=>DR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var AR="h",SR="b";var ew=!1,NR=new H("",{providedIn:"root",factory:()=>ew});var Kf=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Kf||{}),cu=new H(""),hI=new Set;function uu(t){hI.has(t)||(hI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var tw=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=RR}return t})();function RR(){return new tw(ce(),Xe())}var gi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(gi||{}),nw=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),MR=[gi.EarlyRead,gi.Write,gi.MixedReadWrite,gi.Read],PR=(()=>{class t{ngZone=L(Ee);scheduler=L(Cr);errorHandler=L(Ar,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){L(cu,{optional:!0})}execute(){let n=this.sequences.size>0;n&&fe(16),this.executing=!0;for(let r of MR)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&fe(17)}register(n){let{view:r}=n;r!==void 0?((r[yi]??=[]).push(n),ps(r),r[W]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Kf.AFTER_NEXT_RENDER,n):n()}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),Wh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[yi];e&&(this.view[yi]=e.filter(n=>n!==this))}};function xR(t,e){!e?.injector&&xf(xR);let n=e?.injector??L(Ge);return uu("NgAfterNextRender"),OR(t,n,e,!0)}function kR(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function OR(t,e,n,r){let i=e.get(nw);i.impl??=e.get(PR);let o=e.get(cu,null,{optional:!0}),s=n?.phase??gi.MixedReadWrite,c=n?.manualCleanup!==!0?e.get(ou):null,u=e.get(tw,null,{optional:!0}),l=new Wh(i.impl,kR(t,s),u?.view,r,c,o?.snapshot(null));return i.impl.register(l),l}var FR=()=>null;function rw(t,e,n=!1){return FR(t,e,n)}function iw(t,e){let n=t.contentQueries;if(n!==null){let r=te(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];wE(o),c.contentQueries(2,e[s],s)}}}finally{te(r)}}}function Kh(t,e,n){wE(0);let r=te(null);try{e(t,n)}finally{te(r)}}function Qf(t,e,n){if(kf(e)){let r=te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{te(r)}}}var as=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(as||{}),fc;function VR(){if(fc===void 0&&(fc=null,Ln.trustedTypes))try{fc=Ln.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return fc}function lu(t){return VR()?.createHTML(t)||t}var pc;function LR(){if(pc===void 0&&(pc=null,Ln.trustedTypes))try{pc=Ln.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return pc}function fI(t){return LR()?.createScriptURL(t)||t}var dn=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${OI})`}},Qh=class extends dn{getTypeName(){return"HTML"}},Yh=class extends dn{getTypeName(){return"Style"}},Zh=class extends dn{getTypeName(){return"Script"}},Jh=class extends dn{getTypeName(){return"URL"}},Xh=class extends dn{getTypeName(){return"ResourceURL"}};function ys(t){return t instanceof dn?t.changingThisBreaksApplicationSecurity:t}function ow(t,e){let n=jR(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${OI})`)}return n===e}function jR(t){return t instanceof dn&&t.getTypeName()||null}function S6(t){return new Qh(t)}function N6(t){return new Yh(t)}function R6(t){return new Zh(t)}function M6(t){return new Jh(t)}function P6(t){return new Xh(t)}function BR(t){let e=new tf(t);return UR()?new ef(e):e}var ef=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(lu(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},tf=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=lu(e),n}};function UR(){try{return!!new window.DOMParser().parseFromString(lu(""),"text/html")}catch{return!1}}var $R=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function sw(t){return t=String(t),t.match($R)?t:"unsafe:"+t}function gn(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function vs(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var aw=gn("area,br,col,hr,img,wbr"),cw=gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),uw=gn("rp,rt"),HR=vs(uw,cw),qR=vs(cw,gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zR=vs(uw,gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pI=vs(aw,qR,zR,HR),lw=gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),GR=gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),WR=gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),KR=vs(lw,GR,WR),QR=gn("script,style,template"),nf=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=JR(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=ZR(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=gI(e).toLowerCase();if(!pI.hasOwnProperty(n))return this.sanitizedSomething=!0,!QR.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,c=s.toLowerCase();if(!KR.hasOwnProperty(c)){this.sanitizedSomething=!0;continue}let u=o.value;lw[c]&&(u=sw(u)),this.buf.push(" ",s,'="',mI(u),'"')}return this.buf.push(">"),!0}endElement(e){let n=gI(e).toLowerCase();pI.hasOwnProperty(n)&&!aw.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(mI(e))}};function YR(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function ZR(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw dw(e);return e}function JR(t){let e=t.firstChild;if(e&&YR(t,e))throw dw(e);return e}function gI(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function dw(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var XR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,eM=/([^\#-~ |!])/g;function mI(t){return t.replace(/&/g,"&amp;").replace(XR,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(eM,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var gc;function x6(t,e){let n=null;try{gc=gc||BR(t);let r=e?String(e):"";n=gc.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=gc.getInertBodyElement(r)}while(r!==o);let c=new nf().sanitizeChildren(yI(n)||n);return lu(c)}finally{if(n){let r=yI(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function yI(t){return"content"in t&&tM(t)?t.content:null}function tM(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Yf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Yf||{});function nM(t){let e=hw();return e?e.sanitize(Yf.URL,t)||"":ow(t,"URL")?ys(t):sw(Yc(t))}function rM(t){let e=hw();if(e)return fI(e.sanitize(Yf.RESOURCE_URL,t)||"");if(ow(t,"ResourceURL"))return fI(ys(t));throw new G(904,!1)}function iM(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?rM:nM}function k6(t,e,n){return iM(e,n)(t)}function hw(){let t=ce();return t&&t[ln].sanitizer}var oM=/^>|^->|<!--|-->|--!>|<!-$/g,sM=/(<|>)/g,aM="\u200B$1\u200B";function cM(t){return t.replace(oM,e=>e.replace(sM,aM))}function fw(t){return t instanceof Function?t():t}function uM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var pw="ng-template";function lM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&uM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Zf(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Zf(t){return t.type===4&&t.value!==pw}function dM(t,e,n){let r=t.type===4&&!n?pw:t.value;return e===r}function hM(t,e,n){let r=4,i=t.attrs,o=i!==null?gM(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Tt(r)&&!Tt(u))return!1;if(s&&Tt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!dM(t,u,n)||u===""&&e.length===1){if(Tt(r))return!1;s=!0}}else if(r&8){if(i===null||!lM(t,i,u,n)){if(Tt(r))return!1;s=!0}}else{let l=e[++c],f=fM(u,i,Zf(t),n);if(f===-1){if(Tt(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Tt(r))return!1;s=!0}}}}return Tt(r)||s}function Tt(t){return(t&1)===0}function fM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return mM(e,t)}function gw(t,e,n=!1){for(let r=0;r<e.length;r++)if(hM(t,e[r],n))return!0;return!1}function pM(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function gM(t){for(let e=0;e<t.length;e++){let n=t[e];if(RE(n))return e}return t.length}function mM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function yM(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function vI(t,e){return t?":not("+e.trim()+")":e}function vM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Tt(s)&&(e+=vI(o,i),i=""),r=s,o=o||!Tt(r);n++}return i!==""&&(e+=vI(o,i)),e}function _M(t){return t.map(vM).join(",")}function IM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Tt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var $t={};function EM(t,e){return t.createText(e)}function wM(t,e,n){t.setValue(e,n)}function DM(t,e){return t.createComment(cM(e))}function mw(t,e,n){return t.createElement(e,n)}function Bc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function yw(t,e,n){t.appendChild(e,n)}function _I(t,e,n,r,i){r!==null?Bc(t,e,n,r,i):yw(t,e,n)}function TM(t,e,n){t.removeChild(null,e,n)}function bM(t,e,n){t.setAttribute(e,"style",n)}function CM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function vw(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&QN(t,e,r),i!==null&&CM(t,e,i),o!==null&&bM(t,e,o)}function Jf(t,e,n,r,i,o,s,c,u,l,f){let p=at+r,y=p+i,m=AM(p,y),C=typeof l=="function"?l():l;return m[ie]={type:t,blueprint:m,template:n,queries:null,viewQuery:c,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:f}}function AM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:$t);return n}function SM(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Jf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Xf(t,e,n,r,i,o,s,c,u,l,f){let p=e.blueprint.slice();return p[fn]=i,p[W]=r|4|128|8|64|1024,(l!==null||t&&t[W]&2048)&&(p[W]|=2048),hE(p),p[Je]=p[Si]=t,p[st]=n,p[ln]=s||t&&t[ln],p[De]=c||t&&t[De],p[Er]=u||t&&t[Er]||null,p[ct]=o,p[Jc]=ER(),p[os]=f,p[iE]=l,p[It]=e.type==2?t[It]:p,p}function NM(t,e,n){let r=Ut(e,t),i=SM(n),o=t[ln].rendererFactory,s=ep(t,Xf(t,i,null,_w(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function _w(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Iw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ep(t,e){return t[ss]?t[J_][Ct]=e:t[ss]=e,t[J_]=e,e}function O6(t=1){Ew(xe(),ce(),Mr()+t,!1)}function Ew(t,e,n,r){if(!r)if((e[W]&3)===3){let o=t.preOrderCheckHooks;o!==null&&vc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&_c(e,o,0,n)}Tr(n)}var du=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(du||{});function rf(t,e,n,r){let i=te(null);try{let[o,s,c]=t.inputs[n],u=null;(s&du.SignalBased)!==0&&(u=e[o][yt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):sE(e,u,o,r)}finally{te(i)}}function ww(t,e,n,r,i){let o=Mr(),s=r&2;try{Tr(-1),s&&e.length>at&&Ew(t,e,at,!1),fe(s?2:0,i),n(r,i)}finally{Tr(o),fe(s?3:1,i)}}function hu(t,e,n){OM(t,e,n),(n.flags&64)===64&&FM(t,e,n)}function tp(t,e,n=Ut){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function RM(t,e,n,r){let o=r.get(NR,ew)||n===as.ShadowDom,s=t.selectRootElement(e,o);return MM(s),s}function MM(t){PM(t)}var PM=()=>null;function xM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Dw(t,e,n,r,i,o,s,c){if(!c&&rp(e,t,n,r,i)){Ni(e)&&kM(n,e.index);return}if(e.type&3){let u=Ut(e,n);r=xM(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function kM(t,e){let n=Bt(e,t);n[W]&16||(n[W]|=64)}function OM(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Ni(n)&&NM(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Fc(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=Vc(e,t,s,n);if(Pi(u,e),o!==null&&BM(e,s-r,u,c,n,o),Lt(c)){let l=Bt(n.index,e);l[st]=Vc(e,t,s,n)}}}function FM(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=BN();try{Tr(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Vh(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&VM(u,l)}}finally{Tr(-1),Vh(s)}}function VM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function np(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];gw(e,o.selectors,!1)&&(r??=[],Lt(o)?r.unshift(o):r.push(o))}return r}function LM(t,e,n,r,i,o){let s=Ut(t,e);jM(e[De],s,o,t.value,n,r,i)}function jM(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let c=s==null?Yc(o):s(o,r||"",i);t.setAttribute(e,i,c,n)}}function BM(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];rf(r,n,u,l)}}function UM(t,e){let n=t[Er],r=n?n.get(Ar,null):null;r&&r.handleError(e)}function rp(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];rf(p,n[l],f,i),c=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];rf(f,l,r,i),c=!0}return c}function $M(t,e){let n=Bt(e,t),r=n[ie];HM(r,n);let i=n[fn];i!==null&&n[os]===null&&(n[os]=rw(i,n[Er])),fe(18),ip(r,n,n[st]),fe(19,n[st])}function HM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ip(t,e,n){jf(e);try{let r=t.viewQuery;r!==null&&Kh(1,r,n);let i=t.template;i!==null&&ww(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ei]?.finishViewCreation(t),t.staticContentQueries&&iw(t,e),t.staticViewQueries&&Kh(2,t.viewQuery,n);let o=t.components;o!==null&&qM(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[W]&=-5,Bf()}}function qM(t,e){for(let n=0;n<e.length;n++)$M(t,e[n])}function Tw(t,e,n,r){let i=te(null);try{let o=e.tView,c=t[W]&4096?4096:16,u=Xf(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ii]=l;let f=t[Ei];return f!==null&&(u[Ei]=f.createEmbeddedView(o)),ip(o,u,n),u}finally{te(i)}}function of(t,e){return!e||e.firstChild===null||KE(t)}var zM;function op(t,e){return zM(t,e)}var Uc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Uc||{});function sp(t){return(t.flags&32)===32}function mi(t,e,n,r,i){if(r!=null){let o,s=!1;pn(r)?o=r:Bn(r)&&(s=!0,r=r[fn]);let c=jt(r);t===0&&n!==null?i==null?yw(e,n,c):Bc(e,n,c,i||null,!0):t===1&&n!==null?Bc(e,n,c,i||null,!0):t===2?TM(e,c,s):t===3&&e.destroyNode(c),o!=null&&tP(e,t,o,n,i)}}function GM(t,e){bw(t,e),e[fn]=null,e[ct]=null}function WM(t,e,n,r,i,o){r[fn]=i,r[ct]=e,pu(t,r,n,1,i,o)}function bw(t,e){e[ln].changeDetectionScheduler?.notify(9),pu(t,e,e[De],2,null,null)}function KM(t){let e=t[ss];if(!e)return vh(t[ie],t);for(;e;){let n=null;if(Bn(e))n=e[ss];else{let r=e[_t];r&&(n=r)}if(!n){for(;e&&!e[Ct]&&e!==t;)Bn(e)&&vh(e[ie],e),e=e[Je];e===null&&(e=t),Bn(e)&&vh(e[ie],e),n=e&&e[Ct]}e=n}}function ap(t,e){let n=t[Mc],r=n.indexOf(e);n.splice(r,1)}function Cw(t,e){if(Ri(e))return;let n=e[De];n.destroyNode&&pu(t,e,n,3,null,null),KM(e)}function vh(t,e){if(Ri(e))return;let n=te(null);try{e[W]&=-129,e[W]|=256,e[vt]&&$d(e[vt]),YM(t,e),QM(t,e),e[ie].type===1&&e[De].destroy();let r=e[Ii];if(r!==null&&pn(e[Je])){r!==e[Je]&&ap(r,e);let i=e[Ei];i!==null&&i.detachView(t)}zh(e)}finally{te(n)}}function QM(t,e){let n=t.cleanup,r=e[Sc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[Sc]=null);let i=e[jn];if(i!==null){e[jn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Nc];if(o!==null){e[Nc]=null;for(let s of o)s.destroy()}}function YM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof br)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];fe(4,c,u);try{u.call(c)}finally{fe(5,c,u)}}else{fe(4,i,o);try{o.call(i)}finally{fe(5,i,o)}}}}}function Aw(t,e,n){return ZM(t,e.parent,n)}function ZM(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[fn];if(Ni(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===as.None||i===as.Emulated)return null}return Ut(r,n)}function Sw(t,e,n){return XM(t,e,n)}function JM(t,e,n){return t.type&40?Ut(t,n):null}var XM=JM,II;function fu(t,e,n,r){let i=Aw(t,r,e),o=e[De],s=r.parent||e[ct],c=Sw(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)_I(o,i,n[u],c,!1);else _I(o,i,n,c,!1);II!==void 0&&II(o,r,e,n,i)}function ns(t,e){if(e!==null){let n=e.type;if(n&3)return Ut(e,t);if(n&4)return sf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ns(t,r);{let i=t[e.index];return pn(i)?sf(-1,i):jt(i)}}else{if(n&128)return ns(t,e.next);if(n&32)return op(e,t)()||jt(t[e.index]);{let r=Nw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Dr(t[It]);return ns(i,r)}else return ns(t,e.next)}}}return null}function Nw(t,e){if(e!==null){let r=t[It][ct],i=e.projection;return r.projection[i]}return null}function sf(t,e){let n=_t+t+1;if(n<e.length){let r=e[n],i=r[ie].firstChild;if(i!==null)return ns(r,i)}return e[wr]}function cp(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&Pi(jt(c),r),n.flags|=2),!sp(n))if(u&8)cp(t,e,n.child,r,i,o,!1),mi(e,t,i,c,o);else if(u&32){let l=op(n,r),f;for(;f=l();)mi(e,t,i,f,o);mi(e,t,i,c,o)}else u&16?Rw(t,e,r,n,i,o):mi(e,t,i,c,o);n=s?n.projectionNext:n.next}}function pu(t,e,n,r,i,o){cp(n,r,t.firstChild,e,i,o,!1)}function eP(t,e,n){let r=e[De],i=Aw(t,n,e),o=n.parent||e[ct],s=Sw(o,n,e);Rw(r,0,e,n,i,s)}function Rw(t,e,n,r,i,o){let s=n[It],u=s[ct].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];mi(e,t,i,f,o)}else{let l=u,f=s[Je];KE(r)&&(l.flags|=128),cp(t,e,l,f,i,o,!0)}}function tP(t,e,n,r,i){let o=n[wr],s=jt(n);o!==s&&mi(e,t,r,o,i);for(let c=_t;c<n.length;c++){let u=n[c];pu(u[ie],u,t,e,r,o)}}function nP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Uc.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Uc.Important),t.setStyle(n,r,i,o))}}function $c(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(jt(o)),pn(o)&&rP(o,r);let s=n.type;if(s&8)$c(t,e,n.child,r);else if(s&32){let c=op(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=Nw(e,n);if(Array.isArray(c))r.push(...c);else{let u=Dr(e[It]);$c(u[ie],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function rP(t,e){for(let n=_t;n<t.length;n++){let r=t[n],i=r[ie].firstChild;i!==null&&$c(r[ie],r,i,e)}t[wr]!==t[fn]&&e.push(t[wr])}function Mw(t){if(t[yi]!==null){for(let e of t[yi])e.impl.addSequence(e);t[yi].length=0}}var Pw=[];function iP(t){return t[vt]??oP(t)}function oP(t){let e=Pw.pop()??Object.create(aP);return e.lView=t,e}function sP(t){t.lView[vt]!==t&&(t.lView=null,Pw.push(t))}var aP=ve(me({},qo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ps(t.lView)},consumerOnSignalRead(){this.lView[vt]=this}});function cP(t){let e=t[vt]??Object.create(uP);return e.lView=t,e}var uP=ve(me({},qo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Dr(t.lView);for(;e&&!xw(e[ie]);)e=Dr(e);e&&fE(e)},consumerOnSignalRead(){this.lView[vt]=this}});function xw(t){return t.type!==2}function kw(t){if(t[Nc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Nc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[W]&8192)}}var lP=100;function Ow(t,e=!0,n=0){let i=t[ln].rendererFactory,o=!1;o||i.begin?.();try{dP(t,n)}catch(s){throw e&&UM(t,s),s}finally{o||i.end?.()}}function dP(t,e){let n=_E();try{eI(!0),af(t,e);let r=0;for(;tu(t);){if(r===lP)throw new G(103,!1);r++,af(t,1)}}finally{eI(n)}}function hP(t,e,n,r){if(Ri(e))return;let i=e[W],o=!1,s=!1;jf(e);let c=!0,u=null,l=null;o||(xw(t)?(l=iP(e),u=Va(l)):Fd()===null?(c=!1,l=cP(e),u=Va(l)):e[vt]&&($d(e[vt]),e[vt]=null));try{hE(e),VN(t.bindingStartIndex),n!==null&&ww(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let m=t.preOrderCheckHooks;m!==null&&vc(e,m,null)}else{let m=t.preOrderHooks;m!==null&&_c(e,m,0,null),mh(e,0)}if(s||fP(e),kw(e),Fw(e,0),t.contentQueries!==null&&iw(t,e),!o)if(f){let m=t.contentCheckHooks;m!==null&&vc(e,m)}else{let m=t.contentHooks;m!==null&&_c(e,m,1),mh(e,1)}gP(t,e);let p=t.components;p!==null&&Lw(e,p,0);let y=t.viewQuery;if(y!==null&&Kh(2,y,r),!o)if(f){let m=t.viewCheckHooks;m!==null&&vc(e,m)}else{let m=t.viewHooks;m!==null&&_c(e,m,2),mh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[gh]){for(let m of e[gh])m();e[gh]=null}o||(Mw(e),e[W]&=-73)}catch(f){throw o||ps(e),f}finally{l!==null&&(Bd(l,u),c&&sP(l)),Bf()}}function Fw(t,e){for(let n=ZE(t);n!==null;n=JE(n))for(let r=_t;r<n.length;r++){let i=n[r];Vw(i,e)}}function fP(t){for(let e=ZE(t);e!==null;e=JE(e)){if(!(e[W]&2))continue;let n=e[Mc];for(let r=0;r<n.length;r++){let i=n[r];fE(i)}}}function pP(t,e,n){fe(18);let r=Bt(e,t);Vw(r,n),fe(19,r[st])}function Vw(t,e){Of(t)&&af(t,e)}function af(t,e){let r=t[ie],i=t[W],o=t[vt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ud(o)),s||=!1,o&&(o.dirty=!1),t[W]&=-9217,s)hP(r,t,r.template,t[st]);else if(i&8192){kw(t),Fw(t,1);let c=r.components;c!==null&&Lw(t,c,1),Mw(t)}}function Lw(t,e,n){for(let r=0;r<e.length;r++)pP(t,e[r],n)}function gP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Tr(~i);else{let o=i,s=n[++r],c=n[++r];jN(s,o);let u=e[o];fe(24,u),c(2,u),fe(25,u)}}}finally{Tr(-1)}}function up(t,e){let n=_E()?64:1088;for(t[ln].changeDetectionScheduler?.notify(e);t;){t[W]|=n;let r=Dr(t);if(Pc(t)&&!r)return t;t=r}return null}function jw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Bw(t,e,n,r=!0){let i=e[ie];if(mP(i,e,t,n),r){let s=sf(n,t),c=e[De],u=c.parentNode(t[wr]);u!==null&&WM(i,t[ct],c,e,u,s)}let o=e[os];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function cf(t,e){if(t.length<=_t)return;let n=_t+e,r=t[n];if(r){let i=r[Ii];i!==null&&i!==t&&ap(i,r),e>0&&(t[n-1][Ct]=r[Ct]);let o=bc(t,_t+e);GM(r[ie],r);let s=o[Ei];s!==null&&s.detachView(o[ie]),r[Je]=null,r[Ct]=null,r[W]&=-129}return r}function mP(t,e,n,r){let i=_t+r,o=n.length;r>0&&(n[i-1][Ct]=e),r<o-_t?(e[Ct]=n[i],KI(n,_t+r,e)):(n.push(e),e[Ct]=null),e[Je]=n;let s=e[Ii];s!==null&&n!==s&&Uw(s,e);let c=e[Ei];c!==null&&c.insertView(t),Oh(e),e[W]|=128}function Uw(t,e){let n=t[Mc],r=e[Je];if(Bn(r))t[W]|=2;else{let i=r[Je][It];e[It]!==i&&(t[W]|=2)}n===null?t[Mc]=[e]:n.push(e)}var cs=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[ie];return $c(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[st]}set context(e){this._lView[st]=e}get destroyed(){return Ri(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(pn(e)){let n=e[Rc],r=n?n.indexOf(this):-1;r>-1&&(cf(e,r),bc(n,r))}this._attachedToViewContainer=!1}Cw(this._lView[ie],this._lView)}onDestroy(e){pE(this._lView,e)}markForCheck(){up(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[W]&=-129}reattach(){Oh(this._lView),this._lView[W]|=128}detectChanges(){this._lView[W]|=1024,Ow(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Pc(this._lView),n=this._lView[Ii];n!==null&&!e&&ap(n,this._lView),bw(this._lView[ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let n=Pc(this._lView),r=this._lView[Ii];r!==null&&!n&&Uw(r,this._lView),Oh(this._lView)}};var gu=(()=>{class t{static __NG_ELEMENT_ID__=_P}return t})(),yP=gu,vP=class extends yP{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Tw(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new cs(i)}};function _P(){return IP(Xe(),ce())}function IP(t,e){return t.type&4?new vP(e,t,au(t,e)):null}function _s(t,e,n,r,i){let o=t.data[e];if(o===null)o=EP(t,e,n,r,i),LN()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=FN();o.injectorIndex=s===null?-1:s.injectorIndex}return Rr(o,!0),o}function EP(t,e,n,r,i){let o=vE(),s=Vf(),c=s?o:o&&o.parent,u=t.data[e]=DP(t,c,n,e,r,i);return wP(t,u,o,s),u}function wP(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function DP(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return yE()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var L6=new RegExp(`^(\\d+)*(${SR}|${AR})*(.*)`);var TP=()=>null;function uf(t,e){return TP(t,e)}var bP=class{},$w=class{},lf=class{resolveComponentFactory(e){throw Error(`No component factory found for ${ot(e)}.`)}},mu=class{static NULL=new lf},Hc=class{},Pr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>CP()}return t})();function CP(){let t=ce(),e=Xe(),n=Bt(e.index,t);return(Bn(n)?n:t)[De]}var AP=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>null})}return t})();var _h={},df=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Zc(r);let i=this.injector.get(e,_h,r);return i!==_h||n===_h?i:this.parentInjector.get(e,n,r)}};function hf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Ah(i,c);else if(o==2){let u=c,l=e[++s];r=Ah(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function oe(t,e=J.Default){let n=ce();if(n===null)return Be(t,e);let r=Xe();return VE(r,n,Ze(t),e)}function $6(){let t="invalid";throw new Error(t)}function lp(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c,u=null,l=null,f=NP(s);f===null?c=s:[c,u,l]=f,PP(t,e,n,c,o,u,l)}o!==null&&r!==null&&SP(n,r,o)}function SP(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new G(-301,!1);r.push(e[i],o)}}function NP(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let c=t[s];if(s===0&&Lt(c)&&(e=c),c.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,RP(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function RP(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function MP(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function PP(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let y=0;y<c;y++){let m=r[y];!u&&Lt(m)&&(u=!0,MP(t,n,y)),jh(Fc(n,e),t,m.type)}LP(n,t.data.length,c);for(let y=0;y<c;y++){let m=r[y];m.providersResolver&&m.providersResolver(m)}let l=!1,f=!1,p=Iw(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let y=0;y<c;y++){let m=r[y];if(n.mergedAttrs=Di(n.mergedAttrs,m.hostAttrs),kP(t,n,e,p,m),VP(p,m,i),s!==null&&s.has(m)){let[N,R]=s.get(m);n.directiveToIndex.set(m.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(m))&&n.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let C=m.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}xP(t,n,o)}function xP(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))EI(0,e,i,r),EI(1,e,i,r),DI(e,r,!1);else{let o=n.get(i);wI(0,e,o,r),wI(1,e,o,r),DI(e,r,!0)}}}function EI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Hw(e,o)}}function wI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),Hw(e,s)}}function Hw(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function DI(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Zf(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function kP(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=vr(i.type,!0)),s=new br(o,Lt(i),oe);t.blueprint[r]=s,n[r]=s,OP(t,e,r,Iw(t,n,i.hostVars,$t),i)}function OP(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;FP(s)!=c&&s.push(c),s.push(n,r,o)}}function FP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function VP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Lt(e)&&(n[""]=t)}}function LP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function qw(t,e,n,r,i,o,s,c){let u=e.consts,l=wi(u,s),f=_s(e,t,2,r,l);return o&&lp(e,n,f,wi(u,c),i),f.mergedAttrs=Di(f.mergedAttrs,f.attrs),f.attrs!==null&&hf(f,f.attrs,!1),f.mergedAttrs!==null&&hf(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function zw(t,e){$f(t,e),kf(e)&&t.queries.elementEnd(e)}var qc=class extends mu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ir(e);return new Ti(n,this.ngModule)}};function jP(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&du.SignalBased)!==0};return i&&(o.transform=i),o})}function BP(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function UP(t,e,n){let r=e instanceof Vt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new df(n,r):n}function $P(t){let e=t.get(Hc,null);if(e===null)throw new G(407,!1);let n=t.get(AP,null),r=t.get(Cr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function HP(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return mw(e,n,n==="svg"?bN:n==="math"?CN:null)}var Ti=class extends $w{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=jP(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=BP(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=_M(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){fe(22);let o=te(null);try{let s=this.componentDef,c=r?["ng-version","19.2.11"]:IM(this.componentDef.selectors[0]),u=Jf(0,null,null,1,0,null,null,null,null,[c],null),l=UP(s,i||this.ngModule,e),f=$P(l),p=f.rendererFactory.createRenderer(null,s),y=r?RM(p,r,s.encapsulation,l):HP(s,p),m=Xf(null,u,null,512|_w(s),null,null,f,p,l,null,rw(y,l,!0));m[at]=y,jf(m);let C=null;try{let N=qw(at,u,m,"#host",()=>[this.componentDef],!0,0);y&&(vw(p,y,N),Pi(y,m)),hu(u,m,N),Qf(u,N,m),zw(u,N),n!==void 0&&qP(N,this.ngContentSelectors,n),C=Bt(N.index,m),m[st]=C[st],ip(u,m,null)}catch(N){throw C!==null&&zh(C),zh(m),N}finally{fe(23),Bf()}return new ff(this.componentType,m)}finally{te(o)}}},ff=class extends bP{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=dE(n[ie],at),this.location=au(this._tNode,n),this.instance=Bt(this._tNode.index,n)[st],this.hostView=this.changeDetectorRef=new cs(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=rp(r,i[ie],i,e,n);this.previousInputValues.set(e,n);let s=Bt(r.index,i);up(s,1)}get injector(){return new yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function qP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var yu=(()=>{class t{static __NG_ELEMENT_ID__=zP}return t})();function zP(){let t=Xe();return WP(t,ce())}var GP=yu,Gw=class extends GP{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return au(this._hostTNode,this._hostLView)}get injector(){return new yr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Hf(this._hostTNode,this._hostLView);if(ME(e)){let n=kc(e,this._hostLView),r=xc(e),i=n[ie].data[r+8];return new yr(i,n)}else return new yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=TI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-_t}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=uf(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,of(this._hostTNode,s)),c}createComponent(e,n,r,i,o){let s=e&&!EN(e),c;if(s)c=n;else{let C=n||{};c=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}let u=s?e:new Ti(Ir(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(s?l:this.parentInjector).get(Vt,null);N&&(o=N)}let f=Ir(u.componentType??{}),p=uf(this._lContainer,f?.id??null),y=p?.firstChild??null,m=u.create(l,i,y,o);return this.insertImpl(m.hostView,c,of(this._hostTNode,p)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(SN(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Je],l=new Gw(u,u[ct],u[Je]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Bw(s,i,o,r),e.attachToViewContainerRef(),KI(Ih(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=TI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=cf(this._lContainer,n);r&&(bc(Ih(this._lContainer),n),Cw(r[ie],r))}detach(e){let n=this._adjustIndex(e,-1),r=cf(this._lContainer,n);return r&&bc(Ih(this._lContainer),n)!=null?new cs(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function TI(t){return t[Rc]}function Ih(t){return t[Rc]||(t[Rc]=[])}function WP(t,e){let n,r=e[t.index];return pn(r)?n=r:(n=jw(r,e,null,t),e[t.index]=n,ep(e,n)),QP(n,e,t,r),new Gw(n,t,e)}function KP(t,e){let n=t[De],r=n.createComment(""),i=Ut(e,t),o=n.parentNode(i);return Bc(n,o,r,n.nextSibling(i),!1),r}var QP=JP,YP=()=>!1;function ZP(t,e,n){return YP(t,e,n)}function JP(t,e,n,r){if(t[wr])return;let i;n.type&8?i=jt(r):i=KP(e,n),t[wr]=i}var bi=class{},XP=class{};var pf=class extends bi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new qc(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=ZI(e);this._bootstrapComponents=fw(o.bootstrap),this._r3Injector=UE(e,n,[{provide:bi,useValue:this},{provide:mu,useValue:this.componentFactoryResolver},...r],ot(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gf=class extends XP{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new pf(this.moduleType,e,[])}};var zc=class extends bi{injector;componentFactoryResolver=new qc(this);instance=null;constructor(e){super();let n=new is([...e.providers,{provide:bi,useValue:this},{provide:mu,useValue:this.componentFactoryResolver}],e.parent||Pf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ex(t,e,n=null){return new zc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var tx=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=JI(!1,n.type),i=r.length>0?ex([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=le({token:t,providedIn:"environment",factory:()=>new t(Be(Vt))})}return t})();function G6(t){return ds(()=>{let e=Kw(t),n=ve(me({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===QE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(tx).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||as.Emulated,styles:t.styles||it,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&uu("NgStandalone"),Qw(n);let r=t.dependencies;return n.directiveDefs=bI(r,!1),n.pipeDefs=bI(r,!0),n.id=sx(n),n})}function nx(t){return Ir(t)||uN(t)}function rx(t){return t!==null}function Is(t){return ds(()=>({type:t.type,bootstrap:t.bootstrap||it,declarations:t.declarations||it,imports:t.imports||it,exports:t.exports||it,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ix(t,e){if(t==null)return _r;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=du.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function ox(t){if(t==null)return _r;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function ke(t){return ds(()=>{let e=Kw(t);return Qw(e),e})}function Ww(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Kw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||_r,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||it,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ix(t.inputs,e),outputs:ox(t.outputs),debugInfo:null}}function Qw(t){t.features?.forEach(e=>e(t))}function bI(t,e){if(!t)return null;let n=e?lN:nx;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(rx)}function sx(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ax(t){return Object.getPrototypeOf(t.prototype).constructor}function At(t){let e=ax(t.type),n=!0,r=[t];for(;e;){let i;if(Lt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Eh(t.inputs),s.declaredInputs=Eh(t.declaredInputs),s.outputs=Eh(t.outputs);let c=i.hostBindings;c&&hx(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&lx(t,u),l&&dx(t,l),cx(t,i),$S(t.outputs,i.outputs),Lt(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===At&&(n=!1)}}e=Object.getPrototypeOf(e)}ux(r)}function cx(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function ux(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Di(i.hostAttrs,n=Di(n,i.hostAttrs))}}function Eh(t){return t===_r?{}:t===it?[]:t}function lx(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function dx(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function hx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Yw(t){return px(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function fx(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function px(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Zw(t,e,n){return t[e]=n}function gx(t,e){return t[e]}function Un(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function mx(t,e,n,r){let i=Un(t,e,n);return Un(t,e+1,r)||i}function yx(t,e,n,r,i,o,s,c,u){let l=e.consts,f=_s(e,t,4,s||null,c||null);Ff()&&lp(e,n,f,wi(l,u),np),f.mergedAttrs=Di(f.mergedAttrs,f.attrs),$f(e,f);let p=f.tView=Jf(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function Jw(t,e,n,r,i,o,s,c,u,l){let f=n+at,p=e.firstCreatePass?yx(f,e,t,r,i,o,s,c,u):e.data[f];Rr(p,!1);let y=_x(e,t,p,n);ru()&&fu(e,t,y,p),Pi(y,t);let m=jw(y,t,y,p);return t[f]=m,ep(t,m),ZP(m,p,t),Xc(p)&&hu(e,t,p),u!=null&&tp(t,p,l),p}function vx(t,e,n,r,i,o,s,c){let u=ce(),l=xe(),f=wi(l.consts,o);return Jw(u,l,t,e,n,r,i,f,s,c),vx}var _x=Ix;function Ix(t,e,n,r){return iu(!0),e[De].createComment("")}var W6=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Ex=new H("");var wx=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>new mf})}return t})(),mf=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function Es(t){return!!t&&typeof t.then=="function"}function Xw(t){return!!t&&typeof t.subscribe=="function"}var eD=new H("");function K6(t){return $n([{provide:eD,multi:!0,useValue:t}])}var tD=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=L(eD,{optional:!0})??[];injector=L(Ge);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ai(this.injector,i);if(Es(o))n.push(o);else if(Xw(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Dx=new H("");function Tx(){qd(()=>{throw new G(600,!1)})}function bx(t){return t.isBoundToModule}var Cx=10;var us=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(gR);afterRenderManager=L(nw);zonelessEnabled=L(qf);rootEffectScheduler=L(wx);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ht;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=L(ms).hasPendingTasks.pipe(un(n=>!n));constructor(){L(cu,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=L(Vt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ge.NULL){fe(10);let o=n instanceof $w;if(!this._injector.get(tD).done){let m="";throw new G(405,m)}let c;o?c=n:c=this._injector.get(mu).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=bx(c)?void 0:this._injector.get(bi),l=r||c.selector,f=c.create(i,[],l,u),p=f.location.nativeElement,y=f.injector.get(Ex,null);return y?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Ic(this.components,f),y?.unregisterApplication(p)}),this._loadComponent(f),fe(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){fe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Kf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new G(101,!1);let n=te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,te(n),this.afterTick.next(),fe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Hc,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Cx;)fe(14),this.synchronizeOnce(),fe(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Ax(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>tu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ic(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Dx,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ic(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new G(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ic(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ax(t,e,n,r){if(!n&&!tu(t))return;Ow(t,e,n&&!r?0:1)}function dp(t,e,n,r){let i=ce(),o=nu();if(Un(i,o,e)){let s=xe(),c=Uf();LM(c,i,t,e,n,r)}return dp}function Sx(t,e,n,r){return Un(t,nu(),n)?e+Yc(n)+r:$t}function mc(t,e){return t<<17|e<<2}function Sr(t){return t>>17&32767}function Nx(t){return(t&2)==2}function Rx(t,e){return t&131071|e<<17}function yf(t){return t|2}function Ci(t){return(t&131068)>>2}function wh(t,e){return t&-131069|e<<2}function Mx(t){return(t&1)===1}function vf(t){return t|1}function Px(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Sr(s),u=Ci(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||fs(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let y=Sr(t[c+1]);t[r+1]=mc(y,c),y!==0&&(t[y+1]=wh(t[y+1],r)),t[c+1]=Rx(t[c+1],r)}else t[r+1]=mc(c,0),c!==0&&(t[c+1]=wh(t[c+1],r)),c=r;else t[r+1]=mc(u,0),c===0?c=r:t[u+1]=wh(t[u+1],r),u=r;l&&(t[r+1]=yf(t[r+1])),CI(t,f,r,!0),CI(t,f,r,!1),xx(e,f,t,r,o),s=mc(c,u),o?e.classBindings=s:e.styleBindings=s}function xx(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&fs(o,e)>=0&&(n[r+1]=vf(n[r+1]))}function CI(t,e,n,r){let i=t[n+1],o=e===null,s=r?Sr(i):Ci(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];kx(u,e)&&(c=!0,t[s+1]=r?vf(l):yf(l)),s=r?Sr(l):Ci(l)}c&&(t[n+1]=r?yf(i):vf(i))}function kx(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?fs(t,e)>=0:!1}var bt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ox(t){return t.substring(bt.key,bt.keyEnd)}function Fx(t){return Vx(t),nD(t,rD(t,0,bt.textEnd))}function nD(t,e){let n=bt.textEnd;return n===e?-1:(e=bt.keyEnd=Lx(t,bt.key=e,n),rD(t,e,n))}function Vx(t){bt.key=0,bt.keyEnd=0,bt.value=0,bt.valueEnd=0,bt.textEnd=t.length}function rD(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Lx(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function jx(t,e,n){let r=ce(),i=nu();if(Un(r,i,e)){let o=xe(),s=Uf();Dw(o,s,r,t,e,r[De],n,!1)}return jx}function _f(t,e,n,r,i){rp(e,t,n,i?"class":"style",r)}function vu(t,e){return Ux(t,e,null,!0),vu}function Q6(t){$x(Kx,Bx,t,!0)}function Bx(t,e){for(let n=Fx(e);n>=0;n=nD(e,n))Rf(t,Ox(e),!0)}function Ux(t,e,n,r){let i=ce(),o=xe(),s=EE(2);if(o.firstUpdatePass&&oD(o,t,s,r),e!==$t&&Un(i,s,e)){let c=o.data[Mr()];sD(o,c,i,i[De],t,i[s+1]=Yx(e,n),r,s)}}function $x(t,e,n,r){let i=xe(),o=EE(2);i.firstUpdatePass&&oD(i,null,o,r);let s=ce();if(n!==$t&&Un(s,o,n)){let c=i.data[Mr()];if(aD(c,r)&&!iD(i,o)){let u=r?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=Ah(u,n||"")),_f(i,c,s,n,r)}else Qx(i,c,s,s[De],s[o+1],s[o+1]=Wx(t,e,n),r,o)}}function iD(t,e){return e>=t.expandoStartIndex}function oD(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Mr()],s=iD(t,n);aD(o,r)&&e===null&&!s&&(e=!1),e=Hx(i,o,e,r),Px(i,o,e,n,s,r)}}function Hx(t,e,n,r){let i=UN(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Dh(null,t,e,n,r),n=ls(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Dh(i,t,e,n,r),o===null){let u=qx(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Dh(null,t,e,u[1],r),u=ls(u,e.attrs,r),zx(t,e,r,u))}else o=Gx(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function qx(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ci(r)!==0)return t[Sr(r)]}function zx(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Sr(i)]=r}function Gx(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ls(r,s,n)}return ls(r,e.attrs,n)}function Dh(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=ls(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function ls(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Rf(t,s,n?!0:e[++o]))}return t===void 0?null:t}function Wx(t,e,n){if(n==null||n==="")return it;let r=[],i=ys(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function Kx(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Rf(t,r,n)}function Qx(t,e,n,r,i,o,s,c){i===$t&&(i=it);let u=0,l=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let y=u<i.length?i[u+1]:void 0,m=l<o.length?o[l+1]:void 0,C=null,N;f===p?(u+=2,l+=2,y!==m&&(C=p,N=m)):p===null||f!==null&&f<p?(u+=2,C=f):(l+=2,C=p,N=m),C!==null&&sD(t,e,n,r,C,N,s,c),f=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function sD(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],f=Mx(l)?AI(u,e,n,i,Ci(l),s):void 0;if(!Gc(f)){Gc(o)||Nx(l)&&(o=AI(u,null,n,i,c,s));let p=lE(Mr(),n);nP(r,s,p,i,o)}}function AI(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,y=n[i+1];y===$t&&(y=p?it:void 0);let m=p?fh(y,r):f===r?y:void 0;if(l&&!Gc(m)&&(m=fh(u,r)),Gc(m)&&(c=m,s))return c;let C=t[i+1];i=s?Sr(C):Ci(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=fh(u,r))}return c}function Gc(t){return t!==void 0}function Yx(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ot(ys(t)))),t}function aD(t,e){return(t.flags&(e?8:16))!==0}function cD(t,e,n,r){let i=ce(),o=xe(),s=at+t,c=i[De],u=o.firstCreatePass?qw(s,o,i,e,np,Ff(),n,r):o.data[s],l=Jx(o,i,u,c,e,t);i[s]=l;let f=Xc(u);return Rr(u,!0),vw(c,l,u),!sp(u)&&ru()&&fu(o,i,l,u),(MN()===0||f)&&Pi(l,i),PN(),f&&(hu(o,i,u),Qf(o,u,i)),r!==null&&tp(i,u),cD}function uD(){let t=Xe();Vf()?Lf():(t=t.parent,Rr(t,!1));let e=t;kN(e)&&ON(),xN();let n=xe();return n.firstCreatePass&&zw(n,e),e.classesWithoutHost!=null&&WN(e)&&_f(n,e,ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&KN(e)&&_f(n,e,ce(),e.stylesWithoutHost,!1),uD}function Zx(t,e,n,r){return cD(t,e,n,r),uD(),Zx}var Jx=(t,e,n,r,i,o)=>(iu(!0),mw(r,i,qN()));function Xx(t,e,n,r,i){let o=e.consts,s=wi(o,r),c=_s(e,t,8,"ng-container",s);s!==null&&hf(c,s,!0);let u=wi(o,i);return Ff()&&lp(e,n,c,u,np),c.mergedAttrs=Di(c.mergedAttrs,c.attrs),e.queries!==null&&e.queries.elementStart(e,c),c}function ek(t,e,n){let r=ce(),i=xe(),o=t+at,s=i.firstCreatePass?Xx(o,i,r,e,n):i.data[o];Rr(s,!0);let c=nk(i,r,s,t);return r[o]=c,ru()&&fu(i,r,c,s),Pi(c,r),Xc(s)&&(hu(i,r,s),Qf(i,s,r)),n!=null&&tp(r,s),ek}function tk(){let t=Xe(),e=xe();return Vf()?Lf():(t=t.parent,Rr(t,!1)),e.firstCreatePass&&($f(e,t),kf(t)&&e.queries.elementEnd(t)),tk}var nk=(t,e,n,r)=>(iu(!0),DM(e[De],""));function Y6(){return ce()}var gr=void 0;function rk(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var ik=["en",[["a","p"],["AM","PM"],gr],[["AM","PM"],gr,gr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",gr,"{1} 'at' {0}",gr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",rk],Th={};function hp(t){let e=ok(t),n=SI(e);if(n)return n;let r=e.split("-")[0];if(n=SI(r),n)return n;if(r==="en")return ik;throw new G(701,!1)}function SI(t){return t in Th||(Th[t]=Ln.ng&&Ln.ng.common&&Ln.ng.common.locales&&Ln.ng.common.locales[t]),Th[t]}var xi=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(xi||{});function ok(t){return t.toLowerCase().replace(/_/g,"-")}var Wc="en-US";var sk=Wc;function ak(t){typeof t=="string"&&(sk=t.toLowerCase().replace(/_/g,"-"))}function NI(t,e,n){return function r(i){if(i===Function)return n;let o=Ni(t)?Bt(t.index,e):e;up(o,5);let s=e[st],c=RI(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=RI(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function RI(t,e,n,r){let i=te(null);try{return fe(6,e,n),n(r)!==!1}catch(o){return ck(t,o),!1}finally{fe(7,e,n),te(i)}}function ck(t,e){let n=t[Er],r=n?n.get(Ar,null):null;r&&r.handleError(e)}function MI(t,e,n,r,i,o){let s=e[n],c=e[ie],l=c.data[n].outputs[r],f=s[l],p=c.firstCreatePass?mE(c):null,y=gE(e),m=f.subscribe(o),C=y.length;y.push(o,m),p&&p.push(i,t.index,C,-(C+1))}var uk=new Map;function ki(t,e,n,r){let i=ce(),o=xe(),s=Xe();return lD(o,i,i[De],s,t,e,r),ki}function lk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[Sc],u=i[o+2];return c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function lD(t,e,n,r,i,o,s){let c=Xc(r),l=t.firstCreatePass?mE(t):null,f=gE(e),p=!0;if(r.type&3||s){let y=Ut(r,e),m=s?s(y):y,C=f.length,N=s?k=>s(jt(k[r.index])):r.index,R=null;if(!s&&c&&(R=lk(t,e,i,r.index)),R!==null){let k=R.__ngLastListenerFn__||R;k.__ngNextListenerFn__=o,R.__ngLastListenerFn__=o,p=!1}else{o=NI(r,e,o);let k=e[Er].get(TR);uk.get(k)?.(m,i,o);let $=n.listen(m,i,o);f.push(o,$),l&&l.push(i,N,C,C+1)}}else o=NI(r,e,o);if(p){let y=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let C=0;C<m.length;C+=2){let N=m[C],R=m[C+1];MI(r,e,N,R,i,o)}if(y&&y.length)for(let C of y)MI(r,e,C,i,i,o)}}function Z6(t=1){return HN(t)}function dk(t,e){let n=null,r=pM(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?gw(t,o,!0):yM(r,o))return i}return n}function J6(t){let e=ce()[It][ct];if(!e.projection){let n=t?t.length:1,r=e.projection=sN(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?dk(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function X6(t,e=0,n,r,i,o){let s=ce(),c=xe(),u=r?t+1:null;u!==null&&Jw(s,c,u,r,i,o,null,n);let l=_s(c,at+t,16,null,n||null);l.projection===null&&(l.projection=e),Lf();let p=!s[os]||yE();s[It][ct].projection[l.projection]===null&&u!==null?hk(s,c,u):p&&!sp(l)&&eP(c,s,l)}function hk(t,e,n){let r=at+n,i=e.data[r],o=t[r],s=uf(o,i.tView.ssrId),c=Tw(t,i,void 0,{dehydratedView:s});Bw(o,c,0,of(i,s))}function fk(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function ez(t,e=""){let n=ce(),r=xe(),i=t+at,o=r.firstCreatePass?_s(r,i,1,e,null):r.data[i],s=pk(r,n,o,e,t);n[i]=s,ru()&&fu(r,n,s,o),Rr(o,!1)}var pk=(t,e,n,r,i)=>(iu(!0),EM(e[De],r));function gk(t){return dD("",t,""),gk}function dD(t,e,n){let r=ce(),i=Sx(r,t,e,n);return i!==$t&&mk(r,Mr(),i),dD}function mk(t,e,n){let r=lE(e,t);wM(t[De],r,n)}function yk(t,e,n){WE(e)&&(e=e());let r=ce(),i=nu();if(Un(r,i,e)){let o=xe(),s=Uf();Dw(o,s,r,t,e,r[De],n,!1)}return yk}function tz(t,e){let n=WE(t);return n&&t.set(e),n}function vk(t,e){let n=ce(),r=xe(),i=Xe();return lD(r,n,n[De],i,t,e),vk}function _k(t,e,n){let r=xe();if(r.firstCreatePass){let i=Lt(t);If(n,r.data,r.blueprint,i,!0),If(e,r.data,r.blueprint,i,!1)}}function If(t,e,n,r,i){if(t=Ze(t),Array.isArray(t))for(let o=0;o<t.length;o++)If(t[o],e,n,r,i);else{let o=xe(),s=ce(),c=Xe(),u=_i(t)?t:Ze(t.provide),l=nE(t),f=c.providerIndexes&1048575,p=c.directiveStart,y=c.providerIndexes>>20;if(_i(t)||!t.multi){let m=new br(l,i,oe),C=Ch(u,e,i?f:f+y,p);C===-1?(jh(Fc(c,s),o,u),bh(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(m),s.push(m)):(n[C]=m,s[C]=m)}else{let m=Ch(u,e,f+y,p),C=Ch(u,e,f,f+y),N=m>=0&&n[m],R=C>=0&&n[C];if(i&&!R||!i&&!N){jh(Fc(c,s),o,u);let k=wk(i?Ek:Ik,n.length,i,r,l);!i&&R&&(n[C].providerFactory=k),bh(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=hD(n[i?C:m],l,!i&&r);bh(o,t,m>-1?m:C,k)}!i&&r&&R&&n[C].componentProviders++}}}function bh(t,e,n,r){let i=_i(e),o=gN(e);if(i||o){let u=(o?Ze(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,u]):l[f+1].push(r,u)}else l.push(n,u)}}}function hD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ch(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ik(t,e,n,r,i){return Ef(this.multi,[])}function Ek(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=Vc(r,r[ie],this.providerFactory.index,i);s=u.slice(0,c),Ef(o,s);for(let l=c;l<u.length;l++)s.push(u[l])}else s=[],Ef(o,s);return s}function Ef(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function wk(t,e,n,r,i){let o=new br(t,n,oe);return o.multi=[],o.index=e,o.componentProviders=0,hD(o,i,r&&!n),o}function xr(t,e=[]){return n=>{n.providersResolver=(r,i)=>_k(r,i?i(t):t,e)}}function nz(t,e,n){let r=IE()+t,i=ce();return i[r]===$t?Zw(i,r,n?e.call(n):e()):gx(i,r)}function Dk(t,e){let n=t[e];return n===$t?void 0:n}function Tk(t,e,n,r,i,o,s){let c=e+n;return mx(t,c,i,o)?Zw(t,c+2,s?r.call(s,i,o):r(i,o)):Dk(t,c+2)}function rz(t,e){let n=xe(),r,i=t+at;n.firstCreatePass?(r=bk(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=vr(r.type,!0)),s,c=rt(oe);try{let u=Oc(!1),l=o();return Oc(u),fk(n,ce(),i,l),l}finally{rt(c)}}function bk(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function iz(t,e,n,r){let i=t+at,o=ce(),s=AN(o,i);return Ck(o,i)?Tk(o,IE(),e,s.transform,n,r,s):s.transform(n,r)}function Ck(t,e){return t[ie].data[e].pure}var Nr=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},fD=new Nr("19.2.11"),wf=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},oz=(()=>{class t{compileModuleSync(n){return new gf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ZI(n),o=fw(i.declarations).reduce((s,c)=>{let u=Ir(c);return u&&s.push(new Ti(u)),s},[]);return new wf(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ak=(()=>{class t{zone=L(Ee);changeDetectionScheduler=L(Cr);applicationRef=L(us);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sk=new H("",{factory:()=>!1});function pD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Ee(ve(me({},gD()),{scheduleInRootZone:n})),[{provide:Ee,useFactory:t},{provide:Cc,multi:!0,useFactory:()=>{let r=L(Ak,{optional:!0});return()=>r.initialize()}},{provide:Cc,multi:!0,useFactory:()=>{let r=L(Nk);return()=>{r.initialize()}}},e===!0?{provide:HE,useValue:!0}:[],{provide:qE,useValue:n??$E}]}function sz(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=pD({ngZoneFactory:()=>{let i=gD(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&uu("NgZone_CoalesceEvent"),new Ee(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return $n([{provide:Sk,useValue:!0},{provide:qf,useValue:!1},r])}function gD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Nk=(()=>{class t{subscription=new Ae;initialized=!1;zone=L(Ee);pendingTasks=L(ms);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Rk=(()=>{class t{appRef=L(us);taskService=L(ms);ngZone=L(Ee);zonelessEnabled=L(qf);tracing=L(cu,{optional:!0});disableScheduling=L(HE,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ae;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(jc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(qE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof qh||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?aI:zE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(jc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,aI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Mk(){return typeof $localize<"u"&&$localize.locale||Wc}var _u=new H("",{providedIn:"root",factory:()=>L(_u,J.Optional|J.SkipSelf)||Mk()});var Df=new H(""),Pk=new H("");function es(t){return!t.moduleRef}function xk(t){let e=es(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ee);return n.run(()=>{es(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Ar,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),es(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Df);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Df);s.add(o),t.moduleRef.onDestroy(()=>{Ic(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return Ok(r,n,()=>{let o=e.get(tD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(_u,Wc);if(ak(s||Wc),!e.get(Pk,!0))return es(t)?e.get(us):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(es(t)){let u=e.get(us);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return kk(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function kk(t,e){let n=t.injector.get(us);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new G(-403,!1);e.push(t)}function Ok(t,e,n){try{let r=n();return Es(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ec=null;function Fk(t=[],e){return Ge.create({name:e,providers:[{provide:tE,useValue:"platform"},{provide:Df,useValue:new Set([()=>Ec=null])},...t]})}function Vk(t=[]){if(Ec)return Ec;let e=Fk(t);return Ec=e,Tx(),Lk(e),e}function Lk(t){let e=t.get(CR,null);Ai(t,()=>{e?.forEach(n=>n())})}function fp(){return!1}var Iu=(()=>{class t{static __NG_ELEMENT_ID__=jk}return t})();function jk(t){return Bk(Xe(),ce(),(t&16)===16)}function Bk(t,e,n){if(Ni(t)&&!n){let r=Bt(t.index,e);return new cs(r,r)}else if(t.type&175){let r=e[It];return new cs(r,e)}return null}var Tf=class{constructor(){}supports(e){return Yw(e)}create(e){return new bf(e)}},Uk=(t,e)=>e,bf=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Uk}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<PI(r,i,o)?n:r,c=PI(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=c-i,f=u-i;if(l!=f){for(let y=0;y<l;y++){let m=y<o.length?o[y]:o[y]=0,C=m+y;f<=C&&C<l&&(o[y]=m+1)}let p=s.previousIndex;o[p]=f-l}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Yw(e))throw new G(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,c),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,c)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,fx(e,c=>{s=this._trackByFn(i,c),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,c,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,s,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Cf(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Kc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Kc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Cf=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Af=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Kc=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Af,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function PI(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function xI(){return new pp([new Tf])}var pp=(()=>{class t{factories;static \u0275prov=le({token:t,providedIn:"root",factory:xI});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||xI()),deps:[[t,new oN,new pt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new G(901,!1)}}return t})();function az(t){fe(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Vk(r),o=[pD({}),{provide:Cr,useExisting:Rk},...n||[]],s=new zc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return xk({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{fe(9)}}function Eu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Ht(t){return Wd(t)}function Oi(t,e){return Hd(t,e?.equal)}var kI=class{[yt];constructor(e){this[yt]=e}destroy(){this[yt].destroy()}};function cz(t){let e=Ir(t);if(!e)return null;let n=new Ti(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ws=new H("");var vD=null;function kr(){return vD}function $k(t){vD??=t}var gp=class{},Ds=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:()=>L(_D),providedIn:"platform"})}return t})(),Hk=new H(""),_D=(()=>{class t extends Ds{_location;_history;_doc=L(ws);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kr().getBaseHref(this._doc)}onPopState(n){let r=kr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=kr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Du(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function mD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function St(t){return t&&t[0]!=="?"?`?${t}`:t}var Fi=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:()=>L(ID),providedIn:"root"})}return t})(),Tu=new H(""),ID=(()=>{class t extends Fi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(ws).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Du(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+St(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+St(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+St(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Be(Ds),Be(Tu,8))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ED=(()=>{class t{_subject=new ht;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Gk(mD(yD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+St(r))}normalize(n){return t.stripTrailingSlash(zk(this._basePath,yD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+St(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+St(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=St;static joinWithSlash=Du;static stripTrailingSlash=mD;static \u0275fac=function(r){return new(r||t)(Be(Fi))};static \u0275prov=le({token:t,factory:()=>qk(),providedIn:"root"})}return t})();function qk(){return new ED(Be(Fi))}function zk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function yD(t){return t.replace(/\/index.html$/,"")}function Gk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Wk=(()=>{class t extends Fi{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Du(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+St(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+St(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Be(Ds),Be(Tu,8))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})();var vp=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(vp||{});var qt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Vi(t,e){let n=hp(t),r=n[xi.NumberSymbols][e];if(typeof r>"u"){if(e===qt.CurrencyDecimal)return n[xi.NumberSymbols][qt.Decimal];if(e===qt.CurrencyGroup)return n[xi.NumberSymbols][qt.Group]}return r}function bD(t,e){return hp(t)[xi.NumberFormats][e]}var Kk=/^(\d+)?\.((\d+)(-(\d+))?)?$/,wD=22,bu=".",Ts="0",Qk=";",Yk=",",mp="#";function Zk(t,e,n,r,i,o,s=!1){let c="",u=!1;if(!isFinite(t))c=Vi(n,qt.Infinity);else{let l=e1(t);s&&(l=Xk(l));let f=e.minInt,p=e.minFrac,y=e.maxFrac;if(o){let F=o.match(Kk);if(F===null)throw new Error(`${o} is not a valid digit info`);let $=F[1],ue=F[3],Pe=F[5];$!=null&&(f=yp($)),ue!=null&&(p=yp(ue)),Pe!=null?y=yp(Pe):ue!=null&&p>y&&(y=p)}t1(l,p,y);let m=l.digits,C=l.integerLen,N=l.exponent,R=[];for(u=m.every(F=>!F);C<f;C++)m.unshift(0);for(;C<0;C++)m.unshift(0);C>0?R=m.splice(C,m.length):(R=m,m=[0]);let k=[];for(m.length>=e.lgSize&&k.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)k.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&k.unshift(m.join("")),c=k.join(Vi(n,r)),R.length&&(c+=Vi(n,i)+R.join("")),N&&(c+=Vi(n,qt.Exponential)+"+"+N)}return t<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function CD(t,e,n){let r=bD(e,vp.Decimal),i=Jk(r,Vi(e,qt.MinusSign));return Zk(t,i,e,qt.Group,qt.Decimal,n)}function Jk(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(Qk),i=r[0],o=r[1],s=i.indexOf(bu)!==-1?i.split(bu):[i.substring(0,i.lastIndexOf(Ts)+1),i.substring(i.lastIndexOf(Ts)+1)],c=s[0],u=s[1]||"";n.posPre=c.substring(0,c.indexOf(mp));for(let f=0;f<u.length;f++){let p=u.charAt(f);p===Ts?n.minFrac=n.maxFrac=f+1:p===mp?n.maxFrac=f+1:n.posSuf+=p}let l=c.split(Yk);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let f=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(mp);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+f).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function Xk(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function e1(t){let e=Math.abs(t)+"",n=0,r,i,o,s,c;for((i=e.indexOf(bu))>-1&&(e=e.replace(bu,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Ts;o++);if(o===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===Ts;)c--;for(i-=o,r=[],s=0;o<=c;o++,s++)r[s]=Number(e.charAt(o))}return i>wD&&(r=r.splice(0,wD-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function t1(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,c=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(c>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,f=r.reduceRight(function(p,y,m,C){return y=y+p,C[m]=y<10?y:y-10,u&&(C[m]===0&&m>=l?C.pop():u=!1),y>=10?1:0},0);f&&(r.unshift(f),t.integerLen++)}function yp(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var Cu=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},AD=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Cu(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),DD(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);DD(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(oe(yu),oe(gu),oe(pp))};static \u0275dir=ke({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function DD(t,e){t.context.$implicit=e.item}var n1=(()=>{class t{_viewContainer;_context=new Au;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){TD(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){TD(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(oe(yu),oe(gu))};static \u0275dir=ke({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Au=class{$implicit=null;ngIf=null};function TD(t,e){if(t&&!t.createEmbeddedView)throw new G(2020,!1)}function r1(t,e){return new G(2100,!1)}var i1=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!o1(n))return null;i||=this._locale;try{let o=s1(n);return CD(o,i,r)}catch(o){throw r1(t,o.message)}}static \u0275fac=function(r){return new(r||t)(oe(_u,16))};static \u0275pipe=Ww({name:"number",type:t,pure:!0})}return t})();function o1(t){return!(t==null||t===""||t!==t)}function s1(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var a1=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Is({type:t});static \u0275inj=hs({})}return t})();function c1(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var SD="browser",ND="server";function u1(t){return t===SD}function l1(t){return t===ND}var _p=class{};var Q9=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>new Ip(L(ws),window)})}return t})(),Ip=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=d1(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function d1(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var jD=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(oe(Pr),oe(Hn))};static \u0275dir=ke({type:t})}return t})(),Tp=(()=>{class t extends jD{static \u0275fac=(()=>{let n;return function(i){return(n||(n=gs(t)))(i||t)}})();static \u0275dir=ke({type:t,features:[At]})}return t})(),Ou=new H("");var h1={provide:Ou,useExisting:hn(()=>BD),multi:!0};function f1(){let t=kr()?kr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var p1=new H(""),BD=(()=>{class t extends jD{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!f1())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(oe(Pr),oe(Hn),oe(p1,8))};static \u0275dir=ke({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ki("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[xr([h1]),At]})}return t})();function g1(t){return t==null||m1(t)===0}function m1(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var bp=new H(""),UD=new H("");function y1(t){return g1(t.value)?{required:!0}:null}function RD(t){return null}function $D(t){return t!=null}function HD(t){return Es(t)?Ot(t):t}function qD(t){let e={};return t.forEach(n=>{e=n!=null?me(me({},e),n):e}),Object.keys(e).length===0?null:e}function zD(t,e){return e.map(n=>n(t))}function v1(t){return!t.validate}function GD(t){return t.map(e=>v1(e)?e:n=>e.validate(n))}function _1(t){if(!t)return null;let e=t.filter($D);return e.length==0?null:function(n){return qD(zD(n,e))}}function Cp(t){return t!=null?_1(GD(t)):null}function I1(t){if(!t)return null;let e=t.filter($D);return e.length==0?null:function(n){let r=zD(n,e).map(HD);return uh(r).pipe(un(qD))}}function Ap(t){return t!=null?I1(GD(t)):null}function MD(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function E1(t){return t._rawValidators}function w1(t){return t._rawAsyncValidators}function Ep(t){return t?Array.isArray(t)?t:[t]:[]}function Nu(t,e){return Array.isArray(t)?t.includes(e):t===e}function PD(t,e){let n=Ep(e);return Ep(t).forEach(i=>{Nu(n,i)||n.push(i)}),n}function xD(t,e){return Ep(e).filter(n=>!Nu(t,n))}var Ru=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Cp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ap(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Bi=class extends Ru{name;get formDirective(){return null}get path(){return null}},Rs=class extends Ru{_parent=null;name=null;valueAccessor=null},Mu=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},D1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mG=ve(me({},D1),{"[class.ng-submitted]":"isSubmitted"}),yG=(()=>{class t extends Mu{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(oe(Rs,2))};static \u0275dir=ke({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&vu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[At]})}return t})(),vG=(()=>{class t extends Mu{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(oe(Bi,10))};static \u0275dir=ke({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&vu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[At]})}return t})();var bs="VALID",Su="INVALID",Li="PENDING",Cs="DISABLED",qn=class{},Pu=class extends qn{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Ss=class extends qn{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Ns=class extends qn{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},ji=class extends qn{status;source;constructor(e,n){super(),this.status=e,this.source=n}},wp=class extends qn{source;constructor(e){super(),this.source=e}},Dp=class extends qn{source;constructor(e){super(),this.source=e}};function WD(t){return(Fu(t)?t.validators:t)||null}function T1(t){return Array.isArray(t)?Cp(t):t||null}function KD(t,e){return(Fu(e)?e.asyncValidators:t)||null}function b1(t){return Array.isArray(t)?Ap(t):t||null}function Fu(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function C1(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[n])throw new G(1001,"")}function A1(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new G(1002,"")})}var xu=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ht(this.statusReactive)}set status(e){Ht(()=>this.statusReactive.set(e))}_status=Oi(()=>this.statusReactive());statusReactive=Mi(void 0);get valid(){return this.status===bs}get invalid(){return this.status===Su}get pending(){return this.status==Li}get disabled(){return this.status===Cs}get enabled(){return this.status!==Cs}errors;get pristine(){return Ht(this.pristineReactive)}set pristine(e){Ht(()=>this.pristineReactive.set(e))}_pristine=Oi(()=>this.pristineReactive());pristineReactive=Mi(!0);get dirty(){return!this.pristine}get touched(){return Ht(this.touchedReactive)}set touched(e){Ht(()=>this.touchedReactive.set(e))}_touched=Oi(()=>this.touchedReactive());touchedReactive=Mi(!1);get untouched(){return!this.touched}_events=new ht;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(PD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xD(e,this._rawAsyncValidators))}hasValidator(e){return Nu(this._rawValidators,e)}hasAsyncValidator(e){return Nu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ve(me({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ns(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ns(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ve(me({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ss(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ss(!0,r))}markAsPending(e={}){this.status=Li;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ji(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ve(me({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Cs,this.errors=null,this._forEachChild(i=>{i.disable(ve(me({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pu(this.value,r)),this._events.next(new ji(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ve(me({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=bs,this._forEachChild(r=>{r.enable(ve(me({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ve(me({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bs||this.status===Li)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pu(this.value,n)),this._events.next(new ji(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ve(me({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cs:bs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Li,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=HD(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ji(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ft,this.statusChanges=new ft}_calculateStatus(){return this._allControlsDisabled()?Cs:this.errors?Su:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Li)?Li:this._anyControlsHaveStatus(Su)?Su:bs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Ss(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ns(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=T1(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=b1(this._rawAsyncValidators)}},ku=class extends xu{constructor(e,n,r){super(WD(n),KD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){A1(this,!0,e),Object.keys(e).forEach(r=>{C1(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Sp=new H("",{providedIn:"root",factory:()=>Np}),Np="always";function S1(t,e){return[...e.path,t]}function QD(t,e,n=Np){YD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),R1(t,e),P1(t,e),M1(t,e),N1(t,e)}function kD(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function N1(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function YD(t,e){let n=E1(t);e.validator!==null?t.setValidators(MD(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=w1(t);e.asyncValidator!==null?t.setAsyncValidators(MD(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();kD(e._rawValidators,i),kD(e._rawAsyncValidators,i)}function R1(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ZD(t,e)})}function M1(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ZD(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ZD(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function P1(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function x1(t,e){t==null,YD(t,e)}function k1(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function O1(t){return Object.getPrototypeOf(t.constructor)===Tp}function F1(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function V1(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===BD?n=o:O1(o)?r=o:i=o}),i||r||n||null}var L1={provide:Bi,useExisting:hn(()=>j1)},As=Promise.resolve(),j1=(()=>{class t extends Bi{callSetDisabledState;get submitted(){return Ht(this.submittedReactive)}_submitted=Oi(()=>this.submittedReactive());submittedReactive=Mi(!1);_directives=new Set;form;ngSubmit=new ft;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new ku({},Cp(n),Ap(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){As.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),QD(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){As.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){As.then(()=>{let r=this._findContainer(n.path),i=new ku({});x1(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){As.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){As.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),F1(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new wp(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new Dp(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(oe(bp,10),oe(UD,10),oe(Sp,8))};static \u0275dir=ke({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ki("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[xr([L1]),At]})}return t})();function OD(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function FD(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var B1=class extends xu{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(WD(n),KD(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(FD(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){OD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){OD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){FD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var U1={provide:Rs,useExisting:hn(()=>$1)},VD=Promise.resolve(),$1=(()=>{class t extends Rs{_changeDetectorRef;callSetDisabledState;control=new B1;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ft;constructor(n,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=V1(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),k1(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){QD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){VD.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Eu(r);VD.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?S1(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(oe(Bi,9),oe(bp,10),oe(UD,10),oe(Ou,10),oe(Iu,8),oe(Sp,8))};static \u0275dir=ke({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[xr([U1]),At,eu]})}return t})();var IG=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=ke({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var H1={provide:Ou,useExisting:hn(()=>XD),multi:!0};function JD(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function q1(t){return t.split(":")[0]}var XD=(()=>{class t extends Tp{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r=this._getOptionId(n),i=JD(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=q1(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=gs(t)))(i||t)}})();static \u0275dir=ke({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ki("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[xr([H1]),At]})}return t})(),EG=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(JD(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(oe(Hn),oe(Pr),oe(XD,9))};static \u0275dir=ke({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),z1={provide:Ou,useExisting:hn(()=>eT),multi:!0};function LD(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function G1(t){return t.split(":")[0]}var eT=(()=>{class t extends Tp{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let u=s[c],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let c=0;c<s.length;c++){let u=s[c];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=G1(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=gs(t)))(i||t)}})();static \u0275dir=ke({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ki("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[xr([z1]),At]})}return t})(),wG=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(LD(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(LD(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(oe(Hn),oe(Pr),oe(eT,9))};static \u0275dir=ke({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var W1=(()=>{class t{_validator=RD;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):RD,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ke({type:t,features:[eu]})}return t})();var K1={provide:bp,useExisting:hn(()=>Q1),multi:!0};var Q1=(()=>{class t extends W1{required;inputName="required";normalizeInput=Eu;createValidator=n=>y1;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=gs(t)))(i||t)}})();static \u0275dir=ke({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&dp("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[xr([K1]),At]})}return t})();var Y1=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Is({type:t});static \u0275inj=hs({})}return t})();var DG=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Sp,useValue:n.callSetDisabledState??Np}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Is({type:t});static \u0275inj=hs({imports:[Y1]})}return t})();var tT=()=>{};var iT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Z1=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Vu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,y=(c&15)<<2|l>>6,m=l&63;u||(m=64,s||(y=64)),r.push(n[f],n[p],n[y],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Z1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Mp;let y=o<<2|c>>4;if(r.push(y),l!==64){let m=c<<4&240|l>>2;if(r.push(m),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Mp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},J1=function(t){let e=iT(t);return Vu.encodeByteArray(e,!0)},Ps=function(t){return J1(t).replace(/\./g,"")},Lu=function(t){try{return Vu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var X1=()=>xp().__FIREBASE_DEFAULTS__,eO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Lu(t[1]);return e&&JSON.parse(e)},ju=()=>{try{return tT()||X1()||eO()||tO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kp=t=>{var e,n;return(n=(e=ju())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oT=t=>{let e=kp(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Op=()=>{var t;return(t=ju())===null||t===void 0?void 0:t.config},Fp=t=>{var e;return(e=ju())===null||e===void 0?void 0:e[`_${t}`]};var Or=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Fr(t){return t.endsWith(".cloudworkstations.dev")}function Bu(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function sT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ps(JSON.stringify(n)),Ps(JSON.stringify(s)),""].join(".")}var Ms={};function nO(){let t={prod:[],emulator:[]};for(let e of Object.keys(Ms))Ms[e]?t.emulator.push(e):t.prod.push(e);return t}function rO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var nT=!1;function Ui(t,e){if(typeof window>"u"||typeof document>"u"||!Fr(window.location.host)||Ms[t]===e||Ms[t]||nT)return;Ms[t]=e;function n(y){return`__firebase__banner__${y}`}let r="__firebase__banner",o=nO().prod.length>0;function s(){let y=document.getElementById(r);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,m){y.setAttribute("width","24"),y.setAttribute("id",m),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function l(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{nT=!0,s()},y}function f(y,m){y.setAttribute("id",m),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=rO(r),m=n("text"),C=document.getElementById(m)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),k=n("preprendIcon"),F=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let $=y.element;c($),f(R,N);let ue=l();u(F,k),$.append(F,C,R,ue),document.body.appendChild($)}o?(C.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Oe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function iO(){var t;let e=(t=ju())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dT(){let t=Oe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hT(){return!iO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xs(){try{return typeof indexedDB=="object"}catch{return!1}}function fT(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var oO="FirebaseError",gt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nt.prototype.create)}},Nt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?sO(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new gt(i,c,r)}};function sO(t,e){return t.replace(aO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var aO=/\{\$([^}]+)}/g;function pT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zt(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(rT(o)&&rT(s)){if(!zt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function rT(t){return t!==null&&typeof t=="object"}function ks(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $i(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Hi(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function gT(t,e){let n=new Pp(t,e);return n.subscribe.bind(n)}var Pp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Rp),i.error===void 0&&(i.error=Rp),i.complete===void 0&&(i.complete=Rp);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function cO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rp(){}var SG=4*60*60*1e3;function Fe(t){return t&&t._delegate?t._delegate:t}var et=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Vr="[DEFAULT]";var Vp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Or;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lO(e))try{this.getOrInitializeService({instanceIdentifier:Vr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Vr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Vr){return this.instances.has(e)}getOptions(e=Vr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vr){return this.component?this.component.multipleInstances?e:Vr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uO(t){return t===Vr?void 0:t}function lO(t){return t.instantiationMode==="EAGER"}var Uu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Vp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var dO=[],ee=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ee||{}),hO={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},fO=ee.INFO,pO={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},gO=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=pO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Gt=class{constructor(e){this.name=e,this._logLevel=fO,this._logHandler=gO,this._userLogHandler=null,dO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}};var mO=(t,e)=>e.some(n=>t instanceof n),mT,yT;function yO(){return mT||(mT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vO(){return yT||(yT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var vT=new WeakMap,jp=new WeakMap,_T=new WeakMap,Lp=new WeakMap,Up=new WeakMap;function _O(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Wt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&vT.set(n,t)}).catch(()=>{}),Up.set(e,t),e}function IO(t){if(jp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});jp.set(t,e)}var Bp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_T.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IT(t){Bp=t(Bp)}function EO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call($u(this),e,...n);return _T.set(r,e.sort?e.sort():[e]),Wt(r)}:vO().includes(t)?function(...e){return t.apply($u(this),e),Wt(vT.get(this))}:function(...e){return Wt(t.apply($u(this),e))}}function wO(t){return typeof t=="function"?EO(t):(t instanceof IDBTransaction&&IO(t),mO(t,yO())?new Proxy(t,Bp):t)}function Wt(t){if(t instanceof IDBRequest)return _O(t);if(Lp.has(t))return Lp.get(t);let e=wO(t);return e!==t&&(Lp.set(t,e),Up.set(e,t)),e}var $u=t=>Up.get(t);function wT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=Wt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Wt(s.result),u.oldVersion,u.newVersion,Wt(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var DO=["get","getKey","getAll","getAllKeys","count"],TO=["put","add","delete","clear"],$p=new Map;function ET(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($p.get(e))return $p.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=TO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DO.includes(n)))return;let o=function(s,...c){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return $p.set(e,o),o}IT(t=>ve(me({},t),{get:(e,n,r)=>ET(e,n)||t.get(e,n,r),has:(e,n)=>!!ET(e,n)||t.has(e,n)}));var qp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bO(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function bO(t){let e=t.getComponent();return e?.type==="VERSION"}var zp="@firebase/app",DT="0.12.3";var mn=new Gt("@firebase/app"),CO="@firebase/app-compat",AO="@firebase/analytics-compat",SO="@firebase/analytics",NO="@firebase/app-check-compat",RO="@firebase/app-check",MO="@firebase/auth",PO="@firebase/auth-compat",xO="@firebase/database",kO="@firebase/data-connect",OO="@firebase/database-compat",FO="@firebase/functions",VO="@firebase/functions-compat",LO="@firebase/installations",jO="@firebase/installations-compat",BO="@firebase/messaging",UO="@firebase/messaging-compat",$O="@firebase/performance",HO="@firebase/performance-compat",qO="@firebase/remote-config",zO="@firebase/remote-config-compat",GO="@firebase/storage",WO="@firebase/storage-compat",KO="@firebase/firestore",QO="@firebase/vertexai",YO="@firebase/firestore-compat",ZO="firebase",JO="11.7.3";var Gp="[DEFAULT]",XO={[zp]:"fire-core",[CO]:"fire-core-compat",[SO]:"fire-analytics",[AO]:"fire-analytics-compat",[RO]:"fire-app-check",[NO]:"fire-app-check-compat",[MO]:"fire-auth",[PO]:"fire-auth-compat",[xO]:"fire-rtdb",[kO]:"fire-data-connect",[OO]:"fire-rtdb-compat",[FO]:"fire-fn",[VO]:"fire-fn-compat",[LO]:"fire-iid",[jO]:"fire-iid-compat",[BO]:"fire-fcm",[UO]:"fire-fcm-compat",[$O]:"fire-perf",[HO]:"fire-perf-compat",[qO]:"fire-rc",[zO]:"fire-rc-compat",[GO]:"fire-gcs",[WO]:"fire-gcs-compat",[KO]:"fire-fst",[YO]:"fire-fst-compat",[QO]:"fire-vertex","fire-js":"fire-js",[ZO]:"fire-js-all"};var Os=new Map,eF=new Map,Wp=new Map;function TT(t,e){try{t.container.addComponent(e)}catch(n){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rt(t){let e=t.name;if(Wp.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;Wp.set(e,t);for(let n of Os.values())TT(n,t);for(let n of eF.values())TT(n,t);return!0}function qi(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ut(t){return t==null?!1:t.settings!==void 0}var tF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zn=new Nt("app","Firebase",tF);var Kp=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}};var Gn=JO;function Zp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Gp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zn.create("bad-app-name",{appName:String(i)});if(n||(n=Op()),!n)throw zn.create("no-options");let o=Os.get(i);if(o){if(zt(n,o.options)&&zt(r,o.config))return o;throw zn.create("duplicate-app",{appName:i})}let s=new Uu(i);for(let u of Wp.values())s.addComponent(u);let c=new Kp(n,r,s);return Os.set(i,c),c}function Lr(t=Gp){let e=Os.get(t);if(!e&&t===Gp&&Op())return Zp();if(!e)throw zn.create("no-app",{appName:t});return e}function Hu(){return Array.from(Os.values())}function Te(t,e,n){var r;let i=(r=XO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(c.join(" "));return}Rt(new et(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var nF="firebase-heartbeat-database",rF=1,Fs="firebase-heartbeat-store",Hp=null;function ST(){return Hp||(Hp=wT(nF,rF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fs)}catch(n){console.warn(n)}}}}).catch(t=>{throw zn.create("idb-open",{originalErrorMessage:t.message})})),Hp}function iF(t){return _(this,null,function*(){try{let n=(yield ST()).transaction(Fs),r=yield n.objectStore(Fs).get(NT(t));return yield n.done,r}catch(e){if(e instanceof gt)mn.warn(e.message);else{let n=zn.create("idb-get",{originalErrorMessage:e?.message});mn.warn(n.message)}}})}function bT(t,e){return _(this,null,function*(){try{let r=(yield ST()).transaction(Fs,"readwrite");yield r.objectStore(Fs).put(e,NT(t)),yield r.done}catch(n){if(n instanceof gt)mn.warn(n.message);else{let r=zn.create("idb-set",{originalErrorMessage:n?.message});mn.warn(r.message)}}})}function NT(t){return`${t.name}!${t.options.appId}`}var oF=1024,sF=30,Qp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Yp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=CT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>sF){let s=cF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=CT(),{heartbeatsToSend:r,unsentEntries:i}=aF(this._heartbeatsCache.heartbeats),o=Ps(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return mn.warn(n),""}})}};function CT(){return new Date().toISOString().substring(0,10)}function aF(t,e=oF){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),AT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),AT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Yp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return xs()?fT().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield iF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return bT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return bT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function AT(t){return Ps(JSON.stringify({version:2,heartbeats:t})).length}function cF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function uF(t){Rt(new et("platform-logger",e=>new qp(e),"PRIVATE")),Rt(new et("heartbeat",e=>new Qp(e),"PRIVATE")),Te(zp,DT,t),Te(zp,DT,"esm2017"),Te("fire-js","")}uF("");var lF="firebase",dF="11.7.3";Te(lF,dF,"app");function Jp(t){t===void 0&&(xf(Jp),t=L(Ge));let e=t.get(su);return n=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var Wn=new Nr("ANGULARFIRE2_VERSION");function Vs(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Gi=(t,e)=>{let n=e?[e]:Hu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},zi=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(zi||{}),RT=fp()&&typeof Zone<"u"?zi.WARN:zi.SILENT;var qu=class{zone;delegate;constructor(e,n=sh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Kn=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=L(Ee);this.outsideAngular=n.runOutsideAngular(()=>new qu(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new qu(typeof Zone>"u"?void 0:Zone.current,Zo))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),MT=!1;function hF(t,e){!MT&&(RT>zi.SILENT||fp())&&(MT=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),RT>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function fF(t){let e=L(Ee,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function jr(t){let e=L(Ee,{optional:!0});return e?e.run(()=>t()):t()}var pF=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Ai(n,()=>jr(()=>t.apply(void 0,r)))),tt=(t,e,n)=>(n||=e?zi.WARN:zi.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=L(Kn),s=L(su),c=L(Vt)}catch{return hF(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=jr(()=>s.add())),i[l]=pF(i[l],r,c));let u=fF(()=>t.apply(this,i));return e?u instanceof ne?u.pipe(Vn(o.outsideAngular),Fn(o.insideAngular),Jp(c)):u instanceof Promise?jr(()=>new Promise((l,f)=>{s.run(()=>u).then(p=>Ai(c,()=>jr(()=>l(p))),p=>Ai(c,()=>jr(()=>f(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:jr(()=>u):u instanceof ne?u.pipe(Vn(o.outsideAngular),Fn(o.insideAngular)):jr(()=>u)});var yn=class{constructor(e){return e}},Br=class{constructor(){return Hu()}};function gF(t){return t&&t.length===1?t[0]:new yn(Lr())}var Xp=new H("angularfire2._apps"),mF={provide:yn,useFactory:gF,deps:[[new pt,Xp]]},yF={provide:Br,deps:[[new pt,Xp]]};function vF(t){return(e,n)=>{let r=n.get(Wf);Te("angularfire",Wn.full,"core"),Te("angularfire",Wn.full,"app"),Te("angular",fD.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new yn(i)}}function C8(t,...e){return $n([mF,yF,{provide:Xp,useFactory:vF(t),multi:!0,deps:[Ee,Ge,Kn,...e]}])}var A8=tt(Zp,!0);var _F=new Map,IF={activated:!1,tokenObservers:[]},EF={initialized:!1,enabled:!1};function Mt(t){return _F.get(t)||Object.assign({},IF)}function OT(){return EF}var wF="https://content-firebaseappcheck.googleapis.com/v1";var DF="exchangeDebugToken",PT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},F8=24*60*60*1e3;var ng=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Or,this.pending.promise.catch(n=>{}),yield TF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Or,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function TF(t){return new Promise(e=>{setTimeout(e,t)})}var bF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Qn=new Nt("appCheck","AppCheck",bF);function FT(t){if(!Mt(t).activated)throw Qn.create("use-before-activation",{appName:t.name})}function VT(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(m){throw Qn.create("fetch-network-error",{originalErrorMessage:m?.message})}if(u.status!==200)throw Qn.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(m){throw Qn.create("fetch-parse-error",{originalErrorMessage:m?.message})}let f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Qn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(f[1])*1e3,y=Date.now();return{token:l.token,expireTimeMillis:y+p,issuedAtTimeMillis:y}})}function LT(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${wF}/projects/${n}/apps/${r}:${DF}?key=${i}`,body:{debug_token:e}}}var CF="firebase-app-check-database",AF=1,rg="firebase-app-check-store";var zu=null;function SF(){return zu||(zu=new Promise((t,e)=>{try{let n=indexedDB.open(CF,AF);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Qn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(rg,{keyPath:"compositeKey"})}}}catch(n){e(Qn.create("storage-open",{originalErrorMessage:n?.message}))}}),zu)}function NF(t,e){return RF(MF(t),e)}function RF(t,e){return _(this,null,function*(){let r=(yield SF()).transaction(rg,"readwrite"),o=r.objectStore(rg).put({compositeKey:t,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(Qn.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function MF(t){return`${t.options.appId}-${t.name}`}var Ls=new Gt("@firebase/app-check");function eg(t,e){return xs()?NF(t,e).catch(n=>{Ls.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function jT(){return OT().enabled}function BT(){return _(this,null,function*(){let t=OT();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var PF={error:"UNKNOWN_ERROR"};function xF(t){return Vu.encodeString(JSON.stringify(t),!1)}function ig(t,e=!1,n=!1){return _(this,null,function*(){let r=t.app;FT(r);let i=Mt(r),o=i.token,s;if(o&&!js(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(js(l)?o=l:yield eg(r,void 0))}if(!e&&o&&js(o))return{token:o.token};let c=!1;if(jT())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=VT(LT(r,yield BT()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield eg(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ls.warn(l.message):n&&Ls.error(l),tg(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield Mt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ls.warn(l.message):n&&Ls.error(l),s=l}let u;return o?s?js(o)?u={token:o.token,internalError:s}:u=tg(s):(u={token:o.token},i.token=o,yield eg(r,o)):u=tg(s),c&&VF(r,u),u})}function kF(t){return _(this,null,function*(){let e=t.app;FT(e);let{provider:n}=Mt(e);if(jT()){let r=yield BT(),{token:i}=yield VT(LT(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function OF(t,e,n,r){let{app:i}=t,o=Mt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&js(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),xT(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>xT(t))}function UT(t,e){let n=Mt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function xT(t){let{app:e}=t,n=Mt(e),r=n.tokenRefresher;r||(r=FF(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function FF(t){let{app:e}=t;return new ng(()=>_(null,null,function*(){let n=Mt(e),r;if(n.token?r=yield ig(t,!0):r=yield ig(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Mt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},PT.RETRIAL_MIN_WAIT,PT.RETRIAL_MAX_WAIT)}function VF(t,e){let n=Mt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function js(t){return t.expireTimeMillis-Date.now()>0}function tg(t){return{token:xF(PF),error:t}}var og=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Mt(this.app);for(let n of e)UT(this.app,n.next);return Promise.resolve()}};function LF(t,e){return new og(t,e)}function jF(t){return{getToken:e=>ig(t,e),getLimitedUseToken:()=>kF(t),addTokenListener:e=>OF(t,"INTERNAL",e),removeTokenListener:e=>UT(t.app,e)}}var BF="@firebase/app-check",UF="0.9.3";var $F="app-check",kT="app-check-internal";function HF(){Rt(new et($F,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return LF(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(kT).initialize()})),Rt(new et(kT,t=>{let e=t.getProvider("app-check").getImmediate();return jF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Te(BF,UF)}HF();var qF="app-check";var Wi=class{constructor(){return Gi(qF)}};var zF=["localhost","0.0.0.0","127.0.0.1"],Q8=typeof window<"u"&&zF.includes(window.location.hostname);function rb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ib=rb,ob=new Nt("auth","Firebase",rb());var Zu=new Gt("@firebase/auth");function GF(t,...e){Zu.logLevel<=ee.WARN&&Zu.warn(`Auth (${Gn}): ${t}`,...e)}function Wu(t,...e){Zu.logLevel<=ee.ERROR&&Zu.error(`Auth (${Gn}): ${t}`,...e)}function Qt(t,...e){throw Rg(t,...e)}function Ur(t,...e){return Rg(t,...e)}function sb(t,e,n){let r=Object.assign(Object.assign({},ib()),{[e]:n});return new Nt("auth","Firebase",r).create(e,{appName:t.name})}function In(t){return sb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ob.create(t,...e)}function U(t,e,...n){if(!t)throw Rg(e,...n)}function vn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Wu(e),new Error(e)}function Jn(t,e){t||vn(e)}function ug(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WF(){return $T()==="http:"||$T()==="https:"}function $T(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function KF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WF()||uT()||"connection"in navigator)?navigator.onLine:!0}function QF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var $r=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jn(n>e,"Short delay should be less than long delay!"),this.isMobile=aT()||lT()}get(){return KF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Mg(t,e){Jn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ju=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var YF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var ZF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JF=new $r(3e4,6e4);function Xn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function En(o,s,c,u){return _(this,arguments,function*(t,e,n,r,i={}){return ab(t,i,()=>_(null,null,function*(){let l={},f={};r&&(e==="GET"?f=r:l={body:JSON.stringify(r)});let p=ks(Object.assign({key:t.config.apiKey},f)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let m=Object.assign({method:e,headers:y},l);return cT()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Fr(t.emulatorConfig.host)&&(m.credentials="include"),Ju.fetch()(yield cb(t,t.config.apiHost,n,p),m)}))})}function ab(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},YF),e);try{let i=new lg(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Gu(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gu(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Gu(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Gu(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sb(t,f,l);Qt(t,f)}}catch(i){if(i instanceof gt)throw i;Qt(t,"network-request-failed",{message:String(i)})}})}function Ws(o,s,c,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield En(t,e,n,r,i);return"mfaPendingCredential"in l&&Qt(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function cb(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Mg(t.config,i):`${t.config.apiScheme}://${i}`;return ZF.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function XF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var lg=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ur(this.auth,"network-request-failed")),JF.get())})}};function Gu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Ur(t,e,r);return i.customData._tokenResponse=n,i}function HT(t){return t!==void 0&&t.enterprise!==void 0}var dg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function eV(t,e){return _(this,null,function*(){return En(t,"GET","/v2/recaptchaConfig",Xn(t,e))})}function tV(t,e){return _(this,null,function*(){return En(t,"POST","/v1/accounts:delete",e)})}function Xu(t,e){return _(this,null,function*(){return En(t,"POST","/v1/accounts:lookup",e)})}function Us(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Pg(t,e=!1){return _(this,null,function*(){let n=Fe(t),r=yield n.getIdToken(e),i=xg(r);U(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Us(sg(i.auth_time)),issuedAtTime:Us(sg(i.iat)),expirationTime:Us(sg(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function sg(t){return Number(t)*1e3}function xg(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{let i=Lu(n);return i?JSON.parse(i):(Wu("Failed to decode base64 JWT payload"),null)}catch(i){return Wu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qT(t){let e=xg(t);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ki(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof gt&&nV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function nV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var hg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Hs=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Us(this.lastLoginAt),this.creationTime=Us(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function el(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ki(t,Xu(n,{idToken:r}));U(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ub(o.providerUserInfo):[],c=rV(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,f=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Hs(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function kg(t){return _(this,null,function*(){let e=Fe(t);yield el(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function rV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ub(t){return t.map(e=>{var{providerId:n}=e,r=ah(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function iV(t,e){return _(this,null,function*(){let n=yield ab(t,{},()=>_(null,null,function*(){let r=ks({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield cb(t,i,"/v1/token",`key=${o}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ju.fetch()(s,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function oV(t,e){return _(this,null,function*(){return En(t,"POST","/v2/accounts:revokeToken",Xn(t,e))})}var $s=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){U(e.length!==0,"internal-error");let n=qT(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield iV(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(U(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(U(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(U(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return vn("not implemented")}};function Yn(t,e){U(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Zn=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=ah(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Hs(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Ki(this,this.stsTokenManager.getToken(this.auth,e));return U(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Pg(this,e)}reload(){return kg(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield el(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(ut(this.auth.app))return Promise.reject(In(this.auth));let e=yield this.getIdToken();return yield Ki(this,tV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,F=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:$,emailVerified:ue,isAnonymous:Pe,providerData:he,stsTokenManager:D}=n;U($&&D,e,"internal-error");let v=$s.fromJSON(this.name,D);U(typeof $=="string",e,"internal-error"),Yn(p,e.name),Yn(y,e.name),U(typeof ue=="boolean",e,"internal-error"),U(typeof Pe=="boolean",e,"internal-error"),Yn(m,e.name),Yn(C,e.name),Yn(N,e.name),Yn(R,e.name),Yn(k,e.name),Yn(F,e.name);let E=new t({uid:$,auth:e,email:y,emailVerified:ue,displayName:p,isAnonymous:Pe,photoURL:C,phoneNumber:m,tenantId:N,stsTokenManager:v,createdAt:k,lastLoginAt:F});return he&&Array.isArray(he)&&(E.providerData=he.map(w=>Object.assign({},w))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new $s;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield el(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];U(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?ub(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new $s;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Hs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var zT=new Map;function _n(t){Jn(t instanceof Function,"Expected a class definition");let e=zT.get(t);return e?(Jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zT.set(t,e),e)}var sV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),fg=sV;function Ku(t,e,n){return`firebase:${t}:${e}:${n}`}var tl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ku(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ku("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Xu(this.auth,{idToken:e}).catch(()=>{});return n?Zn._fromGetAccountInfoResponse(this.auth,n,e):null}return Zn._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(_n(fg),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||_n(fg),s=Ku(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let f=yield l._get(s);if(f){let p;if(typeof f=="string"){let y=yield Xu(e,{idToken:f}).catch(()=>{});if(!y)break;p=yield Zn._fromGetAccountInfoResponse(e,y,f)}else p=Zn._fromJSON(e,f);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function GT(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gb(e))return"Blackberry";if(mb(e))return"Webos";if(db(e))return"Safari";if((e.includes("chrome/")||hb(e))&&!e.includes("edge/"))return"Chrome";if(pb(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function lb(t=Oe()){return/firefox\//i.test(t)}function db(t=Oe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hb(t=Oe()){return/crios\//i.test(t)}function fb(t=Oe()){return/iemobile/i.test(t)}function pb(t=Oe()){return/android/i.test(t)}function gb(t=Oe()){return/blackberry/i.test(t)}function mb(t=Oe()){return/webos/i.test(t)}function Og(t=Oe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aV(t=Oe()){var e;return Og(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cV(){return dT()&&document.documentMode===10}function yb(t=Oe()){return Og(t)||pb(t)||mb(t)||gb(t)||/windows phone/i.test(t)||fb(t)}function vb(t,e=[]){let n;switch(t){case"Browser":n=GT(Oe());break;case"Worker":n=`${GT(Oe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gn}/${r}`}var pg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function uV(n){return _(this,arguments,function*(t,e={}){return En(t,"GET","/v2/passwordPolicy",Xn(t,e))})}var lV=6,gg=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:lV,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var mg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nl(this),this.idTokenSubscription=new nl(this),this.beforeStateQueue=new pg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ob,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_n(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield tl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield Xu(this,{idToken:e}),r=yield Zn._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(ut(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield el(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=QF()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(ut(this.app))return Promise.reject(In(this));let n=e?Fe(e):null;return n&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return ut(this.app)?Promise.reject(In(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ut(this.app)?Promise.reject(In(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(_n(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield uV(this),n=new gg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield oV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&_n(e)||this._popupRedirectResolver;U(n,this,"argument-error"),this.redirectPersistenceManager=yield tl.create(this,[_n(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&GF(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function qr(t){return Fe(t)}var nl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gT(n=>this.observer=n)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ul={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dV(t){ul=t}function _b(t){return ul.loadJS(t)}function hV(){return ul.recaptchaEnterpriseScript}function fV(){return ul.gapiScript}function Ib(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var yg=class{constructor(){this.enterprise=new vg}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},vg=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var pV="recaptcha-enterprise",Eb="NO_RECAPTCHA",_g=class{constructor(e){this.type=pV,this.auth=qr(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,c)=>_(null,null,function*(){eV(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new dg(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{c(u)})}))})}function i(o,s,c){let u=window.grecaptcha;HT(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(Eb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yg().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(c=>{if(!n&&HT(window.grecaptcha))i(c,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=hV();u.length!==0&&(u+=c),_b(u).then(()=>{i(c,o,s)}).catch(l=>{s(l)})}}).catch(c=>{s(c)})})})}};function Bs(t,e,n,r=!1,i=!1){return _(this,null,function*(){let o=new _g(t),s;if(i)s=Eb;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let u=c.phoneEnrollmentInfo.phoneNumber,l=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:s}):Object.assign(c,{captchaResponse:s}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function Ig(t,e,n,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let c=yield Bs(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(c=>_(null,null,function*(){if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Bs(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let c=yield Bs(t,e,n);return r(t,c).catch(u=>_(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let f=yield Bs(t,e,n,!1,!0);return r(t,f)}return Promise.reject(u)}))}else{let c=yield Bs(t,e,n,!1,!0);return r(t,c)}else return Promise.reject(i+" provider is not supported.")})}function Fg(t,e){let n=qi(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(zt(o,e??{}))return i;Qt(i,"already-initialized")}return n.initialize({options:e})}function gV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(_n);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Vg(t,e,n){let r=qr(t);U(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=wb(e),{host:s,port:c}=mV(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){U(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),U(zt(l,r.config.emulator)&&zt(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Fr(s)?(Ui("Auth",!0),Bu(`${o}//${s}${u}`)):i||yV()}function wb(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mV(t){let e=wb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:WT(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:WT(s)}}}function WT(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function yV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var qs=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vn("not implemented")}_getIdTokenResponse(e){return vn("not implemented")}_linkToIdToken(e,n){return vn("not implemented")}_getReauthenticationResolver(e){return vn("not implemented")}};function vV(t,e){return _(this,null,function*(){return En(t,"POST","/v1/accounts:signUp",e)})}function _V(t,e){return _(this,null,function*(){return Ws(t,"POST","/v1/accounts:signInWithPassword",Xn(t,e))})}function IV(t,e){return _(this,null,function*(){return Ws(t,"POST","/v1/accounts:signInWithEmailLink",Xn(t,e))})}function EV(t,e){return _(this,null,function*(){return Ws(t,"POST","/v1/accounts:signInWithEmailLink",Xn(t,e))})}var zs=class t extends qs{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ig(e,n,"signInWithPassword",_V,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return IV(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ig(e,r,"signUpPassword",vV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return EV(e,{idToken:n,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ag(t,e){return _(this,null,function*(){return Ws(t,"POST","/v1/accounts:signInWithIdp",Xn(t,e))})}function wV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DV(t){let e=$i(Hi(t)).link,n=e?$i(Hi(e)).deep_link_id:null,r=$i(Hi(t)).deep_link_id;return(r?$i(Hi(r)).link:null)||r||n||e||t}var rl=class t{constructor(e){var n,r,i,o,s,c;let u=$i(Hi(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=wV((i=u.mode)!==null&&i!==void 0?i:null);U(l&&f&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=f,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let n=DV(e);try{return new t(n)}catch{return null}}};var Db=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return zs._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=rl.parseLink(r);return U(i,"argument-error"),zs._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),il=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Eg=class extends il{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function TV(t,e){return _(this,null,function*(){return Ws(t,"POST","/v1/accounts:signUp",Xn(t,e))})}var Qi=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield Zn._fromIdTokenResponse(e,r,i),s=KT(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=KT(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function KT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var wg=class t extends gt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function Tb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?wg._fromErrorAndOperation(t,o,e,r):o})}function bV(t,e,n=!1){return _(this,null,function*(){let r=yield Ki(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Qi._forOperation(t,"link",r)})}function CV(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(ut(r.app))return Promise.reject(In(r));let i="reauthenticate";try{let o=yield Ki(t,Tb(r,i,e,t),n);U(o.idToken,r,"internal-error");let s=xg(o.idToken);U(s,r,"internal-error");let{sub:c}=s;return U(t.uid===c,r,"user-mismatch"),Qi._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Qt(r,"user-mismatch"),o}})}function bb(t,e,n=!1){return _(this,null,function*(){if(ut(t.app))return Promise.reject(In(t));let r="signIn",i=yield Tb(t,r,e),o=yield Qi._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Lg(t,e){return _(this,null,function*(){return bb(qr(t),e)})}function Cb(t){return _(this,null,function*(){let e=qr(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function jg(t,e,n){return _(this,null,function*(){if(ut(t.app))return Promise.reject(In(t));let r=qr(t),s=yield Ig(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TV,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Cb(t),u}),c=yield Qi._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(c.user),c})}function Bg(t,e,n){return ut(t.app)?Promise.reject(In(t)):Lg(Fe(t),Db.credential(e,n)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Cb(t),r}))}function AV(t,e){return _(this,null,function*(){return En(t,"POST","/v1/accounts:update",e)})}function Ug(r,i){return _(this,arguments,function*(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;let o=Fe(t),c={idToken:yield o.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=yield Ki(o,AV(o.auth,c));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:f})=>f==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function $g(t,e,n,r){return Fe(t).onIdTokenChanged(e,n,r)}function Hg(t,e,n){return Fe(t).beforeAuthStateChanged(e,n)}function qg(t,e,n,r){return Fe(t).onAuthStateChanged(e,n,r)}function zg(t){return Fe(t).signOut()}var ol="__sak";var sl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ol,"1"),this.storage.removeItem(ol),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var SV=1e3,NV=10,RV=(()=>{class t extends sl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yb(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);cV()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,NV):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},SV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield kn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield kn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield kn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Ab=RV;var MV=(()=>{class t extends sl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Gg=MV;function PV(t){return Promise.all(t.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var xV=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(f=>_(this,null,function*(){return f(r.origin,s)})),l=yield PV(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Sb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Dg=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=Sb("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Kt(){return window}function kV(t){Kt().location.href=t}function Nb(){return typeof Kt().WorkerGlobalScope<"u"&&typeof Kt().importScripts=="function"}function OV(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function FV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function VV(){return Nb()?self:null}var Rb="firebaseLocalStorageDb",LV=1,al="firebaseLocalStorage",Mb="fbase_key",Hr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ll(t,e){return t.transaction([al],e?"readwrite":"readonly").objectStore(al)}function jV(){let t=indexedDB.deleteDatabase(Rb);return new Hr(t).toPromise()}function Tg(){let t=indexedDB.open(Rb,LV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(al,{keyPath:Mb})}catch(i){n(i)}}),t.addEventListener("success",()=>_(null,null,function*(){let r=t.result;r.objectStoreNames.contains(al)?e(r):(r.close(),yield jV(),e(yield Tg()))}))})}function QT(t,e,n){return _(this,null,function*(){let r=ll(t,!0).put({[Mb]:e,value:n});return new Hr(r).toPromise()})}function BV(t,e){return _(this,null,function*(){let n=ll(t,!1).get(e),r=yield new Hr(n).toPromise();return r===void 0?null:r.value})}function YT(t,e){let n=ll(t,!0).delete(e);return new Hr(n).toPromise()}var UV=800,$V=3,HV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Tg(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>$V)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return Nb()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=xV._getInstance(VV()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield OV(),!this.activeServiceWorker)return;this.sender=new Dg(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||FV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Tg();return yield QT(n,ol,"1"),yield YT(n,ol),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>QT(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>BV(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>YT(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=ll(o,!1).getAll();return new Hr(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),UV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Pb=HV;var r5=Ib("rcb"),i5=new $r(3e4,6e4);function qV(t,e){return e?_n(e):(U(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Gs=class extends qs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ag(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ag(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ag(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function zV(t){return bb(t.auth,new Gs(t),t.bypassAuthState)}function GV(t){let{auth:e,user:n}=t;return U(n,e,"internal-error"),CV(n,new Gs(t),t.bypassAuthState)}function WV(t){return _(this,null,function*(){let{auth:e,user:n}=t;return U(n,e,"internal-error"),bV(n,new Gs(t),t.bypassAuthState)})}var bg=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zV;case"linkViaPopup":case"linkViaRedirect":return WV;case"reauthViaPopup":case"reauthViaRedirect":return GV;default:Qt(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var o5=new $r(2e3,1e4);var KV="pendingRedirect",Qu=new Map,Cg=class t extends bg{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Qu.get(this.auth._key());if(!e){try{let r=(yield QV(this.resolver,this.auth))?yield kn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qu.set(this.auth._key(),e)}return this.bypassAuthState||Qu.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return kn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,kn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function QV(t,e){return _(this,null,function*(){let n=JV(e),r=ZV(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function YV(t,e){Qu.set(t._key(),e)}function ZV(t){return _n(t._redirectPersistence)}function JV(t){return Ku(KV,t.config.apiKey,t.name)}function XV(t,e,n=!1){return _(this,null,function*(){if(ut(t.app))return Promise.reject(In(t));let r=qr(t),i=qV(r,e),s=yield new Cg(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var eL=10*60*1e3,Ag=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xb(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ur(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eL&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZT(e))}saveEventToCache(e){this.cachedEventUids.add(ZT(e)),this.lastProcessedEventTime=Date.now()}};function ZT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xb({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function tL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xb(t);default:return!1}}function nL(n){return _(this,arguments,function*(t,e={}){return En(t,"GET","/v1/projects",e)})}var rL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iL=/^https?/;function oL(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield nL(t);for(let n of e)try{if(sL(n))return}catch{}Qt(t,"unauthorized-domain")})}function sL(t){let e=ug(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!iL.test(n))return!1;if(rL.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var aL=new $r(3e4,6e4);function JT(){let t=Kt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cL(t){return new Promise((e,n)=>{var r,i,o;function s(){JT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JT(),n(Ur(t,"network-request-failed"))},timeout:aL.get()})}if(!((i=(r=Kt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Kt().gapi)===null||o===void 0)&&o.load)s();else{let c=Ib("iframefcb");return Kt()[c]=()=>{gapi.load?s():n(Ur(t,"network-request-failed"))},_b(`${fV()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Yu=null,e})}var Yu=null;function uL(t){return Yu=Yu||cL(t),Yu}var lL=new $r(5e3,15e3),dL="__/auth/iframe",hL="emulator/auth/iframe",fL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gL(t){let e=t.config;U(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Mg(e,hL):`https://${t.config.authDomain}/${dL}`,r={apiKey:e.apiKey,appName:t.name,v:Gn},i=pL.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ks(r).slice(1)}`}function mL(t){return _(this,null,function*(){let e=yield uL(t),n=Kt().gapi;return U(n,t,"internal-error"),e.open({where:document.body,url:gL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fL,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Ur(t,"network-request-failed"),c=Kt().setTimeout(()=>{o(s)},lL.get());function u(){Kt().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var yL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vL=500,_L=600,IL="_blank",EL="http://localhost",cl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function wL(t,e,n,r=vL,i=_L){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},yL),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Oe().toLowerCase();n&&(c=hb(l)?IL:n),lb(l)&&(e=e||EL,u.scrollbars="yes");let f=Object.entries(u).reduce((y,[m,C])=>`${y}${m}=${C},`,"");if(aV(l)&&c!=="_self")return DL(e||"",c),new cl(null);let p=window.open(e||"",c,f);U(p,t,"popup-blocked");try{p.focus()}catch{}return new cl(p)}function DL(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var TL="__/auth/handler",bL="emulator/auth/handler",CL=encodeURIComponent("fac");function XT(t,e,n,r,i,o){return _(this,null,function*(){U(t.config.authDomain,t,"auth-domain-config-required"),U(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Gn,eventId:i};if(e instanceof il){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",pT(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof Eg){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield t._getAppCheckToken(),l=u?`#${CL}=${encodeURIComponent(u)}`:"";return`${AL(t)}?${ks(c).slice(1)}${l}`})}function AL({config:t}){return t.emulator?Mg(t,bL):`https://${t.authDomain}/${TL}`}var cg="webStorageSupport",Sg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gg,this._completeRedirectFn=XV,this._overrideRedirectResult=YV}_openPopup(e,n,r,i){return _(this,null,function*(){var o;Jn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield XT(e,n,r,ug(),i);return wL(e,s,Sb())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield XT(e,n,r,ug(),i);return kV(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Jn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield mL(e),r=new Ag(e);return n.register("authEvent",i=>(U(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cg,{type:cg},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[cg];s!==void 0&&n(!!s),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yb()||db()||Og()}},kb=Sg;var eb="@firebase/auth",tb="1.10.4";var Ng=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function SL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NL(t){Rt(new et("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;U(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vb(t)},l=new mg(r,i,o,u);return gV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rt(new et("auth-internal",e=>{let n=qr(e.getProvider("auth").getImmediate());return(r=>new Ng(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Te(eb,tb,SL(t)),Te(eb,tb,"esm2017")}var RL=5*60,ML=Fp("authIdTokenMaxAge")||RL,nb=null,PL=t=>e=>_(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ML)return;let i=n?.token;nb!==i&&(nb=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Wg(t=Lr()){let e=qi(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Fg(t,{popupRedirectResolver:kb,persistence:[Pb,Ab,Gg]}),r=Fp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=PL(o.toString());Hg(n,s,()=>s(n.currentUser)),$g(n,c=>s(c))}}let i=kp("auth");return i?Vg(n,`http://${i}`):Ui("Auth",!1),n}function xL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Ur("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",xL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NL("Browser");var Ob="auth",Ks=class{constructor(e){return e}},Qs=class{constructor(){return Gi(Ob)}};var Kg=new H("angularfire2.auth-instances");function I2(t,e){let n=Vs(Ob,t,e);return n&&new Ks(n)}function E2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ks(r)}}var w2={provide:Qs,deps:[[new pt,Kg]]},D2={provide:Ks,useFactory:I2,deps:[[new pt,Kg],yn]};function z5(t,...e){return Te("angularfire",Wn.full,"auth"),$n([D2,w2,{provide:Kg,useFactory:E2(t),multi:!0,deps:[Ee,Ge,Kn,Br,[new pt,Wi],...e]}])}var G5=tt(jg,!0,2);var W5=tt(Wg,!0);var K5=tt(qg,!0);var Q5=tt(Bg,!0,2);var Y5=tt(zg,!0,2);var Z5=tt(Ug,!0,2);var Fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vb={};var wn,Qg;(function(){var t;function e(D,v){function E(){}E.prototype=v.prototype,D.D=v.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(w,T,A){for(var I=Array(arguments.length-2),rn=2;rn<arguments.length;rn++)I[rn-2]=arguments[rn];return v.prototype[T].apply(w,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,E){E||(E=0);var w=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)w[T]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(T=0;16>T;++T)w[T]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=D.g[0],E=D.g[1],T=D.g[2];var A=D.g[3],I=v+(A^E&(T^A))+w[0]+3614090360&4294967295;v=E+(I<<7&4294967295|I>>>25),I=A+(T^v&(E^T))+w[1]+3905402710&4294967295,A=v+(I<<12&4294967295|I>>>20),I=T+(E^A&(v^E))+w[2]+606105819&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(v^T&(A^v))+w[3]+3250441966&4294967295,E=T+(I<<22&4294967295|I>>>10),I=v+(A^E&(T^A))+w[4]+4118548399&4294967295,v=E+(I<<7&4294967295|I>>>25),I=A+(T^v&(E^T))+w[5]+1200080426&4294967295,A=v+(I<<12&4294967295|I>>>20),I=T+(E^A&(v^E))+w[6]+2821735955&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(v^T&(A^v))+w[7]+4249261313&4294967295,E=T+(I<<22&4294967295|I>>>10),I=v+(A^E&(T^A))+w[8]+1770035416&4294967295,v=E+(I<<7&4294967295|I>>>25),I=A+(T^v&(E^T))+w[9]+2336552879&4294967295,A=v+(I<<12&4294967295|I>>>20),I=T+(E^A&(v^E))+w[10]+4294925233&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(v^T&(A^v))+w[11]+2304563134&4294967295,E=T+(I<<22&4294967295|I>>>10),I=v+(A^E&(T^A))+w[12]+1804603682&4294967295,v=E+(I<<7&4294967295|I>>>25),I=A+(T^v&(E^T))+w[13]+4254626195&4294967295,A=v+(I<<12&4294967295|I>>>20),I=T+(E^A&(v^E))+w[14]+2792965006&4294967295,T=A+(I<<17&4294967295|I>>>15),I=E+(v^T&(A^v))+w[15]+1236535329&4294967295,E=T+(I<<22&4294967295|I>>>10),I=v+(T^A&(E^T))+w[1]+4129170786&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(v^E))+w[6]+3225465664&4294967295,A=v+(I<<9&4294967295|I>>>23),I=T+(v^E&(A^v))+w[11]+643717713&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(T^A))+w[0]+3921069994&4294967295,E=T+(I<<20&4294967295|I>>>12),I=v+(T^A&(E^T))+w[5]+3593408605&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(v^E))+w[10]+38016083&4294967295,A=v+(I<<9&4294967295|I>>>23),I=T+(v^E&(A^v))+w[15]+3634488961&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(T^A))+w[4]+3889429448&4294967295,E=T+(I<<20&4294967295|I>>>12),I=v+(T^A&(E^T))+w[9]+568446438&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(v^E))+w[14]+3275163606&4294967295,A=v+(I<<9&4294967295|I>>>23),I=T+(v^E&(A^v))+w[3]+4107603335&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(T^A))+w[8]+1163531501&4294967295,E=T+(I<<20&4294967295|I>>>12),I=v+(T^A&(E^T))+w[13]+2850285829&4294967295,v=E+(I<<5&4294967295|I>>>27),I=A+(E^T&(v^E))+w[2]+4243563512&4294967295,A=v+(I<<9&4294967295|I>>>23),I=T+(v^E&(A^v))+w[7]+1735328473&4294967295,T=A+(I<<14&4294967295|I>>>18),I=E+(A^v&(T^A))+w[12]+2368359562&4294967295,E=T+(I<<20&4294967295|I>>>12),I=v+(E^T^A)+w[5]+4294588738&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^T)+w[8]+2272392833&4294967295,A=v+(I<<11&4294967295|I>>>21),I=T+(A^v^E)+w[11]+1839030562&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^v)+w[14]+4259657740&4294967295,E=T+(I<<23&4294967295|I>>>9),I=v+(E^T^A)+w[1]+2763975236&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^T)+w[4]+1272893353&4294967295,A=v+(I<<11&4294967295|I>>>21),I=T+(A^v^E)+w[7]+4139469664&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^v)+w[10]+3200236656&4294967295,E=T+(I<<23&4294967295|I>>>9),I=v+(E^T^A)+w[13]+681279174&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^T)+w[0]+3936430074&4294967295,A=v+(I<<11&4294967295|I>>>21),I=T+(A^v^E)+w[3]+3572445317&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^v)+w[6]+76029189&4294967295,E=T+(I<<23&4294967295|I>>>9),I=v+(E^T^A)+w[9]+3654602809&4294967295,v=E+(I<<4&4294967295|I>>>28),I=A+(v^E^T)+w[12]+3873151461&4294967295,A=v+(I<<11&4294967295|I>>>21),I=T+(A^v^E)+w[15]+530742520&4294967295,T=A+(I<<16&4294967295|I>>>16),I=E+(T^A^v)+w[2]+3299628645&4294967295,E=T+(I<<23&4294967295|I>>>9),I=v+(T^(E|~A))+w[0]+4096336452&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~T))+w[7]+1126891415&4294967295,A=v+(I<<10&4294967295|I>>>22),I=T+(v^(A|~E))+w[14]+2878612391&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~v))+w[5]+4237533241&4294967295,E=T+(I<<21&4294967295|I>>>11),I=v+(T^(E|~A))+w[12]+1700485571&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~T))+w[3]+2399980690&4294967295,A=v+(I<<10&4294967295|I>>>22),I=T+(v^(A|~E))+w[10]+4293915773&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~v))+w[1]+2240044497&4294967295,E=T+(I<<21&4294967295|I>>>11),I=v+(T^(E|~A))+w[8]+1873313359&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~T))+w[15]+4264355552&4294967295,A=v+(I<<10&4294967295|I>>>22),I=T+(v^(A|~E))+w[6]+2734768916&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~v))+w[13]+1309151649&4294967295,E=T+(I<<21&4294967295|I>>>11),I=v+(T^(E|~A))+w[4]+4149444226&4294967295,v=E+(I<<6&4294967295|I>>>26),I=A+(E^(v|~T))+w[11]+3174756917&4294967295,A=v+(I<<10&4294967295|I>>>22),I=T+(v^(A|~E))+w[2]+718787259&4294967295,T=A+(I<<15&4294967295|I>>>17),I=E+(A^(T|~v))+w[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+A&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var E=v-this.blockSize,w=this.B,T=this.h,A=0;A<v;){if(T==0)for(;A<=E;)i(this,D,A),A+=this.blockSize;if(typeof D=="string"){for(;A<v;)if(w[T++]=D.charCodeAt(A++),T==this.blockSize){i(this,w),T=0;break}}else for(;A<v;)if(w[T++]=D[A++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var E=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=E&255,E/=256;for(this.u(D),D=Array(16),v=E=0;4>v;++v)for(var w=0;32>w;w+=8)D[E++]=this.g[v]>>>w&255;return D};function o(D,v){var E=c;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=v(D)}function s(D,v){this.h=v;for(var E=[],w=!0,T=D.length-1;0<=T;T--){var A=D[T]|0;w&&A==v||(E[T]=A,w=!1)}this.g=E}var c={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var v=[],E=1,w=0;D>=E;w++)v[w]=D/E|0,E*=4294967296;return new s(v,0)}function f(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return R(f(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),w=p,T=0;T<D.length;T+=8){var A=Math.min(8,D.length-T),I=parseInt(D.substring(T,T+A),v);8>A?(A=l(Math.pow(v,A)),w=w.j(A).add(l(I))):(w=w.j(E),w=w.add(l(I)))}return w}var p=u(0),y=u(1),m=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var D=0,v=1,E=0;E<this.g.length;E++){var w=this.i(E);D+=(0<=w?w:4294967296+w)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(N(this))return"-"+R(this).toString(D);for(var v=l(Math.pow(D,6)),E=this,w="";;){var T=ue(E,v).g;E=k(E,T.j(v));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=T,C(E))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=k(this,D),N(D)?-1:C(D)?0:1};function R(D){for(var v=D.g.length,E=[],w=0;w<v;w++)E[w]=~D.g[w];return new s(E,~D.h).add(y)}t.abs=function(){return N(this)?R(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0,T=0;T<=v;T++){var A=w+(this.i(T)&65535)+(D.i(T)&65535),I=(A>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);w=I>>>16,A&=65535,I&=65535,E[T]=I<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(D,v){return D.add(R(v))}t.j=function(D){if(C(this)||C(D))return p;if(N(this))return N(D)?R(this).j(R(D)):R(R(this).j(D));if(N(D))return R(this.j(R(D)));if(0>this.l(m)&&0>D.l(m))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,E=[],w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<D.g.length;T++){var A=this.i(w)>>>16,I=this.i(w)&65535,rn=D.i(T)>>>16,To=D.i(T)&65535;E[2*w+2*T]+=I*To,F(E,2*w+2*T),E[2*w+2*T+1]+=A*To,F(E,2*w+2*T+1),E[2*w+2*T+1]+=I*rn,F(E,2*w+2*T+1),E[2*w+2*T+2]+=A*rn,F(E,2*w+2*T+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function F(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function $(D,v){this.g=D,this.h=v}function ue(D,v){if(C(v))throw Error("division by zero");if(C(D))return new $(p,p);if(N(D))return v=ue(R(D),v),new $(R(v.g),R(v.h));if(N(v))return v=ue(D,R(v)),new $(R(v.g),v.h);if(30<D.g.length){if(N(D)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=y,w=v;0>=w.l(D);)E=Pe(E),w=Pe(w);var T=he(E,1),A=he(w,1);for(w=he(w,2),E=he(E,2);!C(w);){var I=A.add(w);0>=I.l(D)&&(T=T.add(E),A=I),w=he(w,1),E=he(E,1)}return v=k(D,T.j(v)),new $(T,v)}for(T=p;0<=D.l(v);){for(E=Math.max(1,Math.floor(D.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=l(E),I=A.j(v);N(I)||0<I.l(D);)E-=w,A=l(E),I=A.j(v);C(A)&&(A=y),T=T.add(A),D=k(D,I)}return new $(T,D)}t.A=function(D){return ue(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)&D.i(w);return new s(E,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)|D.i(w);return new s(E,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)^D.i(w);return new s(E,this.h^D.h)};function Pe(D){for(var v=D.g.length+1,E=[],w=0;w<v;w++)E[w]=D.i(w)<<1|D.i(w-1)>>>31;return new s(E,D.h)}function he(D,v){var E=v>>5;v%=32;for(var w=D.g.length-E,T=[],A=0;A<w;A++)T[A]=0<v?D.i(A+E)>>>v|D.i(A+E+1)<<32-v:D.i(A+E);return new s(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Qg=Vb.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,wn=Vb.Integer=s}).apply(typeof Fb<"u"?Fb:typeof self<"u"?self:typeof window<"u"?window:{});var dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dn={};var Yg,T2,Yi,Zg,Ys,hl,Jg,Xg,em;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof dl=="object"&&dl];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var b=a[g];if(!(b in h))break e;h=h[b]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var h=0,g=!1,b={next:function(){if(!g&&h<a.length){var S=h++;return{value:d(S,a[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,h){return h})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),a.apply(d,b)}}return function(){return a.apply(d,arguments)}}function y(a,d,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function m(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function C(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,b,S){for(var x=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)x[pe-2]=arguments[pe];return d.prototype[b].apply(g,x)}}function N(a){let d=a.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function R(a,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let b=a.length||0,S=g.length||0;a.length=b+S;for(let x=0;x<S;x++)a[b+x]=g[x]}else a.push(g)}}class k{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function F(a){return/^[\s\xa0]*$/.test(a)}function $(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ue(a){return ue[" "](a),a}ue[" "]=function(){};var Pe=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function he(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function D(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function v(a){let d={};for(let h in a)d[h]=a[h];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let h,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(h in g)a[h]=g[h];for(let S=0;S<E.length;S++)h=E[S],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function T(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function A(a){c.setTimeout(()=>{throw a},0)}function I(){var a=sd;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class rn{constructor(){this.h=this.g=null}add(d,h){let g=To.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var To=new k(()=>new oA,a=>a.reset());class oA{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let bo,Co=!1,sd=new rn,hv=()=>{let a=c.Promise.resolve(void 0);bo=()=>{a.then(sA)}};var sA=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(h){A(h)}var d=To;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Co=!1};function Rn(){this.s=this.s,this.C=this.C}Rn.prototype.s=!1,Rn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $e(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}$e.prototype.h=function(){this.defaultPrevented=!0};var aA=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function Ao(a,d){if($e.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Pe){e:{try{ue(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:cA[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ao.aa.h.call(this)}}C(Ao,$e);var cA={2:"touch",3:"pen",4:"mouse"};Ao.prototype.h=function(){Ao.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var So="closure_listenable_"+(1e6*Math.random()|0),uA=0;function lA(a,d,h,g,b){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=b,this.key=++uA,this.da=this.fa=!1}function va(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _a(a){this.src=a,this.g={},this.h=0}_a.prototype.add=function(a,d,h,g,b){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var x=cd(a,d,g,b);return-1<x?(d=a[x],h||(d.fa=!1)):(d=new lA(d,this.src,S,!!g,b),d.fa=h,a.push(d)),d};function ad(a,d){var h=d.type;if(h in a.g){var g=a.g[h],b=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=b)&&Array.prototype.splice.call(g,b,1),S&&(va(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function cd(a,d,h,g){for(var b=0;b<a.length;++b){var S=a[b];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==g)return b}return-1}var ud="closure_lm_"+(1e6*Math.random()|0),ld={};function fv(a,d,h,g,b){if(g&&g.once)return gv(a,d,h,g,b);if(Array.isArray(d)){for(var S=0;S<d.length;S++)fv(a,d[S],h,g,b);return null}return h=pd(h),a&&a[So]?a.K(d,h,l(g)?!!g.capture:!!g,b):pv(a,d,h,!1,g,b)}function pv(a,d,h,g,b,S){if(!d)throw Error("Invalid event type");var x=l(b)?!!b.capture:!!b,pe=hd(a);if(pe||(a[ud]=pe=new _a(a)),h=pe.add(d,h,g,x,S),h.proxy)return h;if(g=dA(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)aA||(b=x),b===void 0&&(b=!1),a.addEventListener(d.toString(),g,b);else if(a.attachEvent)a.attachEvent(yv(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function dA(){function a(h){return d.call(a.src,a.listener,h)}let d=hA;return a}function gv(a,d,h,g,b){if(Array.isArray(d)){for(var S=0;S<d.length;S++)gv(a,d[S],h,g,b);return null}return h=pd(h),a&&a[So]?a.L(d,h,l(g)?!!g.capture:!!g,b):pv(a,d,h,!0,g,b)}function mv(a,d,h,g,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)mv(a,d[S],h,g,b);else g=l(g)?!!g.capture:!!g,h=pd(h),a&&a[So]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],h=cd(S,h,g,b),-1<h&&(va(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=hd(a))&&(d=a.g[d.toString()],a=-1,d&&(a=cd(d,h,g,b)),(h=-1<a?d[a]:null)&&dd(h))}function dd(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[So])ad(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(yv(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=hd(d))?(ad(h,a),h.h==0&&(h.src=null,d[ud]=null)):va(a)}}}function yv(a){return a in ld?ld[a]:ld[a]="on"+a}function hA(a,d){if(a.da)a=!0;else{d=new Ao(d,this);var h=a.listener,g=a.ha||a.src;a.fa&&dd(a),a=h.call(g,d)}return a}function hd(a){return a=a[ud],a instanceof _a?a:null}var fd="__closure_events_fn_"+(1e9*Math.random()>>>0);function pd(a){return typeof a=="function"?a:(a[fd]||(a[fd]=function(d){return a.handleEvent(d)}),a[fd])}function He(){Rn.call(this),this.i=new _a(this),this.M=this,this.F=null}C(He,Rn),He.prototype[So]=!0,He.prototype.removeEventListener=function(a,d,h,g){mv(this,a,d,h,g)};function Qe(a,d){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new $e(d,a);else if(d instanceof $e)d.target=d.target||a;else{var b=d;d=new $e(g,a),w(d,b)}if(b=!0,h)for(var S=h.length-1;0<=S;S--){var x=d.g=h[S];b=Ia(x,g,!0,d)&&b}if(x=d.g=a,b=Ia(x,g,!0,d)&&b,b=Ia(x,g,!1,d)&&b,h)for(S=0;S<h.length;S++)x=d.g=h[S],b=Ia(x,g,!1,d)&&b}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],g=0;g<h.length;g++)va(h[g]);delete a.g[d],a.h--}}this.F=null},He.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},He.prototype.L=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function Ia(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,S=0;S<d.length;++S){var x=d[S];if(x&&!x.da&&x.capture==h){var pe=x.listener,je=x.ha||x.src;x.fa&&ad(a.i,x),b=pe.call(je,g)!==!1&&b}}return b&&!g.defaultPrevented}function vv(a,d,h){if(typeof a=="function")h&&(a=y(a,h));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function _v(a){a.g=vv(()=>{a.g=null,a.i&&(a.i=!1,_v(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class fA extends Rn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:_v(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function No(a){Rn.call(this),this.h=a,this.g={}}C(No,Rn);var Iv=[];function Ev(a){he(a.g,function(d,h){this.g.hasOwnProperty(h)&&dd(d)},a),a.g={}}No.prototype.N=function(){No.aa.N.call(this),Ev(this)},No.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gd=c.JSON.stringify,pA=c.JSON.parse,gA=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function md(){}md.prototype.h=null;function wv(a){return a.h||(a.h=a.i())}function Dv(){}var Ro={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yd(){$e.call(this,"d")}C(yd,$e);function vd(){$e.call(this,"c")}C(vd,$e);var ir={},Tv=null;function Ea(){return Tv=Tv||new He}ir.La="serverreachability";function bv(a){$e.call(this,ir.La,a)}C(bv,$e);function Mo(a){let d=Ea();Qe(d,new bv(d))}ir.STAT_EVENT="statevent";function Cv(a,d){$e.call(this,ir.STAT_EVENT,a),this.stat=d}C(Cv,$e);function Ye(a){let d=Ea();Qe(d,new Cv(d,a))}ir.Ma="timingevent";function Av(a,d){$e.call(this,ir.Ma,a),this.size=d}C(Av,$e);function Po(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function xo(){this.g=!0}xo.prototype.xa=function(){this.g=!1};function mA(a,d,h,g,b,S){a.info(function(){if(a.g)if(S)for(var x="",pe=S.split("&"),je=0;je<pe.length;je++){var ae=pe[je].split("=");if(1<ae.length){var qe=ae[0];ae=ae[1];var ze=qe.split("_");x=2<=ze.length&&ze[1]=="type"?x+(qe+"="+ae+"&"):x+(qe+"=redacted&")}}else x=null;else x=S;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+h+`
`+x})}function yA(a,d,h,g,b,S,x){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+h+`
`+S+" "+x})}function ni(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+_A(a,h)+(g?" "+g:"")})}function vA(a,d){a.info(function(){return"TIMEOUT: "+d})}xo.prototype.info=function(){};function _A(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var x=1;x<b.length;x++)b[x]=""}}}}return gd(h)}catch{return d}}var wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_d;function Da(){}C(Da,md),Da.prototype.g=function(){return new XMLHttpRequest},Da.prototype.i=function(){return{}},_d=new Da;function Mn(a,d,h,g){this.j=a,this.i=d,this.l=h,this.R=g||1,this.U=new No(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nv}function Nv(){this.i=null,this.g="",this.h=!1}var Rv={},Id={};function Ed(a,d,h){a.L=1,a.v=Aa(on(d)),a.m=h,a.P=!0,Mv(a,null)}function Mv(a,d){a.F=Date.now(),Ta(a),a.A=on(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),zv(h.i,"t",g),a.C=0,h=a.j.J,a.h=new Nv,a.g=u_(a.j,h?d:null,!a.m),0<a.O&&(a.M=new fA(y(a.Y,a,a.g),a.O)),d=a.U,h=a.g,g=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(Iv[0]=b.toString()),b=Iv);for(var S=0;S<b.length;S++){var x=fv(h,b[S],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Mo(),mA(a.i,a.u,a.A,a.l,a.R,a.m)}Mn.prototype.ca=function(a){a=a.target;let d=this.M;d&&sn(a)==3?d.j():this.Y(a)},Mn.prototype.Y=function(a){try{if(a==this.g)e:{let ze=sn(this.g);var d=this.g.Ba();let oi=this.g.Z();if(!(3>ze)&&(ze!=3||this.g&&(this.h.h||this.g.oa()||Jv(this.g)))){this.J||ze!=4||d==7||(d==8||0>=oi?Mo(3):Mo(2)),wd(this);var h=this.g.Z();this.X=h;t:if(Pv(this)){var g=Jv(this.g);a="";var b=g.length,S=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){or(this),ko(this);var x="";break t}this.h.i=new c.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(S&&d==b-1)});g.length=0,this.h.g+=a,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=h==200,yA(this.i,this.u,this.A,this.l,this.R,ze,h),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,je=this.g;if((pe=je.g?je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(pe)){var ae=pe;break t}}ae=null}if(h=ae)ni(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dd(this,h);else{this.o=!1,this.s=3,Ye(12),or(this),ko(this);break e}}if(this.P){h=!0;let wt;for(;!this.J&&this.C<x.length;)if(wt=IA(this,x),wt==Id){ze==4&&(this.s=4,Ye(14),h=!1),ni(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==Rv){this.s=4,Ye(15),ni(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else ni(this.i,this.l,wt,null),Dd(this,wt);if(Pv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||x.length!=0||this.h.h||(this.s=1,Ye(16),h=!1),this.o=this.o&&h,!h)ni(this.i,this.l,x,"[Invalid Chunked Response]"),or(this),ko(this);else if(0<x.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Nd(qe),qe.M=!0,Ye(11))}}else ni(this.i,this.l,x,null),Dd(this,x);ze==4&&or(this),this.o&&!this.J&&(ze==4?o_(this.j,this):(this.o=!1,Ta(this)))}else VA(this.g),h==400&&0<x.indexOf("Unknown SID")?(this.s=3,Ye(12)):(this.s=0,Ye(13)),or(this),ko(this)}}}catch{}finally{}};function Pv(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function IA(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?Id:(h=Number(d.substring(h,g)),isNaN(h)?Rv:(g+=1,g+h>d.length?Id:(d=d.slice(g,g+h),a.C=g+h,d)))}Mn.prototype.cancel=function(){this.J=!0,or(this)};function Ta(a){a.S=Date.now()+a.I,xv(a,a.I)}function xv(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Po(y(a.ba,a),d)}function wd(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Mn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(vA(this.i,this.A),this.L!=2&&(Mo(),Ye(17)),or(this),this.s=2,ko(this)):xv(this,this.S-a)};function ko(a){a.j.G==0||a.J||o_(a.j,a)}function or(a){wd(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ev(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Dd(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||Td(h.h,a))){if(!a.K&&Td(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Pa(h),Ra(h);else break e;Sd(h),Ye(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=Po(y(h.Za,h),6e3));if(1>=Fv(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else ar(h,11)}else if((a.K||h.g==a)&&Pa(h),!F(d))for(b=h.Da.g.parse(d),d=0;d<b.length;d++){let ae=b[d];if(h.T=ae[0],ae=ae[1],h.G==2)if(ae[0]=="c"){h.K=ae[1],h.ia=ae[2];let qe=ae[3];qe!=null&&(h.la=qe,h.j.info("VER="+h.la));let ze=ae[4];ze!=null&&(h.Aa=ze,h.j.info("SVER="+h.Aa));let oi=ae[5];oi!=null&&typeof oi=="number"&&0<oi&&(g=1.5*oi,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let wt=a.g;if(wt){let ka=wt.g?wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var S=g.h;S.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(bd(S,S.h),S.h=null))}if(g.D){let Rd=wt.g?wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Rd&&(g.ya=Rd,ye(g.I,g.D,Rd))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var x=a;if(g.qa=c_(g,g.J?g.ia:null,g.W),x.K){Vv(g.h,x);var pe=x,je=g.L;je&&(pe.I=je),pe.B&&(wd(pe),Ta(pe)),g.g=x}else r_(g);0<h.i.length&&Ma(h)}else ae[0]!="stop"&&ae[0]!="close"||ar(h,7);else h.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?ar(h,7):Ad(h):ae[0]!="noop"&&h.l&&h.l.ta(ae),h.v=0)}}Mo(4)}catch{}}var EA=class{constructor(a,d){this.g=a,this.map=d}};function kv(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ov(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Fv(a){return a.h?1:a.g?a.g.size:0}function Td(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function bd(a,d){a.g?a.g.add(d):a.h=d}function Vv(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}kv.prototype.cancel=function(){if(this.i=Lv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Lv(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return N(a.i)}function wA(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],h=a.length,g=0;g<h;g++)d.push(a[g]);return d}d=[],h=0;for(g in a)d[h++]=a[g];return d}function DA(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let g in a)d[h++]=g;return d}}}function jv(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=DA(a),g=wA(a),b=g.length,S=0;S<b;S++)d.call(void 0,g[S],h&&h[S],a)}var Bv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TA(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),b=null;if(0<=g){var S=a[h].substring(0,g);b=a[h].substring(g+1)}else S=a[h];d(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function sr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof sr){this.h=a.h,ba(this,a.j),this.o=a.o,this.g=a.g,Ca(this,a.s),this.l=a.l;var d=a.i,h=new Vo;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),Uv(this,h),this.m=a.m}else a&&(d=String(a).match(Bv))?(this.h=!1,ba(this,d[1]||"",!0),this.o=Oo(d[2]||""),this.g=Oo(d[3]||"",!0),Ca(this,d[4]),this.l=Oo(d[5]||"",!0),Uv(this,d[6]||"",!0),this.m=Oo(d[7]||"")):(this.h=!1,this.i=new Vo(null,this.h))}sr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Fo(d,$v,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Fo(d,$v,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Fo(h,h.charAt(0)=="/"?AA:CA,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Fo(h,NA)),a.join("")};function on(a){return new sr(a)}function ba(a,d,h){a.j=h?Oo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Ca(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Uv(a,d,h){d instanceof Vo?(a.i=d,RA(a.i,a.h)):(h||(d=Fo(d,SA)),a.i=new Vo(d,a.h))}function ye(a,d,h){a.i.set(d,h)}function Aa(a){return ye(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Oo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Fo(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,bA),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function bA(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var $v=/[#\/\?@]/g,CA=/[#\?:]/g,AA=/[#\?]/g,SA=/[#\?@]/g,NA=/#/g;function Vo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Pn(a){a.g||(a.g=new Map,a.h=0,a.i&&TA(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Vo.prototype,t.add=function(a,d){Pn(this),this.i=null,a=ri(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function Hv(a,d){Pn(a),d=ri(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function qv(a,d){return Pn(a),d=ri(a,d),a.g.has(d)}t.forEach=function(a,d){Pn(this),this.g.forEach(function(h,g){h.forEach(function(b){a.call(d,b,g,this)},this)},this)},t.na=function(){Pn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let b=a[g];for(let S=0;S<b.length;S++)h.push(d[g])}return h},t.V=function(a){Pn(this);let d=[];if(typeof a=="string")qv(this,a)&&(d=d.concat(this.g.get(ri(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},t.set=function(a,d){return Pn(this),this.i=null,a=ri(this,a),qv(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function zv(a,d,h){Hv(a,d),0<h.length&&(a.i=null,a.g.set(ri(a,d),N(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let S=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var b=S;x[g]!==""&&(b+="="+encodeURIComponent(String(x[g]))),a.push(b)}}return this.i=a.join("&")};function ri(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function RA(a,d){d&&!a.j&&(Pn(a),a.i=null,a.g.forEach(function(h,g){var b=g.toLowerCase();g!=b&&(Hv(this,g),zv(this,b,h))},a)),a.j=d}function MA(a,d){let h=new xo;if(c.Image){let g=new Image;g.onload=m(xn,h,"TestLoadImage: loaded",!0,d,g),g.onerror=m(xn,h,"TestLoadImage: error",!1,d,g),g.onabort=m(xn,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=m(xn,h,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function PA(a,d){let h=new xo,g=new AbortController,b=setTimeout(()=>{g.abort(),xn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(b),S.ok?xn(h,"TestPingServer: ok",!0,d):xn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),xn(h,"TestPingServer: error",!1,d)})}function xn(a,d,h,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(h)}catch{}}function xA(){this.g=new gA}function kA(a,d,h){let g=h||"";try{jv(a,function(b,S){let x=b;l(b)&&(x=gd(b)),d.push(g+S+"="+encodeURIComponent(x))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Lo(a){this.l=a.Ub||null,this.j=a.eb||!1}C(Lo,md),Lo.prototype.g=function(){return new Sa(this.l,this.j)},Lo.prototype.i=function(a){return function(){return a}}({});function Sa(a,d){He.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Sa,He),t=Sa.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Bo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Bo(this)),this.g&&(this.readyState=3,Bo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gv(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gv(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?jo(this):Bo(this),this.readyState==3&&Gv(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,jo(this))},t.Qa=function(a){this.g&&(this.response=a,jo(this))},t.ga=function(){this.g&&jo(this)};function jo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Bo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Bo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Wv(a){let d="";return he(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function Cd(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=Wv(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):ye(a,d,h))}function we(a){He.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(we,He);var OA=/^https?$/i,FA=["POST","PUT"];t=we.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_d.g(),this.v=this.o?wv(this.o):wv(_d),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){Kv(this,S);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)h.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())h.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(FA,d,void 0))||g||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,x]of h)this.g.setRequestHeader(S,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zv(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){Kv(this,S)}};function Kv(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Qv(a),Na(a)}function Qv(a){a.A||(a.A=!0,Qe(a,"complete"),Qe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Qe(this,"complete"),Qe(this,"abort"),Na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Na(this,!0)),we.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yv(this):this.bb())},t.bb=function(){Yv(this)};function Yv(a){if(a.h&&typeof s<"u"&&(!a.v[1]||sn(a)!=4||a.Z()!=2)){if(a.u&&sn(a)==4)vv(a.Ea,0,a);else if(Qe(a,"readystatechange"),sn(a)==4){a.h=!1;try{let x=a.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=x===0){var b=String(a.D).match(Bv)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),g=!OA.test(b?b.toLowerCase():"")}h=g}if(h)Qe(a,"complete"),Qe(a,"success");else{a.m=6;try{var S=2<sn(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",Qv(a)}}finally{Na(a)}}}}function Na(a,d){if(a.g){Zv(a);let h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Qe(a,"ready");try{h.onreadystatechange=g}catch{}}}function Zv(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function sn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),pA(d)}};function Jv(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function VA(a){let d={};a=(a.g&&2<=sn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(F(a[g]))continue;var h=T(a[g]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[b]||[];d[b]=S,S.push(h)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uo(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function Xv(a){this.Aa=0,this.i=[],this.j=new xo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uo("baseRetryDelayMs",5e3,a),this.cb=Uo("retryDelaySeedMs",1e4,a),this.Wa=Uo("forwardChannelMaxRetries",2,a),this.wa=Uo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new kv(a&&a.concurrentRequestLimit),this.Da=new xA,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xv.prototype,t.la=8,t.G=1,t.connect=function(a,d,h,g){Ye(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=c_(this,null,this.W),Ma(this)};function Ad(a){if(e_(a),a.G==3){var d=a.U++,h=on(a.I);if(ye(h,"SID",a.K),ye(h,"RID",d),ye(h,"TYPE","terminate"),$o(a,h),d=new Mn(a,a.j,d),d.L=2,d.v=Aa(on(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=u_(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ta(d)}a_(a)}function Ra(a){a.g&&(Nd(a),a.g.cancel(),a.g=null)}function e_(a){Ra(a),a.u&&(c.clearTimeout(a.u),a.u=null),Pa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Ma(a){if(!Ov(a.h)&&!a.s){a.s=!0;var d=a.Ga;bo||hv(),Co||(bo(),Co=!0),sd.add(d,a),a.B=0}}function LA(a,d){return Fv(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Po(y(a.Ga,a,d),s_(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new Mn(this,this.j,a),S=this.o;if(this.S&&(S?(S=v(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=n_(this,b,d),h=on(this.I),ye(h,"RID",a),ye(h,"CVER",22),this.D&&ye(h,"X-HTTP-Session-Id",this.D),$o(this,h),S&&(this.O?d="headers="+encodeURIComponent(String(Wv(S)))+"&"+d:this.m&&Cd(h,this.m,S)),bd(this.h,b),this.Ua&&ye(h,"TYPE","init"),this.P?(ye(h,"$req",d),ye(h,"SID","null"),b.T=!0,Ed(b,h,null)):Ed(b,h,d),this.G=2}}else this.G==3&&(a?t_(this,a):this.i.length==0||Ov(this.h)||t_(this))};function t_(a,d){var h;d?h=d.l:h=a.U++;let g=on(a.I);ye(g,"SID",a.K),ye(g,"RID",h),ye(g,"AID",a.T),$o(a,g),a.m&&a.o&&Cd(g,a.m,a.o),h=new Mn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=n_(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),bd(a.h,h),Ed(h,g,d)}function $o(a,d){a.H&&he(a.H,function(h,g){ye(d,g,h)}),a.l&&jv({},function(h,g){ye(d,g,h)})}function n_(a,d,h){h=Math.min(a.i.length,h);var g=a.l?y(a.l.Na,a.l,a):null;e:{var b=a.i;let S=-1;for(;;){let x=["count="+h];S==-1?0<h?(S=b[0].g,x.push("ofs="+S)):S=0:x.push("ofs="+S);let pe=!0;for(let je=0;je<h;je++){let ae=b[je].g,qe=b[je].map;if(ae-=S,0>ae)S=Math.max(0,b[je].g-100),pe=!1;else try{kA(qe,x,"req"+ae+"_")}catch{g&&g(qe)}}if(pe){g=x.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,g}function r_(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;bo||hv(),Co||(bo(),Co=!0),sd.add(d,a),a.v=0}}function Sd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Po(y(a.Fa,a),s_(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,i_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Po(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ye(10),Ra(this),i_(this))};function Nd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function i_(a){a.g=new Mn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=on(a.qa);ye(d,"RID","rpc"),ye(d,"SID",a.K),ye(d,"AID",a.T),ye(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&ye(d,"TO",a.ja),ye(d,"TYPE","xmlhttp"),$o(a,d),a.m&&a.o&&Cd(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Aa(on(d)),h.m=null,h.P=!0,Mv(h,a)}t.Za=function(){this.C!=null&&(this.C=null,Ra(this),Sd(this),Ye(19))};function Pa(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function o_(a,d){var h=null;if(a.g==d){Pa(a),Nd(a),a.g=null;var g=2}else if(Td(a.h,d))h=d.D,Vv(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var b=a.B;g=Ea(),Qe(g,new Av(g,h)),Ma(a)}else r_(a);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&LA(a,d)||g==2&&Sd(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),b){case 1:ar(a,5);break;case 4:ar(a,10);break;case 3:ar(a,6);break;default:ar(a,2)}}}function s_(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function ar(a,d){if(a.j.info("Error code "+d),d==2){var h=y(a.fb,a),g=a.Xa;let b=!g;g=new sr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ba(g,"https"),Aa(g),b?MA(g.toString(),h):PA(g.toString(),h)}else Ye(2);a.G=0,a.l&&a.l.sa(d),a_(a),e_(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function a_(a){if(a.G=0,a.ka=[],a.l){let d=Lv(a.h);(d.length!=0||a.i.length!=0)&&(R(a.ka,d),R(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function c_(a,d,h){var g=h instanceof sr?on(h):new sr(h);if(g.g!="")d&&(g.g=d+"."+g.g),Ca(g,g.s);else{var b=c.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var S=new sr(null);g&&ba(S,g),d&&(S.g=d),b&&Ca(S,b),h&&(S.l=h),g=S}return h=a.D,d=a.ya,h&&d&&ye(g,h,d),ye(g,"VER",a.la),$o(a,g),g}function u_(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new we(new Lo({eb:h})):new we(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function l_(){}t=l_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xa(){}xa.prototype.g=function(a,d){return new lt(a,d)};function lt(a,d){He.call(this),this.g=new Xv(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!F(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!F(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ii(this)}C(lt,He),lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lt.prototype.close=function(){Ad(this.g)},lt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=gd(a),a=h);d.i.push(new EA(d.Ya++,a)),d.G==3&&Ma(d)},lt.prototype.N=function(){this.g.l=null,delete this.j,Ad(this.g),delete this.g,lt.aa.N.call(this)};function d_(a){yd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(d_,yd);function h_(){vd.call(this),this.status=1}C(h_,vd);function ii(a){this.g=a}C(ii,l_),ii.prototype.ua=function(){Qe(this.g,"a")},ii.prototype.ta=function(a){Qe(this.g,new d_(a))},ii.prototype.sa=function(a){Qe(this.g,new h_)},ii.prototype.ra=function(){Qe(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,lt.prototype.send=lt.prototype.o,lt.prototype.open=lt.prototype.m,lt.prototype.close=lt.prototype.close,em=Dn.createWebChannelTransport=function(){return new xa},Xg=Dn.getStatEventTarget=function(){return Ea()},Jg=Dn.Event=ir,hl=Dn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,Ys=Dn.ErrorCode=wa,Sv.COMPLETE="complete",Zg=Dn.EventType=Sv,Dv.EventType=Ro,Ro.OPEN="a",Ro.CLOSE="b",Ro.ERROR="c",Ro.MESSAGE="d",He.prototype.listen=He.prototype.K,Yi=Dn.WebChannel=Dv,T2=Dn.FetchXmlHttpFactory=Lo,we.prototype.listenOnce=we.prototype.L,we.prototype.getLastError=we.prototype.Ka,we.prototype.getLastErrorCode=we.prototype.Ba,we.prototype.getStatus=we.prototype.Z,we.prototype.getResponseJson=we.prototype.Oa,we.prototype.getResponseText=we.prototype.oa,we.prototype.send=we.prototype.ea,we.prototype.setWithCredentials=we.prototype.Ha,Yg=Dn.XhrIo=we}).apply(typeof dl<"u"?dl:typeof self<"u"?self:typeof window<"u"?window:{});var Lb="@firebase/firestore",jb="4.7.14";var Ve=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");var Io="11.7.3";var Kr=new Gt("@firebase/firestore");function Zi(){return Kr.logLevel}function O(t,...e){if(Kr.logLevel<=ee.DEBUG){let n=e.map(Hy);Kr.debug(`Firestore (${Io}): ${t}`,...n)}}function Tn(t,...e){if(Kr.logLevel<=ee.ERROR){let n=e.map(Hy);Kr.error(`Firestore (${Io}): ${t}`,...n)}}function oo(t,...e){if(Kr.logLevel<=ee.WARN){let n=e.map(Hy);Kr.warn(`Firestore (${Io}): ${t}`,...n)}}function Hy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function j(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,AC(t,r,n)}function AC(t,e,n){let r=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Tn(r),new Error(r)}function de(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||AC(e,i,r)}function q(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Zt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var _l=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},om=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ve.UNAUTHENTICATED))}shutdown(){}},sm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},am=class{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Zt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new _l(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new Ve(e)}},cm=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},um=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new cm(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Il=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lm=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Il(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Il(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function b2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function SC(){return new TextEncoder}var El=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=b2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function Q(t,e){return t<e?-1:t>e?1:0}function dm(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Q(r,i);{let o=SC(),s=C2(o.encode(Bb(t,n)),o.encode(Bb(e,n)));return s!==0?s:Q(r,i)}}n+=r>65535?2:1}return Q(t.length,e.length)}function Bb(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function C2(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Q(t[n],e[n]);return Q(t.length,e.length)}function so(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ub=-62135596800,$b=1e6,Ue=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*$b);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ub)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$b}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-Ub;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var K=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ue(0,0))}static max(){return new t(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Hb="__name__",wl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&j(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&j(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Q(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):dm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wn.fromString(e.substring(4,e.length-2))}},be=class t extends wl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},A2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mt=class t extends wl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return A2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hb}static keyField(){return new t([Hb])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new V(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new V(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new V(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(be.fromString(e))}static fromName(e){return new t(be.fromString(e).popFirst(5))}static empty(){return new t(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new be(e.slice()))}};var na=-1,hm=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};hm.UNKNOWN_ID=-1;function S2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new Qr(i,B.empty(),e)}function N2(t){return new Qr(t.readTime,t.key,na)}var Qr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(K.min(),B.empty(),na)}static max(){return new t(K.max(),B.empty(),na)}};function R2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:Q(t.largestBatchId,e.largestBatchId))}var M2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Eo(t){return _(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==M2)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function P2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wo(t){return t.name==="IndexedDbTransactionError"}var qy=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ce&&this.ce(n),n}}t.le=-1;return t})(),zy=-1;function Xl(t){return t==null}function ra(t){return t===0&&1/t==-1/0}function x2(t){return typeof t=="number"&&Number.isInteger(t)&&!ra(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var NC="";function k2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qb(e)),e=O2(t.get(n),e);return qb(e)}function O2(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case NC:n+="";break;default:n+=o}}return n}function qb(t){return t+NC+""}var F2="remoteDocuments",RC="owner";var MC="mutationQueues";var PC="mutations";var xC="documentMutations",V2="remoteDocumentsV14";var kC="remoteDocumentGlobal";var OC="targets";var FC="targetDocuments";var VC="targetGlobal",LC="collectionParents";var jC="clientMetadata";var BC="bundles";var UC="namedQueries";var L2="indexConfiguration";var j2="indexState";var B2="indexEntries";var $C="documentOverlays";var U2="globals";var $2=[MC,PC,xC,F2,OC,RC,VC,FC,jC,kC,LC,BC,UC],dW=[...$2,$C],H2=[MC,PC,xC,V2,OC,RC,VC,FC,jC,kC,LC,BC,UC,$C],q2=H2,z2=[...q2,L2,j2,B2];var hW=[...z2,U2];function zb(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ei(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ce=class t{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new to(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new to(this.root,e,this.comparator,!1)}getReverseIterator(){return new to(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new to(this.root,e,this.comparator,!0)}},to=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Jt=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw j(27949);return e+(this.isRed()?0:1)}};Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Le=class t{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dl(this.data.getIterator())}getIteratorFrom(e){return new Dl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Dl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Yt=class t{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Le(mt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return so(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Tl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ke=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Tl("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ke.EMPTY_BYTE_STRING=new Ke("");var G2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bn(t){if(de(!!t,39018),typeof t=="string"){let e=0,n=G2.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_e(t.seconds),nanos:_e(t.nanos)}}function _e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cn(t){return typeof t=="string"?Ke.fromBase64String(t):Ke.fromUint8Array(t)}var qC="server_timestamp",zC="__type__",GC="__previous_value__",WC="__local_write_time__";function Gy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[zC])===null||n===void 0?void 0:n.stringValue)===qC}function ed(t){let e=t.mapValue.fields[GC];return Gy(e)?ed(e):e}function ia(t){let e=bn(t.mapValue.fields[WC].timestampValue);return new Ue(e.seconds,e.nanos)}var pm=class{constructor(e,n,r,i,o,s,c,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},bl="(default)",Cl=class t{constructor(e,n){this.projectId=e,this.database=n||bl}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===bl}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Wy="__type__",KC="__max__",fl={mapValue:{fields:{__type__:{stringValue:KC}}}},Ky="__vector__",ao="value";function tr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gy(t)?4:YC(t)?9007199254740991:QC(t)?10:11:j(28295,{value:t})}function tn(t,e){if(t===e)return!0;let n=tr(t);if(n!==tr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ia(t).isEqual(ia(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=bn(i.timestampValue),c=bn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Cn(i.bytesValue).isEqual(Cn(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return _e(i.geoPointValue.latitude)===_e(o.geoPointValue.latitude)&&_e(i.geoPointValue.longitude)===_e(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return _e(i.integerValue)===_e(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=_e(i.doubleValue),c=_e(o.doubleValue);return s===c?ra(s)===ra(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return so(t.arrayValue.values||[],e.arrayValue.values||[],tn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(zb(s)!==zb(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!tn(s[u],c[u])))return!1;return!0}(t,e);default:return j(52216,{left:t})}}function oa(t,e){return(t.values||[]).find(n=>tn(n,e))!==void 0}function co(t,e){if(t===e)return 0;let n=tr(t),r=tr(e);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(t.booleanValue,e.booleanValue);case 2:return function(o,s){let c=_e(o.integerValue||o.doubleValue),u=_e(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Gb(t.timestampValue,e.timestampValue);case 4:return Gb(ia(t),ia(e));case 5:return dm(t.stringValue,e.stringValue);case 6:return function(o,s){let c=Cn(o),u=Cn(s);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=Q(c[l],u[l]);if(f!==0)return f}return Q(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let c=Q(_e(o.latitude),_e(s.latitude));return c!==0?c:Q(_e(o.longitude),_e(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wb(t.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,l,f;let p=o.fields||{},y=s.fields||{},m=(c=p[ao])===null||c===void 0?void 0:c.arrayValue,C=(u=y[ao])===null||u===void 0?void 0:u.arrayValue,N=Q(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((f=C?.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:Wb(m,C)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===fl.mapValue&&s===fl.mapValue)return 0;if(o===fl.mapValue)return 1;if(s===fl.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let y=dm(u[p],f[p]);if(y!==0)return y;let m=co(c[u[p]],l[f[p]]);if(m!==0)return m}return Q(u.length,f.length)}(t.mapValue,e.mapValue);default:throw j(23264,{Pe:n})}}function Gb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Q(t,e);let n=bn(t),r=bn(e),i=Q(n.seconds,r.seconds);return i!==0?i:Q(n.nanos,r.nanos)}function Wb(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=co(n[i],r[i]);if(o)return o}return Q(n.length,r.length)}function uo(t){return gm(t)}function gm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=bn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return B.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=gm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${gm(n.fields[s])}`;return i+"}"}(t.mapValue):j(61005,{value:t})}function ml(t){switch(tr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ed(t);return e?16+ml(e):16;case 5:return 2*t.stringValue.length;case 6:return Cn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ml(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ei(r.fields,(o,s)=>{i+=o.length+ml(s)}),i}(t.mapValue);default:throw j(13486,{value:t})}}function mm(t){return!!t&&"integerValue"in t}function Qy(t){return!!t&&"arrayValue"in t}function Kb(t){return!!t&&"nullValue"in t}function Qb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yl(t){return!!t&&"mapValue"in t}function QC(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Wy])===null||n===void 0?void 0:n.stringValue)===Ky}function Js(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ei(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Js(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Js(t.arrayValue.values[n]);return e}return Object.assign({},t)}function YC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===KC}var pW={mapValue:{fields:{[Wy]:{stringValue:Ky},[ao]:{arrayValue:{}}}}};var Pt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Js(n)}setAll(e){let n=mt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=Js(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];yl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ei(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Js(this.value))}};function ZC(t){let e=[];return ei(t.fields,(n,r)=>{let i=new mt([n]);if(yl(r)){let o=ZC(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Yt(e)}var kt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,K.min(),K.min(),K.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,K.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,K.min(),K.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,K.min(),K.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var lo=class{constructor(e,n){this.position=e,this.inclusive=n}};function Yb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),n.key):r=co(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tn(t.position[n],e.position[n]))return!1;return!0}var ho=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function W2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Al=class{},Me=class t extends Al{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vm(e,n,r):n==="array-contains"?new Em(e,r):n==="in"?new wm(e,r):n==="not-in"?new Dm(e,r):n==="array-contains-any"?new Tm(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _m(e,r):new Im(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&tr(this.value)===tr(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},nn=class t extends Al{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new t(e,n)}matches(e){return JC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function JC(t){return t.op==="and"}function XC(t){return K2(t)&&JC(t)}function K2(t){for(let e of t.filters)if(e instanceof nn)return!1;return!0}function ym(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(XC(t))return t.filters.map(e=>ym(e)).join(",");{let e=t.filters.map(n=>ym(n)).join(",");return`${t.op}(${e})`}}function e0(t,e){return t instanceof Me?function(r,i){return i instanceof Me&&r.op===i.op&&r.field.isEqual(i.field)&&tn(r.value,i.value)}(t,e):t instanceof nn?function(r,i){return i instanceof nn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&e0(s,i.filters[c]),!0):!1}(t,e):void j(19439)}function t0(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof nn?function(n){return n.op.toString()+" {"+n.getFilters().map(t0).join(" ,")+"}"}(t):"Filter"}var vm=class extends Me{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},_m=class extends Me{constructor(e,n){super(e,"in",n),this.keys=n0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Im=class extends Me{constructor(e,n){super(e,"not-in",n),this.keys=n0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function n0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}var Em=class extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Qy(n)&&oa(n.arrayValue,this.value)}},wm=class extends Me{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&oa(this.value.arrayValue,n)}},Dm=class extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!oa(this.value.arrayValue,n)}},Tm=class extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Qy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oa(this.value.arrayValue,r))}};var bm=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Ie=null}};function Jb(t,e=null,n=[],r=[],i=null,o=null,s=null){return new bm(t,e,n,r,i,o,s)}function Yy(t){let e=q(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ym(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Xl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uo(r)).join(",")),e.Ie=n}return e.Ie}function Zy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!W2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!e0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zb(t.startAt,e.startAt)&&Zb(t.endAt,e.endAt)}function Cm(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var fo=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function Q2(t,e,n,r,i,o,s,c){return new fo(t,e,n,r,i,o,s,c)}function r0(t){return new fo(t)}function Xb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Y2(t){return t.collectionGroup!==null}function Xs(t){let e=q(t);if(e.Ee===null){e.Ee=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Le(mt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new ho(o,r))}),n.has(mt.keyField().canonicalString())||e.Ee.push(new ho(mt.keyField(),r))}return e.Ee}function Xt(t){let e=q(t);return e.de||(e.de=Z2(e,Xs(t))),e.de}function Z2(t,e){if(t.limitType==="F")return Jb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ho(i.field,o)});let n=t.endAt?new lo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lo(t.startAt.position,t.startAt.inclusive):null;return Jb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Am(t,e,n){return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function td(t,e){return Zy(Xt(t),Xt(e))&&t.limitType===e.limitType}function i0(t){return`${Yy(Xt(t))}|lt:${t.limitType}`}function Ji(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>t0(i)).join(", ")}]`),Xl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>uo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>uo(i)).join(",")),`Target(${r})`}(Xt(t))}; limitType=${t.limitType})`}function nd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Xs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let l=Yb(s,c,u);return s.inclusive?l<=0:l<0}(r.startAt,Xs(r),i)||r.endAt&&!function(s,c,u){let l=Yb(s,c,u);return s.inclusive?l>=0:l>0}(r.endAt,Xs(r),i))}(t,e)}function J2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function o0(t){return(e,n)=>{let r=!1;for(let i of Xs(t)){let o=X2(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function X2(t,e,n){let r=t.field.isKeyField()?B.comparator(e.key,n.key):function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?co(u,l):j(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return j(19790,{direction:t.dir})}}var An=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ei(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return HC(this.inner)}size(){return this.innerSize}};var ej=new Ce(B.comparator);function Sn(){return ej}var s0=new Ce(B.comparator);function Zs(...t){let e=s0;for(let n of t)e=e.insert(n.key,n);return e}function a0(t){let e=s0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zr(){return ea()}function c0(){return ea()}function ea(){return new An(t=>t.toString(),(t,e)=>t.isEqual(e))}var tj=new Ce(B.comparator),nj=new Le(B.comparator);function re(...t){let e=nj;for(let n of t)e=e.add(n);return e}var rj=new Le(Q);function ij(){return rj}function Jy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ra(e)?"-0":e}}function u0(t){return{integerValue:""+t}}function oj(t,e){return x2(e)?u0(e):Jy(t,e)}var po=class{constructor(){this._=void 0}};function sj(t,e,n){return t instanceof go?function(i,o){let s={fields:{[zC]:{stringValue:qC},[WC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Gy(o)&&(o=ed(o)),o&&(s.fields[GC]=o),{mapValue:s}}(n,e):t instanceof Yr?d0(t,e):t instanceof Zr?h0(t,e):function(i,o){let s=l0(i,o),c=eC(s)+eC(i.Re);return mm(s)&&mm(i.Re)?u0(c):Jy(i.serializer,c)}(t,e)}function aj(t,e,n){return t instanceof Yr?d0(t,e):t instanceof Zr?h0(t,e):n}function l0(t,e){return t instanceof mo?function(r){return mm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var go=class extends po{},Yr=class extends po{constructor(e){super(),this.elements=e}};function d0(t,e){let n=f0(e);for(let r of t.elements)n.some(i=>tn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Zr=class extends po{constructor(e){super(),this.elements=e}};function h0(t,e){let n=f0(e);for(let r of t.elements)n=n.filter(i=>!tn(i,r));return{arrayValue:{values:n}}}var mo=class extends po{constructor(e,n){super(),this.serializer=e,this.Re=n}};function eC(t){return _e(t.integerValue||t.doubleValue)}function f0(t){return Qy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function cj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Yr&&i instanceof Yr||r instanceof Zr&&i instanceof Zr?so(r.elements,i.elements,tn):r instanceof mo&&i instanceof mo?tn(r.Re,i.Re):r instanceof go&&i instanceof go}(t.transform,e.transform)}var Sm=class{constructor(e,n){this.version=e,this.transformResults=n}},Wr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function vl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var yo=class{};function p0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sl(t.key,Wr.none()):new Jr(t.key,t.data,Wr.none());{let n=t.data,r=Pt.empty(),i=new Le(mt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Nn(t.key,r,new Yt(i.toArray()),Wr.none())}}function uj(t,e,n){t instanceof Jr?function(i,o,s){let c=i.value.clone(),u=nC(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Nn?function(i,o,s){if(!vl(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=nC(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(g0(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ta(t,e,n,r){return t instanceof Jr?function(o,s,c,u){if(!vl(o.precondition,s))return c;let l=o.value.clone(),f=rC(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Nn?function(o,s,c,u){if(!vl(o.precondition,s))return c;let l=rC(o.fieldTransforms,u,s),f=s.data;return f.setAll(g0(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,c){return vl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(t,e,n)}function lj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=l0(r.transform,i||null);o!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,o))}return n||null}function tC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&so(r,i,(o,s)=>cj(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Jr=class extends yo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Nn=class extends yo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function g0(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function nC(t,e,n){let r=new Map;de(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,aj(s,c,n[i]))}return r}function rC(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,sj(o,s,e))}return r}var Sl=class extends yo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Nm=class extends yo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Rm=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&uj(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=c0();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=p0(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&so(this.mutations,e.mutations,(n,r)=>tC(n,r))&&so(this.baseMutations,e.baseMutations,(n,r)=>tC(n,r))}},Mm=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return tj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Pm=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xm=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Se,se;function dj(t){switch(t){case P.OK:return j(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return j(15467,{code:t})}}function m0(t){if(t===void 0)return Tn("GRPC error has no .code"),P.UNKNOWN;switch(t){case Se.OK:return P.OK;case Se.CANCELLED:return P.CANCELLED;case Se.UNKNOWN:return P.UNKNOWN;case Se.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Se.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Se.INTERNAL:return P.INTERNAL;case Se.UNAVAILABLE:return P.UNAVAILABLE;case Se.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Se.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Se.NOT_FOUND:return P.NOT_FOUND;case Se.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Se.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Se.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Se.ABORTED:return P.ABORTED;case Se.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Se.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Se.DATA_LOSS:return P.DATA_LOSS;default:return j(39323,{code:t})}}(se=Se||(Se={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var iC=null;var hj=new wn([4294967295,4294967295],0);function oC(t){let e=SC().encode(t),n=new Qg;return n.update(e),new Uint8Array(n.digest())}function sC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wn([n,r],0),new wn([i,o],0)]}var km=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gr(`Invalid padding: ${n}`);if(r<0)throw new Gr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gr(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=wn.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(wn.fromNumber(r)));return i.compare(hj)===1&&(i=new wn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let n=oC(e),[r,i]=sC(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.pe===0)return;let n=oC(e),[r,i]=sC(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Gr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Nl=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(K.min(),i,new Ce(Q),Sn(),re())}},sa=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,re(),re(),re())}};var ro=class{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}},Rl=class{constructor(e,n){this.targetId=e,this.Ce=n}},Ml=class{constructor(e,n,r=Ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Pl=class{constructor(){this.Fe=0,this.Me=aC(),this.xe=Ke.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=re(),n=re(),r=re();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:j(38017,{changeType:o})}}),new sa(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=aC()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,de(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},Om=class{constructor(e){this.ze=e,this.je=new Map,this.He=Sn(),this.Je=pl(),this.Ye=pl(),this.Ze=new Ce(Q)}Xe(e){for(let n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(let n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{let r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:j(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){let n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){let o=i.target;if(Cm(o))if(r===0){let s=new B(o.path);this.tt(n,s,kt.newNoDocument(s,K.min()))}else de(r===1,20013,{expectedCount:r});else{let s=this.ut(n);if(s!==r){let c=this.ct(e),u=c?this.lt(c,e,s):1;if(u!==0){this.st(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}iC?.ht(function(f,p,y,m,C){var N,R,k,F,$,ue;let Pe={localCacheCount:f,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},he=p.unchangedNames;return he&&(Pe.bloomFilter={applied:C===0,hashCount:(N=he?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(F=(k=(R=he?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&F!==void 0?F:0,padding:(ue=($=he?.bits)===null||$===void 0?void 0:$.padding)!==null&&ue!==void 0?ue:0,mightContain:D=>{var v;return(v=m?.mightContain(D))!==null&&v!==void 0&&v}}),Pe}(s,e.Ce,this.ze.Pt(),c,u))}}}}ct(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=Cn(r).toUint8Array()}catch(u){if(u instanceof Tl)return oo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new km(s,i,o)}catch(u){return oo(u instanceof Gr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){let r=this.ze.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.ze.Pt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),i++)}),i}It(e){let n=new Map;this.je.forEach((o,s)=>{let c=this._t(s);if(c){if(o.current&&Cm(c.target)){let u=new B(c.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,kt.newNoDocument(u,e))}o.Le&&(n.set(s,o.qe()),o.Qe())}});let r=re();this.Ye.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Nl(e,n,this.Ze,this.He,r);return this.He=Sn(),this.Je=pl(),this.Ye=pl(),this.Ze=new Ce(Q),i}et(e,n){if(!this.it(e))return;let r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){let n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Pl,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Le(Q),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Le(Q),this.Je=this.Je.insert(e,n)),n}it(e){let n=this._t(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}_t(e){let n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Pl),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}};function pl(){return new Ce(B.comparator)}function aC(){return new Ce(B.comparator)}var fj={asc:"ASCENDING",desc:"DESCENDING"},pj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gj={and:"AND",or:"OR"},Fm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Vm(t,e){return t.useProto3Json||Xl(e)?e:{value:e}}function xl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mj(t,e){return xl(t,e.toTimestamp())}function en(t){return de(!!t,49232),K.fromTimestamp(function(n){let r=bn(n);return new Ue(r.seconds,r.nanos)}(t))}function Xy(t,e){return Lm(t,e).canonicalString()}function Lm(t,e){let n=function(i){return new be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function v0(t){let e=be.fromString(t);return de(D0(e),10190,{key:e.toString()}),e}function jm(t,e){return Xy(t.databaseId,e.path)}function tm(t,e){let n=v0(e);if(n.get(1)!==t.databaseId.projectId)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(I0(n))}function _0(t,e){return Xy(t.databaseId,e)}function yj(t){let e=v0(t);return e.length===4?be.emptyPath():I0(e)}function Bm(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I0(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cC(t,e,n){return{name:jm(t,e),fields:n.value.mapValue.fields}}function vj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:j(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(de(f===void 0||typeof f=="string",58123),Ke.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ke.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(l){let f=l.code===void 0?P.UNKNOWN:m0(l.code);return new V(f,l.message||"")}(s);n=new Ml(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=tm(t,r.document.name),o=en(r.document.updateTime),s=r.document.createTime?en(r.document.createTime):K.min(),c=new Pt({mapValue:{fields:r.document.fields}}),u=kt.newFoundDocument(i,o,s,c),l=r.targetIds||[],f=r.removedTargetIds||[];n=new ro(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=tm(t,r.document),o=r.readTime?en(r.readTime):K.min(),s=kt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new ro([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=tm(t,r.document),o=r.removedTargetIds||[];n=new ro([],o,i,null)}else{if(!("filter"in e))return j(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new xm(i,o),c=r.targetId;n=new Rl(c,s)}}return n}function _j(t,e){let n;if(e instanceof Jr)n={update:cC(t,e.key,e.value)};else if(e instanceof Sl)n={delete:jm(t,e.key)};else if(e instanceof Nn)n={update:cC(t,e.key,e.data),updateMask:Sj(e.fieldMask)};else{if(!(e instanceof Nm))return j(16599,{ft:e.type});n={verify:jm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof go)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Zr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof mo)return{fieldPath:s.field.canonicalString(),increment:c.Re};throw j(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:mj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:j(27497)}(t,e.precondition)),n}function Ij(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?en(i.updateTime):en(o);return s.isEqual(K.min())&&(s=en(o)),new Sm(s,i.transformResults||[])}(n,e))):[]}function Ej(t,e){return{documents:[_0(t,e.path)]}}function wj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_0(t,i);let o=function(l){if(l.length!==0)return w0(nn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(y){return{field:Xi(y.field),direction:bj(y.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Vm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:n,parent:i}}function Dj(t){let e=yj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){de(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(p){let y=E0(p);return y instanceof nn&&XC(y)?y.getFilters():[y]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(y=>function(C){return new ho(eo(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(p){let y;return y=typeof p=="object"?p.value:p,Xl(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,m=p.values||[];return new lo(m,y)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let y=!p.before,m=p.values||[];return new lo(m,y)}(n.endAt)),Q2(e,i,s,o,c,"F",u,l)}function Tj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function E0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=eo(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=eo(n.unaryFilter.field);return Me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=eo(n.unaryFilter.field);return Me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=eo(n.unaryFilter.field);return Me.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return j(61313);default:return j(60726)}}(t):t.fieldFilter!==void 0?function(n){return Me.create(eo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return j(58110);default:return j(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nn.create(n.compositeFilter.filters.map(r=>E0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return j(1026)}}(n.compositeFilter.op))}(t):j(30097,{filter:t})}function bj(t){return fj[t]}function Cj(t){return pj[t]}function Aj(t){return gj[t]}function Xi(t){return{fieldPath:t.canonicalString()}}function eo(t){return mt.fromServerFormat(t.fieldPath)}function w0(t){return t instanceof Me?function(n){if(n.op==="=="){if(Qb(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NAN"}};if(Kb(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qb(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NOT_NAN"}};if(Kb(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(n.field),op:Cj(n.op),value:n.value}}}(t):t instanceof nn?function(n){let r=n.getFilters().map(i=>w0(i));return r.length===1?r[0]:{compositeFilter:{op:Aj(n.op),filters:r}}}(t):j(54877,{filter:t})}function Sj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function D0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var aa=class t{constructor(e,n,r,i,o=K.min(),s=K.min(),c=Ke.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Um=class{constructor(e){this.wt=e}};function Nj(t){let e=Dj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Am(e,e.limit,"L"):e}var kl=class{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(_e(e.integerValue));else if("doubleValue"in e){let r=_e(e.doubleValue);isNaN(r)?this.Mt(n,13):(this.Mt(n,15),ra(r)?n.xt(0):n.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(n,20),typeof r=="string"&&(r=bn(r)),n.Ot(`${r.seconds||""}`),n.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(Cn(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(n,45),n.xt(r.latitude||0),n.xt(r.longitude||0)}else"mapValue"in e?YC(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):QC(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):j(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){let r=e.fields||{};this.Mt(n,55);for(let i of Object.keys(r))this.Nt(i,n),this.Ct(r[i],n)}qt(e,n){var r,i;let o=e.fields||{};this.Mt(n,53);let s=ao,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(n,15),n.xt(_e(c)),this.Nt(s,n),this.Ct(o[s],n)}$t(e,n){let r=e.values||[];this.Mt(n,50);for(let i of r)this.Ct(i,n)}kt(e,n){this.Mt(n,37),B.fromName(e).path.forEach(r=>{this.Mt(n,60),this.Kt(r,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}};kl.Wt=new kl;var $m=class{constructor(){this.yn=new Hm}addToCollectionParentIndex(e,n){return this.yn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Qr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},Hm=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Le(be.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(be.comparator)).toArray()}};var gW=new Uint8Array(0);var uC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T0=41943040,Et=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Et.DEFAULT_COLLECTION_PERCENTILE=10,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Et.DEFAULT=new Et(T0,Et.DEFAULT_COLLECTION_PERCENTILE,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Et.DISABLED=new Et(-1,0,0);var ca=class t{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new t(0)}static ir(){return new t(-1)}};var lC="LruGarbageCollector",Rj=1048576;function dC([t,e],[n,r]){let i=Q(t,n);return i===0?Q(e,r):i}var qm=class{constructor(e){this.cr=e,this.buffer=new Le(dC),this.lr=0}hr(){return++this.lr}Pr(e){let n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();dC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},zm=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){O(lC,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Tr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){wo(n)?O(lC,"Ignoring IndexedDB error during garbage collection: ",n):yield Eo(n)}yield this.Ir(3e5)}))}},Gm=class{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(qy.le);let r=new qm(n);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(uC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uC):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,i,o,s,c,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Zi()<=ee.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Mj(t,e){return new Gm(t,e)}var Wm=class{constructor(){this.changes=new An(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Km=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Qm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ta(r.mutation,i,Yt.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){let i=zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Zs();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=Sn(),s=ea(),c=function(){return ea()}();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Nn)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),ta(f.mutation,l,f.mutation.getFieldMask(),Ue.now())):s.set(l.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>{var p;return c.set(l,new Km(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=ea(),i=new Ce((s,c)=>s-c),o=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||Yt.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||re()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=c0();f.forEach(y=>{if(!o.has(y)){let m=p0(n.get(y),r.get(y));m!==null&&p.set(y,m),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return B.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Y2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(zr()),c=na,u=o;return s.next(l=>M.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,re())).next(f=>({batchId:c,changes:a0(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=Zs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Zs();return this.indexManager.getCollectionParents(e,o).next(c=>M.forEach(c,u=>{let l=function(p,y){return new fo(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,kt.newInvalidDocument(f)))});let c=Zs();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&ta(f.mutation,l,Yt.empty(),Ue.now()),nd(n,l)&&(c=c.insert(u,l))}),c})}};var Ym=class{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return M.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:en(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(i){return{name:i.name,query:Nj(i.bundledQuery),readTime:en(i.readTime)}}(n)),M.resolve()}};var Zm=class{constructor(){this.overlays=new Ce(B.comparator),this.Or=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=zr();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Or.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=zr(),o=n.length+1,s=new B(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ce((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=zr(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=zr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return M.resolve(c)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Pm(n,r));let o=this.Or.get(n);o===void 0&&(o=re(),this.Or.set(n,o)),this.Or.set(n,o.add(r.key))}};var Jm=class{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var ua=class{constructor(){this.Nr=new Le(Ne.Br),this.Lr=new Le(Ne.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){let r=new Ne(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new Ne(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){let n=new B(new be([])),r=new Ne(n,e),i=new Ne(n,e+1),o=[];return this.Lr.forEachInRange([r,i],s=>{this.Qr(s),o.push(s.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){let n=new B(new be([])),r=new Ne(n,e),i=new Ne(n,e+1),o=re();return this.Lr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ne(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ne=class{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return B.comparator(e.key,n.key)||Q(e.Gr,n.Gr)}static kr(e,n){return Q(e.Gr,n.Gr)||B.comparator(e.key,n.key)}};var Xm=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new Le(Ne.Br)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Rm(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.zr=this.zr.add(new Ne(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Hr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?zy:this.Jn-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ne(n,0),i=new Ne(n,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([r,i],s=>{let c=this.jr(s.Gr);o.push(c)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(Q);return n.forEach(i=>{let o=new Ne(i,0),s=new Ne(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,s],c=>{r=r.add(c.Gr)})}),M.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new Ne(new B(o),0),c=new Le(Q);return this.zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Gr)),!0)},s),M.resolve(this.Jr(c))}Jr(e){let n=[];return e.forEach(r=>{let i=this.jr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return M.forEach(n.mutations,i=>{let o=new Ne(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){let r=new Ne(n,0),i=this.zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){let n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ey=class{constructor(e){this.Zr=e,this.docs=function(){return new Ce(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=Sn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():kt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Sn(),s=n.path,c=new B(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||R2(N2(f),r)<=0||(i.has(f.key)||nd(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){j(9500)}Xr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ty(this)}getSize(e){return M.resolve(this.size)}},ty=class extends Wm{constructor(e){super(),this.vr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}};var ny=class{constructor(e){this.persistence=e,this.ei=new An(n=>Yy(n),Zy),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.ti=0,this.ni=new ua,this.targetCount=0,this.ri=ca.rr()}forEachTarget(e,n){return this.ei.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),M.resolve()}ar(e){this.ei.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ri=new ca(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.ar(n),M.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ei.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ei.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.ei.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.ni.Wr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.ni.containsKey(n))}};var Ol=class{constructor(e,n){this.ii={},this.overlays={},this.si=new qy(0),this.oi=!1,this.oi=!0,this._i=new Jm,this.referenceDelegate=e(this),this.ai=new ny(this),this.indexManager=new $m,this.remoteDocumentCache=function(i){return new ey(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new Um(n),this.ci=new Ym(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Zm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new Xm(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new ry(this.si.next());return this.referenceDelegate.li(),r(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,n){return M.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}},ry=class extends fm{constructor(e){super(),this.currentSequenceNumber=e}},iy=class t{constructor(e){this.persistence=e,this.Ti=new ua,this.Ii=null}static Ei(e){return new t(e)}get di(){if(this.Ii)return this.Ii;throw j(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.di,r=>{let i=B.fromPath(r);return this.Ai(e,i).next(o=>{o||n.removeEntry(i,K.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return M.or([()=>M.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}},Fl=class t{constructor(e,n){this.persistence=e,this.Ri=new An(r=>k2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Mj(this,n)}static Ei(e,n){return new t(e,n)}li(){}hi(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){let n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return M.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(o=>o?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,s=>this.gr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,K.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),M.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ml(e.data.value)),n}gr(e,n,r){return M.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.Ri.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var oy=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=i}static Ps(e,n){let r=re(),i=re();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var sy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ay=class{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return hT()?8:P2(Oe())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Rs(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Vs(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new sy;return this.fs(e,n,s).next(c=>{if(o.result=c,this.Is)return this.gs(e,n,s,c.size)})}).next(()=>o.result)}gs(e,n,r,i){return r.documentReadCount<this.Es?(Zi()<=ee.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Ji(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),M.resolve()):(Zi()<=ee.DEBUG&&O("QueryEngine","Query:",Ji(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Zi()<=ee.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Ji(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xt(n))):M.resolve())}Rs(e,n){if(Xb(n))return M.resolve(null);let r=Xt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Am(n,null,"F"),r=Xt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=re(...o);return this.As.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ps(n,c);return this.ys(n,l,s,u.readTime)?this.Rs(e,Am(n,null,"F")):this.ws(e,l,n,u)}))})))}Vs(e,n,r,i){return Xb(n)||i.isEqual(K.min())?M.resolve(null):this.As.getDocuments(e,r).next(o=>{let s=this.ps(n,o);return this.ys(n,s,r,i)?M.resolve(null):(Zi()<=ee.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ji(n)),this.ws(e,s,n,S2(i,na)).next(c=>c))})}ps(e,n){let r=new Le(o0(e));return n.forEach((i,o)=>{nd(e,o)&&(r=r.add(o))}),r}ys(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,n,r){return Zi()<=ee.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Ji(n)),this.As.getDocumentsMatchingQuery(e,n,Qr.min(),r)}ws(e,n,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ev="LocalStore",Pj=3e8,cy=class{constructor(e,n,r,i){this.persistence=e,this.bs=n,this.serializer=i,this.Ss=new Ce(Q),this.Ds=new An(o=>Yy(o),Zy),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qm(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}};function xj(t,e,n,r){return new cy(t,e,n,r)}function b0(t,e){return _(this,null,function*(){let n=q(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=re();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ms:l,removedBatchIds:s,addedBatchIds:c}))})})})}function kj(t,e){let n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Cs.newChangeBuffer({trackRemovals:!0});return function(c,u,l,f){let p=l.batch,y=p.keys(),m=M.resolve();return y.forEach(C=>{m=m.next(()=>f.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);de(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),f.addEntry(N)))})}),m.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=re();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function C0(t){let e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function Oj(t,e){let n=q(t),r=e.snapshotVersion,i=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Cs.newChangeBuffer({trackRemovals:!0});i=n.Ss;let c=[];e.targetChanges.forEach((f,p)=>{let y=i.get(p);if(!y)return;c.push(n.ai.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.ai.addMatchingKeys(o,f.addedDocuments,p)));let m=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(Ke.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):f.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(f.resumeToken,r)),i=i.insert(p,m),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Pj?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(y,m,f)&&c.push(n.ai.updateTargetData(o,m))});let u=Sn(),l=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(Fj(o,s,e.documentUpdates).next(f=>{u=f.xs,l=f.Os})),!r.isEqual(K.min())){let f=n.ai.getLastRemoteSnapshotVersion(o).next(p=>n.ai.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ss=i,o))}function Fj(t,e,n){let r=re(),i=re();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Sn();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(K.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):O(ev,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{xs:s,Os:i}})}function Vj(t,e){let n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Lj(t,e){let n=q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.ai.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.ai.allocateTargetId(r).next(s=>(i=new aa(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}function uy(t,e,n){return _(this,null,function*(){let r=q(t),i=r.Ss.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!wo(s))throw s;O(ev,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)})}function hC(t,e,n){let r=q(t),i=K.min(),o=re();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){let p=q(u),y=p.Ds.get(f);return y!==void 0?M.resolve(p.Ss.get(y)):p.ai.getTargetData(l,f)}(r,s,Xt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.bs.getDocumentsMatchingQuery(s,e,n?i:K.min(),n?o:re())).next(c=>(jj(r,J2(e),c),{documents:c,Ns:o})))}function jj(t,e,n){let r=t.vs.get(e)||K.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.vs.set(e,r)}var Vl=class{constructor(){this.activeTargetIds=ij()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ly=class{constructor(){this.So=new Vl,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Vl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var dy=class{vo(e){}shutdown(){}};var fC="ConnectivityMonitor",Ll=class{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){O(fC,"Network connectivity changed: AVAILABLE");for(let e of this.Oo)e(0)}xo(){O(fC,"Network connectivity changed: UNAVAILABLE");for(let e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gl=null;function hy(){return gl===null?gl=function(){return 268435456+Math.round(2147483648*Math.random())}():gl++,"0x"+gl.toString(16)}var nm="RestConnection",Bj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},fy=class{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===bl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,n,r,i,o){let s=hy(),c=this.$o(e,n.toUriEncodedString());O(nm,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(u,i,o);let{host:l}=new URL(c),f=Fr(l);return this.Ko(e,c,u,r,f).then(p=>(O(nm,`Received RPC '${e}' ${s}: `,p),p),p=>{throw oo(nm,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Wo(e,n,r,i,o,s){return this.Qo(e,n,r,i,o)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Io}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}$o(e,n){let r=Bj[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}};var py=class{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}};var We="WebChannelConnection",gy=class extends fy{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,i,o){let s=hy();return new Promise((c,u)=>{let l=new Yg;l.setWithCredentials(!0),l.listenOnce(Zg.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ys.NO_ERROR:let p=l.getResponseJson();O(We,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case Ys.TIMEOUT:O(We,`RPC '${e}' ${s} timed out`),u(new V(P.DEADLINE_EXCEEDED,"Request time out"));break;case Ys.HTTP_ERROR:let y=l.getStatus();if(O(We,`RPC '${e}' ${s} failed with status:`,y,"response text:",l.getResponseText()),y>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let C=m?.error;if(C&&C.status&&C.message){let N=function(k){let F=k.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(F)>=0?F:P.UNKNOWN}(C.status);u(new V(N,C.message))}else u(new V(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new V(P.UNAVAILABLE,"Connection failed."));break;default:j(9055,{s_:e,streamId:s,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{O(We,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);O(We,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}a_(e,n,r){let i=hy(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=em(),c=Xg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");O(We,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u),y=!1,m=!1,C=new py({Go:R=>{m?O(We,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(O(We,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),O(We,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},zo:()=>p.close()}),N=(R,k,F)=>{R.listen(k,$=>{try{F($)}catch(ue){setTimeout(()=>{throw ue},0)}})};return N(p,Yi.EventType.OPEN,()=>{m||(O(We,`RPC '${e}' stream ${i} transport opened.`),C.t_())}),N(p,Yi.EventType.CLOSE,()=>{m||(m=!0,O(We,`RPC '${e}' stream ${i} transport closed`),C.r_())}),N(p,Yi.EventType.ERROR,R=>{m||(m=!0,oo(We,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.r_(new V(P.UNAVAILABLE,"The operation could not be completed")))}),N(p,Yi.EventType.MESSAGE,R=>{var k;if(!m){let F=R.data[0];de(!!F,16349);let $=F,ue=$?.error||((k=$[0])===null||k===void 0?void 0:k.error);if(ue){O(We,`RPC '${e}' stream ${i} received error:`,ue);let Pe=ue.status,he=function(E){let w=Se[E];if(w!==void 0)return m0(w)}(Pe),D=ue.message;he===void 0&&(he=P.INTERNAL,D="Unknown error status: "+Pe+" with message "+ue.message),m=!0,C.r_(new V(he,D)),p.close()}else O(We,`RPC '${e}' stream ${i} received:`,F),C.i_(F)}}),N(c,Jg.STAT_EVENT,R=>{R.stat===hl.PROXY?O(We,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===hl.NOPROXY&&O(We,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.n_()},0),C}};function rm(){return typeof document<"u"?document:null}function rd(t){return new Fm(t,!0)}var jl=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();let n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}};var pC="PersistentStream",Bl=class{constructor(e,n,r,i,o,s,c,u){this.bi=e,this.R_=r,this.V_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new jl(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}stop(){return _(this,null,function*(){this.w_()&&(yield this.close(0))})}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){return _(this,null,function*(){if(this.b_())return this.close(0)})}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,n){return _(this,null,function*(){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Zo(n)})}O_(){}auth(){this.state=1;let e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===n&&this.B_(r,i)},r=>{e(()=>{let i=new V(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,n){let r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(()=>_(this,null,function*(){this.state=0,this.start()}))}L_(e){return O(pC,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(O(pC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},my=class extends Bl{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();let n=vj(this.serializer,e),r=function(o){if(!("targetChange"in o))return K.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?K.min():s.readTime?en(s.readTime):K.min()}(e);return this.listener.Q_(n,r)}U_(e){let n={};n.database=Bm(this.serializer),n.addTarget=function(o,s){let c,u=s.target;if(c=Cm(u)?{documents:Ej(o,u)}:{query:wj(o,u).gt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=y0(o,s.resumeToken);let l=Vm(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(K.min())>0){c.readTime=xl(o,s.snapshotVersion.toTimestamp());let l=Vm(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=Tj(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){let n={};n.database=Bm(this.serializer),n.removeTarget=e,this.F_(n)}},yy=class extends Bl{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();let n=Ij(e.writeResults,e.commitTime),r=en(e.commitTime);return this.listener.j_(r,n)}H_(){let e={};e.database=Bm(this.serializer),this.F_(e)}G_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>_j(this.serializer,r))};this.F_(n)}};var vy=class{},_y=class extends vy{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Qo(e,Lm(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(P.UNKNOWN,o.toString())})}Wo(e,n,r,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Wo(e,Lm(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(P.UNKNOWN,s.toString())})}terminate(){this.J_=!0,this.connection.terminate()}},Iy=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Tn(n),this.ea=!1):O("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}};var Xr="RemoteStore",Ey=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){ti(this)&&(O(Xr,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=q(u);l.aa.add(4),yield ga(l),l.la.set("Unknown"),l.aa.delete(4),yield id(l)})}(this))}))}),this.la=new Iy(r,i)}};function id(t){return _(this,null,function*(){if(ti(t))for(let e of t.ua)yield e(!0)})}function ga(t){return _(this,null,function*(){for(let e of t.ua)yield e(!1)})}function A0(t,e){let n=q(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),iv(n)?rv(n):Do(n).b_()&&nv(n,e))}function tv(t,e){let n=q(t),r=Do(n);n._a.delete(e),r.b_()&&S0(n,e),n._a.size===0&&(r.b_()?r.v_():ti(n)&&n.la.set("Unknown"))}function nv(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Do(t).U_(e)}function S0(t,e){t.ha.Ke(e),Do(t).K_(e)}function rv(t){t.ha=new Om({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Do(t).start(),t.la.ta()}function iv(t){return ti(t)&&!Do(t).w_()&&t._a.size>0}function ti(t){return q(t).aa.size===0}function N0(t){t.ha=void 0}function Uj(t){return _(this,null,function*(){t.la.set("Online")})}function $j(t){return _(this,null,function*(){t._a.forEach((e,n)=>{nv(t,e)})})}function Hj(t,e){return _(this,null,function*(){N0(t),iv(t)?(t.la.ia(e),rv(t)):t.la.set("Unknown")})}function qj(t,e,n){return _(this,null,function*(){if(t.la.set("Online"),e instanceof Ml&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i._a.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i._a.delete(c),i.ha.removeTarget(c))})}(t,e)}catch(r){O(Xr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ul(t,r)}else if(e instanceof ro?t.ha.Xe(e):e instanceof Rl?t.ha.ot(e):t.ha.nt(e),!n.isEqual(K.min()))try{let r=yield C0(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let c=o.ha.It(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o._a.get(l);f&&o._a.set(l,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let f=o._a.get(u);if(!f)return;o._a.set(u,f.withResumeToken(Ke.EMPTY_BYTE_STRING,f.snapshotVersion)),S0(o,u);let p=new aa(f.target,u,l,f.sequenceNumber);nv(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){O(Xr,"Failed to raise snapshot:",r),yield Ul(t,r)}})}function Ul(t,e,n){return _(this,null,function*(){if(!wo(e))throw e;t.aa.add(1),yield ga(t),t.la.set("Offline"),n||(n=()=>C0(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){O(Xr,"Retrying IndexedDB access"),yield n(),t.aa.delete(1),yield id(t)}))})}function R0(t,e){return e().catch(n=>Ul(t,n,e))}function od(t){return _(this,null,function*(){let e=q(t),n=nr(e),r=e.oa.length>0?e.oa[e.oa.length-1].batchId:zy;for(;zj(e);)try{let i=yield Vj(e.localStore,r);if(i===null){e.oa.length===0&&n.v_();break}r=i.batchId,Gj(e,i)}catch(i){yield Ul(e,i)}M0(e)&&P0(e)})}function zj(t){return ti(t)&&t.oa.length<10}function Gj(t,e){t.oa.push(e);let n=nr(t);n.b_()&&n.W_&&n.G_(e.mutations)}function M0(t){return ti(t)&&!nr(t).w_()&&t.oa.length>0}function P0(t){nr(t).start()}function Wj(t){return _(this,null,function*(){nr(t).H_()})}function Kj(t){return _(this,null,function*(){let e=nr(t);for(let n of t.oa)e.G_(n.mutations)})}function Qj(t,e,n){return _(this,null,function*(){let r=t.oa.shift(),i=Mm.from(r,e,n);yield R0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield od(t)})}function Yj(t,e){return _(this,null,function*(){e&&nr(t).W_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return dj(s)&&s!==P.ABORTED}(i.code)){let o=r.oa.shift();nr(r).D_(),yield R0(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield od(r)}})}(t,e)),M0(t)&&P0(t)})}function gC(t,e){return _(this,null,function*(){let n=q(t);n.asyncQueue.verifyOperationInProgress(),O(Xr,"RemoteStore received new credentials");let r=ti(n);n.aa.add(3),yield ga(n),r&&n.la.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),yield id(n)})}function Zj(t,e){return _(this,null,function*(){let n=q(t);e?(n.aa.delete(2),yield id(n)):e||(n.aa.add(2),yield ga(n),n.la.set("Unknown"))})}function Do(t){return t.Pa||(t.Pa=function(n,r,i){let o=q(n);return o.Y_(),new my(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{jo:Uj.bind(null,t),Jo:$j.bind(null,t),Zo:Hj.bind(null,t),Q_:qj.bind(null,t)}),t.ua.push(e=>_(null,null,function*(){e?(t.Pa.D_(),iv(t)?rv(t):t.la.set("Unknown")):(yield t.Pa.stop(),N0(t))}))),t.Pa}function nr(t){return t.Ta||(t.Ta=function(n,r,i){let o=q(n);return o.Y_(),new yy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:Wj.bind(null,t),Zo:Yj.bind(null,t),z_:Kj.bind(null,t),j_:Qj.bind(null,t)}),t.ua.push(e=>_(null,null,function*(){e?(t.Ta.D_(),yield od(t)):(yield t.Ta.stop(),t.oa.length>0&&(O(Xr,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))}))),t.Ta}var wy=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ov(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),wo(t))return new V(P.UNAVAILABLE,`${e}: ${t}`);throw t}var $l=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=Zs(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Hl=class{constructor(){this.Ia=new Ce(B.comparator)}track(e){let n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):j(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){let e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}},vo=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,$l.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Dy=class{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}},Ty=class{constructor(){this.queries=mC(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){let i=q(n),o=i.queries;i.queries=mC(),o.forEach((s,c)=>{for(let u of c.Ra)u.onError(r)})})(this,new V(P.ABORTED,"Firestore shutting down"))}};function mC(){return new An(t=>i0(t),td)}function Jj(t,e){return _(this,null,function*(){let n=q(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Va()&&e.ma()&&(r=2):(o=new Dy,r=e.ma()?0:1);try{switch(r){case 0:o.Aa=yield n.onListen(i,!0);break;case 1:o.Aa=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let c=ov(s,`Initialization of query '${Ji(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.Ra.push(e),e.ga(n.onlineState),o.Aa&&e.pa(o.Aa)&&sv(n)})}function Xj(t,e){return _(this,null,function*(){let n=q(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Ra.indexOf(e);s>=0&&(o.Ra.splice(s,1),o.Ra.length===0?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function eB(t,e){let n=q(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.Ra)c.pa(i)&&(r=!0);s.Aa=i}}r&&sv(n)}function tB(t,e,n){let r=q(t),i=r.queries.get(e);if(i)for(let o of i.Ra)o.onError(n);r.queries.delete(e)}function sv(t){t.fa.forEach(e=>{e.next()})}var by,yC;(yC=by||(by={})).ya="default",yC.Cache="cache";var Cy=class{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new vo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;let r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;let n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==by.Cache}};var ql=class{constructor(e){this.key=e}},zl=class{constructor(e){this.key=e}},Ay=class{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=re(),this.mutatedKeys=re(),this.Ua=o0(e),this.Ka=new $l(this.Ua)}get Wa(){return this.qa}Ga(e,n){let r=n?n.za:new Hl,i=n?n.Ka:this.Ka,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let y=i.get(f),m=nd(this.query,p)?p:null,C=!!y&&this.mutatedKeys.has(y.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),R=!1;y&&m?y.data.isEqual(m.data)?C!==N&&(r.track({type:3,doc:m}),R=!0):this.ja(y,m)||(r.track({type:2,doc:m}),R=!0,(u&&this.Ua(m,u)>0||l&&this.Ua(m,l)<0)&&(c=!0)):!y&&m?(r.track({type:0,doc:m}),R=!0):y&&!m&&(r.track({type:1,doc:y}),R=!0,(u||l)&&(c=!0)),R&&(m?(s=s.add(m),o=N?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ka:s,za:r,ys:c,mutatedKeys:o}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;let s=e.za.da();s.sort((f,p)=>function(m,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j(20277,{Vt:R})}};return N(m)-N(C)}(f.type,p.type)||this.Ua(f.doc,p.doc)),this.Ha(r),i=i!=null&&i;let c=n&&!i?this.Ja():[],u=this.$a.size===0&&this.current&&!i?1:0,l=u!==this.Qa;return this.Qa=u,s.length!==0||l?{snapshot:new vo(this.query,e.Ka,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:c}:{Ya:c}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Hl,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];let e=this.$a;this.$a=re(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});let n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new zl(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new ql(r))}),n}Xa(e){this.qa=e.Ns,this.$a=re();let n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return vo.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}},av="SyncEngine",Sy=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Ny=class{constructor(e){this.key=e,this.tu=!1}},Ry=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new An(c=>i0(c),td),this.iu=new Map,this.su=new Set,this.ou=new Ce(B.comparator),this._u=new Map,this.au=new ua,this.uu={},this.cu=new Map,this.lu=ca.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}};function nB(t,e,n=!0){return _(this,null,function*(){let r=L0(t),i,o=r.ru.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=yield x0(r,e,n,!0),i})}function rB(t,e){return _(this,null,function*(){let n=L0(t);yield x0(n,e,!0,!1)})}function x0(t,e,n,r){return _(this,null,function*(){let i=yield Lj(t.localStore,Xt(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=yield iB(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&A0(t.remoteStore,i),c})}function iB(t,e,n,r,i){return _(this,null,function*(){t.Pu=(p,y,m)=>function(N,R,k,F){return _(this,null,function*(){let $=R.view.Ga(k);$.ys&&($=yield hC(N.localStore,R.query,!1).then(({documents:D})=>R.view.Ga(D,$)));let ue=F&&F.targetChanges.get(R.targetId),Pe=F&&F.targetMismatches.get(R.targetId)!=null,he=R.view.applyChanges($,N.isPrimaryClient,ue,Pe);return _C(N,R.targetId,he.Ya),he.snapshot})}(t,p,y,m);let o=yield hC(t.localStore,e,!0),s=new Ay(e,o.Ns),c=s.Ga(o.documents),u=sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);_C(t,n,l.Ya);let f=new Sy(e,n,s);return t.ru.set(e,f),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),l.snapshot})}function oB(t,e,n){return _(this,null,function*(){let r=q(t),i=r.ru.get(e),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter(s=>!td(s,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield uy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tv(r.remoteStore,i.targetId),My(r,i.targetId)}).catch(Eo))):(My(r,i.targetId),yield uy(r.localStore,i.targetId,!0))})}function sB(t,e){return _(this,null,function*(){let n=q(t),r=n.ru.get(e),i=n.iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tv(n.remoteStore,r.targetId))})}function aB(t,e,n){return _(this,null,function*(){let r=pB(t);try{let i=yield function(s,c){let u=q(s),l=Ue.now(),f=c.reduce((m,C)=>m.add(C.key),re()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let C=Sn(),N=re();return u.Cs.getEntries(m,f).next(R=>{C=R,C.forEach((k,F)=>{F.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,C)).next(R=>{p=R;let k=[];for(let F of c){let $=lj(F,p.get(F.key).overlayedDocument);$!=null&&k.push(new Nn(F.key,$,ZC($.value.mapValue),Wr.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,k,c)}).next(R=>{y=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(m,R.batchId,k)})}).then(()=>({batchId:y.batchId,changes:a0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let l=s.uu[s.currentUser.toKey()];l||(l=new Ce(Q)),l=l.insert(c,u),s.uu[s.currentUser.toKey()]=l}(r,i.batchId,n),yield ma(r,i.changes),yield od(r.remoteStore)}catch(i){let o=ov(i,"Failed to persist write");n.reject(o)}})}function k0(t,e){return _(this,null,function*(){let n=q(t);try{let r=yield Oj(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n._u.get(o);s&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.tu=!0:i.modifiedDocuments.size>0?de(s.tu,14607):i.removedDocuments.size>0&&(de(s.tu,42227),s.tu=!1))}),yield ma(n,r,e)}catch(r){yield Eo(r)}})}function vC(t,e,n){let r=q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ru.forEach((o,s)=>{let c=s.view.ga(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=q(s);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let y of p.Ra)y.ga(c)&&(l=!0)}),l&&sv(u)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cB(t,e,n){return _(this,null,function*(){let r=q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r._u.get(e),o=i&&i.key;if(o){let s=new Ce(B.comparator);s=s.insert(o,kt.newNoDocument(o,K.min()));let c=re().add(o),u=new Nl(K.min(),new Map,new Ce(Q),s,c);yield k0(r,u),r.ou=r.ou.remove(o),r._u.delete(e),cv(r)}else yield uy(r.localStore,e,!1).then(()=>My(r,e,n)).catch(Eo)})}function uB(t,e){return _(this,null,function*(){let n=q(t),r=e.batch.batchId;try{let i=yield kj(n.localStore,e);F0(n,r,null),O0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ma(n,i)}catch(i){yield Eo(i)}})}function lB(t,e,n){return _(this,null,function*(){let r=q(t);try{let i=yield function(s,c){let u=q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(de(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);F0(r,e,n),O0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ma(r,i)}catch(i){yield Eo(i)}})}function O0(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function F0(t,e,n){let r=q(t),i=r.uu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function My(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||V0(t,r)})}function V0(t,e){t.su.delete(e.path.canonicalString());let n=t.ou.get(e);n!==null&&(tv(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),cv(t))}function _C(t,e,n){for(let r of n)r instanceof ql?(t.au.addReference(r.key,e),dB(t,r)):r instanceof zl?(O(av,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||V0(t,r.key)):j(19791,{Iu:r})}function dB(t,e){let n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(O(av,"New document in limbo: "+n),t.su.add(r),cv(t))}function cv(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){let e=t.su.values().next().value;t.su.delete(e);let n=new B(be.fromString(e)),r=t.lu.next();t._u.set(r,new Ny(n)),t.ou=t.ou.insert(n,r),A0(t.remoteStore,new aa(Xt(r0(n.path)),r,"TargetPurposeLimboResolution",qy.le))}}function ma(t,e,n){return _(this,null,function*(){let r=q(t),i=[],o=[],s=[];r.ru.isEmpty()||(r.ru.forEach((c,u)=>{s.push(r.Pu(u,e,n).then(l=>{var f;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=n?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=oy.Ps(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.nu.Q_(i),yield function(u,l){return _(this,null,function*(){let f=q(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,y=>M.forEach(y.ls,m=>f.persistence.referenceDelegate.addReference(p,y.targetId,m)).next(()=>M.forEach(y.hs,m=>f.persistence.referenceDelegate.removeReference(p,y.targetId,m)))))}catch(p){if(!wo(p))throw p;O(ev,"Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let m=f.Ss.get(y),C=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(C);f.Ss=f.Ss.insert(y,N)}}})}(r.localStore,o))})}function hB(t,e){return _(this,null,function*(){let n=q(t);if(!n.currentUser.isEqual(e)){O(av,"User change. New user:",e.toKey());let r=yield b0(n.localStore,e);n.currentUser=e,function(o,s){o.cu.forEach(c=>{c.forEach(u=>{u.reject(new V(P.CANCELLED,s))})}),o.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ma(n,r.Ms)}})}function fB(t,e){let n=q(t),r=n._u.get(e);if(r&&r.tu)return re().add(r.key);{let i=re(),o=n.iu.get(e);if(!o)return i;for(let s of o){let c=n.ru.get(s);i=i.unionWith(c.view.Wa)}return i}}function L0(t){let e=q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=k0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cB.bind(null,e),e.nu.Q_=eB.bind(null,e.eventManager),e.nu.Tu=tB.bind(null,e.eventManager),e}function pB(t){let e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lB.bind(null,e),e}var j0=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=rd(n.databaseInfo.databaseId),this.sharedClientState=this.Au(n),this.persistence=this.Ru(n),yield this.persistence.start(),this.localStore=this.Vu(n),this.gcScheduler=this.mu(n,this.localStore),this.indexBackfillerScheduler=this.fu(n,this.localStore)})}mu(n,r){return null}fu(n,r){return null}Vu(n){return xj(this.persistence,new ay,n.initialUser,this.serializer)}Ru(n){return new Ol(iy.Ei,this.serializer)}Au(n){return new ly}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),Py=class extends j0{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){de(this.persistence.referenceDelegate instanceof Fl,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new zm(r,e.asyncQueue,n)}Ru(e){let n=this.cacheSizeBytes!==void 0?Et.withCacheSize(this.cacheSizeBytes):Et.DEFAULT;return new Ol(r=>Fl.Ei(r,n),this.serializer)}};var gB=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hB.bind(null,this.syncEngine),yield Zj(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Ty}()}createDatastore(n){let r=rd(n.databaseInfo.databaseId),i=function(s){return new gy(s)}(n.databaseInfo);return function(s,c,u,l){return new _y(s,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,c,u){return new Ey(i,o,s,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>vC(this.syncEngine,r,0),function(){return Ll.C()?new Ll:new dy}())}createSyncEngine(n,r){return function(o,s,c,u,l,f,p){let y=new Ry(o,s,c,u,l,f);return p&&(y.hu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(o){return _(this,null,function*(){let s=q(o);O(Xr,"RemoteStore shutting down."),s.aa.add(5),yield ga(s),s.ca.shutdown(),s.la.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var xy=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var rr="FirestoreClient",ky=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ve.UNAUTHENTICATED,this.clientId=El.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){O(rr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O(rr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ov(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function im(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O(rr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield b0(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function IC(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield mB(t);O(rr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>gC(e.remoteStore,i)),t._onlineComponents=e})}function mB(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O(rr,"Using user provided OfflineComponentProvider");try{yield im(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),yield im(t,new j0)}}else O(rr,"Using default OfflineComponentProvider"),yield im(t,new Py(void 0));return t._offlineComponents})}function B0(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O(rr,"Using user provided OnlineComponentProvider"),yield IC(t,t._uninitializedComponentsProvider._online)):(O(rr,"Using default OnlineComponentProvider"),yield IC(t,new gB))),t._onlineComponents})}function yB(t){return B0(t).then(e=>e.syncEngine)}function vB(t){return _(this,null,function*(){let e=yield B0(t),n=e.eventManager;return n.onListen=nB.bind(null,e.syncEngine),n.onUnlisten=oB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sB.bind(null,e.syncEngine),n})}function _B(t,e,n={}){let r=new Zt;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,c,u,l){let f=new xy({next:y=>{f.yu(),s.enqueueAndForget(()=>Xj(o,p)),y.fromCache&&u.source==="server"?l.reject(new V(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Cy(c,f,{includeMetadataChanges:!0,Fa:!0});return Jj(o,p)}(yield vB(t),t.asyncQueue,e,n,r)})),r.promise}function U0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var EC=new Map;function $0(t,e,n){if(!n)throw new V(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IB(t,e,n,r){if(e===!0&&r===!0)throw new V(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wC(t){if(!B.isDocumentKey(t))throw new V(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DC(t){if(B.isDocumentKey(t))throw new V(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":j(12329,{type:typeof t})}function Gl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=uv(t);throw new V(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var H0="firestore.googleapis.com",TC=!0,Wl=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=H0,this.ssl=TC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:TC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Rj)throw new V(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_o=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new om;switch(r.type){case"firstParty":return new um(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Ui("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=EC.get(n);r&&(O("ComponentProvider","Removing Datastore"),EC.delete(n),r.terminate())}(this),Promise.resolve()}};function q0(t,e,n,r={}){var i;t=Gl(t,_o);let o=Fr(e),s=t._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s.host!==H0&&s.host!==u&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!zt(l,c)&&(t._setSettings(l),o&&(Bu(`https://${u}`),Ui("Firestore",!0)),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Ve.MOCK_USER;else{f=sT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new V(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ve(y)}t._authCredentials=new sm(new _l(f,p))}}var Kl=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},xt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},er=class t extends Kl{constructor(e,n,r){super(e,n,r0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function z0(t,e,...n){if(t=Fe(t),$0("collection","path",e),t instanceof _o){let r=be.fromString(e,...n);return DC(r),new er(t,null,r)}{if(!(t instanceof xt||t instanceof er))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(be.fromString(e,...n));return DC(r),new er(t.firestore,null,r)}}function G0(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=El.newId()),$0("doc","path",e),t instanceof _o){let r=be.fromString(e,...n);return wC(r),new xt(t,null,new B(r))}{if(!(t instanceof xt||t instanceof er))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(be.fromString(e,...n));return wC(r),new xt(t.firestore,t instanceof er?t.converter:null,new B(r))}}var bC="AsyncQueue",Ql=class{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new jl(this,"async_queue_retry"),this.ju=()=>{let r=rm();r&&O(bC,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;let n=rm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;let n=rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});let n=new Zt;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){return _(this,null,function*(){if(this.Qu.length!==0){try{yield this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!wo(e))throw e;O(bC,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}})}Yu(e){let n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Tn("INTERNAL UNHANDLED ERROR: ",CC(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);let i=wy.createAndSchedule(this,e,n,r,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&j(47125,{ec:CC(this.Ku)})}verifyOperationInProgress(){}tc(){return _(this,null,function*(){let e;do e=this.Hu,yield e;while(e!==this.Hu)})}nc(e){for(let n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){let n=this.Uu.indexOf(e);this.Uu.splice(n,1)}};function CC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var la=class extends _o{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ql,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ql(e),this._firestoreClient=void 0,yield e}})}};function W0(t,e){let n=typeof t=="object"?t:Lr(),r=typeof t=="string"?t:e||bl,i=qi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=oT("firestore");o&&q0(i,...o)}return i}function K0(t){if(t._terminated)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||EB(t),t._firestoreClient}function EB(t){var e,n,r;let i=t._freezeSettings(),o=function(c,u,l,f){return new pm(c,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,U0(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ky(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(t._componentsProvider))}var da=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ke.fromBase64String(e))}catch(n){throw new V(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ha=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Yl=class{constructor(e){this._methodName=e}};var fa=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}};var pa=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var wB=/^__.*__$/,Oy=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Nn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jr(e,this.data,n,this.fieldTransforms)}};function Q0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{oc:t})}}var Fy=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this._c(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Zl(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Q0(this.oc)&&wB.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}},Vy=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||rd(e)}dc(e,n,r,i=!1){return new Fy({oc:e,methodName:n,Ec:r,path:mt.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function DB(t){let e=t._freezeSettings(),n=rd(t._databaseId);return new Vy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TB(t,e,n,r,i,o={}){let s=t.dc(o.merge||o.mergeFields?2:0,e,n,i);X0("Data must be an object, but it was:",s,r);let c=Z0(r,s),u,l;if(o.merge)u=new Yt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let y=bB(e,p,n);if(!s.contains(y))throw new V(P.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);AB(f,y)||f.push(y)}u=new Yt(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Oy(new Pt(c),u,l)}function Y0(t,e){if(J0(t=Fe(t)))return X0("Unsupported field value:",e,t),Z0(t,e);if(t instanceof Yl)return function(r,i){if(!Q0(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=Y0(c,i.Pc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ue.fromDate(r);return{timestampValue:xl(i.serializer,o)}}if(r instanceof Ue){let o=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xl(i.serializer,o)}}if(r instanceof fa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof da)return{bytesValue:y0(i.serializer,r._byteString)};if(r instanceof xt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Tc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Xy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pa)return function(s,c){return{mapValue:{fields:{[Wy]:{stringValue:Ky},[ao]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Tc("VectorValues must only contain numeric values.");return Jy(c.serializer,l)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${uv(r)}`)}(t,e)}function Z0(t,e){let n={};return HC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(t,(r,i)=>{let o=Y0(i,e.uc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function J0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof fa||t instanceof da||t instanceof xt||t instanceof Yl||t instanceof pa)}function X0(t,e,n){if(!J0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=uv(n);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function bB(t,e,n){if((e=Fe(e))instanceof ha)return e._internalPath;if(typeof e=="string")return eA(t,e);throw Zl("Field path arguments must be of type string or ",t,!1,void 0,n)}var CB=new RegExp("[~\\*/\\[\\]]");function eA(t,e,n){if(e.search(CB)>=0)throw Zl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ha(...e.split("."))._internalPath}catch{throw Zl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zl(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new V(P.INVALID_ARGUMENT,c+t+u)}function AB(t,e){return t.some(n=>n.isEqual(e))}var Jl=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ly(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(tA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Ly=class extends Jl{data(){return super.data()}};function tA(t,e){return typeof e=="string"?eA(t,e):e instanceof ha?e._internalPath:e._delegate._internalPath}function SB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jy=class{convertValue(e,n="none"){switch(tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw j(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ei(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[ao].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>_e(s.doubleValue));return new pa(o)}convertGeoPoint(e){return new fa(_e(e.latitude),_e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=ed(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){let n=bn(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=be.fromString(e);de(D0(r),9688,{name:e});let i=new Cl(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(n)||Tn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function NB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var no=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},By=class extends Jl{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new io(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(tA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},io=class extends By{data(e={}){return super.data(e)}},Uy=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new no(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new io(this._firestore,this._userDataWriter,r.key,r,new no(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new io(i._firestore,i._userDataWriter,c.doc.key,c.doc,new no(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new io(i._firestore,i._userDataWriter,c.doc.key,c.doc,new no(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:RB(c.type),doc:u,oldIndex:l,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function RB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j(61501,{type:t})}}var $y=class extends jy{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}};function nA(t){t=Gl(t,Kl);let e=Gl(t.firestore,la),n=K0(e),r=new $y(e);return SB(t._query),_B(n,t._query).then(i=>new Uy(e,r,t,i))}function rA(t,e){let n=Gl(t.firestore,la),r=G0(t),i=NB(t.converter,e);return MB(n,[TB(DB(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Wr.exists(!1))]).then(()=>r)}function MB(t,e){return function(r,i){let o=new Zt;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return aB(yield yB(r),i,o)})),o.promise}(K0(t),e)}(function(e,n=!0){(function(i){Io=i})(Gn),Rt(new et("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new la(new am(r.getProvider("auth-internal")),new lm(s,r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Te(Lb,jb,e),Te(Lb,jb,"esm2017")})();var ya=class{constructor(e){return e}},iA="firestore",lv=class{constructor(){return Gi(iA)}};var dv=new H("angularfire2.firestore-instances");function PB(t,e){let n=Vs(iA,t,e);return n&&new ya(n)}function xB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ya(r)}}var kB={provide:lv,deps:[[new pt,dv]]},OB={provide:ya,useFactory:PB,deps:[[new pt,dv],yn]};function C7(t,...e){return Te("angularfire",Wn.full,"fst"),$n([OB,kB,{provide:dv,useFactory:xB(t),multi:!0,deps:[Ee,Ge,Kn,Br,[new pt,Qs],[new pt,Wi],...e]}])}var A7=tt(rA,!0,2);var S7=tt(z0,!0,2);var N7=tt(nA,!0);var R7=tt(W0,!0);export{me as a,ve as b,_ as c,Ae as d,rS as e,ne as f,rh as g,ih as h,ht as i,Qo as j,Jo as k,Ot as l,fS as m,pS as n,gS as o,hr as p,un as q,DS as r,fr as s,ch as t,lc as u,bS as v,uh as w,pr as x,q_ as y,CS as z,AS as A,Xo as B,lh as C,NS as D,RS as E,dh as F,MS as G,PS as H,xS as I,kS as J,OS as K,FS as L,VS as M,LS as N,G as O,le as P,hs as Q,w6 as R,H as S,J as T,Be as U,L as V,$n as W,dN as X,tE as Y,Vt as Z,Ai as _,eu as $,D6 as aa,T6 as ba,gs as ca,BE as da,Ge as ea,sI as fa,ou as ga,ms as ha,ft as ia,Ee as ja,Ar as ka,b6 as la,Hn as ma,C6 as na,TR as oa,CR as pa,Wf as qa,A6 as ra,cu as sa,uu as ta,xR as ua,as as va,ys as wa,ow as xa,S6 as ya,N6 as za,R6 as Aa,M6 as Ba,P6 as Ca,sw as Da,x6 as Ea,Yf as Fa,k6 as Ga,O6 as Ha,Uc as Ia,Hc as Ja,Pr as Ka,oe as La,$6 as Ma,yu as Na,XP as Oa,ex as Pa,G6 as Qa,Is as Ra,ke as Sa,vx as Ta,W6 as Ua,Es as Va,K6 as Wa,Dx as Xa,us as Ya,dp as Za,jx as _a,vu as $a,Q6 as ab,cD as bb,uD as cb,Zx as db,ek as eb,tk as fb,Y6 as gb,ki as hb,Z6 as ib,J6 as jb,X6 as kb,ez as lb,gk as mb,dD as nb,yk as ob,tz as pb,vk as qb,nz as rb,rz as sb,iz as tb,oz as ub,sz as vb,Iu as wb,az as xb,Eu as yb,cz as zb,ws as Ab,kr as Bb,$k as Cb,gp as Db,Hk as Eb,Fi as Fb,ID as Gb,ED as Hb,Wk as Ib,AD as Jb,n1 as Kb,i1 as Lb,a1 as Mb,c1 as Nb,SD as Ob,u1 as Pb,l1 as Qb,_p as Rb,Q9 as Sb,C8 as Tb,A8 as Ub,Ks as Vb,z5 as Wb,G5 as Xb,W5 as Yb,K5 as Zb,Q5 as _b,Y5 as $b,Z5 as ac,BD as bc,yG as cc,vG as dc,j1 as ec,$1 as fc,IG as gc,XD as hc,EG as ic,wG as jc,Q1 as kc,DG as lc,ya as mc,C7 as nc,A7 as oc,S7 as pc,N7 as qc,R7 as rc};
