import{d as w}from"./chunk-I7EU4MVH.js";import{$d as c,Ab as a,Bb as S,Cb as o,Gd as R,Lb as u,Nb as s,Ob as F,Pa as i,Ta as b,Za as D,_ as I,a as f,b as E,bb as y,d as C,hc as B,ib as g,ic as M,jc as O,lb as n,lc as P,mb as t,mc as T,sb as _,ue as m,vc as k,zb as A,zc as H}from"./chunk-5S7P737U.js";function G(p,l){p&1&&(n(0,"div",8),a(1,"\u793E\u4F1A\u4FDD\u967A\u5BFE\u8C61\u5916"),t())}function J(p,l){if(p&1&&(n(0,"div")(1,"div"),a(2),u(3,"date"),t(),n(4,"div"),a(5),t(),n(6,"div"),a(7),t()()),p&2){let e=_().$implicit;i(2),o("\u6539\u5B9A\u6708: ",e.standard.lastRevisionMonth?s(3,3,e.standard.lastRevisionMonth,"yyyy-MM"):"---",""),i(3),o("\u6539\u5B9A\u7A2E\u5225: ",e.standard.revisionType||"---",""),i(2),S(e.standard.memo||"")}}function K(p,l){p&1&&(n(0,"div",9),a(1,"\u5BFE\u5FDC\u3059\u308B\u6A19\u6E96\u5831\u916C\u60C5\u5831\u304C\u3042\u308A\u307E\u305B\u3093"),t())}function L(p,l){if(p&1&&(n(0,"div",4),y(1,G,2,0,"div",5),n(2,"div",6)(3,"div"),a(4),u(5,"number"),t(),n(6,"div"),a(7),u(8,"number"),t(),n(9,"div"),a(10),u(11,"number"),t(),n(12,"div"),a(13),u(14,"number"),t(),n(15,"div"),a(16),u(17,"number"),t(),n(18,"div"),a(19),u(20,"number"),t(),n(21,"div"),a(22),u(23,"number"),t(),n(24,"div"),a(25),u(26,"number"),t(),n(27,"div"),a(28),u(29,"number"),t(),n(30,"div"),a(31),u(32,"number"),t(),n(33,"div"),a(34),u(35,"number"),t(),n(36,"div"),a(37),u(38,"number"),t()(),y(39,J,8,6,"div",7)(40,K,2,0,"ng-template",null,0,F),t()),p&2){let e=l.$implicit,d=A(41);i(),g("ngIf",e.insurance.isInsuranceTarget===!1||e.insurance.isInsuranceTarget==="false"||e.insurance.isInsuranceTarget===0),i(3),o("\u5065\u5EB7\u4FDD\u967A\u5168\u984D: ",e.insurance.healthInsuranceTotal!=null?s(5,15,e.insurance.healthInsuranceTotal,"1.0-0"):"---","\u5186"),i(3),o("\u5065\u5EB7\u4FDD\u967A\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.insurance.healthInsuranceCompany!=null?s(8,18,e.insurance.healthInsuranceCompany,"1.0-0"):"---","\u5186"),i(3),o("\u5065\u5EB7\u4FDD\u967A\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.insurance.healthInsuranceEmployee!=null?s(11,21,e.insurance.healthInsuranceEmployee,"1.0-0"):"---","\u5186"),i(3),o("\u4ECB\u8B77\u4FDD\u967A\u5168\u984D: ",e.insurance.careInsuranceTotal!=null?s(14,24,e.insurance.careInsuranceTotal,"1.0-0"):"---","\u5186"),i(3),o("\u4ECB\u8B77\u4FDD\u967A\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.insurance.careInsuranceCompany!=null?s(17,27,e.insurance.careInsuranceCompany,"1.0-0"):"---","\u5186"),i(3),o("\u4ECB\u8B77\u4FDD\u967A\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.insurance.careInsuranceEmployee!=null?s(20,30,e.insurance.careInsuranceEmployee,"1.0-0"):"---","\u5186"),i(3),o("\u539A\u751F\u5E74\u91D1\u5168\u984D: ",e.insurance.pensionInsuranceTotal!=null?s(23,33,e.insurance.pensionInsuranceTotal,"1.0-0"):"---","\u5186"),i(3),o("\u539A\u751F\u5E74\u91D1\u4F1A\u793E\u8CA0\u62C5\u984D: ",e.insurance.pensionInsuranceCompany!=null?s(26,36,e.insurance.pensionInsuranceCompany,"1.0-0"):"---","\u5186"),i(3),o("\u539A\u751F\u5E74\u91D1\u5F93\u696D\u54E1\u8CA0\u62C5\u984D: ",e.insurance.pensionInsuranceEmployee!=null?s(29,39,e.insurance.pensionInsuranceEmployee,"1.0-0"):"---","\u5186"),i(3),o("\u5408\u8A08: ",e.insurance.total!=null?s(32,42,e.insurance.total,"1.0-0"):"---","\u5186"),i(3),o("\u5408\u8A08\u4F1A\u793E: ",e.insurance.totalCompany!=null?s(35,45,e.insurance.totalCompany,"1.0-0"):"---","\u5186"),i(3),o("\u5408\u8A08\u5F93\u696D\u54E1: ",e.insurance.totalEmployee!=null?s(38,48,e.insurance.totalEmployee,"1.0-0"):"---","\u5186"),i(2),g("ngIf",e.standard)("ngIfElse",d)}}var z=class p{constructor(l){this.route=l;this.employeeId=this.route.snapshot.paramMap.get("id")}employeeId=null;currentUser=null;employee=null;insurances=[];standards=[];insuranceStandardPairs=[];auth=I(k);firestore=I(R);ngOnInit(){return C(this,null,function*(){if(H(this.auth,d=>C(this,null,function*(){this.currentUser=d})),!this.employeeId)return;let l=c(this.firestore,"companies"),e=yield m(l);for(let d of e.docs){let N=c(this.firestore,"companies",d.id,"employees"),h=(yield m(N)).docs.find(x=>x.id===this.employeeId);if(h){this.employee=h.data(),this.employee.companyId=d.id;let x=c(this.firestore,"companies",d.id,"employees",this.employeeId,"insurances"),U=yield m(x);this.insurances=U.docs.map(r=>f({id:r.id},r.data())).map(r=>E(f({},r),{_millis:r.createdAt?.toDate?r.createdAt.toDate().getTime():r.createdAt?new Date(r.createdAt).getTime():0})).sort((r,v)=>v._millis-r._millis);let j=c(this.firestore,"companies",d.id,"employees",this.employeeId,"standards"),$=yield m(j);this.standards=$.docs.map(r=>f({id:r.id},r.data())),this.insuranceStandardPairs=this.insurances.map(r=>{let v=this.standards.find(q=>q.id===r.standardId)||null;return{insurance:r,standard:v}});break}}})}static \u0275fac=function(e){return new(e||p)(b(w))};static \u0275cmp=D({type:p,selectors:[["app-insurance-history"]],decls:5,vars:1,consts:[["noStandard",""],[1,"history-header"],[1,"history-header-title"],["class","pair-block","style","border:1px solid #aaa; margin-bottom: 24px; padding: 12px;",4,"ngFor","ngForOf"],[1,"pair-block",2,"border","1px solid #aaa","margin-bottom","24px","padding","12px"],["class","sotai",4,"ngIf"],[1,"insurance-grid"],[4,"ngIf","ngIfElse"],[1,"sotai"],[2,"color","#d32f2f"]],template:function(e,d){e&1&&(n(0,"div",1)(1,"span",2),a(2,"\u793E\u4F1A\u4FDD\u967A\u6599\u5C65\u6B74"),t()(),n(3,"div"),y(4,L,42,51,"div",3),t()),e&2&&(i(4),g("ngForOf",d.insuranceStandardPairs))},dependencies:[T,B,M,P,O],styles:["body[_ngcontent-%COMP%], .history-header[_ngcontent-%COMP%], .history-header-title[_ngcontent-%COMP%], .pair-block[_ngcontent-%COMP%], .insurance-grid[_ngcontent-%COMP%], .insurance-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .sotai[_ngcontent-%COMP%]{font-size:.92em}.history-header[_ngcontent-%COMP%]{width:100%;padding-top:3.5rem;margin-bottom:18px;display:flex;align-items:flex-end;justify-content:flex-start;text-align:left}.history-header-title[_ngcontent-%COMP%]{font-size:1.25em;font-weight:700;color:#333;letter-spacing:.04em;margin-left:.2em}.pair-block[_ngcontent-%COMP%]{border:1px solid #aaa;margin-bottom:24px;padding:16px 20px;border-radius:8px;background:#fafbfc;box-shadow:0 2px 8px #00000008;font-size:.92em}.insurance-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:8px 16px;margin-top:8px;margin-bottom:8px}.insurance-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:#fff;border-radius:4px;padding:6px 8px;border:1px solid #e0e0e0;font-size:.92em;min-width:0;word-break:break-all}.sotai[_ngcontent-%COMP%]{color:#d32f2f;font-weight:700;font-size:1em;margin-bottom:8px}.pair-block[_ngcontent-%COMP%]   .no-standard[_ngcontent-%COMP%]{color:#d32f2f;margin-top:8px}"]})};export{z as InsuranceHistoryComponent};
