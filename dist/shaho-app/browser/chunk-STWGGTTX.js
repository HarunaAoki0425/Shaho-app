import{c as A,f as Y,j as N,k as T,l as j,p as z}from"./chunk-FSLVCKVZ.js";import{a as H}from"./chunk-FUHT4GF3.js";import{f as I}from"./chunk-NJLM6MAR.js";import{Ae as W,Cb as p,Cc as D,Db as M,Dc as K,Eb as h,Hb as P,Ib as w,Jb as R,Lb as E,Md as B,Pa as a,Za as b,_ as u,bb as g,d as s,da as f,fe as $,ib as c,ja as C,jc as v,kb as _,kc as F,mb as i,nb as r,ob as x,oc as S,pb as y,qb as O,tb as k,ub as l}from"./chunk-6AHFQYIP.js";var V=()=>[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];function G(n,t){if(n&1&&(i(0,"option",11),p(1),r()),n&2){let e=t.$implicit;c("value",e),a(),h("",e,"\u5E74\u5EA6")}}function J(n,t){if(n&1&&(i(0,"td"),p(1),r()),n&2){let e=l().$implicit,o=l().$implicit;a(),M(e[o].prefecture)}}function Q(n,t){if(n&1&&(i(0,"td"),p(1),r()),n&2){let e=l(),o=e.$implicit,d=e.index,m=l().$implicit,L=l();_("rate-col",d<2),a(),h("",L.getHealthInsuranceRate100x(o[m].health_insurance),"\uFF05")}}function U(n,t){n&1&&x(0,"td")}function X(n,t){if(n&1&&x(0,"td"),n&2){let e=l().index;_("rate-col",e<2)}}function Z(n,t){if(n&1&&(y(0),g(1,J,2,1,"td",12)(2,Q,2,3,"td",13)(3,U,1,0,"td",12)(4,X,1,2,"td",13),O()),n&2){let e=t.$implicit,o=l().$implicit;a(),c("ngIf",e[o]),a(),c("ngIf",e[o]),a(),c("ngIf",!e[o]),a(),c("ngIf",!e[o])}}function ee(n,t){if(n&1&&(i(0,"tr"),g(1,Z,5,4,"ng-container",10),r()),n&2){let e=l();a(),c("ngForOf",e.columns)}}var q=class n{firestore=u(B);injector=u(C);router=u(I);allRates=[];years=[];selectedYear=2025;prefectures=[];columns=[[],[],[]];PREF_ORDER=["\u5317\u6D77\u9053","\u9752\u68EE\u770C","\u5CA9\u624B\u770C","\u5BAE\u57CE\u770C","\u79CB\u7530\u770C","\u5C71\u5F62\u770C","\u798F\u5CF6\u770C","\u8328\u57CE\u770C","\u6803\u6728\u770C","\u7FA4\u99AC\u770C","\u57FC\u7389\u770C","\u5343\u8449\u770C","\u6771\u4EAC\u90FD","\u795E\u5948\u5DDD\u770C","\u65B0\u6F5F\u770C","\u5BCC\u5C71\u770C","\u77F3\u5DDD\u770C","\u798F\u4E95\u770C","\u5C71\u68A8\u770C","\u9577\u91CE\u770C","\u5C90\u961C\u770C","\u9759\u5CA1\u770C","\u611B\u77E5\u770C","\u4E09\u91CD\u770C","\u6ECB\u8CC0\u770C","\u4EAC\u90FD\u5E9C","\u5927\u962A\u5E9C","\u5175\u5EAB\u770C","\u5948\u826F\u770C","\u548C\u6B4C\u5C71\u770C","\u9CE5\u53D6\u770C","\u5CF6\u6839\u770C","\u5CA1\u5C71\u770C","\u5E83\u5CF6\u770C","\u5C71\u53E3\u770C","\u5FB3\u5CF6\u770C","\u9999\u5DDD\u770C","\u611B\u5A9B\u770C","\u9AD8\u77E5\u770C","\u798F\u5CA1\u770C","\u4F50\u8CC0\u770C","\u9577\u5D0E\u770C","\u718A\u672C\u770C","\u5927\u5206\u770C","\u5BAE\u5D0E\u770C","\u9E7F\u5150\u5CF6\u770C","\u6C96\u7E04\u770C"];getAllRates(){return s(this,null,function*(){let t=yield W($(this.firestore,"insurance_rates"));this.allRates=t.docs.map(o=>o.data());let e=new Set(this.allRates.map(o=>o.year));this.years=Array.from(e).sort((o,d)=>d-o)})}ngOnInit(){return s(this,null,function*(){let t=D();K(t,e=>{e||this.router.navigate(["/login"])}),yield f(this.injector,()=>s(this,null,function*(){yield this.getAllRates(),this.selectedYear=this.years[0],this.filterByYear()}))})}onYearChange(){return s(this,null,function*(){yield f(this.injector,()=>s(this,null,function*(){yield this.getAllRates(),this.filterByYear()}))})}filterByYear(){this.prefectures=this.allRates.filter(t=>Number(t.year)===Number(this.selectedYear)).filter(t=>this.PREF_ORDER.indexOf(t.prefecture)!==-1).sort((t,e)=>this.PREF_ORDER.indexOf(t.prefecture)-this.PREF_ORDER.indexOf(e.prefecture)),this.splitColumns()}splitColumns(){this.columns=[this.prefectures.slice(0,16),this.prefectures.slice(16,32),this.prefectures.slice(32,47)]}getHealthInsuranceRate100x(t){if(t==null||t==="")return"";try{return new H(t).times(100).toString()}catch{return""}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-kenpo-rates"]],decls:27,vars:4,consts:[[1,"kenpo-container"],[1,"kenpo-title"],[1,"kenpo-header-row"],[1,"kenpo-left-group"],[1,"kenpo-year-box"],[1,"kenpo-year-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"kenpo-add-btn"],[1,"kenpo-table"],[1,"rate-col"],[4,"ngFor","ngForOf"],[3,"value"],[4,"ngIf"],[3,"rate-col",4,"ngIf"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1),p(2,"\u5065\u5EB7\u4FDD\u967A\u6599\u7387\u4E00\u89A7"),r(),i(3,"div",2)(4,"div",3)(5,"div",4)(6,"select",5),R("ngModelChange",function(m){return w(o.selectedYear,m)||(o.selectedYear=m),m}),k("change",function(){return o.onYearChange()}),g(7,G,2,2,"option",6),r()()(),i(8,"button",7),p(9,"\u8FFD\u52A0"),r()(),i(10,"table",8)(11,"thead")(12,"tr")(13,"th"),p(14,"\u90FD\u9053\u5E9C\u770C"),r(),i(15,"th",9),p(16,"\u6599\u7387"),r(),i(17,"th"),p(18,"\u90FD\u9053\u5E9C\u770C"),r(),i(19,"th",9),p(20,"\u6599\u7387"),r(),i(21,"th"),p(22,"\u90FD\u9053\u5E9C\u770C"),r(),i(23,"th",9),p(24,"\u6599\u7387"),r()()(),i(25,"tbody"),g(26,ee,2,1,"tr",10),r()()()),e&2&&(a(6),P("ngModel",o.selectedYear),a(),c("ngForOf",o.years),a(19),c("ngForOf",E(3,V)))},dependencies:[S,v,F,z,T,j,N,A,Y],styles:[".kenpo-container[_ngcontent-%COMP%]{margin-top:72px;max-width:1300px;margin-left:auto;margin-right:auto;padding:0 16px;box-sizing:border-box}.kenpo-title[_ngcontent-%COMP%]{text-align:center;font-size:1.4rem;font-weight:700;color:#1976d2;margin:32px 0 18px;letter-spacing:.04em}.kenpo-table[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto 32px;border-collapse:collapse;background:#fff;box-shadow:0 2px 8px #1976d20f;border-radius:10px;overflow:hidden;font-size:1rem}.kenpo-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .kenpo-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;white-space:nowrap}.kenpo-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;font-weight:700;border-bottom:2px solid #90caf9}.kenpo-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background:#f5f7fa}.kenpo-table[_ngcontent-%COMP%]   th.rate-col[_ngcontent-%COMP%], .kenpo-table[_ngcontent-%COMP%]   td.rate-col[_ngcontent-%COMP%]{border-right:2px solid #90caf9}.kenpo-table[_ngcontent-%COMP%]   th.rate-col[_ngcontent-%COMP%]:last-child, .kenpo-table[_ngcontent-%COMP%]   td.rate-col[_ngcontent-%COMP%]:last-child{border-right:none}.kenpo-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}.kenpo-add-btn[_ngcontent-%COMP%]{background:#1976d2;color:#fff;border:none;border-radius:6px;padding:8px 24px;font-size:1rem;font-weight:600;cursor:pointer;box-shadow:0 2px 8px #1976d214;transition:background .2s,box-shadow .2s}.kenpo-add-btn[_ngcontent-%COMP%]:hover{background:#1565c0;box-shadow:0 4px 16px #1976d221}.kenpo-left-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.kenpo-year-box[_ngcontent-%COMP%]{background:#f5f7fa;border:1.5px solid #90caf9;border-radius:6px;padding:8px 20px;font-size:1.1rem;font-weight:600;color:#1976d2;letter-spacing:.04em;margin-right:4px}.kenpo-apply-btn[_ngcontent-%COMP%]{background:#43a047;color:#fff;border:none;border-radius:6px;padding:8px 20px;font-size:1rem;font-weight:600;cursor:pointer;box-shadow:0 2px 8px #43a04714;transition:background .2s,box-shadow .2s}.kenpo-apply-btn[_ngcontent-%COMP%]:hover{background:#388e3c;box-shadow:0 4px 16px #43a04721}.kenpo-year-select[_ngcontent-%COMP%]{border:none;background:transparent;font-size:1.1rem;font-weight:600;color:#1976d2;padding:4px 0;outline:none;cursor:pointer}"]})};export{q as KenpoRatesComponent};
