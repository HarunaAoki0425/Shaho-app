import{a as D}from"./chunk-FUHT4GF3.js";import{$d as N,Ab as F,Gd as T,Wd as I,Za as v,_ as E,d as b,he as S,lb as M,mb as Y,zd as j}from"./chunk-5S7P737U.js";var C=class p{firestore=E(T);static judgeSocialInsuranceRequired({employee:e,office:n,company:a}){if(n?.applicableOffice===!1)return console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: false (\u4E8B\u696D\u6240\u304C\u975E\u9069\u7528)"),!1;let s=this.judgeHealthInsurance(e),t=this.judgeCareInsurance(e),o=this.judgePensionInsurance(e);if(!s&&!t&&!o)return console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: false (\u5168\u4FDD\u967A\u5224\u5B9A\u304Cfalse)"),!1;let r=new D(e?.workDays||0),c=new D(e?.workHours||0),l=new D(n?.monthlyDays||0),u=new D(n?.weeklyHours||0),i=l.times(.75),h=u.times(.75);if(l.gt(0)&&u.gt(0)&&r.gte(i)&&c.gte(h))return console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: true (4\u5206\u306E3\u6761\u4EF6)"),!0;let y=Number(n?.employeeCount||0),d=Number(e?.workHours||0),g=Number(e?.baseSalary||0),m=e?.isStudent==="\u5B66\u751F\u3067\u306F\u306A\u3044",f=!1;if(e?.employmentPeriodType==="\u7121\u671F")f=!0;else if(e?.employmentPeriodType==="\u6709\u671F"&&e?.employmentPeriodStart&&e?.employmentPeriodEnd){let k=new Date(e.employmentPeriodStart);f=(new Date(e.employmentPeriodEnd).getTime()-k.getTime())/(1e3*60*60*24)>=59}let w=y>=51&&d>=20&&g>=88e3&&m&&f;return console.log("[DEBUG] \u8FFD\u52A0\u6761\u4EF6:",{officeEmployeeCount:y,workHours:d,baseSalary:g,isNotStudent:m,periodOk:f,allExtra:w}),w?(console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: true (\u8FFD\u52A0\u6761\u4EF6)"),!0):(console.log("[DEBUG] \u5224\u5B9A\u7D50\u679C: false"),!1)}static judgeEligibility(e){return{health:!0,pension:!0,care:!0}}static judgeHealthInsurance(e){if(!e?.birthdate)return!1;let n=new Date,a=n.getFullYear(),s=n.getMonth()+1,t=new Date(e.birthdate);if(isNaN(t.getTime()))return!1;let o=new Date(t.getFullYear()+75,t.getMonth(),t.getDate()),r=o.getFullYear(),c=o.getMonth()+1;return a<r||a===r&&s<=c}static judgeCareInsurance(e){if(!e?.birthdate)return!1;let n=new Date,a=n.getFullYear(),s=n.getMonth()+1,t=new Date(e.birthdate);if(isNaN(t.getTime()))return!1;let o=new Date(t.getFullYear()+40,t.getMonth(),t.getDate()),r=new Date(o);r.setDate(r.getDate()-1);let c=r.getFullYear(),l=r.getMonth()+1,u=new Date(t.getFullYear()+65,t.getMonth(),t.getDate()),i=new Date(u);i.setDate(i.getDate()-1);let h=i.getFullYear(),y=i.getMonth()+1,d=h,g=y-1;g===0&&(g=12,d-=1);let m=a>c||a===c&&s>=l,f=a<d||a===d&&s<=g;return m&&f}static judgePensionInsurance(e){if(!e?.birthdate)return!1;let n=new Date,a=n.getFullYear(),s=n.getMonth()+1,t=new Date(e.birthdate);if(isNaN(t.getTime()))return!1;let o=new Date(t.getFullYear()+70,t.getMonth(),t.getDate()),r=new Date(o);r.setDate(r.getDate()-1);let c=r.getFullYear(),l=r.getMonth()+1,u=c,i=l-1;i===0&&(i=12,u-=1);let h=a<u||a===u&&s<=i;return e.seniorVoluntaryEnrollment==="\u3059\u308B"?!0:h}static judgeInternationalSocialInsurance(e){return e.dispatchedAbroad==="\u8A72\u5F53\u3057\u306A\u3044"?!1:e.socialSecurityAgreement==="\u8A72\u5F53\u3057\u306A\u3044"||e.socialSecurityAgreement==="\u8A72\u5F53\u3059\u308B"&&(e.dispatchedAbroad==="\u65E5\u672C\u304B\u3089\u5916\u56FD\u3078\u306E\u6D3E\u9063\u52B4\u50CD\u8005"&&e.temporaryDispatch==="\u8A72\u5F53\u3059\u308B"||e.dispatchedAbroad==="\u5916\u56FD\u304B\u3089\u65E5\u672C\u3078\u306E\u6D3E\u9063\u52B4\u50CD\u8005"&&e.temporaryDispatch==="\u8A72\u5F53\u3057\u306A\u3044")}onJudgeAndNavigate(e,n,a,s){return b(this,null,function*(){if(!p.judgeSocialInsuranceRequired({employee:e,office:n,company:a})){let o=S(this.firestore,`companies/${a.id}/employees/${e.id}`),r=N(o,"insurances");yield I(r,{createdAt:j(),standardId:s,isInsuranceTarget:!1})}})}static \u0275fac=function(n){return new(n||p)};static \u0275cmp=v({type:p,selectors:[["app-judge"]],decls:2,vars:0,template:function(n,a){n&1&&(M(0,"p"),F(1,"judge works!"),Y())},encapsulation:2})};export{C as a};
